
	
	
	
	


	
		
	










	
		
	


		
	


		
				//Including BentoJS config from BentoJS/config/webplex.cmt.com/config.js
				
	
		
	
if (typeof Bento == 'undefined') var Bento = {};

Bento.Config={

		requiresCoppaCompliance: false,
		enableSecureMode: true,
		enableManualMode: false,
		legacySupportEnabled: false,

		pageReportingEnabled: true,
		pageAdsEnabled: false,

		omnitureEnabled: true,
		omnitureAccount: 'cmtvia',
		omnitureEnableVisitorNamespace: true,
		omnitureEnableFirstPartyCookie: true,
		omnitureConditionalAccounts: 'viawebplexdev=webplex.vmn.io',
		omnitureCustomNamespace: "",
		omnitureRDCenabled: false,
		omnitureTrackingServer: "sc.cmt.com",
		disableOmnitureIdSyncs: false,
		disableOmnitureThirdParties: false,
		resetOmnitureCookieBeforeVersion: '2.2.0',

		demdexEnabled: true,

		nielsenEnabled: false,
		nielsenCID: '',

		comScoreEnabled: true,
		comScoreC2: '3005086', 

		freewheelEnabled: false,
		freewheelSiteSectionOverride: false,
		freewheelDesktopProfileId: "",
		freewheelMobileProfileId: "",

		imaEnabled: false,
		enableMoatTracking: false,
		imaNetworkID: '271659723',
		imaCmsID: '1163',
		imaAdSize: '640x480',
		imaAdUnit: 'money_test',

		preloadAdSlotEnabled: true,
		preloadBitrateRange0To800: 4,
		preloadBitrateRange800To1000: 3,
		preloadBitrateRange1000To5000: 5,

		bandwidthEnabled: true,
		defaultBandwidth: 1300,

		useHTML5VideoAdsOnDesktop: true,
		useHTML5VideoAdsOnDesktopSafari: false,

		sourcePointEnabled: true,
		tveReportingEnabled: true,

		megabeaconEnabled: true,

		adNetworkId: 8675,
		adConditionalNetworkIds : {},
		adPixelSizes: ["1,2", "3,3", "1,1"],
		adDeviceTarget: '',
		adUnitDefault: '',
		adRefreshRate: -1,
		adPageTargeting: {},
		allowPOEAds: false,
		allowGeolocation: false,

		indexExchangeEnabled: true,
		indexExchangeLibraryURL: '//js-sec.indexww.com/ht/p/184606-274169693275451.js',
		amazonPageBiddingEnabled: false,
		amazonVideoBiddingEnabled: false,
		adExclusionCategories: '',

		pageHeaderBiddingEnabled: true, 
		atfPageHeaderBiddingConfiguration: '{}',
		btfPageHeaderBiddingConfiguration: '{}',
		
		headerBiddingLibraryURL: '//js-sec.indexww.com/ht/p/184606-49874755797137-stage.js',

		kruxEnabled: true,
		kruxId: 'udy1sn0rz'

};

			
	


		//Included bento.esi 
		

	Bento.Config = Bento.Config || {};

	if ( !Bento.Config.currentCountryCode ) {

		Bento.Config.currentCountryCode = "BD";

	}


	



		
				// Including Sourcepoint.js : 
				( function () {
	appendScript( "sourcepoint-lib", "//btg.mtvnservices.com/aria/SourcePoint/bento/sourcepoint-core.js", false, function () {
		console.log("[Aria] Sourcepoint - Completed library core request." );
	}); 

	// Utility for appending scripts to document.
	function appendScript ( scriptid, url, async, onload ) {
		var targetScriptLocation = document.getElementsByTagName( "script" )[ 0 ];
		var newScript = document.createElement( "script" );
		if ( !targetScriptLocation ) {
	
			targetScriptLocation = document.head;

		}
		newScript.async = false;
		newScript.id = scriptid;
		newScript.src = url;
		newScript.onload = onload || function () {};
		targetScriptLocation.parentNode.insertBefore( newScript, targetScriptLocation );
	}
})();
			
	



		
				// Including vendors.min.js : 
				window.addLegacyVideoReportingLibrary=function(){window.AppMeasurement_Module_Media=function AppMeasurement_Module_ActivityMap(f){function g(a,d){var b,c,n;if(a&&d&&(b=e.c[d]||(e.c[d]=d.split(","))))for(n=0;n<b.length&&(c=b[n++]);)if(-1<a.indexOf(c))return null;p=1;return a}function q(a,d,b,c,e){var g,h;if(a.dataset&&(h=a.dataset[d]))g=h;else if(a.getAttribute)if(h=a.getAttribute("data-"+b))g=h;else if(h=a.getAttribute(b))g=h;if(!g&&f.useForcedLinkTracking&&e&&(g="",d=a.onclick?""+a.onclick:"")){b=d.indexOf(c);var l,k;if(0<=b){for(b+=10;b<d.length&&0<="= 	\r\n".indexOf(d.charAt(b));)b++;if(b<d.length){h=b;for(l=k=0;h<d.length&&(";"!=d.charAt(h)||l);)l?d.charAt(h)!=l||k?k="\\"==d.charAt(h)?!k:0:l=0:(l=d.charAt(h),'"'!=l&&"'"!=l&&(l=0)),h++;if(d=d.substring(b,h))a.e=new Function("s","var e;try{s.w."+c+"="+d+"}catch(e){}"),a.e(f)}}}return g||e&&f.w[c]}function r(a,d,b){var c;return(c=e[d](a,b))&&(p?(p=0,c):g(k(c),e[d+"Exclusions"]))}function s(a,d,b){var c;if(a&&!(1===(c=a.nodeType)&&(c=a.nodeName)&&(c=c.toUpperCase())&&t[c])&&(1===a.nodeType&&(c=a.nodeValue)&&(d[d.length]=c),b.a||b.t||b.s||!a.getAttribute||((c=a.getAttribute("alt"))?b.a=c:(c=a.getAttribute("title"))?b.t=c:"IMG"==(""+a.nodeName).toUpperCase()&&(c=a.getAttribute("src")||a.src)&&(b.s=c)),(c=a.childNodes)&&c.length))for(a=0;a<c.length;a++)s(c[a],d,b)}function k(a){if(null==a||void 0==a)return a;try{return a.replace(RegExp("^[\\s\\n\\f\\r\\t	-\r   ᠎ - \u2028\u2029 　\ufeff]+","mg"),"").replace(RegExp("[\\s\\n\\f\\r\\t	-\r   ᠎ - \u2028\u2029 　\ufeff]+$","mg"),"").replace(RegExp("[\\s\\n\\f\\r\\t	-\r   ᠎ - \u2028\u2029 　\ufeff]{1,}","mg")," ").substring(0,254)}catch(d){}}var e=this;e.s=f;var m=window;m.s_c_in||(m.s_c_il=[],m.s_c_in=0);e._il=m.s_c_il;e._in=m.s_c_in;e._il[e._in]=e;m.s_c_in++;e._c="s_m";e.c={};var p=0,t={SCRIPT:1,STYLE:1,LINK:1,CANVAS:1};e._g=function(){var a,d,b,c=f.contextData,e=f.linkObject;(a=f.pageName||f.pageURL)&&(d=r(e,"link",f.linkName))&&(b=r(e,"region"))&&(c["a.activitymap.page"]=a.substring(0,255),c["a.activitymap.link"]=128<d.length?d.substring(0,128):d,c["a.activitymap.region"]=127<b.length?b.substring(0,127):b,c["a.activitymap.pageIDType"]=f.pageName?1:0)};e.link=function(a,d){var b;if(d)b=g(k(d),e.linkExclusions);else if((b=a)&&!(b=q(a,"sObjectId","s-object-id","s_objectID",1))){var c,f;(f=g(k(a.innerText||a.textContent),e.linkExclusions))||(s(a,c=[],b={a:void 0,t:void 0,s:void 0}),(f=g(k(c.join(""))))||(f=g(k(b.a?b.a:b.t?b.t:b.s?b.s:void 0)))||!(c=(c=a.tagName)&&c.toUpperCase?c.toUpperCase():"")||("INPUT"==c||"SUBMIT"==c&&a.value?f=g(k(a.value)):"IMAGE"==c&&a.src&&(f=g(k(a.src)))));b=f}return b};e.region=function(a){for(var d,b=e.regionIDAttribute||"id";a&&(a=a.parentNode);){if(d=q(a,b,b,b))return d;if("BODY"==a.nodeName)return"BODY"}}}};window.addAppMeasurementLibrary=function(){window.AppMeasurement_Module_AudienceManagement=function AppMeasurement_Module_AudienceManagement(d){var a=this;a.s=d;var b=window;b.s_c_in||(b.s_c_il=[],b.s_c_in=0);a._il=b.s_c_il;a._in=b.s_c_in;a._il[a._in]=a;b.s_c_in++;a._c="s_m";a.setup=function(c){b.DIL&&c&&(c.disableDefaultRequest=!0,c.disableScriptAttachment=!0,c.disableCORS=!0,c.secureDataCollection=!1,a.instance=b.DIL.create(c),a.tools=b.DIL.tools)};a.isReady=function(){return a.instance?!0:!1};a.getEventCallConfigParams=function(){return a.instance&&a.instance.api&&a.instance.api.getEventCallConfigParams?a.instance.api.getEventCallConfigParams():{}};a.passData=function(b){a.instance&&a.instance.api&&a.instance.api.passData&&a.instance.api.passData(b)}};"function"!==typeof window.DIL&&(window.DIL=function(a,c){var e=[],b,h;a!==Object(a)&&(a={});var g,k,q,m,r,n,x,E,t,A,L,B,C,F;g=a.partner;k=a.containerNSID;q=!!a.disableDestinationPublishingIframe;m=a.iframeAkamaiHTTPS;r=a.mappings;n=a.uuidCookie;x=!0===a.enableErrorReporting;E=a.visitorService;t=a.declaredId;A=!0===a.removeFinishedScriptsAndCallbacks;L=!0===a.delayAllUntilWindowLoad;B=!0===a.disableIDSyncs;C="undefined"===typeof a.secureDataCollection||!0===a.secureDataCollection;F=!0===a.useCORSOnly;var M,N,I,G,O,P,Q,R;M=!0===a.disableScriptAttachment;N=!0===a.disableDefaultRequest;I=a.afterResultForDefaultRequest;G=a.dpIframeSrc;O=!0===a.testCORS;P=!0===a.useJSONPOnly;Q=a.visitorConstructor;R=!0===a.disableCORS;x&&DIL.errorModule.activate();var T=!0===window._dil_unit_tests;(b=c)&&e.push(b+"");if(!g||"string"!==typeof g)return b="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:b,filename:"dil.js"}),Error(b);b="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";if(k||"number"===typeof k)k=parseInt(k,10),!isNaN(k)&&0<=k&&(b="");b&&(k=0,e.push(b),b="");h=DIL.getDil(g,k);if(h instanceof DIL&&h.api.getPartner()===g&&h.api.getContainerNSID()===k)return h;if(this instanceof DIL)DIL.registerDil(this,g,k);else return new DIL(a,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+g+" and containerNSID = "+k);var y={IS_HTTPS:C||"https:"===document.location.protocol,POST_MESSAGE_ENABLED:!!window.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC",MILLIS_PER_DAY:864e5,DIL_COOKIE_NAME:"AAMC_"+encodeURIComponent(g)+"_"+k,FIRST_PARTY_SYNCS:"AMSYNCS",FIRST_PARTY_SYNCS_ON_PAGE:"AMSYNCSOP"},J={stuffed:{}},v={},p={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:k+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2e3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(d){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var l=this,s,f,a,b;if("function"===typeof d&&"function"===typeof d.getInstance){if(E===Object(E)&&(s=E.namespace)&&"string"===typeof s)f=d.getInstance(s,{idSyncContainerID:k});else{this.releaseType="no namespace";this.releaseRequests();return}if(f===Object(f)&&f instanceof d&&"function"===typeof f.isAllowed&&"function"===typeof f.getMarketingCloudVisitorID&&"function"===typeof f.getCustomerIDs&&"function"===typeof f.isOptedOut){this.VisitorAPI=d;if(!f.isAllowed()){this.releaseType="VisitorAPI not allowed";this.releaseRequests();return}this.instance=f;a=function(d){"VisitorAPI"!==l.releaseType&&(l.mid=d,l.releaseType="VisitorAPI",l.releaseRequests())};b=f.getMarketingCloudVisitorID(a);if("string"===typeof b&&b.length){a(b);return}setTimeout(function(){"VisitorAPI"!==l.releaseType&&(l.releaseType="timeout",l.releaseRequests())},this.getLoadTimeout());return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(e){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0;p.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():null},getMIDQueryString:function(){var d=w.isPopulatedString,l=this.getMarketingCloudVisitorID();d(this.mid)&&this.mid===l||(this.mid=l);return d(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(d){if(d===Object(d)){var l="",s=[],f=[],a,b;for(a in d)d.hasOwnProperty(a)&&(f[0]=a,b=d[a],b===Object(b)&&(f[1]=b.id||"",f[2]=b.authState||0,s.push(f),f=[]));if(f=s.length)for(d=0;d<f;d++)l+="&d_cid_ic="+u.encodeAndBuildRequest(s[d],"%01");return l}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(d){this.isOptedOut=d;this.isOptedOutCallbackCalled=!0;p.registerRequest()},getLoadTimeout:function(){var d=this.instance;if(d){if("function"===typeof d.getLoadTimeout)return d.getLoadTimeout();if("undefined"!==typeof d.loadTimeout)return d.loadTimeout}return this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(d,l){var s=w.isPopulatedString,f=encodeURIComponent;if(d===Object(d)&&s(l)){var a=d.dpid,b=d.dpuuid,e=null;if(s(a)&&s(b)){e=f(a)+"$"+f(b);if(!0===this.declaredIdCombos[e])return"setDeclaredId: combo exists for type '"+l+"'";this.declaredIdCombos[e]=!0;this.declaredId[l]={dpid:a,dpuuid:b};return"setDeclaredId: succeeded for type '"+l+"'"}}return"setDeclaredId: failed for type '"+l+"'"},getDeclaredIdQueryString:function(){var d=this.declaredId.request,l=this.declaredId.init,a=encodeURIComponent,f="";null!==d?f="&d_dpid="+a(d.dpid)+"&d_dpuuid="+a(d.dpuuid):null!==l&&(f="&d_dpid="+a(l.dpid)+"&d_dpuuid="+a(l.dpuuid));return f}},registerRequest:function(d){var l=this.firingQueue;d===Object(d)&&l.push(d);this.firing||!l.length||L&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,d=l.shift(),d.src=d.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),w.isPopulatedString(d.corsPostData)&&(d.corsPostData=d.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),D.fireRequest(d),this.firstRequestHasFired||"script"!==d.tag&&"cors"!==d.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(Q||window.Visitor)},requestRemoval:function(d){if(!A)return"removeFinishedScriptsAndCallbacks is not boolean true";var l=this.toRemove,a,f;d===Object(d)&&(a=d.script,f=d.callbackName,(a===Object(a)&&"SCRIPT"===a.nodeName||"no script created"===a)&&"string"===typeof f&&f.length&&l.push(d));if(this.readyToRemove&&l.length){f=l.shift();a=f.script;f=f.callbackName;"no script created"!==a?(d=a.src,a.parentNode.removeChild(a)):d=a;window[f]=null;try{delete window[f]}catch(b){}this.removed.push({scriptSrc:d,callbackName:f});DIL.variables.scriptsRemoved.push(d);DIL.variables.callbacksRemoved.push(f);return this.requestRemoval()}return"requestRemoval() processed"}};h=function(){var d="http://fast.",l="?d_nsid="+k+"#"+encodeURIComponent(document.location.href);if("string"===typeof G&&G.length)return G+l;y.IS_HTTPS&&(d=!0===m?"https://fast.":"https://");return d+g+".demdex.net/dest5.html"+l};var z={THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:"destination_publishing_iframe_"+g+"_"+k,url:h(),onPagePixels:[],iframeHost:null,getIframeHost:function(d){if("string"===typeof d){var l=d.split("/");if(3<=l.length)return l[0]+"//"+l[2];e.push("getIframeHost: url is malformed: "+d);return d}},iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:y.POST_MESSAGE_ENABLED?15:100,ibsDeleted:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,attachIframe:function(){function d(){f=document.createElement("iframe");f.sandbox="allow-scripts allow-same-origin";f.title="Adobe ID Syncing iFrame";f.id=a.id;f.style.cssText="display: none; width: 0; height: 0;";f.src=a.url;a.newIframeCreated=!0;l();document.body.appendChild(f)}function l(){u.addListener(f,"load",function(){f.className="aamIframeLoaded";a.iframeHasLoaded=!0;a.requestToProcess()})}var a=this,f=document.getElementById(this.id);f?"IFRAME"!==f.nodeName?(this.id+="_2",this.iframeIdChanged=!0,d()):(this.newIframeCreated=!1,"aamIframeLoaded"!==f.className?(this.originalIframeHasLoadedAlready=!1,l()):(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.iframe=f,this.requestToProcess())):d();this.iframe=f},requestToProcess:function(d,l){var a=this;d&&!w.isEmptyObject(d)&&this.jsonWaiting.push([d,l]);if((this.receivedThirdPartyCookiesNotification||!y.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var f=this.jsonWaiting.shift();this.process(f[0],f[1]);this.requestToProcess()}this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){a.messageSendingInterval=y.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},processSyncOnPage:function(d){var l,a,f;if((l=d.ibs)&&l instanceof Array&&(a=l.length))for(d=0;d<a;d++)f=l[d],f.syncOnPage&&this.checkFirstPartyCookie(f,"","syncOnPage")},process:function(d,l){var a=encodeURIComponent,f,b,e,c,g,h;l===Object(l)&&(h=u.encodeAndBuildRequest(["",l.dpid||"",l.dpuuid||""],","));if((f=d.dests)&&f instanceof Array&&(b=f.length))for(e=0;e<b;e++)c=f[e],g=[a("dests"),a(c.id||""),a(c.y||""),a(c.c||"")],this.addMessage(g.join("|"));if((f=d.ibs)&&f instanceof Array&&(b=f.length))for(e=0;e<b;e++)c=f[e],g=[a("ibs"),a(c.id||""),a(c.tag||""),u.encodeAndBuildRequest(c.url||[],","),a(c.ttl||""),"",h,c.fireURLSync?"true":"false"],c.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(g.join("|")):c.fireURLSync&&this.checkFirstPartyCookie(c,g.join("|")));if((f=d.dpcalls)&&f instanceof Array&&(b=f.length))for(e=0;e<b;e++)c=f[e],g=c.callback||{},g=[g.obj||"",g.fn||"",g.key||"",g.tag||"",g.url||""],g=[a("dpm"),a(c.id||""),a(c.tag||""),u.encodeAndBuildRequest(c.url||[],","),a(c.ttl||""),u.encodeAndBuildRequest(g,","),h],this.addMessage(g.join("|"));this.jsonProcessed.push(d)},checkFirstPartyCookie:function(d,a,s){var f=(s="syncOnPage"===s?!0:!1)?y.FIRST_PARTY_SYNCS_ON_PAGE:y.FIRST_PARTY_SYNCS,b=this.getOnPageSyncData(f),c=!1,e=!1,g=Math.ceil((new Date).getTime()/y.MILLIS_PER_DAY);b?(b=b.split("*"),e=this.pruneSyncData(b,d.id,g),c=e.dataPresent,e=e.dataValid,c&&e||this.fireSync(s,d,a,b,f,g)):(b=[],this.fireSync(s,d,a,b,f,g))},getOnPageSyncData:function(d){var a=p.adms.instance;return a&&"function"===typeof a.idSyncGetOnPageSyncInfo?a.idSyncGetOnPageSyncInfo():u.getDilCookieField(d)},pruneSyncData:function(d,a,b){var f=!1,e=!1,c,g,h;if(d instanceof Array)for(g=0;g<d.length;g++)c=d[g],h=parseInt(c.split("-")[1],10),c.match("^"+a+"-")?(f=!0,b<h?e=!0:(d.splice(g,1),g--)):b>=h&&(d.splice(g,1),g--);return{dataPresent:f,dataValid:e}},manageSyncsSize:function(d){if(d.join("*").length>this.MAX_SYNCS_LENGTH)for(d.sort(function(d,a){return parseInt(d.split("-")[1],10)-parseInt(a.split("-")[1],10)});d.join("*").length>this.MAX_SYNCS_LENGTH;)d.shift()},fireSync:function(d,a,b,f,e,c){function g(d,a,l,f){return function(){h.onPagePixels[d]=null;var b=h.getOnPageSyncData(l),e=[];if(b){var b=b.split("*"),c,s,g;c=0;for(s=b.length;c<s;c++)g=b[c],g.match("^"+a.id+"-")||e.push(g)}h.setSyncTrackingData(e,a,l,f)}}var h=this;if(d){if("img"===a.tag){d=a.url;b=y.IS_HTTPS?"https:":"http:";var k,n,t;f=0;for(k=d.length;f<k;f++){n=d[f];t=/^\/\//.test(n);var p=new Image;u.addListener(p,"load",g(this.onPagePixels.length,a,e,c));p.src=(t?b:"")+n;this.onPagePixels.push(p)}}}else this.addMessage(b),this.setSyncTrackingData(f,a,e,c)},addMessage:function(d){var a=encodeURIComponent,a=x?a("---destpub-debug---"):a("---destpub---");this.messages.push(a+d)},setSyncTrackingData:function(d,a,b,f){d.push(a.id+"-"+(f+Math.ceil(a.ttl/60/24)));this.manageSyncsSize(d);u.setDilCookieField(b,d.join("*"))},sendMessages:function(){var d=this,a;this.messages.length?(a=this.messages.shift(),DIL.xd.postMessage(a,this.url,this.iframe.contentWindow),this.messagesPosted.push(a),setTimeout(function(){d.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},receiveMessage:function(d){var a=/^---destpub-to-parent---/;"string"===typeof d&&a.test(d)&&(a=d.replace(a,"").split("|"),"canSetThirdPartyCookies"===a[0]&&(this.canSetThirdPartyCookies="true"===a[1]?!0:!1,this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(d))}},K={traits:function(d){w.isValidPdata(d)&&(v.sids instanceof Array||(v.sids=[]),u.extendArray(v.sids,d));return this},pixels:function(d){w.isValidPdata(d)&&(v.pdata instanceof Array||(v.pdata=[]),u.extendArray(v.pdata,d));return this},logs:function(d){w.isValidLogdata(d)&&(v.logdata!==Object(v.logdata)&&(v.logdata={}),u.extendObject(v.logdata,d));return this},customQueryParams:function(d){w.isEmptyObject(d)||u.extendObject(v,d,p.reservedKeys);return this},signals:function(d,a){var b,f=d;if(!w.isEmptyObject(f)){if(a&&"string"===typeof a)for(b in f={},d)d.hasOwnProperty(b)&&(f[a+b]=d[b]);u.extendObject(v,f,p.reservedKeys)}return this},declaredId:function(d){p.declaredId.setDeclaredId(d,"request");return this},result:function(d){"function"===typeof d&&(v.callback=d);return this},afterResult:function(d){"function"===typeof d&&(v.postCallbackFn=d);return this},useImageRequest:function(){v.useImageRequest=!0;return this},clearData:function(){v={};return this},submit:function(){D.submitRequest(v);v={};return this},getPartner:function(){return g},getContainerNSID:function(){return k},getEventLog:function(){return e},getState:function(){var d={},l={};u.extendObject(d,p,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0});u.extendObject(l,z,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{initConfig:a,pendingRequest:v,otherRequestInfo:d,destinationPublishingInfo:l}},idSync:function(d){if(B)return"Error: id syncs have been disabled";if(d!==Object(d)||"string"!==typeof d.dpid||!d.dpid.length)return"Error: config or config.dpid is empty";if("string"!==typeof d.url||!d.url.length)return"Error: config.url is empty";var a=d.url,b=d.minutesToLive,f=encodeURIComponent,c,a=a.replace(/^https:/,"").replace(/^http:/,"");if("undefined"===typeof b)b=20160;else if(b=parseInt(b,10),isNaN(b)||0>=b)return"Error: config.minutesToLive needs to be a positive number";c=u.encodeAndBuildRequest(["",d.dpid,d.dpuuid||""],",");d=["ibs",f(d.dpid),"img",f(a),b,"",c];z.addMessage(d.join("|"));p.firstRequestHasFired&&z.requestToProcess();return"Successfully queued"},aamIdSync:function(d){if(B)return"Error: id syncs have been disabled";if(d!==Object(d)||"string"!==typeof d.dpuuid||!d.dpuuid.length)return"Error: config or config.dpuuid is empty";d.url="//dpm.demdex.net/ibs:dpid="+d.dpid+"&dpuuid="+d.dpuuid;return this.idSync(d)},passData:function(d){if(w.isEmptyObject(d))return"Error: json is empty or not an object";z.ibsDeleted.push(d.ibs);delete d.ibs;D.defaultCallback(d);return d},getPlatformParams:function(){return p.platformParams},getEventCallConfigParams:function(){var d=p,a=d.modStatsParams,b=d.platformParams,f;if(!a){a={};for(f in b)b.hasOwnProperty(f)&&!d.nonModStatsParams[f]&&(a[f.replace(/^d_/,"")]=b[f]);d.modStatsParams=a}return a}},D={corsMetadata:function(){var d="none",a=!0;"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?d="XMLHttpRequest":new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/")()?d="XMLHttpRequest":"undefined"!==typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(a=!1),0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")&&(a=!1));return{corsType:d,corsCookiesEnabled:a}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new window[this.corsMetadata.corsType]},submitRequest:function(d){p.registerRequest(D.createQueuedRequest(d));return!0},createQueuedRequest:function(d){var a=p,b,f=d.callback,c="img",e;if(!w.isEmptyObject(r)){var g,h,n;for(g in r)r.hasOwnProperty(g)&&(h=r[g],null!=h&&""!==h&&g in d&&!(h in d||h in p.reservedKeys)&&(n=d[g],null!=n&&""!==n&&(d[h]=n)))}w.isValidPdata(d.sids)||(d.sids=[]);w.isValidPdata(d.pdata)||(d.pdata=[]);w.isValidLogdata(d.logdata)||(d.logdata={});d.logdataArray=u.convertObjectToKeyValuePairs(d.logdata,"=",!0);d.logdataArray.push("_ts="+(new Date).getTime());"function"!==typeof f&&(f=this.defaultCallback);a.useJSONP=!0!==d.useImageRequest;a.useJSONP&&(c="script",b=a.callbackPrefix+"_"+k+"_"+(new Date).getTime());a=this.makeRequestSrcData(d,b);P&&!F||!(e=this.getCORSInstance())||(c="cors");return{tag:c,src:a.src,corsSrc:a.corsSrc,internalCallbackName:b,callbackFn:f,postCallbackFn:d.postCallbackFn,useImageRequest:!!d.useImageRequest,requestData:d,corsInstance:e,corsPostData:a.corsPostData}},defaultCallback:function(d,a){z.processSyncOnPage(d);var b,f,c,e,g,h,k,t,x;if((b=d.stuff)&&b instanceof Array&&(f=b.length))for(c=0;c<f;c++)if((e=b[c])&&e===Object(e)){g=e.cn;h=e.cv;k=e.ttl;if("undefined"===typeof k||""===k)k=Math.floor(u.getMaxCookieExpiresInMinutes()/60/24);t=e.dmn||"."+document.domain.replace(/^www\./,"");x=e.type;g&&(h||"number"===typeof h)&&("var"!==x&&(k=parseInt(k,10))&&!isNaN(k)&&u.setCookie(g,h,1440*k,"/",t,!1),J.stuffed[g]=h)}b=d.uuid;w.isPopulatedString(b)&&!w.isEmptyObject(n)&&(f=n.path,"string"===typeof f&&f.length||(f="/"),c=parseInt(n.days,10),isNaN(c)&&(c=100),u.setCookie(n.name||"aam_did",b,1440*c,f,n.domain||"."+document.domain.replace(/^www\./,""),!0===n.secure));q||p.abortRequests||z.requestToProcess(d,a)},makeRequestSrcData:function(d,a){d.sids=w.removeEmptyArrayValues(d.sids||[]);d.pdata=w.removeEmptyArrayValues(d.pdata||[]);var b=p,f=b.platformParams,c=u.encodeAndBuildRequest(d.sids,","),e=u.encodeAndBuildRequest(d.pdata,","),h=(d.logdataArray||[]).join("&");delete d.logdataArray;var n=y.IS_HTTPS?"https://":"http://",t=b.declaredId.getDeclaredIdQueryString(),x=b.adms.instance?b.adms.getCustomerIDsQueryString(b.adms.getCustomerIDs()):"",m;m=[];var r,q,v,A;for(r in d)if(!(r in b.reservedKeys)&&d.hasOwnProperty(r))if(q=d[r],r=encodeURIComponent(r),q instanceof Array)for(v=0,A=q.length;v<A;v++)m.push(r+"="+encodeURIComponent(q[v]));else m.push(r+"="+encodeURIComponent(q));m=m.length?"&"+m.join("&"):"";c="d_nsid="+f.d_nsid+t+x+(c.length?"&d_sid="+c:"")+(e.length?"&d_px="+e:"")+(h.length?"&d_ld="+encodeURIComponent(h):"");f="&d_rtbd="+f.d_rtbd+"&d_jsonv="+f.d_jsonv+"&d_dst="+f.d_dst;n=n+g+".demdex.net/event";e=b=n+"?"+c+(b.useJSONP?f+"&d_cb="+(a||""):"")+m;2048<b.length&&(b=b.substring(0,2048).substring(0,b.lastIndexOf("&")));return{corsSrc:n+"?"+(O?"testcors=1&d_nsid="+k+"&":"")+"_ts="+(new Date).getTime(),src:b,originalSrc:e,corsPostData:c+f+m,isDeclaredIdCall:""!==t}},fireRequest:function(d){if("img"===d.tag)this.fireImage(d);else{var a=p.declaredId,a=a.declaredId.request||a.declaredId.init||{},a={dpid:a.dpid||"",dpuuid:a.dpuuid||""};"script"===d.tag?this.fireScript(d,a):"cors"===d.tag&&this.fireCORS(d,a)}},fireImage:function(d){var a=p,c,f;a.abortRequests||(a.firing=!0,c=new Image(0,0),a.sent.push(d),c.onload=function(){a.firing=!1;a.fired.push(d);a.num_of_img_responses++;a.registerRequest()},f=function(f){b="imgAbortOrErrorHandler received the event of type "+f.type;e.push(b);a.abortRequests=!0;a.firing=!1;a.errored.push(d);a.num_of_img_errors++;a.registerRequest()},c.addEventListener?(c.addEventListener("error",f,!1),c.addEventListener("abort",f,!1)):c.attachEvent&&(c.attachEvent("onerror",f),c.attachEvent("onabort",f)),c.src=d.src)},fireScript:function(d,a){var c=this,f=p,h,k,n=d.src,t=d.postCallbackFn,m="function"===typeof t,r=d.internalCallbackName;f.abortRequests||(f.firing=!0,window[r]=function(c){try{c!==Object(c)&&(c={});B&&(z.ibsDeleted.push(c.ibs),delete c.ibs);var h=d.callbackFn;f.firing=!1;f.fired.push(d);f.num_of_jsonp_responses++;h(c,a);m&&t(c,a)}catch(s){s.message="DIL jsonp callback caught error with message "+s.message;b=s.message;e.push(b);s.filename=s.filename||"dil.js";s.partner=g;DIL.errorModule.handleError(s);try{h({error:s.name+"|"+s.message},a),m&&t({error:s.name+"|"+s.message},a)}catch(n){}}finally{f.requestRemoval({script:k,callbackName:r}),f.registerRequest()}},M||F?(f.firing=!1,f.requestRemoval({script:"no script created",callbackName:r})):(k=document.createElement("script"),k.addEventListener&&k.addEventListener("error",function(a){f.requestRemoval({script:k,callbackName:r});b="jsonp script tag error listener received the event of type "+a.type+" with src "+n;c.handleScriptError(b,d)},!1),k.type="text/javascript",k.src=n,h=DIL.variables.scriptNodeList[0],h.parentNode.insertBefore(k,h)),f.sent.push(d),f.declaredId.declaredId.request=null)},fireCORS:function(d,a){var c=this,f=p,h=this.corsMetadata.corsType,k=d.corsSrc,n=d.corsInstance,t=d.corsPostData,r=d.postCallbackFn,m="function"===typeof r;if(!f.abortRequests&&!R){f.firing=!0;try{n.open("post",k,!0),"XMLHttpRequest"===h&&(n.withCredentials=!0,n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){if(4===this.readyState&&200===this.status)a:{var h;try{if(h=JSON.parse(this.responseText),h!==Object(h)){c.handleCORSError(d,a,"Response is not JSON");break a}}catch(k){c.handleCORSError(d,a,"Error parsing response as JSON");break a}B&&(z.ibsDeleted.push(h.ibs),delete h.ibs);try{var n=d.callbackFn;f.firing=!1;f.fired.push(d);f.num_of_cors_responses++;n(h,a);m&&r(h,a)}catch(t){t.message="DIL handleCORSResponse caught error with message "+t.message;b=t.message;e.push(b);t.filename=t.filename||"dil.js";t.partner=g;DIL.errorModule.handleError(t);try{n({error:t.name+"|"+t.message},a),m&&r({error:t.name+"|"+t.message},a)}catch(x){}}finally{f.registerRequest()}}}),n.onerror=function(){c.handleCORSError(d,a,"onerror")},n.ontimeout=function(){c.handleCORSError(d,a,"ontimeout")},n.send(t)}catch(x){this.handleCORSError(d,a,"try-catch")}f.sent.push(d);f.declaredId.declaredId.request=null}},handleCORSError:function(d,a,b){p.num_of_cors_errors++;p.corsErrorSources.push(b);"ontimeout"===b||F||(d.tag="script",this.fireScript(d,a))},handleScriptError:function(d,a){p.num_of_jsonp_errors++;this.handleRequestError(d,a)},handleRequestError:function(d,a){var b=p;e.push(d);b.abortRequests=!0;b.firing=!1;b.errored.push(a);b.registerRequest()}},w={isValidPdata:function(a){return a instanceof Array&&this.removeEmptyArrayValues(a).length?!0:!1},isValidLogdata:function(a){return!this.isEmptyObject(a)},isEmptyObject:function(a){if(a!==Object(a))return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},removeEmptyArrayValues:function(a){for(var b=0,c=a.length,f,e=[],b=0;b<c;b++)f=a[b],"undefined"!==typeof f&&null!==f&&""!==f&&e.push(f);return e},isPopulatedString:function(a){return"string"===typeof a&&a.length}},u={addListener:function(){if(document.addEventListener)return function(a,b,c){a.addEventListener(b,function(a){"function"===typeof c&&c(a)},!1)};if(document.attachEvent)return function(a,b,c){a.attachEvent("on"+b,function(a){"function"===typeof c&&c(a)})}}(),convertObjectToKeyValuePairs:function(a,b,c){var f=[],e,g;b||(b="=");for(e in a)a.hasOwnProperty(e)&&(g=a[e],"undefined"!==typeof g&&null!==g&&""!==g&&f.push(e+b+(c?encodeURIComponent(g):g)));return f},encodeAndBuildRequest:function(a,b){return this.map(a,function(a){return encodeURIComponent(a)}).join(b)},map:function(a,b){if(Array.prototype.map)return a.map(b);if(void 0===a||null===a)throw new TypeError;var c=Object(a),f=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var e=Array(f),g=0;g<f;g++)g in c&&(e[g]=b.call(b,c[g],g,c));return e},filter:function(a,b){if(!Array.prototype.filter){if(void 0===a||null===a)throw new TypeError;var c=Object(a),f=c.length>>>0;if("function"!==typeof b)throw new TypeError;for(var e=[],g=0;g<f;g++)if(g in c){var h=c[g];b.call(b,h,g,c)&&e.push(h)}return e}return a.filter(b)},getCookie:function(a){a+="=";var b=document.cookie.split(";"),c,f,e;c=0;for(f=b.length;c<f;c++){for(e=b[c];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(a))return decodeURIComponent(e.substring(a.length,e.length))}return null},setCookie:function(a,b,c,f,e,g){var h=new Date;c&&(c*=6e4);document.cookie=a+"="+encodeURIComponent(b)+(c?";expires="+new Date(h.getTime()+c).toUTCString():"")+(f?";path="+f:"")+(e?";domain="+e:"")+(g?";secure":"")},extendArray:function(a,b){return a instanceof Array&&b instanceof Array?(Array.prototype.push.apply(a,b),!0):!1},extendObject:function(a,b,c){var f;if(a===Object(a)&&b===Object(b)){for(f in b)!b.hasOwnProperty(f)||!w.isEmptyObject(c)&&f in c||(a[f]=b[f]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return(new Date(y.COOKIE_MAX_EXPIRATION_DATE).getTime()-(new Date).getTime())/1e3/60},getCookieField:function(a,b){var c=this.getCookie(a),f=decodeURIComponent;if("string"===typeof c){var c=c.split("|"),e,g;e=0;for(g=c.length-1;e<g;e++)if(f(c[e])===b)return f(c[e+1])}return null},getDilCookieField:function(a){return this.getCookieField(y.DIL_COOKIE_NAME,a)},setCookieField:function(a,b,c){var e=this.getCookie(a),g=!1,h=encodeURIComponent;b=h(b);c=h(c);if("string"===typeof e){var e=e.split("|"),k,h=0;for(k=e.length-1;h<k;h++)if(e[h]===b){e[h+1]=c;g=!0;break}g||(h=e.length,e[h]=b,e[h+1]=c)}else e=[b,c];this.setCookie(a,e.join("|"),this.getMaxCookieExpiresInMinutes(),"/",this.getDomain(),!1)},setDilCookieField:function(a,b){return this.setCookieField(y.DIL_COOKIE_NAME,a,b)},getDomain:function(a){!a&&window.location&&(a=window.location.hostname);if(a)if(/^[0-9.]+$/.test(a))a="";else{var b=a.split("."),c=b.length-1,e=c-1;1<c&&2>=b[c].length&&(2===b[c-1].length||0>",DOMAIN_2_CHAR_EXCEPTIONS,".indexOf(","+b[c]+","))&&e--;if(0<e)for(a="";c>=e;)a=b[c]+(a?".":"")+a,c--}return a}};"error"===g&&0===k&&u.addListener(window,"load",function(){DIL.windowLoaded=!0});var S=!1,H=function(){S||(S=!0,p.registerRequest(),U(),q||p.abortRequests||z.attachIframe(),p.readyToRemove=!0,p.requestRemoval())},U=function(){q||setTimeout(function(){N||p.firstRequestHasFired||("function"===typeof I?K.afterResult(I).submit():K.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)};C=document;"error"!==g&&(DIL.windowLoaded?H():"complete"!==C.readyState&&"loaded"!==C.readyState?u.addListener(window,"load",function(){DIL.windowLoaded=!0;H()}):(DIL.windowLoaded=!0,H()));if("error"!==g)try{DIL.xd.receiveMessage(function(a){z.receiveMessage(a.data)},z.getIframeHost(z.url))}catch(V){}p.declaredId.setDeclaredId(t,"init");p.processVisitorAPI();this.api=K;this.getStuffedVariable=function(a){var b=J.stuffed[a];b||"number"===typeof b||(b=u.getCookie(a))||"number"===typeof b||(b="");return b};this.validators=w;this.helpers=u;this.constants=y;this.log=e;T&&(this.pendingRequest=v,this.requestController=p,this.setDestinationPublishingUrl=h,this.destinationPublishing=z,this.requestProcs=D,this.variables=J,this.callWindowLoadFunctions=H)},function(){var a=document,c;null==a.readyState&&a.addEventListener&&(a.readyState="loading",a.addEventListener("DOMContentLoaded",c=function(){a.removeEventListener("DOMContentLoaded",c,!1);a.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(a){var c;if(a===Object(a))for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])},DIL.extendStaticPropertiesAndMethods({version:"6.9",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:document.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(a){this.windowLoaded="function"===typeof a?!!a():"boolean"===typeof a?a:!0},create:function(a){try{return new DIL(a)}catch(c){throw Error("Error in attempt to create DIL instance with DIL.create(): "+c.message)}},registerDil:function(a,c,e){c=c+"$"+e;c in this.dils||(this.dils[c]=a)},getDil:function(a,c){var e;"string"!==typeof a&&(a="");c||(c=0);e=a+"$"+c;return e in this.dils?this.dils[e]:Error("The DIL instance with partner = "+a+" and containerNSID = "+c+" was not found")},dexGetQSVars:function(a,c,e){c=this.getDil(c,e);return c instanceof this?c.getStuffedVariable(a):""},xd:{postMessage:function(a,c,e){var b=1;c&&(window.postMessage?e.postMessage(a,c.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):c&&(e.location=c.replace(/#.*$/,"")+"#"+ +new Date+b++ +"&"+a))},receiveMessage:function(a,c){
var e;try{if(window.postMessage)if(a&&(e=function(b){if("string"===typeof c&&b.origin!==c||"[object Function]"===Object.prototype.toString.call(c)&&!1===c(b.origin))return!1;a(b)}),window.addEventListener)window[a?"addEventListener":"removeEventListener"]("message",e,!1);else window[a?"attachEvent":"detachEvent"]("onmessage",e)}catch(b){}}}}),DIL.errorModule=function(){var a=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},e=!1;return{activate:function(){e=!0},handleError:function(b){if(!e)return"DIL error module has not been activated";b!==Object(b)&&(b={});var h=b.name?(b.name+"").toLowerCase():"",g=[];b={name:h,filename:b.filename?b.filename+"":"",partner:b.partner?b.partner+"":"no_partner",site:b.site?b.site+"":document.location.href,message:b.message?b.message+"":""};g.push(h in c?c[h]:c.noerrortypedefined);a.api.pixels(g).logs(b).useImageRequest().submit();return"DIL error report sent"},pixelMap:c}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(a,c,e){var b="";c=c||"Error caught in DIL module/submodule: ";a===Object(a)?b=c+(a.message||"err has no message"):(b=c+"err is not a valid object",a={});a.message=b;e instanceof DIL&&(a.partner=e.api.getPartner());DIL.errorModule.handleError(a);return this.errorMessage=b}}});DIL.tools.getSearchReferrer=function(a,c){var e=DIL.getDil("error"),b=DIL.tools.decomposeURI(a||document.referrer),h="",g="",k={queryParam:"q"};return(h=e.helpers.filter([c===Object(c)?c:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(a){return!(!a.hasOwnProperty("hostPattern")||!b.hostname.match(a.hostPattern))}).shift())?{valid:!0,name:b.hostname,keywords:(e.helpers.extendObject(k,h),g=k.queryPattern?(h=(""+b.search).match(k.queryPattern))?h[1]:"":b.uriParams[k.queryParam],decodeURIComponent(g||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};DIL.tools.decomposeURI=function(a){var c=DIL.getDil("error"),e=document.createElement("a");e.href=a||document.referrer;return{hash:e.hash,host:e.host.split(":").shift(),hostname:e.hostname,href:e.href,pathname:e.pathname.replace(/^\//,""),protocol:e.protocol,search:e.search,uriParams:function(a,e){c.helpers.map(e.split("&"),function(c){c=c.split("=");a[c.shift()]=c.shift()});return a}({},e.search.replace(/^(\/|\?)?|\/$/g,""))}};DIL.tools.getMetaTags=function(){var a={},c=document.getElementsByTagName("meta"),e,b,h,g,k;e=0;for(h=arguments.length;e<h;e++)if(g=arguments[e],null!==g)for(b=0;b<c.length;b++)if(k=c[b],k.name===g){a[g]=k.content;break}return a};DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,e,b){try{var h=this,g={name:"DIL Site Catalyst Module Error"},k=function(a){g.message=a;DIL.errorModule.handleError(g);return a};this.options=b===Object(b)?b:{};this.dil=null;if(c instanceof DIL)this.dil=c;else return k("dilInstance is not a valid instance of DIL");g.partner=c.api.getPartner();if(a!==Object(a))return k("siteCatalystReportingSuite is not an object");window.AppMeasurement_Module_DIL=a.m_DIL=function(a){var b="function"===typeof a.m_i?a.m_i("DIL"):this;if(b!==Object(b))return k("m is not an object");b.trackVars=h.constructTrackVars(e);b.d=0;b.s=a;b._t=function(){var a,b,c=","+this.trackVars+",",e=this.s,g,r=[];g=[];var m={},q=!1;if(e!==Object(e))return k("Error in m._t function: s is not an object");if(this.d){if("function"===typeof e.foreachVar)e.foreachVar(function(a,b){"undefined"!==typeof b&&(m[a]=b,q=!0)},this.trackVars);else{if(!(e.va_t instanceof Array))return k("Error in m._t function: s.va_t is not an array");if(e.lightProfileID)(a=e.lightTrackVars)&&(a=","+a+","+e.vl_mr+",");else if(e.pe||e.linkType)a=e.linkTrackVars,e.pe&&(b=e.pe.substring(0,1).toUpperCase()+e.pe.substring(1),e[b]&&(a=e[b].trackVars)),a&&(a=","+a+","+e.vl_l+","+e.vl_l2+",");if(a){b=0;for(r=a.split(",");b<r.length;b++)0<=c.indexOf(","+r[b]+",")&&g.push(r[b]);g.length&&(c=","+g.join(",")+",")}g=0;for(b=e.va_t.length;g<b;g++)a=e.va_t[g],0<=c.indexOf(","+a+",")&&"undefined"!==typeof e[a]&&null!==e[a]&&""!==e[a]&&(m[a]=e[a],q=!0)}h.includeContextData(e,m).store_populated&&(q=!0);q&&this.d.api.signals(m,"c_").submit()}}};a.loadModule("DIL");a.DIL.d=c;return g.message?g.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(q){return this.handle(q,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(a){var c=[],e,b,h,g,k;if(a===Object(a)){e=a.names;if(e instanceof Array&&(h=e.length))for(b=0;b<h;b++)g=e[b],"string"===typeof g&&g.length&&c.push(g);a=a.iteratedNames;if(a instanceof Array&&(h=a.length))for(b=0;b<h;b++)if(e=a[b],e===Object(e)&&(g=e.name,k=parseInt(e.maxIndex,10),"string"===typeof g&&g.length&&!isNaN(k)&&0<=k))for(e=0;e<=k;e++)c.push(g+e);if(c.length)return c.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:250}]})},includeContextData:function(a,c){var e={},b=!1;if(a.contextData===Object(a.contextData)){var h=a.contextData,g=this.options.replaceContextDataPeriodsWith,k=this.options.filterFromContextVariables,q={},m,r,n,x;"string"===typeof g&&g.length||(g="_");if(k instanceof Array)for(m=0,r=k.length;m<r;m++)n=k[m],this.dil.validators.isPopulatedString(n)&&(q[n]=!0);for(x in h)!h.hasOwnProperty(x)||q[x]||!(k=h[x])&&"number"!==typeof k||(x=("contextData."+x).replace(/\./g,g),c[x]=k,b=!0)}e.store_populated=b;return e}};DIL.modules.GA={submitUniversalAnalytics:function(a,c,e){try{var b=a.getAll()[0],h=b[e||"b"].data.keys;a={};var g,k,q,m;g=0;for(k=h.length;g<k;g++)q=h[g],m=b.get(q),"undefined"===typeof m||"function"===typeof m||m===Object(m)||/^_/.test(q)||/^&/.test(q)||(a[q]=m);c.api.signals(a,"c_").submit();return a}catch(r){return"Caught error with message: "+r.message}},dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(a,c,e){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var b={name:"DIL GA Module Error"},h="";c instanceof DIL?(this.dil=c,b.partner=this.dil.api.getPartner()):(h="dilInstance is not a valid instance of DIL",b.message=h,DIL.errorModule.handleError(b));a instanceof Array&&a.length?this.arr=a:(h="gaArray is not an array or is empty",b.message=h,DIL.errorModule.handleError(b));this.tv=this.constructTrackVars(e);this.errorMessage=h}catch(g){this.handle(g,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(a){var c=[],e,b,h,g;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){h=this.defaultTrackVars;g={};e=0;for(b=h.length;e<b;e++)g[h[e]]=!0;this.defaultTrackVarsObj=g}else g=this.defaultTrackVarsObj;if(a===Object(a)){a=a.names;if(a instanceof Array&&(b=a.length))for(e=0;e<b;e++)h=a[e],"string"===typeof h&&h.length&&h in g&&c.push(h);if(c.length)return c}return this.defaultTrackVars},constructGAObj:function(a){var c={};a=a instanceof Array?a:this.arr;var e,b,h,g;e=0;for(b=a.length;e<b;e++)h=a[e],h instanceof Array&&h.length&&(h=[],g=a[e],h instanceof Array&&g instanceof Array&&Array.prototype.push.apply(h,g),g=h.shift(),"string"===typeof g&&g.length&&(c[g]instanceof Array||(c[g]=[]),c[g].push(h)));return c},addToSignals:function(a,c){if("string"!==typeof a||""===a||null==c||""===c)return!1;this.signals[a]instanceof Array||(this.signals[a]=[]);this.signals[a].push(c);return this.hasSignals=!0},constructSignals:function(){var a=this.constructGAObj(),c={_setAccount:function(a){this.addToSignals("c_accountId",a)},_setCustomVar:function(a,b,c){"string"===typeof b&&b.length&&this.addToSignals("c_"+b,c)},_addItem:function(a,b,c,e,g,h){this.addToSignals("c_itemOrderId",a);this.addToSignals("c_itemSku",b);this.addToSignals("c_itemName",c);this.addToSignals("c_itemCategory",e);this.addToSignals("c_itemPrice",g);this.addToSignals("c_itemQuantity",h)},_addTrans:function(a,b,c,e,g,h,k,m){this.addToSignals("c_transOrderId",a);this.addToSignals("c_transAffiliation",b);this.addToSignals("c_transTotal",c);this.addToSignals("c_transTax",e);this.addToSignals("c_transShipping",g);this.addToSignals("c_transCity",h);this.addToSignals("c_transState",k);this.addToSignals("c_transCountry",m)},_trackSocial:function(a,b,c,e){this.addToSignals("c_socialNetwork",a);this.addToSignals("c_socialAction",b);this.addToSignals("c_socialTarget",c);this.addToSignals("c_socialPagePath",e)}},e=this.tv,b,h,g,k,q,m;b=0;for(h=e.length;b<h;b++)if(g=e[b],a.hasOwnProperty(g)&&c.hasOwnProperty(g)&&(m=a[g],m instanceof Array))for(k=0,q=m.length;k<q;k++)c[g].apply(this,m[k])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(a){return this.handle(a,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(a,c,e){try{this.callback=this.dil=null,this.errorMessage="",a instanceof DIL?(this.dil=a,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(c)?c:"aam_ga",this.delimiter=this.v(e)?e:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(b){this.handle(b,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(a){var c,e,b,h,g,k;k=!1;var q=1;if(a===Object(a)&&(c=a.stuff)&&c instanceof Array&&(e=c.length))for(a=0;a<e;a++)if((b=c[a])&&b===Object(b)&&(h=b.cn,g=b.cv,h===this.cookieName&&this.v(g))){k=!0;break}if(k){c=g.split(this.delimiter);"undefined"===typeof window._gaq&&(window._gaq=[]);b=window._gaq;a=0;for(e=c.length;a<e&&!(k=c[a].split("="),g=k[0],k=k[1],this.v(g)&&this.v(k)&&b.push(["_setCustomVar",q++,g,k,1]),q>this.LIMIT);a++);this.errorMessage=1<q?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"===typeof this.callback)return this.callback()},submit:function(){try{var a=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(c){a.process(c)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(c){return this.handle(c,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}};DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(a,c,e){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=e===Object(e)?e:{};e={name:"DIL Peer39 Module Error"};var b=[],h="";this.isSecurePageButNotEnabled(document.location.protocol)&&(h="Module has not been enabled for a secure page",b.push(h),e.message=h,DIL.errorModule.handleError(e));c instanceof DIL?(this.dil=c,e.partner=this.dil.api.getPartner()):(h="dilInstance is not a valid instance of DIL",b.push(h),e.message=h,DIL.errorModule.handleError(e));"string"===typeof a&&a.length?this.aid=a:(h="aid is not a string or is empty",b.push(h),e.message=h,DIL.errorModule.handleError(e));this.errorMessage=b.join("\n")}catch(g){this.handle(g,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(a){return"https:"===a&&!0!==this.optionals.enableHTTPS?!0:!1},constructSignals:function(){var a=this,c=this.constructScript(),e=DIL.variables.scriptNodeList[0];window["afterFinished_"+this.aid]=function(){try{var b=a.processData(p39_KVP_Short("c_p","|").split("|"));b.hasSignals&&a.dil.api.signals(b.signals).submit()}catch(c){}finally{a.calledBack=!0,"function"===typeof a.optionals.afterResult&&a.optionals.afterResult()}};e.parentNode.insertBefore(c,e);this.scriptsSent.push(c);return"Request sent to Peer39"},processData:function(a){var c,e,b,h,g={},k=!1;this.returnedData.push(a);if(a instanceof Array)for(c=0,e=a.length;c<e;c++)b=a[c].split("="),h=b[0],b=b[1],h&&isFinite(b)&&!isNaN(parseInt(b,10))&&(g[h]instanceof Array||(g[h]=[]),g[h].push(b),k=!0);return{hasSignals:k,signals:g}},constructScript:function(){var a=document.createElement("script"),c=this.optionals,e=c.scriptId,b=c.scriptSrc,c=c.scriptParams;a.id="string"===typeof e&&e.length?e:"peer39ScriptLoader";a.type="text/javascript";"string"===typeof b&&b.length?a.src=b:(a.src=document.location.protocol+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"===typeof c&&c.length&&(a.src+="?"+c));return a},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(a){return this.handle(a,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};window.AppMeasurement=function AppMeasurement(r){var a=this;a.version="2.2.0";var k=window;k.s_c_in||(k.s_c_il=[],k.s_c_in=0);a._il=k.s_c_il;a._in=k.s_c_in;a._il[a._in]=a;k.s_c_in++;a._c="s_c";var p=k.AppMeasurement.Pb;p||(p=null);var n=k,m,s;try{for(m=n.parent,s=n.location;m&&m.location&&s&&""+m.location!=""+s&&n.location&&""+m.location!=""+n.location&&m.location.host==s.host;)n=m,m=n.parent}catch(u){}a.F=function(a){try{console.log(a)}catch(b){}};a.Ma=function(a){return""+parseInt(a)==""+a};a.replace=function(a,b,d){return!a||0>a.indexOf(b)?a:a.split(b).join(d)};a.escape=function(c){var b,d;if(!c)return c;c=encodeURIComponent(c);for(b=0;7>b;b++)d="+~!*()'".substring(b,b+1),0<=c.indexOf(d)&&(c=a.replace(c,d,"%"+d.charCodeAt(0).toString(16).toUpperCase()));return c};a.unescape=function(c){if(!c)return c;c=0<=c.indexOf("+")?a.replace(c,"+"," "):c;try{return decodeURIComponent(c)}catch(b){}return unescape(c)};a.wb=function(){var c=k.location.hostname,b=a.fpCookieDomainPeriods,d;b||(b=a.cookieDomainPeriods);if(c&&!a.Ea&&!/^[0-9.]+$/.test(c)&&(b=b?parseInt(b):2,b=2<b?b:2,d=c.lastIndexOf("."),0<=d)){for(;0<=d&&1<b;)d=c.lastIndexOf(".",d-1),b--;a.Ea=0<d?c.substring(d):c}return a.Ea};a.c_r=a.cookieRead=function(c){c=a.escape(c);var b=" "+a.d.cookie,d=b.indexOf(" "+c+"="),f=0>d?d:b.indexOf(";",d);c=0>d?"":a.unescape(b.substring(d+2+c.length,0>f?b.length:f));return"[[B]]"!=c?c:""};a.c_w=a.cookieWrite=function(c,b,d){var f=a.wb(),e=a.cookieLifetime,g;b=""+b;e=e?(""+e).toUpperCase():"";d&&"SESSION"!=e&&"NONE"!=e&&((g=""!=b?parseInt(e?e:0):-60)?(d=new Date,d.setTime(d.getTime()+1e3*g)):1==d&&(d=new Date,g=d.getYear(),d.setYear(g+5+(1900>g?1900:0))));return c&&"NONE"!=e?(a.d.cookie=a.escape(c)+"="+a.escape(""!=b?b:"[[B]]")+"; path=/;"+(d&&"SESSION"!=e?" expires="+d.toGMTString()+";":"")+(f?" domain="+f+";":""),a.cookieRead(c)==b):0};a.L=[];a.ia=function(c,b,d){if(a.Fa)return 0;a.maxDelay||(a.maxDelay=250);var f=0,e=(new Date).getTime()+a.maxDelay,g=a.d.visibilityState,h=["webkitvisibilitychange","visibilitychange"];g||(g=a.d.webkitVisibilityState);if(g&&"prerender"==g){if(!a.ja)for(a.ja=1,d=0;d<h.length;d++)a.d.addEventListener(h[d],function(){var c=a.d.visibilityState;c||(c=a.d.webkitVisibilityState);"visible"==c&&(a.ja=0,a.delayReady())});f=1;e=0}else d||a.p("_d")&&(f=1);f&&(a.L.push({m:c,a:b,t:e}),a.ja||setTimeout(a.delayReady,a.maxDelay));return f};a.delayReady=function(){var c=(new Date).getTime(),b=0,d;for(a.p("_d")?b=1:a.xa();0<a.L.length;){d=a.L.shift();if(b&&!d.t&&d.t>c){a.L.unshift(d);setTimeout(a.delayReady,parseInt(a.maxDelay/2));break}a.Fa=1;a[d.m].apply(a,d.a);a.Fa=0}};a.setAccount=a.sa=function(c){var b,d;if(!a.ia("setAccount",arguments))if(a.account=c,a.allAccounts)for(b=a.allAccounts.concat(c.split(",")),a.allAccounts=[],b.sort(),d=0;d<b.length;d++)0!=d&&b[d-1]==b[d]||a.allAccounts.push(b[d]);else a.allAccounts=c.split(",")};a.foreachVar=function(c,b){var d,f,e,g,h="";e=f="";if(a.lightProfileID)d=a.P,(h=a.lightTrackVars)&&(h=","+h+","+a.na.join(",")+",");else{d=a.g;if(a.pe||a.linkType)h=a.linkTrackVars,f=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(h=a[e].Nb,f=a[e].Mb));h&&(h=","+h+","+a.H.join(",")+",");f&&h&&(h+=",events,")}b&&(b=","+b+",");for(f=0;f<d.length;f++)e=d[f],(g=a[e])&&(!h||0<=h.indexOf(","+e+","))&&(!b||0<=b.indexOf(","+e+","))&&c(e,g)};a.r=function(c,b,d,f,e){var g="",h,l,k,q,m=0;"contextData"==c&&(c="c");if(b){for(h in b)if(!(Object.prototype[h]||e&&h.substring(0,e.length)!=e)&&b[h]&&(!d||0<=d.indexOf(","+(f?f+".":"")+h+","))){k=!1;if(m)for(l=0;l<m.length;l++)h.substring(0,m[l].length)==m[l]&&(k=!0);if(!k&&(""==g&&(g+="&"+c+"."),l=b[h],e&&(h=h.substring(e.length)),0<h.length))if(k=h.indexOf("."),0<k)l=h.substring(0,k),k=(e?e:"")+l+".",m||(m=[]),m.push(k),g+=a.r(l,b,d,f,k);else if("boolean"==typeof l&&(l=l?"true":"false"),l){if("retrieveLightData"==f&&0>e.indexOf(".contextData."))switch(k=h.substring(0,4),q=h.substring(4),h){case"transactionID":h="xact";break;case"channel":h="ch";break;case"campaign":h="v0";break;default:a.Ma(q)&&("prop"==k?h="c"+q:"eVar"==k?h="v"+q:"list"==k?h="l"+q:"hier"==k&&(h="h"+q,l=l.substring(0,255)))}g+="&"+a.escape(h)+"="+a.escape(l)}}""!=g&&(g+="&."+c)}return g};a.usePostbacks=0;a.zb=function(){var c="",b,d,f,e,g,h,l,k,q="",m="",n=e="";if(a.lightProfileID)b=a.P,(q=a.lightTrackVars)&&(q=","+q+","+a.na.join(",")+",");else{b=a.g;if(a.pe||a.linkType)q=a.linkTrackVars,m=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(q=a[e].Nb,m=a[e].Mb));q&&(q=","+q+","+a.H.join(",")+",");m&&(m=","+m+",",q&&(q+=",events,"));a.events2&&(n+=(""!=n?",":"")+a.events2)}if(a.visitor&&a.visitor.getCustomerIDs){e=p;if(g=a.visitor.getCustomerIDs())for(d in g)Object.prototype[d]||(f=g[d],"object"==typeof f&&(e||(e={}),f.id&&(e[d+".id"]=f.id),f.authState&&(e[d+".as"]=f.authState)));e&&(c+=a.r("cid",e))}a.AudienceManagement&&a.AudienceManagement.isReady()&&(c+=a.r("d",a.AudienceManagement.getEventCallConfigParams()));for(d=0;d<b.length;d++){e=b[d];g=a[e];f=e.substring(0,4);h=e.substring(4);g||("events"==e&&n?(g=n,n=""):"marketingCloudOrgID"==e&&a.visitor&&(g=a.visitor.marketingCloudOrgID));if(g&&(!q||0<=q.indexOf(","+e+","))){switch(e){case"customerPerspective":e="cp";break;case"marketingCloudOrgID":e="mcorgid";break;case"supplementalDataID":e="sdid";break;case"timestamp":e="ts";break;case"dynamicVariablePrefix":e="D";break;case"visitorID":e="vid";break;case"marketingCloudVisitorID":e="mid";break;case"analyticsVisitorID":e="aid";break;case"audienceManagerLocationHint":e="aamlh";break;case"audienceManagerBlob":e="aamb";break;case"authState":e="as";break;case"pageURL":e="g";255<g.length&&(a.pageURLRest=g.substring(255),g=g.substring(0,255));break;case"pageURLRest":e="-g";break;case"referrer":e="r";break;case"vmk":case"visitorMigrationKey":e="vmt";break;case"visitorMigrationServer":e="vmf";a.ssl&&a.visitorMigrationServerSecure&&(g="");break;case"visitorMigrationServerSecure":e="vmf";!a.ssl&&a.visitorMigrationServer&&(g="");break;case"charSet":e="ce";break;case"visitorNamespace":e="ns";break;case"cookieDomainPeriods":e="cdp";break;case"cookieLifetime":e="cl";break;case"variableProvider":e="vvp";break;case"currencyCode":e="cc";break;case"channel":e="ch";break;case"transactionID":e="xact";break;case"campaign":e="v0";break;case"latitude":e="lat";break;case"longitude":e="lon";break;case"resolution":e="s";break;case"colorDepth":e="c";break;case"javascriptVersion":e="j";break;case"javaEnabled":e="v";break;case"cookiesEnabled":e="k";break;case"browserWidth":e="bw";break;case"browserHeight":e="bh";break;case"connectionType":e="ct";break;case"homepage":e="hp";break;case"events":n&&(g+=(""!=g?",":"")+n);if(m)for(h=g.split(","),g="",f=0;f<h.length;f++)l=h[f],k=l.indexOf("="),0<=k&&(l=l.substring(0,k)),k=l.indexOf(":"),0<=k&&(l=l.substring(0,k)),0<=m.indexOf(","+l+",")&&(g+=(g?",":"")+h[f]);break;case"events2":g="";break;case"contextData":c+=a.r("c",a[e],q,e);g="";break;case"lightProfileID":e="mtp";break;case"lightStoreForSeconds":e="mtss";a.lightProfileID||(g="");break;case"lightIncrementBy":e="mti";a.lightProfileID||(g="");break;case"retrieveLightProfiles":e="mtsr";break;case"deleteLightProfiles":e="mtsd";break;case"retrieveLightData":a.retrieveLightProfiles&&(c+=a.r("mts",a[e],q,e));g="";break;default:a.Ma(h)&&("prop"==f?e="c"+h:"eVar"==f?e="v"+h:"list"==f?e="l"+h:"hier"==f&&(e="h"+h,g=g.substring(0,255)))}g&&(c+="&"+e+"="+("pev"!=e.substring(0,3)?a.escape(g):g))}"pev3"==e&&a.e&&(c+=a.e)}return c};a.D=function(a){var b=a.tagName;if("undefined"!=""+a.Sb||"undefined"!=""+a.Ib&&"HTML"!=(""+a.Ib).toUpperCase())return"";b=b&&b.toUpperCase?b.toUpperCase():"";"SHAPE"==b&&(b="");b&&(("INPUT"==b||"BUTTON"==b)&&a.type&&a.type.toUpperCase?b=a.type.toUpperCase():!b&&a.href&&(b="A"));return b};a.Ia=function(a){var b=k.location,d=a.href?a.href:"",f,e,g;f=d.indexOf(":");e=d.indexOf("?");g=d.indexOf("/");d&&(0>f||0<=e&&f>e||0<=g&&f>g)&&(e=a.protocol&&1<a.protocol.length?a.protocol:b.protocol?b.protocol:"",f=b.pathname.lastIndexOf("/"),d=(e?e+"//":"")+(a.host?a.host:b.host?b.host:"")+("/"!=d.substring(0,1)?b.pathname.substring(0,0>f?0:f)+"/":"")+d);return d};a.M=function(c){var b=a.D(c),d,f,e="",g=0;return b&&(d=c.protocol,f=c.onclick,!c.href||"A"!=b&&"AREA"!=b||f&&d&&!(0>d.toLowerCase().indexOf("javascript"))?f?(e=a.replace(a.replace(a.replace(a.replace(""+f,"\r",""),"\n",""),"	","")," ",""),g=2):"INPUT"==b||"SUBMIT"==b?(c.value?e=c.value:c.innerText?e=c.innerText:c.textContent&&(e=c.textContent),g=3):"IMAGE"==b&&c.src&&(e=c.src):e=a.Ia(c),e)?{id:e.substring(0,100),type:g}:0};a.Qb=function(c){for(var b=a.D(c),d=a.M(c);c&&!d&&"BODY"!=b;)if(c=c.parentElement?c.parentElement:c.parentNode)b=a.D(c),d=a.M(c);d&&"BODY"!=b||(c=0);c&&(b=c.onclick?""+c.onclick:"",0<=b.indexOf(".tl(")||0<=b.indexOf(".trackLink("))&&(c=0);return c};a.Hb=function(){var c,b,d=a.linkObject,f=a.linkType,e=a.linkURL,g,h;a.oa=1;d||(a.oa=0,d=a.clickObject);if(d){c=a.D(d);for(b=a.M(d);d&&!b&&"BODY"!=c;)if(d=d.parentElement?d.parentElement:d.parentNode)c=a.D(d),b=a.M(d);b&&"BODY"!=c||(d=0);if(d&&!a.linkObject){var l=d.onclick?""+d.onclick:"";if(0<=l.indexOf(".tl(")||0<=l.indexOf(".trackLink("))d=0}}else a.oa=1;!e&&d&&(e=a.Ia(d));e&&!a.linkLeaveQueryString&&(g=e.indexOf("?"),0<=g&&(e=e.substring(0,g)));if(!f&&e){var m=0,q=0,n;if(a.trackDownloadLinks&&a.linkDownloadFileTypes)for(l=e.toLowerCase(),g=l.indexOf("?"),h=l.indexOf("#"),0<=g?0<=h&&h<g&&(g=h):g=h,0<=g&&(l=l.substring(0,g)),g=a.linkDownloadFileTypes.toLowerCase().split(","),h=0;h<g.length;h++)(n=g[h])&&l.substring(l.length-(n.length+1))=="."+n&&(f="d");if(a.trackExternalLinks&&!f&&(l=e.toLowerCase(),a.La(l)&&(a.linkInternalFilters||(a.linkInternalFilters=k.location.hostname),g=0,a.linkExternalFilters?(g=a.linkExternalFilters.toLowerCase().split(","),m=1):a.linkInternalFilters&&(g=a.linkInternalFilters.toLowerCase().split(",")),g))){for(h=0;h<g.length;h++)n=g[h],0<=l.indexOf(n)&&(q=1);q?m&&(f="e"):m||(f="e")}}a.linkObject=d;a.linkURL=e;a.linkType=f;if(a.trackClickMap||a.trackInlineStats)a.e="",d&&(f=a.pageName,e=1,d=d.sourceIndex,f||(f=a.pageURL,e=0),k.s_objectID&&(b.id=k.s_objectID,d=b.type=1),f&&b&&b.id&&c&&(a.e="&pid="+a.escape(f.substring(0,255))+(e?"&pidt="+e:"")+"&oid="+a.escape(b.id.substring(0,100))+(b.type?"&oidt="+b.type:"")+"&ot="+c+(d?"&oi="+d:"")))};a.Ab=function(){var c=a.oa,b=a.linkType,d=a.linkURL,f=a.linkName;b&&(d||f)&&(b=b.toLowerCase(),"d"!=b&&"e"!=b&&(b="o"),a.pe="lnk_"+b,a.pev1=d?a.escape(d):"",a.pev2=f?a.escape(f):"",c=1);a.abort&&(c=0);if(a.trackClickMap||a.trackInlineStats||a.ActivityMap){var b={},d=0,e=a.cookieRead("s_sq"),g=e?e.split("&"):0,h,l,k,e=0;if(g)for(h=0;h<g.length;h++)l=g[h].split("="),f=a.unescape(l[0]).split(","),l=a.unescape(l[1]),b[l]=f;f=a.account.split(",");h={};for(k in a.contextData)k&&!Object.prototype[k]&&"a.activitymap."==k.substring(0,14)&&(h[k]=a.contextData[k],a.contextData[k]="");a.e=a.r("c",h)+(a.e?a.e:"");if(c||a.e){c&&!a.e&&(e=1);for(l in b)if(!Object.prototype[l])for(k=0;k<f.length;k++)for(e&&(g=b[l].join(","),g==a.account&&(a.e+=("&"!=l.charAt(0)?"&":"")+l,b[l]=[],d=1)),h=0;h<b[l].length;h++)g=b[l][h],g==f[k]&&(e&&(a.e+="&u="+a.escape(g)+("&"!=l.charAt(0)?"&":"")+l+"&u=0"),b[l].splice(h,1),d=1);c||(d=1);if(d){e="";h=2;!c&&a.e&&(e=a.escape(f.join(","))+"="+a.escape(a.e),h=1);for(l in b)!Object.prototype[l]&&0<h&&0<b[l].length&&(e+=(e?"&":"")+a.escape(b[l].join(","))+"="+a.escape(l),h--);a.cookieWrite("s_sq",e)}}}return c};a.Bb=function(){if(!a.Lb){var c=new Date,b=n.location,d,f,e=f=d="",g="",h="",l="1.2",k=a.cookieWrite("s_cc","true",0)?"Y":"N",m="",p="";if(c.setUTCDate&&(l="1.3",0..toPrecision&&(l="1.5",c=[],c.forEach))){l="1.6";f=0;d={};try{f=new Iterator(d),f.next&&(l="1.7",c.reduce&&(l="1.8",l.trim&&(l="1.8.1",Date.parse&&(l="1.8.2",Object.create&&(l="1.8.5")))))}catch(r){}}d=screen.width+"x"+screen.height;e=navigator.javaEnabled()?"Y":"N";f=screen.pixelDepth?screen.pixelDepth:screen.colorDepth;g=a.w.innerWidth?a.w.innerWidth:a.d.documentElement.offsetWidth;h=a.w.innerHeight?a.w.innerHeight:a.d.documentElement.offsetHeight;try{a.b.addBehavior("#default#homePage"),m=a.b.Rb(b)?"Y":"N"}catch(s){}try{a.b.addBehavior("#default#clientCaps"),p=a.b.connectionType}catch(t){}a.resolution=d;a.colorDepth=f;a.javascriptVersion=l;a.javaEnabled=e;a.cookiesEnabled=k;a.browserWidth=g;a.browserHeight=h;a.connectionType=p;a.homepage=m;a.Lb=1}};a.Q={};a.loadModule=function(c,b){var d=a.Q[c];if(!d){d=k["AppMeasurement_Module_"+c]?new k["AppMeasurement_Module_"+c](a):{};a.Q[c]=a[c]=d;d.eb=function(){return d.ib};d.jb=function(b){if(d.ib=b)a[c+"_onLoad"]=b,a.ia(c+"_onLoad",[a,d],1)||b(a,d)};try{Object.defineProperty?Object.defineProperty(d,"onLoad",{get:d.eb,set:d.jb}):d._olc=1}catch(f){d._olc=1}}b&&(a[c+"_onLoad"]=b,a.ia(c+"_onLoad",[a,d],1)||b(a,d))};a.p=function(c){var b,d;for(b in a.Q)if(!Object.prototype[b]&&(d=a.Q[b])&&(d._olc&&d.onLoad&&(d._olc=0,d.onLoad(a,d)),d[c]&&d[c]()))return 1;return 0};a.Db=function(){var c=Math.floor(1e13*Math.random()),b=a.visitorSampling,d=a.visitorSamplingGroup,d="s_vsn_"+(a.visitorNamespace?a.visitorNamespace:a.account)+(d?"_"+d:""),f=a.cookieRead(d);if(b){b*=100;f&&(f=parseInt(f));if(!f){if(!a.cookieWrite(d,c))return 0;f=c}if(f%1e4>b)return 0}return 1};a.R=function(c,b){var d,f,e,g,h,l;for(d=0;2>d;d++)for(f=0<d?a.Aa:a.g,e=0;e<f.length;e++)if(g=f[e],(h=c[g])||c["!"+g]){if(!b&&("contextData"==g||"retrieveLightData"==g)&&a[g])for(l in a[g])h[l]||(h[l]=a[g][l]);a[g]=h}};a.Va=function(c,b){var d,f,e,g;for(d=0;2>d;d++)for(f=0<d?a.Aa:a.g,e=0;e<f.length;e++)g=f[e],c[g]=a[g],b||c[g]||(c["!"+g]=1)};a.vb=function(a){var b,d,f,e,g,h=0,l,k="",m="";if(a&&255<a.length&&(b=""+a,d=b.indexOf("?"),0<d&&(l=b.substring(d+1),b=b.substring(0,d),e=b.toLowerCase(),f=0,"http://"==e.substring(0,7)?f+=7:"https://"==e.substring(0,8)&&(f+=8),d=e.indexOf("/",f),0<d&&(e=e.substring(f,d),g=b.substring(d),b=b.substring(0,d),0<=e.indexOf("google")?h=",q,ie,start,search_key,word,kw,cd,":0<=e.indexOf("yahoo.co")&&(h=",p,ei,"),h&&l)))){if((a=l.split("&"))&&1<a.length){for(f=0;f<a.length;f++)e=a[f],d=e.indexOf("="),0<d&&0<=h.indexOf(","+e.substring(0,d)+",")?k+=(k?"&":"")+e:m+=(m?"&":"")+e;k&&m?l=k+"&"+m:m=""}d=253-(l.length-m.length)-b.length;a=b+(0<d?g.substring(0,d):"")+"?"+l}return a};a.ab=function(c){var b=a.d.visibilityState,d=["webkitvisibilitychange","visibilitychange"];b||(b=a.d.webkitVisibilityState);if(b&&"prerender"==b){if(c)for(b=0;b<d.length;b++)a.d.addEventListener(d[b],function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState);"visible"==b&&c()});return!1}return!0};a.ea=!1;a.J=!1;a.lb=function(){a.J=!0;a.j()};a.ca=!1;a.V=!1;a.hb=function(c){a.marketingCloudVisitorID=c;a.V=!0;a.j()};a.fa=!1;a.W=!1;a.mb=function(c){a.visitorOptedOut=c;a.W=!0;a.j()};a.Z=!1;a.S=!1;a.Xa=function(c){a.analyticsVisitorID=c;a.S=!0;a.j()};a.ba=!1;a.U=!1;a.Za=function(c){a.audienceManagerLocationHint=c;a.U=!0;a.j()};a.aa=!1;a.T=!1;a.Ya=function(c){a.audienceManagerBlob=c;a.T=!0;a.j()};a.$a=function(c){a.maxDelay||(a.maxDelay=250);return a.p("_d")?(c&&setTimeout(function(){c()},a.maxDelay),!1):!0};a.da=!1;a.I=!1;a.xa=function(){a.I=!0;a.j()};a.isReadyToTrack=function(){var c=!0,b=a.visitor,d,f,e;a.ea||a.J||(a.ab(a.lb)?a.J=!0:a.ea=!0);if(a.ea&&!a.J)return!1;b&&b.isAllowed()&&(a.ca||a.marketingCloudVisitorID||!b.getMarketingCloudVisitorID||(a.ca=!0,a.marketingCloudVisitorID=b.getMarketingCloudVisitorID([a,a.hb]),a.marketingCloudVisitorID&&(a.V=!0)),a.fa||a.visitorOptedOut||!b.isOptedOut||(a.fa=!0,a.visitorOptedOut=b.isOptedOut([a,a.mb]),a.visitorOptedOut!=p&&(a.W=!0)),a.Z||a.analyticsVisitorID||!b.getAnalyticsVisitorID||(a.Z=!0,a.analyticsVisitorID=b.getAnalyticsVisitorID([a,a.Xa]),a.analyticsVisitorID&&(a.S=!0)),a.ba||a.audienceManagerLocationHint||!b.getAudienceManagerLocationHint||(a.ba=!0,a.audienceManagerLocationHint=b.getAudienceManagerLocationHint([a,a.Za]),a.audienceManagerLocationHint&&(a.U=!0)),a.aa||a.audienceManagerBlob||!b.getAudienceManagerBlob||(a.aa=!0,a.audienceManagerBlob=b.getAudienceManagerBlob([a,a.Ya]),a.audienceManagerBlob&&(a.T=!0)),c=a.ca&&!a.V&&!a.marketingCloudVisitorID,b=a.Z&&!a.S&&!a.analyticsVisitorID,d=a.ba&&!a.U&&!a.audienceManagerLocationHint,f=a.aa&&!a.T&&!a.audienceManagerBlob,e=a.fa&&!a.W,c=c||b||d||f||e?!1:!0);a.da||a.I||(a.$a(a.xa)?a.I=!0:a.da=!0);a.da&&!a.I&&(c=!1);return c};a.o=p;a.u=0;a.callbackWhenReadyToTrack=function(c,b,d){var f;f={};f.qb=c;f.pb=b;f.nb=d;a.o==p&&(a.o=[]);a.o.push(f);0==a.u&&(a.u=setInterval(a.j,100))};a.j=function(){var c;if(a.isReadyToTrack()&&(a.kb(),a.o!=p))for(;0<a.o.length;)c=a.o.shift(),c.pb.apply(c.qb,c.nb)};a.kb=function(){a.u&&(clearInterval(a.u),a.u=0)};a.fb=function(c){var b,d,f=p,e=p;if(!a.isReadyToTrack()){b=[];if(c!=p)for(d in f={},c)f[d]=c[d];e={};a.Va(e,!0);b.push(f);b.push(e);a.callbackWhenReadyToTrack(a,a.track,b);return!0}return!1};a.xb=function(){var c=a.cookieRead("s_fid"),b="",d="",f;f=8;var e=4;if(!c||0>c.indexOf("-")){for(c=0;16>c;c++)f=Math.floor(Math.random()*f),b+="0123456789ABCDEF".substring(f,f+1),f=Math.floor(Math.random()*e),d+="0123456789ABCDEF".substring(f,f+1),f=e=16;c=b+"-"+d}a.cookieWrite("s_fid",c,1)||(c=0);return c};a.t=a.track=function(c,b){var d,f=new Date,e="s"+Math.floor(f.getTime()/108e5)%10+Math.floor(1e13*Math.random()),g=f.getYear(),g="t="+a.escape(f.getDate()+"/"+f.getMonth()+"/"+(1900>g?g+1900:g)+" "+f.getHours()+":"+f.getMinutes()+":"+f.getSeconds()+" "+f.getDay()+" "+f.getTimezoneOffset());a.visitor&&a.visitor.getAuthState&&(a.authState=a.visitor.getAuthState());a.p("_s");a.fb(c)||(b&&a.R(b),c&&(d={},a.Va(d,0),a.R(c)),a.Db()&&!a.visitorOptedOut&&(a.analyticsVisitorID||a.marketingCloudVisitorID||(a.fid=a.xb()),a.Hb(),a.usePlugins&&a.doPlugins&&a.doPlugins(a),a.account&&(a.abort||(a.trackOffline&&!a.timestamp&&(a.timestamp=Math.floor(f.getTime()/1e3)),f=k.location,a.pageURL||(a.pageURL=f.href?f.href:f),a.referrer||a.Wa||(f=a.Util.getQueryParam("adobe_mc_ref",null,null,!0),a.referrer=f||void 0===f?void 0===f?"":f:n.document.referrer),a.Wa=1,a.referrer=a.vb(a.referrer),a.p("_g")),a.Ab()&&!a.abort&&(a.visitor&&!a.supplementalDataID&&a.visitor.getSupplementalDataID&&(a.supplementalDataID=a.visitor.getSupplementalDataID("AppMeasurement:"+a._in,a.expectSupplementalData?!1:!0)),a.Bb(),g+=a.zb(),a.Gb(e,g),a.p("_t"),a.referrer=""))),c&&a.R(d,1));a.abort=a.supplementalDataID=a.timestamp=a.pageURLRest=a.linkObject=a.clickObject=a.linkURL=a.linkName=a.linkType=k.s_objectID=a.pe=a.pev1=a.pev2=a.pev3=a.e=a.lightProfileID=0};a.za=[];a.registerPreTrackCallback=function(c){for(var b=[],d=1;d<arguments.length;d++)b.push(arguments[d]);"function"==typeof c?a.za.push([c,b]):a.debugTracking&&a.F("DEBUG: Non function type passed to registerPreTrackCallback");
};a.cb=function(c){a.wa(a.za,c)};a.ya=[];a.registerPostTrackCallback=function(c){for(var b=[],d=1;d<arguments.length;d++)b.push(arguments[d]);"function"==typeof c?a.ya.push([c,b]):a.debugTracking&&a.F("DEBUG: Non function type passed to registerPostTrackCallback")};a.bb=function(c){a.wa(a.ya,c)};a.wa=function(c,b){if("object"==typeof c)for(var d=0;d<c.length;d++){var f=c[d][0],e=c[d][1];e.unshift(b);if("function"==typeof f)try{f.apply(null,e)}catch(g){a.debugTracking&&a.F(g.message)}}};a.tl=a.trackLink=function(c,b,d,f,e){a.linkObject=c;a.linkType=b;a.linkName=d;e&&(a.l=c,a.A=e);return a.track(f)};a.trackLight=function(c,b,d,f){a.lightProfileID=c;a.lightStoreForSeconds=b;a.lightIncrementBy=d;return a.track(f)};a.clearVars=function(){var c,b;for(c=0;c<a.g.length;c++)if(b=a.g[c],"prop"==b.substring(0,4)||"eVar"==b.substring(0,4)||"hier"==b.substring(0,4)||"list"==b.substring(0,4)||"channel"==b||"events"==b||"eventList"==b||"products"==b||"productList"==b||"purchaseID"==b||"transactionID"==b||"state"==b||"zip"==b||"campaign"==b)a[b]=void 0};a.tagContainerMarker="";a.Gb=function(c,b){var d,f=a.trackingServer;d="";var e=a.dc,g="sc.",h=a.visitorNamespace;f?a.trackingServerSecure&&a.ssl&&(f=a.trackingServerSecure):(h||(h=a.account,f=h.indexOf(","),0<=f&&(h=h.substring(0,f)),h=h.replace(/[^A-Za-z0-9]/g,"")),d||(d="2o7.net"),e=e?(""+e).toLowerCase():"d1","2o7.net"==d&&("d1"==e?e="112":"d2"==e&&(e="122"),g=""),f=h+"."+e+"."+g+d);d=a.ssl?"https://":"http://";e=a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks;d+=f+"/b/ss/"+a.account+"/"+(a.mobile?"5.":"")+(e?"10":"1")+"/JS-"+a.version+(a.Kb?"T":"")+(a.tagContainerMarker?"-"+a.tagContainerMarker:"")+"/"+c+"?AQB=1&ndh=1&pf=1&"+(e?"callback=s_c_il["+a._in+"].doPostbacks&et=1&":"")+b+"&AQE=1";a.cb(d);a.tb(d);a.ka()};a.Ua=/{(%?)(.*?)(%?)}/;a.Ob=RegExp(a.Ua.source,"g");a.ub=function(c){if("object"==typeof c.dests)for(var b=0;b<c.dests.length;++b){var d=c.dests[b];if("string"==typeof d.c&&"aa."==d.id.substr(0,3))for(var f=d.c.match(a.Ob),e=0;e<f.length;++e){var g=f[e],h=g.match(a.Ua),k="";"%"==h[1]&&"timezone_offset"==h[2]?k=(new Date).getTimezoneOffset():"%"==h[1]&&"timestampz"==h[2]&&(k=a.yb());d.c=d.c.replace(g,a.escape(k))}}};a.yb=function(){var c=new Date,b=new Date(6e4*Math.abs(c.getTimezoneOffset()));return a.k(4,c.getFullYear())+"-"+a.k(2,c.getMonth()+1)+"-"+a.k(2,c.getDate())+"T"+a.k(2,c.getHours())+":"+a.k(2,c.getMinutes())+":"+a.k(2,c.getSeconds())+(0<c.getTimezoneOffset()?"-":"+")+a.k(2,b.getUTCHours())+":"+a.k(2,b.getUTCMinutes())};a.k=function(a,b){return(Array(a+1).join(0)+b).slice(-a)};a.ta={};a.doPostbacks=function(c){if("object"==typeof c)if(a.ub(c),"object"==typeof a.AudienceManagement&&"function"==typeof a.AudienceManagement.isReady&&a.AudienceManagement.isReady()&&"function"==typeof a.AudienceManagement.passData)a.AudienceManagement.passData(c);else if("object"==typeof c&&"object"==typeof c.dests)for(var b=0;b<c.dests.length;++b){var d=c.dests[b];"object"==typeof d&&"string"==typeof d.c&&"string"==typeof d.id&&"aa."==d.id.substr(0,3)&&(a.ta[d.id]=new Image,a.ta[d.id].alt="",a.ta[d.id].src=d.c)}};a.tb=function(c){a.i||a.Cb();a.i.push(c);a.ma=a.C();a.Sa()};a.Cb=function(){a.i=a.Eb();a.i||(a.i=[])};a.Eb=function(){var c,b;if(a.ra()){try{(b=k.localStorage.getItem(a.pa()))&&(c=k.JSON.parse(b))}catch(d){}return c}};a.ra=function(){var c=!0;a.trackOffline&&a.offlineFilename&&k.localStorage&&k.JSON||(c=!1);return c};a.Ja=function(){var c=0;a.i&&(c=a.i.length);a.q&&c++;return c};a.ka=function(){if(a.q&&(a.B&&a.B.complete&&a.B.G&&a.B.va(),a.q))return;a.Ka=p;if(a.qa)a.ma>a.O&&a.Qa(a.i),a.ua(500);else{var c=a.ob();if(0<c)a.ua(c);else if(c=a.Ga())a.q=1,a.Fb(c),a.Jb(c)}};a.ua=function(c){a.Ka||(c||(c=0),a.Ka=setTimeout(a.ka,c))};a.ob=function(){var c;if(!a.trackOffline||0>=a.offlineThrottleDelay)return 0;c=a.C()-a.Pa;return a.offlineThrottleDelay<c?0:a.offlineThrottleDelay-c};a.Ga=function(){if(0<a.i.length)return a.i.shift()};a.Fb=function(c){if(a.debugTracking){var b="AppMeasurement Debug: "+c;c=c.split("&");var d;for(d=0;d<c.length;d++)b+="\n	"+a.unescape(c[d]);a.F(b)}};a.gb=function(){return a.marketingCloudVisitorID||a.analyticsVisitorID};a.Y=!1;var t;try{t=JSON.parse('{"x":"y"}')}catch(w){t=null}t&&"y"==t.x?(a.Y=!0,a.X=function(a){return JSON.parse(a)}):k.$&&k.$.parseJSON?(a.X=function(a){return k.$.parseJSON(a)},a.Y=!0):a.X=function(){return null};a.Jb=function(c){var b,d,f;a.gb()&&2047<c.length&&("undefined"!=typeof XMLHttpRequest&&(b=new XMLHttpRequest,"withCredentials"in b?d=1:b=0),b||"undefined"==typeof XDomainRequest||(b=new XDomainRequest,d=2),b&&(a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks)&&(a.Y?b.Ba=!0:b=0));!b&&a.Ta&&(c=c.substring(0,2047));!b&&a.d.createElement&&(0!=a.usePostbacks||a.AudienceManagement&&a.AudienceManagement.isReady())&&(b=a.d.createElement("SCRIPT"))&&"async"in b&&((f=(f=a.d.getElementsByTagName("HEAD"))&&f[0]?f[0]:a.d.body)?(b.type="text/javascript",b.setAttribute("async","async"),d=3):b=0);b||(b=new Image,b.alt="",b.abort||"undefined"===typeof k.InstallTrigger||(b.abort=function(){b.src=p}));b.Da=function(){try{b.G&&(clearTimeout(b.G),b.G=0)}catch(a){}};b.onload=b.va=function(){a.bb(c);b.Da();a.sb();a.ga();a.q=0;a.ka();if(b.Ba){b.Ba=!1;try{a.doPostbacks(a.X(b.responseText))}catch(d){}}};b.onabort=b.onerror=b.Ha=function(){b.Da();(a.trackOffline||a.qa)&&a.q&&a.i.unshift(a.rb);a.q=0;a.ma>a.O&&a.Qa(a.i);a.ga();a.ua(500)};b.onreadystatechange=function(){4==b.readyState&&(200==b.status?b.va():b.Ha())};a.Pa=a.C();if(1==d||2==d){var e=c.indexOf("?");f=c.substring(0,e);e=c.substring(e+1);e=e.replace(/&callback=[a-zA-Z0-9_.\[\]]+/,"");1==d?(b.open("POST",f,!0),b.send(e)):2==d&&(b.open("POST",f),b.send(e))}else if(b.src=c,3==d){if(a.Na)try{f.removeChild(a.Na)}catch(g){}f.firstChild?f.insertBefore(b,f.firstChild):f.appendChild(b);a.Na=a.B}b.G=setTimeout(function(){b.G&&(b.complete?b.va():(a.trackOffline&&b.abort&&b.abort(),b.Ha()))},5e3);a.rb=c;a.B=k["s_i_"+a.replace(a.account,",","_")]=b;if(a.useForcedLinkTracking&&a.K||a.A)a.forcedLinkTrackingTimeout||(a.forcedLinkTrackingTimeout=250),a.ha=setTimeout(a.ga,a.forcedLinkTrackingTimeout)};a.sb=function(){if(a.ra()&&!(a.Oa>a.O))try{k.localStorage.removeItem(a.pa()),a.Oa=a.C()}catch(c){}};a.Qa=function(c){if(a.ra()){a.Sa();try{k.localStorage.setItem(a.pa(),k.JSON.stringify(c)),a.O=a.C()}catch(b){}}};a.Sa=function(){if(a.trackOffline){if(!a.offlineLimit||0>=a.offlineLimit)a.offlineLimit=10;for(;a.i.length>a.offlineLimit;)a.Ga()}};a.forceOffline=function(){a.qa=!0};a.forceOnline=function(){a.qa=!1};a.pa=function(){return a.offlineFilename+"-"+a.visitorNamespace+a.account};a.C=function(){return(new Date).getTime()};a.La=function(a){a=a.toLowerCase();return 0!=a.indexOf("#")&&0!=a.indexOf("about:")&&0!=a.indexOf("opera:")&&0!=a.indexOf("javascript:")?!0:!1};a.setTagContainer=function(c){var b,d,f;a.Kb=c;for(b=0;b<a._il.length;b++)if((d=a._il[b])&&"s_l"==d._c&&d.tagContainerName==c){a.R(d);if(d.lmq)for(b=0;b<d.lmq.length;b++)f=d.lmq[b],a.loadModule(f.n);if(d.ml)for(f in d.ml)if(a[f])for(b in c=a[f],f=d.ml[f],f)!Object.prototype[b]&&("function"!=typeof f[b]||0>(""+f[b]).indexOf("s_c_il"))&&(c[b]=f[b]);if(d.mmq)for(b=0;b<d.mmq.length;b++)f=d.mmq[b],a[f.m]&&(c=a[f.m],c[f.f]&&"function"==typeof c[f.f]&&(f.a?c[f.f].apply(c,f.a):c[f.f].apply(c)));if(d.tq)for(b=0;b<d.tq.length;b++)a.track(d.tq[b]);d.s=a;break}};a.Util={urlEncode:a.escape,urlDecode:a.unescape,cookieRead:a.cookieRead,cookieWrite:a.cookieWrite,getQueryParam:function(c,b,d,f){var e,g="";b||(b=a.pageURL?a.pageURL:k.location);d=d?d:"&";if(!c||!b)return g;b=""+b;e=b.indexOf("?");if(0>e)return g;b=d+b.substring(e+1)+d;if(!f||!(0<=b.indexOf(d+c+d)||0<=b.indexOf(d+c+"="+d))){e=b.indexOf(d+c+"=");if(0>e)return g;b=b.substring(e+d.length+c.length+1);e=b.indexOf(d);0<=e&&(b=b.substring(0,e));0<b.length&&(g=a.unescape(b));return g}}};a.H="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" ");a.g=a.H.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" "));a.na="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" ");a.P=a.na.slice(0);a.Aa="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData usePostbacks registerPreTrackCallback registerPostTrackCallback AudienceManagement".split(" ");for(m=0;250>=m;m++)76>m&&(a.g.push("prop"+m),a.P.push("prop"+m)),a.g.push("eVar"+m),a.P.push("eVar"+m),6>m&&a.g.push("hier"+m),4>m&&a.g.push("list"+m);m="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID".split(" ");a.g=a.g.concat(m);a.H=a.H.concat(m);a.ssl=0<=k.location.protocol.toLowerCase().indexOf("https");a.charSet="UTF-8";a.contextData={};a.offlineThrottleDelay=0;a.offlineFilename="AppMeasurement.offline";a.Pa=0;a.ma=0;a.O=0;a.Oa=0;a.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";a.w=k;a.d=k.document;try{if(a.Ta=!1,navigator){var v=navigator.userAgent;if("Microsoft Internet Explorer"==navigator.appName||0<=v.indexOf("MSIE ")||0<=v.indexOf("Trident/")&&0<=v.indexOf("Windows NT 6"))a.Ta=!0}}catch(x){}a.ga=function(){a.ha&&(k.clearTimeout(a.ha),a.ha=p);a.l&&a.K&&a.l.dispatchEvent(a.K);a.A&&("function"==typeof a.A?a.A():a.l&&a.l.href&&(a.d.location=a.l.href));a.l=a.K=a.A=0};a.Ra=function(){a.b=a.d.body;a.b?(a.v=function(c){var b,d,f,e,g;if(!(a.d&&a.d.getElementById("cppXYctnr")||c&&c["s_fe_"+a._in])){if(a.Ca)if(a.useForcedLinkTracking)a.b.removeEventListener("click",a.v,!1);else{a.b.removeEventListener("click",a.v,!0);a.Ca=a.useForcedLinkTracking=0;return}else a.useForcedLinkTracking=0;a.clickObject=c.srcElement?c.srcElement:c.target;try{if(!a.clickObject||a.N&&a.N==a.clickObject||!(a.clickObject.tagName||a.clickObject.parentElement||a.clickObject.parentNode))a.clickObject=0;else{var h=a.N=a.clickObject;a.la&&(clearTimeout(a.la),a.la=0);a.la=setTimeout(function(){a.N==h&&(a.N=0)},1e4);f=a.Ja();a.track();if(f<a.Ja()&&a.useForcedLinkTracking&&c.target){for(e=c.target;e&&e!=a.b&&"A"!=e.tagName.toUpperCase()&&"AREA"!=e.tagName.toUpperCase();)e=e.parentNode;if(e&&(g=e.href,a.La(g)||(g=0),d=e.target,c.target.dispatchEvent&&g&&(!d||"_self"==d||"_top"==d||"_parent"==d||k.name&&d==k.name))){try{b=a.d.createEvent("MouseEvents")}catch(l){b=new k.MouseEvent}if(b){try{b.initMouseEvent("click",c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget)}catch(m){b=0}b&&(b["s_fe_"+a._in]=b.s_fe=1,c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),c.preventDefault(),a.l=c.target,a.K=b)}}}}}catch(n){a.clickObject=0}}},a.b&&a.b.attachEvent?a.b.attachEvent("onclick",a.v):a.b&&a.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&a.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&k.MouseEvent)&&(a.Ca=1,a.useForcedLinkTracking=1,a.b.addEventListener("click",a.v,!0)),a.b.addEventListener("click",a.v,!1))):setTimeout(a.Ra,30)};a.Ra();r?a.setAccount(r):a.F("Error, missing Report Suite ID in AppMeasurement initialization");a.loadModule("ActivityMap");a.getTimeParting=new Function("t","z",""+"var s=this,cy;dc=new Date('1/1/2000');"+"if(dc.getDay()!=6||dc.getMonth()!=0){return'Data Not Available'}"+"else{;z=parseFloat(z);var dsts=new Date(s.dstStart);"+"var dste=new Date(s.dstEnd);fl=dste;cd=new Date();if(cd>dsts&&cd<fl)"+"{z=z+1}else{z=z};utc=cd.getTime()+(cd.getTimezoneOffset()*60000);"+"tz=new Date(utc + (3600000*z));thisy=tz.getFullYear();"+"var days=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday',"+"'Saturday'];if(thisy!=s.currentYear){return'Data Not Available'}else{;"+"thish=tz.getHours();thismin=tz.getMinutes();thisd=tz.getDay();"+"var dow=days[thisd];var ap='AM';var dt='Weekday';"+""+"if(thisd==6||thisd==0){dt='Weekend'};"+"var timestring=thish+':00';if(t=='h'){return timestring}"+"if(t=='d'){return dow};if(t=='w'){return dt}}};");(function(a){a.currentYear=(new Date).getFullYear();var mar1_day=new Date("03/01/"+a.currentYear).getDay(),dstStartDay=7-mar1_day+7+1,nov1_day=new Date("11/01/"+a.currentYear).getDay(),dstEndDay=(7-nov1_day)%7+1;a.dstStart="03/"+dstStartDay+"/"+a.currentYear;a.dstEnd="11/"+dstEndDay+"/"+a.currentYear})(a);a.getNewRepeat=new Function("d","cn",""+"var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:"+"'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length="+"=0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct"+"-sval[0]<30*60*1000&&sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'N"+"ew';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}");a.getAamSegments=new Function("a","b",""+"var s=this;var c=s.c_r(a);if(c){c=s.repl(c,b+'=','');}ret"+"urn c");a.split=new Function("l","d",""+"var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x"+"++]=l.substring(0,i);l=l.substring(i+d.length);}return a");a.repl=new Function("x","o","n",""+"var i=x.indexOf(o),l=n.length;while(x&&i>=0){x=x.substring(0,i)+n+x."+"substring(i+o.length);i=x.indexOf(o,i+l)}return x")};function s_gi(a){var h,n=window.s_c_il,p,l,r=a.split(","),s,q,u=0;if(n)for(p=0;!u&&p<n.length;){h=n[p];if("s_c"==h._c&&(h.account||h.oun))if(h.account&&h.account==a)u=1;else for(l=h.account?h.account:h.oun,l=h.allAccounts?h.allAccounts:l.split(","),s=0;s<r.length;s++)for(q=0;q<l.length;q++)r[s]==l[q]&&(u=1);p++}u||(h=new AppMeasurement);h.setAccount?h.setAccount(a):h.sa&&h.sa(a);return h}AppMeasurement.getInstance=s_gi;window.s_objectID||(window.s_objectID=0);function s_pgicq(){var a=window,h=a.s_giq,n,p,l;if(h)for(n=0;n<h.length;n++)p=h[n],l=s_gi(p.oun),l.setAccount(p.un),l.setTagContainer(p.tagContainerName);a.s_giq=0}s_pgicq()};window.addFreewheelLibrary=function(){(function(){var R="SDK_"+"6.33.0-99b42ba0-201912122256".replace(/[^\w]/g,"_"),w="undefined"!=typeof window?window:"undefined"!=typeof GLOBAL?GLOBAL:this;w.tv=w.tv||{};w.tv.freewheel=w.tv.freewheel||{};w.tv.freewheel[R]=function(w){var a={version:"js-6.33.0-99b42ba0-201912122256"};"undefined"!==typeof window&&(window._fw_admanager=window._fw_admanager||{},window._fw_admanager.version=a.version);a.LOG_LEVEL_QUIET=0;a.LOG_LEVEL_INFO=1;a.LOG_LEVEL_DEBUG=2;a.setLogLevel=function(b){a.warn=a.log=a.debug=function(){};if("undefined"!==typeof console){try{window.localStorage&&window.localStorage.getItem("fwLogLevel")&&-1<window.localStorage.getItem("fwLogLevel")&&(b=window.localStorage.getItem("fwLogLevel"))}catch(c){console.warn(">FW Common.setLogLevel"+c.description)}b>a.LOG_LEVEL_QUIET&&(a.log=function(){console.log(">FW "+(new Date).toTimeString().substr(3,6)+Array.prototype.slice.call(arguments).join(" "))},a.warn=function(){console.warn(">FW "+(new Date).toTimeString().substr(3,6)+Array.prototype.slice.call(arguments).join(" "))},b>a.LOG_LEVEL_INFO&&(a.debug=function(){console.log(">FW "+(new Date).toTimeString().substr(3,6)+Array.prototype.slice.call(arguments).join(" "))}))}};a.setLogLevel(a.LOG_LEVEL_DEBUG);a.log("FreeWheel Integration Runtime",a.version);a.proxyUrl=null;a.proxyAuthenticationParameter=null;a.setProxy=function(b){"string"===typeof b?("/"!==b.charAt(b.length-1)&&(b+="/"),a.proxyUrl=b):a.proxyUrl=null};a.setProxyAuthenticationParameter=function(b,c){a.proxyAuthenticationParameter=2<=arguments.length&&b?{key:b,value:c||""}:null};a.checkUserAgent=function(b){a.PLATFORM_IS_WINDOWSPHONE=-1<b.search("windows phone");a.PLATFORM_IS_IPAD=-1<b.search("ipad");a.PLATFORM_IS_IPHONE_IPOD=-1<b.search("iphone")||-1<b.search("ipod");a.PLATFORM_IS_CHROMECAST=-1<b.search("crkey");var c=function(a){return(a=b.match(a))&&0<a.length?(a=a[0].match(/\d+/g),1*a[0]+.1*(1<a.length?a[1]:0)):0};a.PLATFORM_IE_MOBILE_VERSION=c(/iemobile\/\d+\.\d+/);a.PLATFORM_IOS_VERSION=c(/os \d+_\d+/);a.PLATFORM_ANDROID_VERSION=function(){if(-1<b.indexOf("transformer"))return 3.2;var a=c(/android \d+\.\d+/);return 0!==a?a:c(/android \d+/)}();a.PLATFORM_IS_SAFARI=0<a.PLATFORM_IOS_VERSION&&-1<b.search("applewebkit")||0===a.PLATFORM_ANDROID_VERSION&&0>b.search("chrome")&&-1<b.search("safari");a.PLATFORM_IS_CHROME=0>b.search("edge")&&-1<b.search("chrome");a.PLATFORM_IS_FIREFOX=-1<b.search("firefox");a.PLATFORM_IS_MOBILE=0<a.PLATFORM_IOS_VERSION||0<a.PLATFORM_ANDROID_VERSION;a.PLATFORM_BROWSER_VERSION=function(a){var b="",c;-1!==(c=a.indexOf("opr/"))?b=a.substring(c+4):-1!==(c=a.indexOf("opera"))?(b=a.substring(c+6),-1!==(c=a.indexOf("version"))&&(b=a.substring(c+8))):-1!==(c=a.indexOf("rv:"))?b=a.substring(c+3):-1!==(c=a.indexOf("msie"))?b=a.substring(c+5):-1!==(c=a.indexOf("edge"))?b=a.substring(c+5):-1!==(c=a.indexOf("chrome"))?b=a.substring(c+7):-1!==(c=a.indexOf("safari"))?(b=a.substring(c+7),-1!==(c=a.indexOf("version"))&&(b=a.substring(c+8))):-1!==(c=a.indexOf("firefox"))?b=a.substring(c+8):a.lastIndexOf(" ")+1<(c=a.lastIndexOf("/"))&&(b=a.substring(c+1));var d;-1!==(d=b.indexOf(";"))&&(b=b.substring(0,d));-1!==(d=b.indexOf(" "))&&(b=b.substring(0,d));return(a=parseInt(""+b,10))?a:0}(b);a.PLATFORM_ID=a.PLATFORM_IS_MOBILE?0<a.PLATFORM_ANDROID_VERSION?"Android"+a.PLATFORM_ANDROID_VERSION:a.PLATFORM_IS_IPAD?"iPad"+a.PLATFORM_IOS_VERSION:a.PLATFORM_IS_IPHONE_IPOD?"iPhone"+a.PLATFORM_IOS_VERSION:"UnknownMobile":"Desktop";a.log("Device:",a.PLATFORM_ID,"PLATFORM_IS_SAFARI:",a.PLATFORM_IS_SAFARI,"PLATFORM_IS_CHROME:",a.PLATFORM_IS_CHROME)};a.checkUserAgent(navigator.userAgent.toLowerCase());a.PLATFORM_EVENT_CLICK=a.PLATFORM_IS_MOBILE?"touchend":"click";a.MOBILE_EVENT_DRAG="touchmove";a.PLATFORM_SEND_REQUEST_BY_FORM=!1;a.PLATFORM_HIDE_AND_SHOW_CONTENT_VIDEO_BY_MOVE_POSITION=3.1<=a.PLATFORM_ANDROID_VERSION;a.PLATFORM_HIDE_AND_SHOW_CONTENT_VIDEO_BY_SET_DISPLAY=!0;a.PLATFORM_SUPPORT_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT=a.PLATFORM_IS_IPAD||a.PLATFORM_IS_IPHONE_IPOD;a.PLATFORM_AUTO_SEEK_AFTER_MIDROLL=a.PLATFORM_IS_IPAD;a.PLATFORM_NOT_SUPPORT_OVERLAY_AD=a.PLATFORM_IS_IPHONE_IPOD||0<a.PLATFORM_ANDROID_VERSION&&3.1>a.PLATFORM_ANDROID_VERSION||a.PLATFORM_IS_WINDOWSPHONE;a.PLATFORM_FILL_VIDEO_POOL_FOR_MIDROLL=4.2<=a.PLATFORM_IOS_VERSION;a.PLATFORM_NOT_SUPPORT_MIDROLL_AD=2.2<=a.PLATFORM_ANDROID_VERSION&&3>=a.PLATFORM_ANDROID_VERSION||9<=a.PLATFORM_IE_MOBILE_VERSION;a.PLATFORM_NOT_SUPPORT_VIDEO_AD=0<a.PLATFORM_ANDROID_VERSION&&2.1>=a.PLATFORM_ANDROID_VERSION;a.PLATFORM_DETECT_FULL_SCREEN_FOR_MIDROLL=a.PLATFORM_IS_IPAD&&4.2<=a.PLATFORM_IOS_VERSION;a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO=a.PLATFORM_IS_IPHONE_IPOD&&10>a.PLATFORM_IOS_VERSION||a.PLATFORM_IS_WINDOWSPHONE||a.PLATFORM_IS_CHROMECAST;a.PLATFORM_NOT_FIRE_CLICK_WHEN_AD_VIDEO_PAUSED=3.1<=a.PLATFORM_ANDROID_VERSION||10<=a.PLATFORM_IOS_VERSION;a.PLATFORM_WAIT_WHEN_AD_VIDEO_TIMEOUT=0<a.PLATFORM_ANDROID_VERSION&&3>=a.PLATFORM_ANDROID_VERSION;a.PLATFORM_VIDEO_DOESNOT_SUPPORT_TIMEUPDATE=9<=a.PLATFORM_IE_MOBILE_VERSION;a.PLATFORM_PLAY_DUMMY_VIDEO_FOR_PREROLL=0<a.PLATFORM_IOS_VERSION&&4.2>a.PLATFORM_IOS_VERSION&&4<=a.PLATFORM_IOS_VERSION;a.PLATFORM_NOT_WAIT_FOR_ERROR_WHEN_PLAY_DUMMY_VIDEO_FOR_PREROLL=!1;a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT=0===a.PLATFORM_IOS_VERSION||4<=a.PLATFORM_IOS_VERSION&&4.2>a.PLATFORM_IOS_VERSION;a.PLATFORM_NOT_SUPPORT_OVERLAY_CLICK_WHEN_CONTROLS_IS_TRUE=a.PLATFORM_IS_IPAD;a.PLATFORM_BLOCKS_AUTOPLAY=a.PLATFORM_IS_MOBILE||a.PLATFORM_IS_SAFARI||a.PLATFORM_IS_CHROME&&(0<a.PLATFORM_ANDROID_VERSION||64<=a.PLATFORM_BROWSER_VERSION);a.RENDERER_STATE_INIT=1;a.RENDERER_STATE_STARTING=2;a.RENDERER_STATE_STARTED=3;a.RENDERER_STATE_COMPLETING=4;a.RENDERER_STATE_COMPLETED=5;a.RENDERER_STATE_FAILED=6;a.TRANSLATOR_STATE_INIT=a.RENDERER_STATE_INIT;a.TRANSLATOR_STATE_STARTING=a.RENDERER_STATE_STARTING;a.TRANSLATOR_STATE_STARTED=a.RENDERER_STATE_STARTED;a.TRANSLATOR_STATE_COMPLETING=a.RENDERER_STATE_COMPLETING;a.TRANSLATOR_STATE_COMPLETED=a.RENDERER_STATE_COMPLETED;a.TRANSLATOR_STATE_FAILED=a.RENDERER_STATE_FAILED;a.EVENT_AD="adEvent";a.EVENT_AD_BUFFERING_START="adBufferingStart";a.EVENT_AD_BUFFERING_END="adBufferingEnd";a.EVENT_SLOT_IMPRESSION="slotImpression";a.EVENT_SLOT_END="slotEnd";a.EVENT_AD_INITIATED="adInitiated";a.EVENT_AD_IMPRESSION="defaultImpression";a.EVENT_AD_IMPRESSION_END="adEnd";a.EVENT_AD_QUARTILE="quartile";a.EVENT_AD_FIRST_QUARTILE="firstQuartile";a.EVENT_AD_MIDPOINT="midPoint";a.EVENT_AD_THIRD_QUARTILE="thirdQuartile";a.EVENT_AD_SKIPPED="adSkipped";a.EVENT_AD_COMPLETE="complete";a.EVENT_AD_CLICK="defaultClick";a.EVENT_AD_MUTE="_mute";a.EVENT_AD_UNMUTE="_un-mute";a.EVENT_AD_COLLAPSE="_collapse";a.EVENT_AD_EXPAND="_expand";a.EVENT_AD_PAUSE="_pause";a.EVENT_AD_RESUME="_resume";a.EVENT_AD_REWIND="_rewind";a.EVENT_AD_ACCEPT_INVITATION="_accept-invitation";a.EVENT_AD_CLOSE="_close";a.EVENT_AD_MINIMIZE="_minimize";a.EVENT_ERROR="_e_unknown";a.EVENT_RESELLER_NO_AD="resellerNoAd";a.EVENT_AD_MEASUREMENT="concreteEvent";a.EVENT_EXTENSION_LOADED="extensionLoaded";a.EVENT_AD_VOLUME_CHANGE="adVolumeChange";a.EVENT_AD_AUTO_PLAY_BLOCKED="videoAutoPlayBlocked";a.INFO_KEY_CUSTOM_ID="customId";a.INFO_KEY_MODULE_TYPE="moduleType";a.MODULE_TYPE_EXTENSION="extension";a.MODULE_TYPE_RENDERER="renderer";a.MODULE_TYPE_TRANSLATOR="translator";a.INFO_KEY_ERROR_CODE="errorCode";a.INFO_KEY_ERROR_INFO="errorInfo";a.INFO_KEY_ERROR_MODULE="errorModule";a.INFO_KEY_VAST_ERROR_CODE="vastErrorCode";a.ERROR_IO="_e_io";a.ERROR_TIMEOUT="_e_timeout";a.ERROR_NULL_ASSET="_e_null-asset";a.ERROR_ADINSTANCE_UNAVAILABLE="_e_adinst-unavail";a.ERROR_UNKNOWN="_e_unknown";a.ERROR_MISSING_PARAMETER="_e_missing-param";a.ERROR_NO_AD_AVAILABLE="_e_no-ad";a.ERROR_PARSE="_e_parse";a.ERROR_INVALID_VALUE="_e_invalid-value";a.ERROR_INVALID_SLOT="_e_invalid-slot";a.ERROR_NO_RENDERER="_e_no-renderer";a.ERROR_DEVICE_LIMIT="_e_device-limit";a.ERROR_3P_COMPONENT="_e_3p-comp";a.ERROR_UNSUPPORTED_3P_FEATURE="_e_unsupp-3p-feature";a.ERROR_SECURITY="_e_security";a.ERROR_UNMATCHED_SLOT_SIZE="_e_slot-size-unmatch";a.INFO_KEY_URL="url";a.INFO_KEY_SHOW_BROWSER="showBrowser";a.INFO_KEY_CUSTOM_EVENT_NAME="customEventName";a.INFO_KEY_NEED_EMPTY_CT="needEmptyCT";a.INFO_KEY_CONCRETE_EVENT_ID="concreteEventId";a.EVENT_TYPE_CLICK_TRACKING="CLICKTRACKING";a.EVENT_TYPE_IMPRESSION="IMPRESSION";a.EVENT_TYPE_CLICK="CLICK";a.EVENT_TYPE_STANDARD="STANDARD";a.EVENT_TYPE_GENERIC="GENERIC";a.EVENT_TYPE_ERROR="ERROR";a.EVENT_VIDEO_VIEW="videoView";a.SHORT_EVENT_TYPE_IMPRESSION="i";a.SHORT_EVENT_TYPE_CLICK="c";a.SHORT_EVENT_TYPE_STANDARD="s";a.SHORT_EVENT_TYPE_ERROR="e";a.INIT_VALUE_ZERO="0";a.INIT_VALUE_ONE="1";a.INIT_VALUE_TWO="2";a.INFO_KEY_PARAMETERS="parameters";a.URL_PARAMETER_KEY_ET="et";a.URL_PARAMETER_KEY_CN="cn";a.URL_PARAMETER_KEY_INIT="init";a.URL_PARAMETER_KEY_CT="ct";a.URL_PARAMETER_KEY_METR="metr";a.URL_PARAMETER_KEY_CR="cr";a.URL_PARAMETER_KEY_KEY_VALUE="kv";a.URL_PARAMETER_KEY_ERROR_INFO="additional";a.URL_PARAMETER_KEY_ERROR_MODULE="renderer";a.URL_PARAMETER_KEY_CREATIVE_RENDITION_ID="reid";a.URL_PARAMETER_KEY_CONCRETE_EVENT_ID="creid";a.CAPABILITY_SLOT_TEMPLATE="sltp";a.CAPABILITY_DISPLAY_REFRESH="rfnt";a.CAPABILITY_MULTIPLE_CREATIVE_RENDITIONS="emcr";a.CAPABILITY_RECORD_VIDEO_VIEW="exvt";a.CAPABILITY_CHECK_COMPANION="cmpn";a.CAPABILITY_CHECK_TARGETING="targ";a.CAPABILITY_RESET_EXCLUSIVITY="rste";a.CAPABILITY_FALLBACK_UNKNOWN_ASSET="unka";a.CAPABILITY_FALLBACK_UNKNOWN_SITE_SECTION="unks";a.CAPABILITY_FALLBACK_ADS="fbad";a.CAPABILITY_SLOT_CALLBACK="slcb";a.CAPABILITY_NULL_CREATIVE="nucr";a.CAPABILITY_AUTO_EVENT_TRACKING="aeti";a.CAPABILITY_RENDERER_MANIFEST="rema";a.CAPABILITY_REQUIRE_VIDEO_CALLBACK="vicb";a.CAPABILITY_SKIP_AD_SELECTION="skas";a.SLOT_TYPE_TEMPORAL="temporal";a.SLOT_TYPE_VIDEOPLAYER_NONTEMPORAL="videoPlayerNonTemporal";a.SLOT_TYPE_SITESECTION_NONTEMPORAL="siteSectionNonTemporal";a.TIME_POSITION_CLASS_PREROLL="PREROLL";a.TIME_POSITION_CLASS_MIDROLL="MIDROLL";a.TIME_POSITION_CLASS_POSTROLL="POSTROLL";a.TIME_POSITION_CLASS_OVERLAY="OVERLAY";a.TIME_POSITION_CLASS_DISPLAY="DISPLAY";a.TIME_POSITION_CLASS_PAUSE_MIDROLL="PAUSE_MIDROLL";a.EVENT_REQUEST_INITIATED="onRequestInitiated";a.EVENT_REQUEST_COMPLETE="onRequestComplete";a.EVENT_SLOT_STARTED="onSlotStarted";a.EVENT_SLOT_ENDED="onSlotEnded";a.EVENT_CONTENT_VIDEO_PAUSED="contentVideoPaused";a.EVENT_CONTENT_VIDEO_RESUMED="contentVideoResumed";a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST="contentVideoPauseRequest";a.EVENT_CONTENT_VIDEO_RESUME_REQUEST="contentVideoResumeRequest";a.CAPABILITY_STATUS_OFF=0;a.CAPABILITY_STATUS_ON=1;a.PARAMETER_LEVEL_PROFILE=0;a.PARAMETER_LEVEL_GLOBAL=1;a.PARAMETER_LEVEL_OVERRIDE=5;a.PARAMETER_ENABLE_FORM_TRANSPORT="sdk.enableFormTransport";a.PARAMETER_DESIRED_BITRATE="desiredBitrate";a.PARAMETER_VIDEO_POOL_SIZE="sdk.videoPoolSize";a.PARAMETER_PAGE_SLOT_CONTENT_TYPE="sdk.pageSlotContentType";a.PARAMETER_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT="PARAMETER_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT";a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT="extension.ad.control.clickElement";a.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED="extension.contentVideo.enabled";a.PARAMETER_EXTENSION_CONTENT_VIDEO_RESPOND_PAUSE_RESUME="extension.contentVideo.respondPauseResume";a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SEEK_BACK="extension.contentVideo.autoSeekBack";a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SOURCE_RESTORE="extension.contentVideo.autoSourceRestore";a.PARAMETER_EXTENSION_VIDEO_STATE_ENABLED="extension.videoState.enabled";a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT="renderer.video.startDetectTimeout";a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT="renderer.video.progressDetectTimeout";a.PARAMETER_RENDERER_VIDEO_ANDROID_DELAY="renderer.video.android.delay";a.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE="renderer.video.displayControlsWhenPause";a.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION="renderer.video.clickDetection";a.PARAMETER_RENDERER_VIDEO_PLAY_AFTER_STALLED="renderer.video.playAfterStalled";a.PARAMETER_EXTENSION_SURVEY_ENABLED="extension.survey.enabled";a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE="autoPauseAdOnVisibilityChange";a.PARAMETER_DISABLE_CORS_ENFORCEMENT="disableCORSEnforcement";a.PARAMETER_RENDERER_DISPLAY_COAD_SCRIPT_NAME="renderer.html.coadScriptName";a.PARAMETER_RENDERER_HTML_SHOULD_BACKGROUND_TRANSPARENT="renderer.html.isBackgroundTransparent";a.PARAMETER_RENDERER_HTML_SHOULD_END_AFTER_DURATION="renderer.html.shouldEndAfterDuration";a.PARAMETER_RENDERER_HTML_AD_LOAD_TIMEOUT="renderer.html.adLoadTimeout";a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE="renderer.html.placementType";a.PARAMETER_RENDERER_HTML_BOOTSTRAP="renderer.html.bootstrap";a.PARAMETER_RENDERER_HTML_PRIMARY_ANCHOR="renderer.html.primaryAnchor";a.PARAMETER_RENDERER_HTML_MARGIN_WIDTH="renderer.html.marginWidth";a.PARAMETER_RENDERER_HTML_MARGIN_HEIGHT="renderer.html.marginHeight";a.PARAMETER_VPAID_CREATIVE_TIMEOUT_DELAY="renderer.vpaid.creativeTimeoutDelay";a.PARAMETER_VAST_TIMEOUT_IN_MILLISECONDS="translator.vast.timeoutInMilliseconds";a.PARAMETER_VAST_MAX_WRAPPER_COUNT="translator.vast.maxWrapperCount";a.VAST_DEFAULT_MAX_WRAPPER_COUNT=5;a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INLINE="inline";a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INTERSTITIAL="interstitial";a.PARAMETER_RENDERER_HTML_BASEUNIT_INTERSTITIAL="app-interstitial";a.PARAMETER_USE_CMP="useCMP";a.PARAMETER_USE_CCPA_USPAPI="useCCPA_USPAPI";a.ID_TYPE_FW=1;a.ID_TYPE_CUSTOM=2;a.ID_TYPE_GROUP=3;a.VIDEO_STATE_PLAYING=1;a.VIDEO_STATE_PAUSED=2;a.VIDEO_STATE_STOPPED=3;a.VIDEO_STATE_COMPLETED=4;a.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED=1;a.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED=2;a.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE=3;a.VIDEO_ASSET_AUTO_PLAY_TYPE_NON_AUTO_PLAY=3;a.VIDEO_ASSET_DURATION_TYPE_EXACT="exact";a.VIDEO_ASSET_DURATION_TYPE_VARIABLE="variable";a.ADUNIT_PREROLL="preroll";a.ADUNIT_MIDROLL="midroll";a.ADUNIT_POSTROLL="postroll";a.ADUNIT_OVERLAY="overlay";a.ADUNIT_STREAM_PREROLL="stream_preroll";a.ADUNIT_STREAM_POSTROLL="stream_postroll";a.SLOT_LOCATION_PLAYER="player";a.SLOT_LOCATION_EXTERNAL="external";a.SLOT_OPTION_INITIAL_AD_STAND_ALONE=0;a.SLOT_OPTION_INITIAL_AD_KEEP_ORIGINAL=1;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_ONLY=2;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_STAND_ALONE=3;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_THEN_STAND_ALONE=4;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE=5;a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE=6;a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE_IF_TEMPORAL=7;a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE_IF_TEMPORAL=8;a.REQUEST_MODE_ON_DEMAND="on-demand";a.REQUEST_MODE_LIVE="live";a.MINIMUM_VAST_VERSION_SUPPORTED=2;a.MAXIMUM_VAST_VERSION_SUPPORTED=4;a.ERROR_VAST_XML_PARSING="100";a.ERROR_VAST_SCHEMA_VALIDATION="101";a.ERROR_VAST_VERSION_NOT_SUPPORTED="102";a.ERROR_VAST_TRACKING_ERROR="200";a.ERROR_VAST_LINEARITY_NOT_MATCH="201";a.ERROR_VAST_NO_AD="303";a.ERROR_VAST_WRAPPER_LIMIT_REACH="302";a.ERROR_VAST_URI_TIMEOUT="301";a.ERROR_VAST_GENERAL_LINEAR_ERROR="400";a.ERROR_VAST_NON_LINEAR_GENERAL_ERROR="500";a.ERROR_VAST_COMPANION_GENERAL_ERROR="600";a.ERROR_VAST_GENERAL_VPAID_ERROR="901";a.Util={canPlayVideoType:function(b){if(a.PLATFORM_IS_SAFARI&&("video/ogg"===b||"video/webm"===b))return!1;if(1<a.PLATFORM_ANDROID_VERSION&&"video/m4v"===b)return!0;"video/3gp"===b&&(b="video/3gpp");if(3<=a.PLATFORM_ANDROID_VERSION&&"video/3gpp"===b)return!0;var c=document.createElement("video");return c.canPlayType?!(!c.canPlayType(b)&&!c.canPlayType(b.replace("/","/x-"))):!1},str2bool:function(b){if(!b)return!1;b=a.Util.trim(b).toLowerCase();return"true"===b||"yes"===b||"on"===b||"1"===b},trim:function(a){return"string"!==typeof a?a.toString():a.replace(/^\s+|\s+$/g,"")},isBlank:function(b){return!b||""===a.Util.trim(b)},encodeToHex:function(a){for(var b="",d=0;d<a.length;d++){for(var e=a.charCodeAt(d).toString(16).toUpperCase();4>e.length;)e="0"+e;b+="\\u"+e.toUpperCase()}return b},forEachOnArray:function(a,c,d){var b;if(null==a)throw new TypeError(" array is null or not defined");a=Object(a);var f=a.length>>>0;if("[object Function]"!=={}.toString.call(c))throw new TypeError(c+" is not a function");d&&(b=d);for(d=0;d<f;){if(d in a){var h=a[d];c.call(b,h,d,a)}d++}},mixin:function(a,c){for(var b in c)"undefined"!==typeof c[b]&&(a[b]=c[b]);return a},copy:function(b){return a.Util.mixin({},b)},bind:function(a,c){var b=c,e=Array.prototype.slice.call(arguments);e.shift();b=e.shift();return function(){return b.apply(a,e.concat(Array.prototype.slice.call(arguments)))}},getObject:function(a,c,d){if(!a)return null;a=a.split(".");c=c||window;for(var b=0,f;c&&(f=a[b]);b++)c=f in c?c[f]:d?c[f]={}:void 0;return c},transformUrlToProxy:function(b){if(null==a.proxyUrl)return b;var c=a.proxyUrl.replace("$","$$");b=b.replace(/https?:\/\//,c);a.proxyAuthenticationParameter&&(b=a.Util.setParameterInURL(b,a.proxyAuthenticationParameter.key,a.proxyAuthenticationParameter.value));return b},pingURLWithImage:function(b){new Image(1,1).src=a.Util.transformUrlToProxy(b)},pingURLWithForm:function(b,c,d){d=d?"_fw_request":"_fw_cb";null==c&&(c=Math.random());var e=document.createElement("iframe");e.name=d+"_iframe_"+c;
e.id=d+"_iframe_"+c;e.style.position="absolute";e.style.left="-10000px";e.style.width="1px";e.style.visibility="hidden";var f=document.createElement("form");f.action=a.Util.transformUrlToProxy(b);f.id=d+"_form_"+c;f.target=e.id;f.method="post";f.style.position="absolute";f.style.left="-10000px";f.style.width="1px";f.style.visibility="hidden";document.body&&(document.body.appendChild(e),document.body.appendChild(f),f.submit(),document.body.removeChild(f))},pingURLWithScript:function(b){var c=document.getElementsByTagName("head")[0],d=document.createElement("script");d.src=a.Util.transformUrlToProxy(b);d.onload=d.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||c.removeChild(d)};c.appendChild(d)},pingURL:function(b){a.debug("send callback: "+b);b&&(a.PLATFORM_SEND_REQUEST_BY_FORM?a.Util.pingURLWithForm(b,null,!1):a.Util.pingURLWithImage(b))},pingURLs:function(b){for(var c=0;c<b.length;c++)a.Util.pingURL(b[c])},setParameterInURL:function(a,c,d){if(!a||!c||null==d)return null;var b=!1;a=a.split("?");d=encodeURIComponent(d);if(a[1]){var f=a[1].split("&");for(var h=0;h<f.length;++h){var g=f[h].split("=");if(g[0]===c){f[h]=g[0]+"="+d;b=!0;break}}g=f.join("&");b||(g=c+"="+d+"&"+g)}else g=c+"="+d;return g=a[0]+"?"+g},getParameterInURL:function(b,c){if(!b||!c)return null;b=b.split("?");if(b[1]){b=b[1].split("&");for(var d=0;d<b.length;++d){var e=b[d].split("=");if(e[0]===c&&!a.Util.isBlank(e[1]))return decodeURIComponent(e[1])}}return null},isParameterInURL:function(a,c){if(!a||!c)return!1;a=a.split("?");if(a[1]){a=a[1].split("&");for(var b=0;b<a.length;++b)if(a[b].split("=")[0]===c)return!0}return!1},flashVersion:function(){var b="0,0,0,0";if(null!=navigator.plugins&&0<navigator.plugins.length){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"])try{var c=navigator.plugins["Shockwave Flash"+(navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"")].description.split(" "),d=c[2].split("."),e=d[0],f=d[1],h=c[3];""===h&&(h=c[4]);"d"===h[0]?h=h.substring(1):"r"===h[0]&&(h=h.substring(1),0<h.indexOf("d")&&(h=h.substring(0,h.indexOf("d"))));b=e+","+f+","+h+",0"}catch(m){a.warn("Flash detection failed on navigator method")}}else try{var g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");var k=g.GetVariable("$version").split(" ")[1].split(",");3===k.length?b=k.join(",")+",0":4===k.length&&(b=k.join(","))}catch(m){a.warn("Flash detection failed on ActiveX method")}return b},xmlToJson:function(b){var c={};if(!b)return null;if(1===b.nodeType){if(0<b.attributes.length){c["@attributes"]={};for(var d=0;d<b.attributes.length;d++){var e=b.attributes.item(d);c["@attributes"][e.nodeName]=e.nodeValue}}}else 3===b.nodeType?c=b.nodeValue:4===b.nodeType&&(c=b.nodeValue);if(b.hasChildNodes()){for(d=0;d<b.childNodes.length;d++){e=b.childNodes.item(d);var f=e.nodeName;if("undefined"===typeof c[f])c[f]=a.Util.xmlToJson(e);else{if("undefined"===typeof c[f].length||"string"===typeof c[f]){var h=c[f];c[f]=[];c[f].push(h)}c[f].push(a.Util.xmlToJson(e))}}"undefined"!==typeof c["#cdata-section"]?(c.value=c["#cdata-section"],c.value.constructor===Array&&(c.value=c.value.join(""))):c["#text"]&&(c.value=c["#text"])}return c},lazyJavaScriptLoad:function(a,c){var b=document.getElementsByTagName("head")[0]||document.documentElement,e=document.createElement("script");e.type="text/javascript";e.src=a;c&&(e.attachEvent&&!window.opera?e.onreadystatechange=function(){if("loaded"===e.readyState||"complete"===e.readyState)b.removeChild(e),e.onreadystatechange=null,c()}:e.addEventListener("load",function(){b.removeChild(e);c()},!1));b.insertBefore(e,b.firstChild)},getViewport:function(){var a=0,c=0;"undefined"!==typeof window.innerWidth?(a=window.innerWidth,c=window.innerHeight):"undefined"!==typeof document.documentElement&&"undefined"!==typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(a=document.documentElement.clientWidth,c=document.documentElement.clientHeight):document.getElementsByTagName("body")&&document.getElementsByTagName("body")[0]&&(a=document.getElementsByTagName("body")[0].clientWidth,c=document.getElementsByTagName("body")[0].clientHeight);return{width:a,height:c,offsetX:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,offsetY:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}},getAbsoluteUrl:function(b,c){b=a.Util.trim(b);c=a.Util.trim(c);if(-1!==c.indexOf("://"))return c;var d=b.substring(0,b.indexOf("://"));if(0===c.indexOf("//"))return d+":"+c;d=b.indexOf("/",b.indexOf("://")+5);var e=b;-1!==d&&(e=b.substring(0,d));if(0===c.indexOf("/"))return e+c;d=b.lastIndexOf("#");e=b;-1!==d&&(e=b.substring(0,d));if(0===c.indexOf("#"))return e+c;e=b.indexOf("?");d=b;-1!==e&&(d=b.substring(0,e));if(0===c.indexOf("?"))return d+c;e=-1===e?b.lastIndexOf("/"):d.lastIndexOf("/");d=-1!==e?b.substring(0,e+1):d+"/";return d+c},secondsToHms:function(a){a=isNaN(Number(a))?0:Number(a);var b=Math.floor(a%3600/60),d=Math.round(a%3600%60);return("0"+Math.floor(a/3600)).slice(-2)+":"+("0"+b).slice(-2)+":"+("0"+d).slice(-2)},getFixedDigitRandomNumber:function(a){a=isNaN(Number(a))?0:Number(a);return Math.floor(9*Math.random()*Math.pow(10,a-1)+Math.pow(10,a-1))},getDateStringInISOFormat:function(a){return a instanceof Date&&!isNaN(a.valueOf())?a.toISOString():null},getTopMostWindow:function(){var b=window;try{for(;b!=top;)b.parent.location.href.length&&(b=b.parent)}catch(c){a.warn("Cannot get top most window: "+c.description)}return b},getFrameAncestor:function(b){for(var c=window,d;!d;){try{c.frames[b]&&(d=c)}catch(e){a.warn("Error while trying to access window with "+b)}if(c===window.top)break;c=c.parent}return d}};a.MediaState=function(){};a.MediaState.prototype={};a.MediaState.prototype.constructor=a.MediaState;a.Util.mixin(a.MediaState.prototype,{play:function(b){a.debug(this._name+" play("+b+")")},pause:function(b){a.debug(this._name+" pause("+b+")")},complete:function(b){a.debug(this._name+" complete("+b+")")}});a.MediaInitState=function(){this._name="MediaInitState"};a.MediaInitState.prototype=new a.MediaState;a.MediaInitState.prototype.constructor=a.MediaInitState;a.Util.mixin(a.MediaInitState.prototype,{play:function(b){a.debug(this._name+" play("+b+")");b.setMediaState(a.MediaPlayingState.instance);if("function"===typeof b.onStartPlaying)b.onStartPlaying()}});a.MediaInitState.instance=new a.MediaInitState;a.MediaPlayingState=function(){this._name="MediaPlayingState"};a.MediaPlayingState.prototype=new a.MediaState;a.MediaPlayingState.prototype.constructor=a.MediaPlayingState;a.Util.mixin(a.MediaPlayingState.prototype,{pause:function(b){a.debug(this._name+" pause("+b+")");b.setMediaState(a.MediaPausedState.instance);if("function"===typeof b.onPausePlaying)b.onPausePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")");b.setMediaState(a.MediaEndState.instance);if("function"===typeof b.onCompletePlaying)b.onCompletePlaying()}});a.MediaPlayingState.instance=new a.MediaPlayingState;a.MediaPausedState=function(){this._name="MediaPausedState"};a.MediaPausedState.prototype=new a.MediaState;a.MediaPausedState.prototype.constructor=a.MediaPausedState;a.Util.mixin(a.MediaPausedState.prototype,{play:function(b){a.debug(this._name+" play("+b+")");b.setMediaState(a.MediaPlayingState.instance);if("function"===typeof b.onResumePlaying)b.onResumePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")");b.setMediaState(a.MediaEndState.instance);if("function"===typeof b.onCompletePlaying)b.onCompletePlaying()}});a.MediaPausedState.instance=new a.MediaPausedState;a.MediaReplayingState=function(){this._name="MediaReplayingState"};a.MediaReplayingState.prototype=new a.MediaState;a.MediaReplayingState.prototype.constructor=a.MediaReplayingState;a.Util.mixin(a.MediaReplayingState.prototype,{pause:function(b){a.debug(this._name+" pause("+b+")");b.setMediaState(a.MediaReplayPausedState.instance);if("function"===typeof b.onPausePlaying)b.onPausePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")");b.setMediaState(a.MediaEndState.instance);if("function"===typeof b.onCompleteReplaying)b.onCompleteReplaying()}});a.MediaReplayingState.instance=new a.MediaReplayingState;a.MediaReplayPausedState=function(){this._name="MediaReplayPausedState"};a.MediaReplayPausedState.prototype=new a.MediaState;a.MediaReplayPausedState.prototype.constructor=a.MediaReplayPausedState;a.Util.mixin(a.MediaReplayPausedState.prototype,{play:function(b){a.debug(this._name+" play("+b+")");b.setMediaState(a.MediaReplayingState.instance);if("function"===typeof b.onResumePlaying)b.onResumePlaying()},complete:function(b){a.debug(this._name+" complete("+b+")");b.setMediaState(a.MediaEndState.instance);if("function"===typeof b.onCompleteReplaying)b.onCompleteReplaying()}});a.MediaReplayPausedState.instance=new a.MediaReplayPausedState;a.MediaEndState=function(){this._name="MediaEndState"};a.MediaEndState.prototype=new a.MediaState;a.MediaEndState.prototype.constructor=a.MediaEndState;a.Util.mixin(a.MediaEndState.prototype,{play:function(b){a.debug(this._name+" play("+b+")");b.setMediaState(a.MediaReplayingState.instance);if("function"===typeof b.onStartReplaying)b.onStartReplaying()}});a.MediaEndState.instance=new a.MediaEndState;a.RendererState=function(){};a.RendererState.prototype={};a.RendererState.prototype.constructor=a.RendererState;a.Util.mixin(a.RendererState.prototype,{start:function(b){a.debug(this._name+" start() rendererController = "+b)},notifyStarted:function(b){a.debug(this._name+" notifyStarted() rendererController = "+b)},stop:function(b){a.debug(this._name+" stop() rendererController = "+b)},complete:function(b){a.debug(this._name+" complete() rendererController = "+b)},notifyCompleted:function(b){a.debug(this._name+" notifyCompleted() rendererController = "+b)},fail:function(b){a.debug(this._name+" fail() rendererController = "+b);b.setRendererState(a.RendererFailedState.instance);b.getAdInstance().complete()}});a.RendererInitState=function(){this._name="RendererInitState"};a.RendererInitState.prototype=new a.RendererState;a.RendererInitState.prototype.constructor=a.RendererInitState;a.RendererInitState.instance=new a.RendererInitState;a.Util.mixin(a.RendererInitState.prototype,{start:function(b){a.debug(this._name+" start()");b.setRendererState(a.RendererStartingState.instance);b.getRenderer().start(b)},stop:function(b){a.debug(this._name+" stop()");b.setRendererState(a.RendererCompletingState.instance);b.getRendererState().notifyCompleted(b)}});a.RendererStartingState=function(){this._name="RendererStartingState"};a.RendererStartingState.prototype=new a.RendererState;a.RendererStartingState.prototype.constructor=a.RendererStartingState;a.RendererStartingState.instance=new a.RendererStartingState;a.Util.mixin(a.RendererStartingState.prototype,{notifyStarted:function(b){a.debug(this._name+" notifyStarted()");b.setRendererState(a.RendererStartedState.instance);b.getAdInstance().play()},stop:function(b){a.debug(this._name+" stop()");"function"===typeof b.getRenderer().stop&&(b.setRendererState(a.RendererCompletingState.instance),b.getRenderer().stop())}});a.RendererStartedState=function(){this._name="RendererStartedState"};a.RendererStartedState.prototype=new a.RendererState;a.RendererStartedState.prototype.constructor=a.RendererStartedState;a.RendererStartedState.instance=new a.RendererStartedState;a.Util.mixin(a.RendererStartedState.prototype,{complete:function(b){a.debug(this._name+" complete()");b.setRendererState(a.RendererCompletingState.instance)},stop:function(b){a.debug(this._name+" stop()");"function"===typeof b.getRenderer().stop&&(b.setRendererState(a.RendererCompletingState.instance),!1===b.getRenderer().stop()&&b.getAdInstance().fakeComplete())}});a.RendererCompletingState=function(){this._name="RendererCompletingState"};a.RendererCompletingState.prototype=new a.RendererState;a.RendererCompletingState.prototype.constructor=a.RendererCompletingState;a.RendererCompletingState.instance=new a.RendererCompletingState;a.Util.mixin(a.RendererCompletingState.prototype,{notifyCompleted:function(b){a.debug(this._name+" notifyCompleted()");b.setRendererState(a.RendererCompletedState.instance);b.getAdInstance().complete()}});a.RendererCompletedState=function(){this._name="RendererCompletedState"};a.RendererCompletedState.prototype=new a.RendererState;a.RendererCompletedState.prototype.constructor=a.RendererCompletedState;a.RendererCompletedState.instance=new a.RendererCompletedState;a.RendererFailedState=function(){this._name="RendererFailedState"};a.RendererFailedState.prototype=new a.RendererState;a.RendererFailedState.prototype.constructor=a.RendererFailedState;a.RendererFailedState.instance=new a.RendererFailedState;a.HTMLRenderer=function(){this._rendererController=null};a.HTMLRenderer.prototype={start:function(b){this._rendererController=b;this._rendererController.getAdInstance().getSlot().getBase()?this._setupParameters()&&(this._render(),this._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)):this._onRendererFailed(a.ERROR_INVALID_SLOT,"slot base is empty")},pause:function(){this.log("pause");this.shouldEndAfterDuration&&this.timer&&this.timer.pause()},resume:function(){this.log("resume");this.shouldEndAfterDuration&&this.timer&&this.timer.start()},stop:function(){this.log("stop isMRAIDAd:"+this.isMRAIDAd+" tpc:"+this._tpc+" interstitial:"+this.shouldKeepInterstitial);return this._stop()},_stop:function(){this.log("_stop isMRAIDAd:"+this.isMRAIDAd+" tpc:"+this._tpc+" interstitial:"+this.shouldKeepInterstitial);if(this.isMRAIDAd||this._tpc!==a.TIME_POSITION_CLASS_DISPLAY||this.shouldKeepInterstitial)this._cleanup(),this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED);else return!1},resize:function(){var b=this._rendererController.getAdInstance(),c=b.getSlot().getBase();b.getSlot().getTimePositionClass()===a.TIME_POSITION_CLASS_OVERLAY?!this.isMRAIDAd||this.isMRAIDAd&&this.mraid.state===this.mraid.STATEDEFAULT?(b="_fw_ad_container_html_"+b.getSlot().getCustomId()+"_",b=document.getElementById(b),b.style.width=c.style.width||"100%",b.style.height=c.style.height||"100%",this._layoutOverlayAd(this.defaultAdElement)):this.log("Cannot resize an MRAID ad that is not in the default state"):this.log("Cannot resize a non-overlay ad")},_cleanup:function(){this.log("_cleanup");this.timer&&(this.timer.stop(),this.timer=null);this.adLoadTimeoutTimer&&(this.adLoadTimeoutTimer.stop(),this.adLoadTimeoutTimer=null);window.removeEventListener?(document.removeEventListener("touchmove",this.touchMoveDisabler,!1),window.removeEventListener("message",this.messageHandlerFunc,!1),window.removeEventListener("resize",this.viewportChangeFunc,!1),window.removeEventListener("scroll",this.viewportChangeFunc,!1)):window.detachEvent&&(window.detachEvent("onmessage",this.messageHandlerFunc),window.detachEvent("onresize",this.viewportChangeFunc),window.detachEvent("onscroll",this.viewportChangeFunc));if(this.isMRAIDAd&&(this.mraid.inExpandedState()&&(this.log("stopping with expanded state, invoke close()"),this._mraidClose()),this.mraid.inDefaultState())){this.log("stopping with default state, invoke close()");this._mraidClose();return}if(this.expandedAdElement){var a=this.expandedAdElement.parentNode;this.expandedAdElement._fw_closeButton&&a.removeChild(this.expandedAdElement._fw_closeButton);a.removeChild(this.expandedAdElement);this.expandedAdElement===this.defaultAdElement&&(this.defaultAdElementContainer===this.defaultAdElement&&(this.defaultAdElementContainer=null),this.defaultAdElement=null);this.expandedAdElement=null}this.expandedLightbox&&(a=this.expandedLightbox.parentNode,a.removeChild(this.expandedLightbox),this.expandedLightbox=null);if(this.defaultAdElement){a=this.defaultAdElement.parentNode;var c=this.defaultAdElement;c.style.display="none";a!==this._rendererController.getAdInstance().getSlot().getBase()&&window.setTimeout(function(){for(var b=a&&a.childNodes||[],e=0;e<b.length;e++){var f=b[e];f===c&&a.removeChild(f)}},200);this.defaultAdElementContainer===this.defaultAdElement&&(this.defaultAdElementContainer=null);this.defaultAdElement=null}this.defaultAdElementContainer&&(a=this.defaultAdElementContainer.parentNode,a.removeChild(this.defaultAdElementContainer),this.defaultAdElementContainer=null);(this.shouldPauseContentWhenStart||this.isInterstitialNow&&!this.isMRAIDAd)&&this._rendererController.requestContentStateChange(!1)},_setupParameters:function(){var b=this._rendererController.getAdInstance(),c=b.getSlot().getTimePositionClass();this._tpc=c;var d=b.getActiveCreativeRendition();b=d.getBaseUnit();d=d.getCreativeApi();var e;if(a.PLATFORM_NOT_SUPPORT_OVERLAY_AD&&c===a.TIME_POSITION_CLASS_OVERLAY)return this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"Overlay not supported on this device."),!1;if(a.PLATFORM_NOT_SUPPORT_MIDROLL_AD&&(c===a.TIME_POSITION_CLASS_MIDROLL||c===a.TIME_POSITION_CLASS_PAUSE_MIDROLL))return this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"Midroll, pause_midroll not supported on this device."),!1;if(a.PLATFORM_IS_IPHONE_IPOD)switch(c){case a.TIME_POSITION_CLASS_MIDROLL:case a.TIME_POSITION_CLASS_PAUSE_MIDROLL:case a.TIME_POSITION_CLASS_OVERLAY:return this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"Midroll, pause_midroll and overlay ads are not supported on iPod, iPhone."),!1;case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_POSTROLL:this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF)}this.adLoadTimeout=5;if(e=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_AD_LOAD_TIMEOUT))this.adLoadTimeout=0<Number(e)?Number(e):this.adLoadTimeout;this.shouldKeepInterstitial=!1;(e=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE))?this.shouldKeepInterstitial=e===a.PARAMETER_RENDERER_HTML_PLACEMENT_TYPE_INTERSTITIAL:"string"===typeof b&&(this.shouldKeepInterstitial=b.toLowerCase()===a.PARAMETER_RENDERER_HTML_BASEUNIT_INTERSTITIAL);this.isInterstitialNow=this.shouldKeepInterstitial;this.shouldPauseContentWhenStart=!1;this.shouldPauseContentWhenExpandOrClick=!this.shouldKeepInterstitial&&(c===a.TIME_POSITION_CLASS_DISPLAY||c===a.TIME_POSITION_CLASS_OVERLAY);this.shouldBackgroundTransparent=!1;e=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_SHOULD_BACKGROUND_TRANSPARENT);"undefined"!==typeof e&&null!=e&&(this.shouldBackgroundTransparent=a.Util.str2bool(e));this.shouldEndAfterDuration=c!==a.TIME_POSITION_CLASS_DISPLAY||this.shouldKeepInterstitial;e=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_SHOULD_END_AFTER_DURATION);"undefined"!==typeof e&&null!=e&&(this.shouldEndAfterDuration=a.Util.str2bool(e));this.coadScriptName=this._rendererController.getParameter(a.PARAMETER_RENDERER_DISPLAY_COAD_SCRIPT_NAME);this.coadScriptName||(this.coadScriptName=this._rendererController.getParameter("coad_script_name"));this.primaryAnchor=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_PRIMARY_ANCHOR)||"bc";this.marginWidth=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_MARGIN_WIDTH)||0;this.marginHeight=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_MARGIN_HEIGHT)||0;this.bootstrap=this._rendererController.getParameter(a.PARAMETER_RENDERER_HTML_BOOTSTRAP);b=a.Util.getViewport();this.defaultExpandWidth=b.width;this.defaultExpandHeight=b.height;this.isMRAIDAd="MRAID-1.0"===d;this.mraid=new function(b){this.STATELOADING="loading";this.STATEDEFAULT="default";this.STATEEXPANDED="expanded";this.STATEHIDDEN="hidden";this._renderer=b;this._state=this.STATELOADING;this._useCustomClose=!1;this.viewable=this.expandIsModal=!0;this._baseUrlExpanded=this._baseUrlDefault="";b=Object.defineProperty||function(a,b,c){c.get&&a.__defineGetter__(b,c.get);c.set&&a.__defineSetter__(b,c.set)};b(this,"baseUrl",{get:function(){return this.inExpandedState()?this._baseUrlExpanded||this._baseUrlDefault:this._baseUrlDefault},set:function(a){this.inExpandedState()?this._baseUrlExpanded=a:(this._baseUrlDefault=a,this._baseUrlExpanded="")}});b(this,"useCustomClose",{get:function(){return this._useCustomClose},set:function(a){this._useCustomClose===!a&&(this._useCustomClose=!!a,this.pushData())}});b(this,"placementType",{get:function(){return this._renderer.shouldKeepInterstitial?"interstitial":"inline"}});b(this,"expandWidth",{get:function(){return this._renderer.requestedExpandWidth&&this._renderer.requestedExpandWidth<this._renderer.defaultExpandWidth?this._renderer.requestedExpandWidth:this._renderer.defaultExpandWidth}});b(this,"expandHeight",{get:function(){return this._renderer.requestedExpandHeight&&this._renderer.requestedExpandHeight<this._renderer.defaultExpandHeight?this._renderer.requestedExpandHeight:this._renderer.defaultExpandHeight}});b(this,"state",{get:function(){return this._state},set:function(b){this.log("mraid.state change "+this.state+" => "+b);this.state!==b&&(this._renderer.shouldPauseContentWhenExpandOrClick&&(b===this.STATEEXPANDED?this._renderer._rendererController.requestContentStateChange(!0):this.inExpandedState()&&this._renderer._rendererController.requestContentStateChange(!1)),b===this.STATEEXPANDED?(this._renderer.expandedAdElement?this._renderer._rendererController.processEvent({name:a.EVENT_AD_ACCEPT_INVITATION}):(this._renderer.expandedAdElement=this._renderer.defaultAdElement,this._renderer._rendererController.processEvent({name:a.EVENT_AD_EXPAND})),this._renderer.presentInterstitial(),this._renderer.shouldEndAfterDuration&&this._renderer.timer.pause()):b===this.STATEDEFAULT&&(this._renderer.shouldKeepInterstitial?(this._renderer.expandedAdElement=this._renderer.defaultAdElement,this._renderer.presentInterstitial()):(this.inExpandedState()&&(this._renderer.expandedAdElement!==this._renderer.defaultAdElement?this._renderer._rendererController.processEvent({name:a.EVENT_AD_CLOSE}):this._renderer._rendererController.processEvent({name:a.EVENT_AD_COLLAPSE})),this._renderer.expandedAdElement=null,this._renderer.presentInline()),this._renderer.shouldEndAfterDuration&&this._renderer.timer&&this._renderer.timer.start()),this._state=b,this.pushData(),b===this.STATEHIDDEN&&this._renderer.stop())}});this.inLoadingState=function(){return this.state===this.STATELOADING};this.inDefaultState=function(){return this.state===this.STATEDEFAULT};this.inExpandedState=function(){return this.state===this.STATEEXPANDED};this.inHiddenState=function(){return this.state===this.STATEHIDDEN};this.pushData=function(){var a='mraid._Update("'+this.state+'", '+this.viewable+', "'+this.placementType+'", '+this.expandWidth+", "+this.expandHeight+", "+this.useCustomClose+", "+this.expandIsModal+")";this.log("mraid.pushData: going to invoke on iframe with "+a);this._renderer.defaultAdElement?(this._renderer.defaultAdElement.contentWindow.postMessage("fwsdk-bounce:"+a,"*"),this._renderer.expandedAdElement&&this._renderer.expandedAdElement!==this._renderer.defaultAdElement&&this._renderer.expandedAdElement.contentWindow.postMessage("fwsdk-bounce:"+a,"*")):this.warn("_mraidPushData: no iframe suitable to send "+a)};this.log=function(a){this._renderer.log(a)};this.warn=function(a){this._renderer.warn(a)}}(this);this.onLoadFunc=a.Util.bind(this,function(){this.adLoadTimeoutTimer&&(this.adLoadTimeoutTimer.stop(),this.adLoadTimeoutTimer=null);this.timer&&this.shouldEndAfterDuration&&this.timer.start()});this.touchMoveDisabler=function(a){a.preventDefault()};this.log("setting parameters, adLoadTimeout: "+this.adLoadTimeout+", isMRAIDAd: "+this.isMRAIDAd+", shouldKeepInterstitial: "+this.shouldKeepInterstitial+", shouldEndAfterDuration: "+this.shouldEndAfterDuration+", shouldPauseContentWhenStart: "+this.shouldPauseContentWhenStart+", shouldPauseContentWhenExpandOrClick: "+this.shouldPauseContentWhenExpandOrClick+", shouldBackgroundTransparent: "+this.shouldBackgroundTransparent+", defaultExpandWidth: "+this.defaultExpandWidth+", defaultExpandHeight: "+this.defaultExpandHeight+", coadScriptName: "+this.coadScriptName+", primaryAnchor: "+this.primaryAnchor+", marginWidth: "+this.marginWidth+", marginHeight: "+this.marginHeight+", bootstrap: "+this.bootstrap);if(!this.shouldKeepInterstitial)!this.isMRAIDAd||a.PLATFORM_IS_IPHONE_IPOD&&c!==a.TIME_POSITION_CLASS_DISPLAY||(this._rendererController.setCapability(a.EVENT_AD_ACCEPT_INVITATION,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_CLOSE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_COLLAPSE,a.CAPABILITY_STATUS_ON),this._rendererController.setCapability(a.EVENT_AD_EXPAND,a.CAPABILITY_STATUS_ON));else if(c===a.TIME_POSITION_CLASS_OVERLAY)return this._onRendererFailed(a.ERROR_INVALID_SLOT,"Interstitial ad is not supported in overlay slot."),!1;return!0},_render:function(){this.log("_render");var b=this._rendererController.getAdInstance(),c=b.getSlot(),d=c.getTimePositionClass(),e=c.getBase(),f=b.getActiveCreativeRendition(),h=f.getDuration(),g=f.getPrimaryCreativeRenditionAsset();b=g.getUrl();var k=g.getContent();d===a.TIME_POSITION_CLASS_DISPLAY&&(e.innerHTML="");this.timer=new a.Timer(h,a.Util.bind(this,this._stop));if(this.coadScriptName&&"function"===typeof window[this.coadScriptName])this.defaultAdElement=window[this.coadScriptName](k,b,f.getHeight(),f.getWidth(),g.getMimeType(),c.getCustomId()),this.timer&&this.shouldEndAfterDuration&&this.timer.start();else if(h=document.createElement("span"),h.id="_fw_ad_container_html_"+c.getCustomId()+"_",h.style.position="relative"===e.style.position?"absolute":"relative",h.style.display="inline-block",h.style.margin="0px",h.style.padding="0px",h.style.width=e.style.width||"100%",h.style.height=e.style.height||"100%",h.style.top=h.style.left="0px",e.appendChild(h),this.defaultAdElementContainer=h,b||k){if("text/html_lit_nowrapper"===f.getContentType()||"text/html_lit_js_wc_nw"===f.getContentType()){if(this.isMRAIDAd||this.isInterstitialNow){this._onRendererFailed(a.ERROR_INVALID_VALUE,"");this._stop();return}if(!k){this._onRendererFailed(a.ERROR_NULL_ASSET,"Empty content");this._stop();return}this.defaultAdElement=h;this.defaultAdElement.innerHTML=k;c=this.defaultAdElement.getElementsByTagName("script");var m=document.getElementsByTagName("head")[0];for(e=0;e<c.length;++e)if(c[e].src){var p=document.createElement("script");p.src=c[e].src;c[e].charset&&(p.charset=c[e].charset);c[e].innerHTML&&(p.innerHTML=c[e].innerHTML);p.onload=p.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||m.removeChild(p)};m.appendChild(p)}else p=c[e].innerHTML,eval(p);this.presentInline();this.onLoadFunc();return}f=document.createElement("iframe");f.id="_fw_ad_container_iframe_"+c.getCustomId()+"_"+Math.random();f.attachEvent?f.attachEvent("onload",this.onLoadFunc):f.onload=this.onLoadFunc;this.defaultAdElement=f;this.defaultAdElementContainer.appendChild(f);this._fillAdNode(f,b,k);this.isMRAIDAd&&(this.adLoadTimeoutTimer=new a.Timer(this.adLoadTimeout,a.Util.bind(this,function(){this._onRendererFailed(a.ERROR_TIMEOUT,"Loading MRAID Ad timed out");d!==a.TIME_POSITION_CLASS_DISPLAY?this.isMRAIDAd&&!this.mraid.inLoadingState()?this._mraidClose():this._stop():this._stop()})),this.adLoadTimeoutTimer.start())}else{this._onRendererFailed(a.ERROR_NULL_ASSET,"Empty URL and empty content");this._stop();return}this.defaultAdElement||(c=e.getElementsByTagName("iframe"))&&0<c.length&&(this.defaultAdElement=c[c.length-1]);this.defaultAdElement?(this.defaultAdElement.frameBorder="0",this.shouldBackgroundTransparent&&(this.defaultAdElement.allowTransparency="true",this.defaultAdElement.style["background-color"]="rgba(255,255,255,0)"),this.isInterstitialNow?(this.expandedAdElement=this.defaultAdElement,this.presentInterstitial()):this.presentInline(),this.messageHandlerFunc=a.Util.bind(this,this._onWindowMessageReceived),this.viewportChangeFunc=a.Util.bind(this,function(){this.viewportChangeFuncTimer&&window.clearTimeout(this.viewportChangeFuncTimer);this.viewportChangeFuncTimer=window.setTimeout(a.Util.bind(this,this._onViewportResizeScroll),200)}),window.addEventListener?(window.addEventListener("message",this.messageHandlerFunc,!1),window.addEventListener("resize",this.viewportChangeFunc,!1),window.addEventListener("scroll",this.viewportChangeFunc,!1)):window.attachEvent&&(window.attachEvent("onmessage",this.messageHandlerFunc),window.attachEvent("onresize",this.viewportChangeFunc),window.attachEvent("onscroll",this.viewportChangeFunc))):this.isMRAIDAd&&(this._onRendererFailed(a.ERROR_UNKNOWN,"Failed to find iframe in slotBase for MRAID ad"),this._stop())},_layoutOverlayAd:function(a){this.log("_layoutOverlayAd");var b=this._rendererController.getAdInstance(),d=b.getSlot(),e=d.getVideoDisplaySize().width;d=d.getVideoDisplaySize().height;var f=b.getActiveCreativeRendition();b=f.getWidth()||240;f=f.getHeight()||50;a.style.width=Math.min(b,e)+"px";a.style.height=Math.min(f,d)+"px";a.style.left=a.style.top=a.style.right=a.style.bottom="";switch(this.primaryAnchor){case"tl":case"lt":a.style.top=this.marginHeight+"px";a.style.left=this.marginWidth+"px";break;case"tr":case"rt":a.style.top=this.marginHeight+"px";a.style.right=this.marginWidth+"px";break;case"bl":case"lb":a.style.bottom=this.marginHeight+"px";a.style.left=this.marginWidth+"px";break;case"br":case"rb":a.style.bottom=this.marginHeight+"px";a.style.right=this.marginWidth+"px";break;case"tc":case"ct":a.style.top=this.marginHeight+"px";a.style.left=.5*Math.max(0,e-b)+"px";break;case"lm":case"ml":a.style.left=this.marginWidth+"px";a.style.top=.5*Math.max(0,d-f)+"px";break;case"rm":case"mr":a.style.right=this.marginWidth+"px";a.style.top=.5*Math.max(0,d-f)+"px";break;case"mc":case"cm":case"c":case"m":a.style.left=.5*Math.max(0,e-b)+"px";a.style.top=.5*Math.max(0,d-f)+"px";break;default:case"bc":case"cb":a.style.bottom=this.marginHeight+"px",a.style.left=.5*Math.max(0,e-b)+"px"}},_fillAdNode:function(b,c,d){this.log("_fillAdNode, url:"+c+", content:"+(d?"<omited>":"<empty>"));if(c)b.src=c;else if(d)b=b.contentWindow?b.contentWindow.document:b.contentDocument.document?b.contentDocument.document:b.contentDocument,b.open(),b.write(d),b.close();else return this._onRendererFailed(a.ERROR_NULL_ASSET,"Empty URL and content"),!1;return!0},presentInline:function(){this.log("presentInline");this.isInterstitialNow=!1;var b=this.defaultAdElement;if(b){var c=this._rendererController.getAdInstance(),d=c.getSlot(),e=d.getTimePositionClass(),f=d.getWidth(),h=d.getHeight(),g=d.getVideoDisplaySize().width;d=d.getVideoDisplaySize().height;var k=c.getActiveCreativeRendition();c=k.getWidth();k=k.getHeight();b.scrolling="no";b.style.overflow="hidden";switch(e){case a.TIME_POSITION_CLASS_DISPLAY:b.style.position="";b.style.background=this.shouldBackgroundTransparent?"transparent":"";b.style.left="0px";b.style.top="0px";b.style.width=(c?c:f)+"px";b.style.height=(k?k:h)+"px";break;case a.TIME_POSITION_CLASS_OVERLAY:b.style.position="absolute";b.style.background=this.shouldBackgroundTransparent?"transparent":"white";this._layoutOverlayAd(b);break;default:b.style.position="absolute",b.style.background=this.shouldBackgroundTransparent?"transparent":"white",b.style.left="0px",b.style.top="0px",b.style.width=g+"px",b.style.height=d+"px"}}},presentInterstitial:function(){this.log("presentInterstitial, defaultExpandWidth: "+this.defaultExpandWidth+", defaultExpandHeight: "+this.defaultExpandHeight+", this.mraid.expandWidth: "+this.mraid.expandWidth+", this.mraid.expandHeight: "+this.mraid.expandHeight+", (Math.max(0, this.defaultExpandWidth - this.mraid.expandWidth) / 2) = "+Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2+", (Math.max(0, this.defaultExpandHeight - this.mraid.expandHeight) / 2) = "+Math.max(0,this.defaultExpandHeight-this.mraid.expandHeight)/2);if(this.expandedAdElement){this.isInterstitialNow=!0;document.addEventListener&&(document.removeEventListener("touchmove",this.touchMoveDisabler,!1),document.addEventListener("touchmove",this.touchMoveDisabler,!1));
var b=this.expandedAdElement.parentNode;this.expandedLightbox||(this.expandedLightbox=document.createElement("div"),this.expandedLightbox.style.background="black",this.expandedLightbox.style.opacity=.8,this.expandedLightbox.style.position="fixed",this.expandedLightbox.style.top="0px",this.expandedLightbox.style.left="0px",this.expandedLightbox.style.zIndex=this.expandedLightbox.style["z-index"]=9999,b.appendChild(this.expandedLightbox));this.expandedLightbox.style.width=this.defaultExpandWidth+"px";this.expandedLightbox.style.height=this.defaultExpandHeight+"px";this.expandedAdElement.frameBorder="0";this.expandedAdElement.scrolling="no";this.expandedAdElement.style.position="fixed";this.expandedAdElement.style.overflow="hidden";this.expandedAdElement.style.top=this.expandedAdElement.top=Math.max(0,this.defaultExpandHeight-this.mraid.expandHeight)/2+"px";this.expandedAdElement.style.left=this.expandedAdElement.left=Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2+"px";this.expandedAdElement.style.width=this.expandedAdElement.width=this.mraid.expandWidth+"px";this.expandedAdElement.style.height=this.expandedAdElement.height=this.mraid.expandHeight+"px";this.expandedAdElement.style.zIndex=this.expandedAdElement.style["z-index"]=1e4;this.log("presentInterstitial, expanded ad element size: (top, left, width, height) = ("+this.expandedAdElement.top+", "+this.expandedAdElement.left+", "+this.expandedAdElement.width+", "+this.expandedAdElement.height+")");if(this.isMRAIDAd){var c=this.expandedAdElement._fw_closeButton;c||(c=document.createElement("div"),c.addEventListener?c.addEventListener("click",a.Util.bind(this,function(){this._mraidClose()})):c.attachEvent&&c.attachEvent("onclick",a.Util.bind(this,function(){this._mraidClose()})),c.style.position="fixed",c.style.margin="0px",c.style.padding="0px",c.style.width="25px",c.style.height="25px",c.style.zIndex=c.style["z-index"]=10001,b.appendChild(c),this.expandedAdElement._fw_closeButton=c);c.style.top=this.expandedAdElement.style.top;c.style.left=Math.max(0,this.defaultExpandWidth-this.mraid.expandWidth)/2+this.mraid.expandWidth-25+"px";c.innerHTML=this.mraid.useCustomClose?0<a.PLATFORM_ANDROID_VERSION?"   ":"":0<a.PLATFORM_ANDROID_VERSION&&3>=a.PLATFORM_ANDROID_VERSION?'<img style="width:25px; height:25px; border:0" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4xJREFUeNrMmjFv2kAUxw/IUAZUw4AqJjIxMAQJ9sIHgDYLUqfSBTowJBudAmOnNCNeAitLyVgxxNlBgk+QTKgb6UQHhr7nniNj8PmM3zk86XQZOPt+ee/e+9+dI4zQms1mGTpsb6EVXH42h/YHmqHrukH17kjAiWvQfYT2gfeH2BjaHfYA9hwqCABkobvik9eI/qkIMYB2A0BPSkG4By44hErrQfvhx0MRn/F/Cy3LwjH0yhfZdRSThOhyCI2FZ/iuRrFYjMxmMyMwCEDc8nB6LSsDTBZg7g4GAYj7ANmI0gpeMDEPTxwDhBRMzAXiGrqv7PgMYTSA+eWZtQACvfCTHbedQzYbu4LwOvHolp3q9TorlUpsuVyyfr/P1us16ezi8TirVqtmP5lMzPcIiuepvc5EHT+4doPIZDImhPV3q9UyX0hl+MxOp2O+I5/Ps1qt5pWat4py1CE7Gm4jnf99Sph9z5Lw9gWf845HhLJjtVqx0WhEDuMGgaElYVdbWYuTDbxGYcwiELreskQiwXK5HFssFmyz2ZBA4PoTrA9nFhtCFnu2PCJdL6bTKYlnCCCYfe4WyGc/I4PCEEK8zD3Cw+rxkPjGDIMp2Rl+otRMDGHZaZRvTQ8yv55RBGEKSwQ5C/IEWRiFEGhnMVj1naCbJa9slk6nVUKg/T2h2iyhZywZ4/RCMplUCWFW+hPBsQ0ZjFMhEEOY9SRKLUv3rRnFEHtFI4nhRPelX1xH2FQYOYjf9EsJ8qQSQqVqth8dkYGI6oQK1awExKvYUQlNL5CFSghq1exiCwQxVEOEAGPEYFPyG2QKniS+CWNTRL05w7DSdf2blX7HYe7siD0ztteRm7B3doQww5c9Ow+vspcKRvHXbrfJBCBBmOH13XdnZe95jcKzJmoVK/KMhPV2JAq/UDG8TgJVCEA3GAlvGG5a61JGpmM4UKtYJ4zEs7fmuu8Qu8vU3xEK12EqlXJV0FZIgTe6QhAOcx/kUEKxYUhVZGX8Oft/sX9sNudz2zHXW13wCm6B71m4F6AiwyuECnhj7mtjxQdUKPcrQdStCELoEZtnNO6ZwiuGU8Xr4wE/HwzgJVDY19T49cOlzA9jsk/EC0iQMQ/cM+9C8MIngOjLDjj0o5oGrzVZBWsBa8TA78Cgnznh3QQe6we9j0cpPnTe1IYG4kgIZR5273mvCdIohg6G6TzI5O32T4ABAPsBS28k7apdAAAAAElFTkSuQmCC">':'<img style="width:25px; height:25px; border:0" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwIiB5PSIwIiB3aWR0aD0iNDAwcHgiIGhlaWdodD0iNDAwcHgiIHZpZXdCb3g9IjAgMCA0MDAgNDAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA0MDAgNDAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48Y2lyY2xlIGZpbGw9IiM2NjY2NjYiIGN4PSIyMDAuMTM5IiBjeT0iMTk5Ljg2IiByPSIxOTcuODYiLz48cGF0aCBmaWxsPSIjRjBGMEYwIiBzdHJva2U9IiNGMEYwRjAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTExNC44NjUsMzAzLjY0NGMtNi4yMjYsNi4yMjctMTUuMzYzLDcuMTg2LTIwLjQwNywyLjE0NGwtMC41MjItMC41MjJjLTUuMDQzLTUuMDQzLTQuMDgzLTE0LjE4LDIuMTQ0LTIwLjQwN0wyODQuODYsOTYuMDc4YzYuMjI2LTYuMjI3LDE1LjM2Mi03LjE4NiwyMC40MDUtMi4xNDRsMC41MjIsMC41MjFjNS4wNDMsNS4wNDIsNC4wODMsMTQuMTc5LTIuMTQ0LDIwLjQwOEwxMTQuODY1LDMwMy42NDR6Ii8+PHBhdGggZmlsbD0iI0YwRjBGMCIgc3Ryb2tlPSIjRjBGMEYwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0zMDcuODE5LDI4OC42NjZjNS4xNTMsNS4xNTgsNS4wNDgsMTMuNjI0LTAuMjQxLDE4LjkxMWwwLDBjLTUuMjg4LDUuMjg5LTEzLjc1Miw1LjM5My0xOC45MDksMC4yNEw5MS45MDYsMTExLjA1NWMtNS4xNTYtNS4xNTYtNS4wNDgtMTMuNjIzLDAuMjQtMTguOTFsMCwwYzUuMjktNS4yODksMTMuNzU1LTUuMzk2LDE4LjkxMS0wLjI0MUwzMDcuODE5LDI4OC42NjZ6Ii8+PC9zdmc+">'}this.isMRAIDAd||this._rendererController.requestContentStateChange(!0)}},_onWindowMessageReceived:function(b){if(this.defaultAdElement&&(b.source===this.defaultAdElement.contentWindow||this.expandedAdElement&&b.source===this.expandedAdElement.contentWindow)){this.log("_onWindowMessageReceived, event.data:"+b.data+", event.origin:"+b.origin);var c=b.data.toString().split(":");if(c&&2<=c.length&&"fwsdk-invoke"===c[0]){var d=c[1];if((c=c.slice(2))&&0<c.length){for(var e=0;e<c.length;e++)c[e]=decodeURIComponent(c[e]);1===c.length&&(c=c[0])}else c=null;if("iframe_ready"===d){if(this.onLoadFunc&&b.source===this.defaultAdElement.contentWindow&&this.defaultAdElement!==this.expandedAdElement)this.onLoadFunc();c&&(c=a.Util.trim(c))&&this.isMRAIDAd&&(this.mraid.baseUrl=c);this.bootstrap&&b.source.postMessage("fwsdk-bounce:"+this.bootstrap,b.origin);b.source.postMessage('fwsdk-bounce:mraid._messagingModel = "postMessage"',b.origin);this.isMRAIDAd&&(b.source===this.defaultAdElement.contentWindow&&this.shouldPauseContentWhenStart&&this._rendererController.requestContentStateChange(!0),this.mraid.inLoadingState()?this.mraid.state=this.mraid.STATEDEFAULT:this.expandedAdElement&&b.source===this.expandedAdElement.contentWindow&&this.mraid.pushData())}else this.isMRAIDAd?this._mraidMethods(d,c):"close"===d&&this._stop()}}},_mraidMethods:function(b,c){if(b&&this.isMRAIDAd)switch(this.log("_mraidMethods("+b+", "+c+")"),b){case"open":"string"===typeof c?this._mraidOpen(c):2<=c.length&&this._mraidOpen(c[0],a.Util.str2bool(c[1]));break;case"close":this._mraidClose();break;case"expand":this._mraidExpand(c);break;case"useCustomClose":c&&0<c.length?this.mraid.useCustomClose=a.Util.str2bool(c):this.warn("Invalid parameter to useCustomClose");break;case"setExpandProperties":if(!c)break;this.requestedExpandWidth=Number(c[0]);this.requestedExpandHeight=Number(c[1]);if(!this.requestedExpandWidth||!this.requestedExpandHeight||this.requestedExpandWidth===this.defaultExpandWidth&&this.requestedExpandHeight===this.defaultExpandHeight)this.requestedExpandHeight=this.requestedExpandWidth=0;this.mraid.useCustomClose=a.Util.str2bool(c[2]);this.requestedExpandWidth===this.mraid.expandWidth&&this.requestedExpandHeight===this.mraid.expandHeight||this.mraid.pushData();break;case"log":this.log("MRAID log:"+c);break;default:this.warn("Unknown MRAID function call: "+b+" with param:"+c)}},_mraidOpen:function(b,c){this.log("_mraidOpen("+b+"), baseUrl: "+this.mraid.baseUrl+", absolute Url: "+(b=a.Util.getAbsoluteUrl(this.mraid.baseUrl,b)));b&&"string"===typeof b&&0<b.length?((c||"undefined"===typeof c)&&window.open(b),this._rendererController.processEvent({name:a.EVENT_AD_CLICK,info:{showBrowser:!1}})):this.warn("_mraidOpen: url required for open")},_mraidClose:function(){this.log("_mraidClose, current state: "+this.mraid.state);if(this.mraid.inExpandedState()){window.removeEventListener&&document.removeEventListener("touchmove",this.touchMoveDisabler,!1);var a=this.expandedAdElement,c=this.expandedAdElement._fw_closeButton;this.expandedAdElement._fw_closeButton=null;var d=this.expandedAdElement.parentNode;this.mraid.state=this.mraid.STATEDEFAULT;this.expandedLightbox&&(d.removeChild(this.expandedLightbox),this.expandedLightbox=null);a!==this.defaultAdElement&&(a.style.display="hidden",window.setTimeout(function(){d.removeChild(a)},50));d.removeChild(c)}else this.mraid.inDefaultState()?this.mraid.state=this.mraid.STATEHIDDEN:this.warn("_mraidClose: close() is only valid when in expanded/default state")},_mraidExpand:function(b){this.log("_mraidExpand, current state: "+this.mraid.state);if(this.mraid.inDefaultState())if(this.shouldKeepInterstitial)this.warn("_mraidExpand: expand() is only valid for inline ad");else{if(b){var c=document.createElement("iframe"),d=a.Util.getAbsoluteUrl(this.mraid.baseUrl,b);this.shouldBackgroundTransparent&&(c.allowTransparency="true",c.style["background-color"]="rgba(255,255,255,0)");(this.defaultAdElementContainer||this.defaultAdElement.parentNode).appendChild(c);this.expandedAdElement=c;this.log("_mraidExpand("+b+"), baseUrl:"+this.mraid.baseUrl+", absolute Url"+d);this._fillAdNode(c,d,null)}this.mraid.state=this.mraid.STATEEXPANDED;this.isInterstitialNow=!0;this._onViewportResizeScroll()}else this.warn("_mraidExpand: expand() is only valid when in default state")},_onViewportResizeScroll:function(){var b=a.Util.getViewport();this.defaultExpandWidth=b.width;this.defaultExpandHeight=b.height;this.isInterstitialNow&&this.presentInterstitial()},log:function(b){var c=this._rendererController.getAdInstance().getSlot();a.log("HTMLRenderer["+c+"]	"+b)},warn:function(b){var c=this._rendererController.getAdInstance().getSlot();a.warn("HTMLRenderer["+c+"]	"+b)},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){return this.timer?this.timer.getPlayheadTime():-1},getDuration:function(){return this.timer?this.timer.getDuration():-1},_onRendererFailed:function(b,c,d){var e={};e[a.INFO_KEY_ERROR_MODULE]="HTMLRenderer";e[a.INFO_KEY_ERROR_CODE]=b;this._rendererController.getAdInstance().getSlot().getTimePositionClass()===a.TIME_POSITION_CLASS_OVERLAY?d||(d=a.ERROR_VAST_NON_LINEAR_GENERAL_ERROR):this._rendererController.getAdInstance().getSlot().getTimePositionClass()!==a.TIME_POSITION_CLASS_DISPLAY||d||(d=a.ERROR_VAST_COMPANION_GENERAL_ERROR);d&&(e[a.INFO_KEY_VAST_ERROR_CODE]=d);c&&(e[a.INFO_KEY_ERROR_INFO]=c);this._rendererController.handleStateTransition(a.RENDERER_STATE_FAILED,e)}};a.HTMLRenderer.prototype.constructor=a.HTMLRenderer;a.Timer=function(a,c){this._lastTickDate=new Date;this._duration=a||-1;this._playheadTime=-1;this._callback=c;this._state=-1};a.Timer.prototype={};a.Timer.prototype.constructor=a.Timer;a.Util.mixin(a.Timer.prototype,{tick:function(){var a=new Date,c=Math.round((a.getTime()-this._lastTickDate.getTime())/1e3);this._lastTickDate=a;return c},start:function(){if(0!==this._state){if(2===this._state||-1===this._playheadTime)this._playheadTime=0;this._state=0;this._timeStamp=new Date;this._timeouter&&(window.clearTimeout(this._timeouter),this._timeouter=null);var a=this,c=1e3*(this._duration-this._playheadTime);0>c||(this._timeouter=window.setTimeout(function(){a.stop();a._playheadTime=a._duration;a._callback&&a._callback()},c))}},pause:function(){0===this._state&&(this._state=1,this._timeouter&&(window.clearTimeout(this._timeouter),this._timeouter=null),this._playheadTime=(new Date-this._timeStamp)/1e3+this._playheadTime)},stop:function(){this._state=2;this._timeouter&&(window.clearTimeout(this._timeouter),this._timeouter=null);this._playheadTime=(new Date-this._timeStamp)/1e3+this._playheadTime},getPlayheadTime:function(){return 0===this._state?(new Date-this._timeStamp)/1e3+this._playheadTime:this._playheadTime},getCTValue:function(){return(new Date-this._timeStamp)/1e3},getDuration:function(){return this._duration}});a.RendererController=function(b,c){var d=null,e=null,f={},h=a.RendererInitState.instance,g={},k=[],m=0;return{getAdInstance:function(){return c},getContext:function(){return b},getRendererState:function(){return h},processEvent:function(b){var d=b.name;if(d===a.RENDERER_STATE_STARTED||d===a.RENDERER_STATE_COMPLETING||d===a.RENDERER_STATE_COMPLETED||d===a.RENDERER_STATE_FAILED)this.handleStateTransition(d,b.info);else{var e=this._inferEventType(d);if(e&&(e===a.EVENT_TYPE_CLICK&&b.info&&b.info[a.INFO_KEY_CUSTOM_EVENT_NAME]&&(d=b.info[a.INFO_KEY_CUSTOM_EVENT_NAME]),d!==a.EVENT_AD_MEASUREMENT||b.info[a.INFO_KEY_CONCRETE_EVENT_ID])){var f=d===a.EVENT_AD_INITIATED||d===a.EVENT_AD_BUFFERING_START||d===a.EVENT_AD_BUFFERING_END||d===a.EVENT_AD_VOLUME_CHANGE||b.info&&b.info.hasOwnProperty("apiOnly")&&b.info.apiOnly;c.processEvent(d,e,b.info,f)}}},handleStateTransition:function(b,d){switch(b){case a.RENDERER_STATE_STARTED:h.notifyStarted(this);break;case a.RENDERER_STATE_COMPLETING:h.complete(this);break;case a.RENDERER_STATE_COMPLETED:h.complete(this);h.notifyCompleted(this);break;case a.RENDERER_STATE_FAILED:c.getSlot()._clearScheduledAdInstance();d||(d={});a.warn("FAIL",", FW ErrorModule:",d[a.INFO_KEY_ERROR_MODULE],", FW ErrorCode:",d[a.INFO_KEY_ERROR_CODE],", FW ErrorInfo:",d[a.INFO_KEY_ERROR_INFO],", VAST ErrorCode:",d[a.INFO_KEY_VAST_ERROR_CODE]);(b=c.processEvent(a.EVENT_ERROR,a.EVENT_TYPE_ERROR,d))||a.debug("No EVENT_ERROR callback found");if(d)switch(d[a.INFO_KEY_ERROR_CODE]){case a.ERROR_NO_AD_AVAILABLE:case a.ERROR_PARSE:(b=c.processEvent(a.EVENT_RESELLER_NO_AD,a.EVENT_TYPE_IMPRESSION))||a.debug("No EVENT_RESELLER_NO_AD callback found.")}h.fail(this);break;default:a.debug("Unknown event received",b)}},setCapability:function(a,b){c.setMetr(a,b)},getVersion:function(){return b._adManager.getVersion()},getParameter:function(a){if(!a)return null;if(b._overrideLevelParameterDictionary.hasOwnProperty(a))return b._overrideLevelParameterDictionary[a];if(c.getActiveCreativeRendition()&&"undefined"!==typeof c.getActiveCreativeRendition().getParameter(a))return c.getActiveCreativeRendition().getParameter(a);var d=c._creative;return d&&"undefined"!==typeof d.getParameter(a)?d.getParameter(a):"undefined"!==typeof c.getSlot().getParameter(a)?c.getSlot().getParameter(a):b._adResponse._profileParameters.hasOwnProperty(a)?b._adResponse._profileParameters[a]:b._globalLevelParameterDictionary.hasOwnProperty(a)?b._globalLevelParameterDictionary[a]:f&&f.hasOwnProperty(a)?f[a]:null},getCompanionSlots:function(){for(var a=[],b=c._companionAdInstances,d=0;d<b.length;d++)b[d].isPlaceholder()&&a.push(b[d].getSlot());return a},createNullDrivingAdInstance:function(){var a=c.getSlot().scheduleAdInstance();a.addCreativeRendition().setContentType("null/null");return a},scheduleAdInstances:function(a){var b,d=[],e=null;a=a||[];if(0===a.length)return d;for(b=0;b<a.length;b++)a[b].getCustomId()===c.getSlot().getCustomId()&&(e=c.getSlot().scheduleAdInstance());if(!e)if(this.isTranslator())e=this.createNullDrivingAdInstance();else if(this.isRenderer())e=c;else return d;for(var f=0;f<a.length;f++){if(a[f].getCustomId()===c.getSlot().getCustomId())e!==c&&d.push(e);else for(var h=0,p=e._companionAdInstances;h<p.length;h++)if(b=p[h],a[f]===b.getSlot()){if(this.isTranslator())d.push(b);else if(this.isRenderer()&&b.isPlaceholder()){var m=b.cloneForTranslation();e===c&&(g[m]=b);p[h]=m;d.push(m);k.push(m)}break}d.length<=f&&d.push(null)}return d},commitAdInstance:function(){if(this.isRenderer()&&c.isStarted()){for(var b=0;b<k.length;b++){var d=k[b];d&&d.getSlot().playCompanionAds(d)}k=[]}else a.warn("Skipping RendererController.commitAdInstance when called with driving ad not started or completed.")},isRenderer:function(){return d&&a.MODULE_TYPE_RENDERER===d.info()[a.INFO_KEY_MODULE_TYPE]},isTranslator:function(){return d&&a.MODULE_TYPE_TRANSLATOR===d.info()[a.INFO_KEY_MODULE_TYPE]},playable:function(){return h===a.RendererInitState.instance},reset:function(){h=a.RendererInitState.instance},play:function(){for(var a=c.getRenderableCreativeRenditions()||[],b=null,d=0;d<a.length;d++){var e=a[d];if(b=this._matchRendererClassName(e)){c.setActiveCreativeRendition(e);break}}0===m&&this._actualPlay(b)},_actualPlay:function(b){(e=a.Util.getObject(b)||a.Util.getObject(w+"."+b))&&(d=new e);d?h.start(this):this.handleStateTransition(a.RENDERER_STATE_FAILED,{errorCode:a.ERROR_NO_RENDERER,errorInfo:"Renderer class <"+b+"> not found"})},dispatchEvent:function(a,c){b.dispatchEvent(a,c)},requestContentStateChange:function(a){a?b._requestContentVideoToPauseBySlot(c.getSlot()):b._requestContentVideoToResumeBySlot(c.getSlot())},getRenderer:function(){return d},setRenderer:function(a){d=a},setRendererState:function(a){h=a},getContentVideoElement:function(){return b.getContentVideoElement()},_restorePlaceholdersForHybrid:function(){if(g&&this.isRenderer()){for(var a=[],b=0;b<c._companionAdInstances.length;b++){var d=c._companionAdInstances[b],e=g[d];e?a.push(e):a.push(d)}c._companionAdInstances=a}0<k.length&&this.isRenderer()&&(k=[])},rendererMatch:function(b){return e?e===a.Util.getObject(this._matchRendererClassName(b)):!0},_matchRendererClassName:function(d){function e(b,c,d){a.debug("matching "+b+" within "+c);if(!c)return!0;c=c.split(",");c[c.length-1]||c.pop();if(d){b=b.toLowerCase();for(d=0;d<c.length;d++)if(b===c[d].toLowerCase())return!0;a.debug("not match");return!1}(c=0<=c.indexOf(b))||a.debug("not match");return c}var g=d.getPrimaryCreativeRenditionAsset().getContentType(),h=d.getContentType(),k=d.getWrapperType(),p=d.getCreativeApi(),E=d.getBaseUnit(),F=c.getSoAdUnit(),H=c.getSlot(),I=H.getType();H=H.getTimePositionClass();a.debug("match renderer for creativeRendition:"+d.getId());a.debug("slot type:"+I);if(a.Util.isBlank(h)&&a.Util.isBlank(k))return a.warn("renderer not match due to both contentType and wrapperType are empty"),null;var v=b._rendererManifest["*"];v||(v=b._rendererManifest[k]);v||(v=b._rendererManifest[h]);if(!v){I=b._overriddenAdRenderers.concat(b._adResponse._adRenderers);for(var K=0;K<I.length;K++){var q=I[K],x=!q.contentType;x||(k?x=e(k,q.contentType,!0):(g&&(x=e(g,q.contentType,!0)),x||(x=e(h,q.contentType,!0))));if(x)if((x=!q.creativeApi)||(x=e(p,q.creativeApi)),x)if(q.baseUnit&&!e(E,q.baseUnit))a.debug("can't match renderer "+q.url+" due to baseUnit not match for creativeRendition:"+d.getId());else if(q.soAdUnit&&!e(F,q.soAdUnit))a.debug("can't match renderer "+q.url+" due to soAdUnit not match for creativeRendition:"+d.getId());else if(q.slotType&&!e(H.toUpperCase(),q.slotType.toUpperCase()))a.debug("can't match renderer "+q.url+" due to slotType not match for creativeRendition:"+d.getId());else{if(a.debug("renderer "+q.url+" matched for creativeRendition:"+d.getId()),q.url){v=q.url;d=v.indexOf("?");-1!==d&&(v=v.substring(0,d));d=v.lastIndexOf("/");-1!==d&&(v=v.substring(d+1));d=v.lastIndexOf(".js");-1!==d&&(v=v.substring(0,d));var G={};if(q.parameter)for(d=[].concat(q.parameter),g=0;g<d.length;g++)if(d[g].hasOwnProperty("name"))G[d[g].name]=d[g].value;else for(var z in d[g])d[g].hasOwnProperty(z)&&(G[z]=d[g][z]);a.Util.getObject(w+"."+v)&&(v=w+"."+v);if(a.Util.getObject(v))f=G,m=0;else{if(0<m)break;var r=this;z=1*this.getContext().getParameter("moduleLoadTimeout")||6e4;m=window.setTimeout(function(){m=-1;r.handleStateTransition(a.RENDERER_STATE_FAILED,{errorCode:a.ERROR_NO_RENDERER,errorInfo:"Load renderer timeout, URL:"+q.url})},z);a.Util.lazyJavaScriptLoad(q.url,function(){a.log("async load renderer successful, URL:"+q.url);-1===m?a.debug("renderer loaded after timeout. WILL NOT PLAY."):(window.clearTimeout(m),m=0,f=G,r._actualPlay(v))})}break}}else a.debug("can't match renderer "+q.url+" due to creative api not match for creativeRendition:"+d.getId());else a.debug("can't match renderer "+q.url+" due to contentType not match for creativeRendition:"+d.getId())}}return v?v:a.Util.isBlank(k)?"null/null"===h?w+".NullRenderer":null:null},_inferEventType:function(b){return b===a.EVENT_ERROR?a.EVENT_TYPE_ERROR:b===a.EVENT_AD_CLICK?a.EVENT_TYPE_CLICK:b===a.EVENT_AD_IMPRESSION||b===a.EVENT_AD_FIRST_QUARTILE||b===a.EVENT_AD_MIDPOINT||b===a.EVENT_AD_THIRD_QUARTILE||b===a.EVENT_AD_COMPLETE||b===a.EVENT_RESELLER_NO_AD?a.EVENT_TYPE_IMPRESSION:b===a.EVENT_AD_PAUSE||b===a.EVENT_AD_RESUME||b===a.EVENT_AD_REWIND||b===a.EVENT_AD_MUTE||b===a.EVENT_AD_UNMUTE||b===a.EVENT_AD_COLLAPSE||b===a.EVENT_AD_EXPAND||b===a.EVENT_AD_MINIMIZE||b===a.EVENT_AD_CLOSE||b===a.EVENT_AD_ACCEPT_INVITATION?a.EVENT_TYPE_STANDARD:b===a.EVENT_AD_MEASUREMENT||b===a.EVENT_AD_VOLUME_CHANGE||b===a.EVENT_AD_BUFFERING_START||b===a.EVENT_AD_BUFFERING_END||a.EVENT_AD_INITIATED||a.EVENT_AD_AUTO_PLAY_BLOCKED?a.EVENT_TYPE_GENERIC:null},pause:function(){a.log("RendererController.pause");d&&"function"===typeof d.pause?d.pause():a.log("Renderer.pause() is not implemented.")},resume:function(){a.log("RendererController.resume");d&&"function"===typeof d.resume?d.resume():a.log("Renderer.resume() is not implemented.")},stop:function(){a.log("RendererController.stop");0<m&&(m=-1);h.stop(this)}}};a.VideoStateExtension=function(){};a.VideoStateExtension.prototype={_enabled:function(){if(null==this._context)return!1;var b=this._context.getParameter(a.PARAMETER_EXTENSION_VIDEO_STATE_ENABLED);null==b&&(b="false");return!0===a.Util.str2bool(b)},init:function(b){this._context=b;this._enabled()?this._context.setVideoState(a.VIDEO_STATE_PLAYING):a.log("VideoStateExtension is disabled.")},dispose:function(){this._context=null}};a.VideoStateExtension.prototype.constructor=a.VideoStateExtension;a.AdResponse=function(a){this._context=a};a.AdResponse.prototype={};a.AdResponse.prototype.constructor=a.AdResponse;a.Util.mixin(a.AdResponse.prototype,{parse:function(b,c){this._data=b;this._temporalSlots=[];this._videoPlayerNonTemporalSlots=[];this._siteSectionNonTemporalSlots=[];this._profileParameters={};this._ads=[];this._siteSectionCustomId=a.Util.getObject("siteSection.customId",b)||"";this._adRenderers=[];var d;var e=a.Util.getObject("parameters",b)||[];for(d=0;d<e.length;++d){var f=e[d];this._profileParameters[f.name]=f.value}this._adRenderers=a.Util.getObject("rendererManifest.adRenderers.adRenderer",b)||[];for(d=0;d<this._adRenderers.length;d++)"undefined"!==typeof this._adRenderers[d].adUnit&&(this._adRenderers[d].baseUnit=this._adRenderers[d].adUnit,delete this._adRenderers[d].adUnit);e=a.Util.getObject("ads.ads",b)||[];for(d=0;d<e.length;++d)f=new a.Ad(this._context),f.parse(e[d]),this._ads.push(f);e=a.Util.getObject("siteSection.videoPlayer.videoAsset.adSlots",b)||[];for(d=0;d<e.length;++d)f=new a.Slot(this._context),f.setType(a.SLOT_TYPE_TEMPORAL),f.setBase(c),f.parse(e[d]),this._temporalSlots.push(f);e=a.Util.getObject("siteSection.videoPlayer.adSlots",b)||[];for(d=0;d<e.length;++d)f=new a.Slot(this._context),f.setType(a.SLOT_TYPE_VIDEOPLAYER_NONTEMPORAL),f.setTimePositionClass(a.TIME_POSITION_CLASS_DISPLAY),f.parse(e[d]),this._initSlotData(f),this._videoPlayerNonTemporalSlots.push(f);e=a.Util.getObject("siteSection.adSlots",b)||[];for(d=0;d<e.length;++d)f=new a.Slot(this._context),f.setType(a.SLOT_TYPE_SITESECTION_NONTEMPORAL),f.setTimePositionClass(a.TIME_POSITION_CLASS_DISPLAY),f.parse(e[d]),this._initSlotData(f),this._siteSectionNonTemporalSlots.push(f);b=a.Util.getObject("siteSection.videoPlayer.videoAsset",b)||{};this._context._videoAsset.parse(b)},getCreative:function(a,c){return(a=this.getAd(a))?a.getCreative(c):null},getAd:function(a){for(var b=0;b<this._ads.length;b++){var d=this._ads[b];if(d.getId()===a)return d}return null},getTemporalSlots:function(){return this._temporalSlots},getSiteSectionNonTemporalSlots:function(){return this._siteSectionNonTemporalSlots},getVideoPlayerNonTemporalSlots:function(){return this._videoPlayerNonTemporalSlots},getSiteSectionCustomId:function(){return this._siteSectionCustomId},getSlotByCustomId:function(b){for(var c=0;c<this._temporalSlots.length;++c)if(this._temporalSlots[c].getCustomId()===b)return this._temporalSlots[c];for(c=0;c<this._videoPlayerNonTemporalSlots.length;++c)if(this._videoPlayerNonTemporalSlots[c].getCustomId()===b)return this._videoPlayerNonTemporalSlots[c];for(c=0;c<this._siteSectionNonTemporalSlots.length;++c)if(this._siteSectionNonTemporalSlots[c].getCustomId()===b)return this._siteSectionNonTemporalSlots[c];a.warn("getSlotByCustomId(): not found",b);return null},_initSlotData:function(b){for(var c=!1,d=0;d<this._context._adRequest._slotScanner._knownSlots.length;d++){var e=this._context._adRequest._slotScanner._knownSlots[d];if(b.getCustomId()===e.id&&e.element){b.setWidth(e.width);b.setHeight(e.height);b.setBase(e.element);b.setAcceptCompanion(e.acceptCompanion);b.setInitialAdOption(e.initialAdOption);c=!0;break}}c||a.warn("Failed to init slot "+b.getCustomId());return c}});a.Slot=function(b){var c="",d=null,e=null,f=null,h=null,g=[],k=[],m={},p=null,y=a.MediaInitState.instance,T=0,t=null,w,l,E,F,H,I,v=0,K=0,q=[],x=null,G=!1,z=!1,r=!0,D=[],J,B,O=!1;return{setAutoPlayBlocked:function(a){O=a},getSlotProfile:function(){return e},setSlotProfile:function(a){e=a},setMediaState:function(a){y=a},setParameter:function(a,b){null==b?delete m[a]:m[a]=b},getParameter:function(a){if(a&&m.hasOwnProperty(a))return m[a]},getAdCount:function(){return g.length},setCustomId:function(a){c=a},getCustomId:function(){return c},setAdUnit:function(a){H=a},getAdUnit:function(){return H},setType:function(a){d=a},getType:function(){return d},setTimePosition:function(a){l=a},getTimePosition:function(){return l},setTimePositionClass:function(a){t=a&&a.toUpperCase()},getTimePositionClass:function(){return t},setWidth:function(a){E=a},getWidth:function(){return t!==a.TIME_POSITION_CLASS_DISPLAY?E?E:b.getVideoDisplaySize().width:E},setHeight:function(a){F=1*a},getHeight:function(){return t!==a.TIME_POSITION_CLASS_DISPLAY?F?F:b.getVideoDisplaySize().height:F},setBase:function(a){w=a},getBase:function(){return w},setCuepointSequence:function(a){I=1*a?1*a:0},getCuepointSequence:function(){return I},getVideoDisplaySize:function(){return b.getVideoDisplaySize()},setMaxDuration:function(a){v=1*a?1*a:0},getMaxDuration:function(){return v},setMinDuration:function(a){K=1*a?1*a:0},getMinDuration:function(){return K},setAcceptContentType:function(a){if(a&&a.trim()){a=a.split(",");for(var b=0;b<a.length;b++)q.push(a[b].trim())}},setSignalId:function(a){a&&a.trim()&&(x=a)},getSignalId:function(){return x},getAcceptContentType:function(){return q.join(",")},parse:function(d){if(d){c=d.customId;l=1*d.timePosition;t=d.timePositionClass&&d.timePositionClass.toUpperCase()||t;H=d.adUnit;x=d.signalId;if(void 0===x||null===x)x=d.outSignalId;for(var e,f=0,h=d.eventCallbacks||[];f<h.length;f++){e=h[f];var m=a.EventCallback.newEventCallback(b,e.name,e.type);m&&(m._slot=this,m.parse(e),k.push(m))}f=0;for(h=d.selectedAds||[];f<h.length;f++)e=h[f],d=[],m=new a.AdInstance(b),d.push(m),m._slot=this,m._slotCustomId=c,m._parentAdInstancesGroup=d,m.parse(e),g.push(d)}},getCurrentAdInstance:function(){return f},isPauseSlot:function(){return t===a.TIME_POSITION_CLASS_PAUSE_MIDROLL},play:function(c){if(O)a.log("Resuming previously blocked video ad now."),O=!1,b.getContentVideoElement()&&b.getContentVideoElement().play();else{for(var d=this.getAdInstances(),e=0;e<d.length;e++)d[e]._isSkipped=!1;t!==a.TIME_POSITION_CLASS_DISPLAY||r?(a.log("Slot.play",t),G=!1,t===a.TIME_POSITION_CLASS_DISPLAY&&1<g.length&&g.splice(0,g.length-1),this._play(c)):(a.log("Slot is invisible. Push the play operation to the queue."),D.push({operation:this.play,argument:c}))}},stop:function(){a.log("Slot.stop",t);t===a.TIME_POSITION_CLASS_DISPLAY&&(D=[]);y===a.MediaInitState.instance||y===a.MediaEndState.instance?a.log("Slot.stop, not start or already end, ignore"):(G=!0,f?f.stop():a.warn("Slot.stop, no _currentAdInstance, ignore"))},pause:function(){a.log("Slot.pause");t!==a.TIME_POSITION_CLASS_DISPLAY?f&&f.pause():a.log("Not a temporal slot. Ignore.")},resume:function(){a.log("Slot.resume");t!==a.TIME_POSITION_CLASS_DISPLAY?f&&f.resume():a.log("Not a temporal slot. Ignore.")},skipCurrentAd:function(){a.log("Slot.skipCurrentAd ",f);f?f.skip():a.log("Slot.skipCurrentAd, no _currentAdInstance, ignore")},setVisible:function(b){if(t!==a.TIME_POSITION_CLASS_DISPLAY)a.log("Slot.setVisible is only for display ads.");else if(a.log("Slot.setVisible",b),r!==b&&(r=b))for(;0<D.length;)b=D.pop(),b.operation&&b.operation.call(this,b.argument)},_play:function(a){p=p||a;y.play(this)},onStartPlaying:function(){this._onStartPlaying()},onStartReplaying:function(){this._onStartPlaying()},onCompletePlaying:function(){this._onCompletePlaying()},onCompleteReplaying:function(){this._onCompletePlaying()},playNextAdInstance:function(){a.log("Slot.playNextAdInstance ",t);this._playNextAdInstance()||y.complete(this)},scheduleAdInstance:function(){return h=f.cloneForTranslation()},_clearScheduledAdInstance:function(){h=null},_onStartPlaying:function(){t===a.TIME_POSITION_CLASS_MIDROLL&&0<g.length&&b._requestContentVideoToPauseBySlot(this);var c=a.EventCallback.getEventCallback(k,a.EVENT_SLOT_IMPRESSION,a.EVENT_TYPE_IMPRESSION);c&&c.process();this.dispatchSlotEvent(a.EVENT_SLOT_STARTED);this.playNextAdInstance()},dispatchSlotEvent:function(a){z||b.dispatchEvent(a,{slot:this})},_onCompletePlaying:function(){p&&p();p=null;D=[];var c=a.EventCallback.getEventCallback(k,a.EVENT_SLOT_END,a.EVENT_TYPE_IMPRESSION);c&&c.process();f=null;this.dispatchSlotEvent(a.EVENT_SLOT_ENDED);t===a.TIME_POSITION_CLASS_MIDROLL&&0<g.length&&b._requestContentVideoToResumeBySlot(this)},_playNextAdInstance:function(){if(G||y!==a.MediaPlayingState.instance&&y!==a.MediaReplayingState.instance)return!1;this._commitScheduledAdInstance();f=this._nextPlayableAdInstance();if(!f)return!1;f.reset();f._isInitiatedSent||(f.getRendererController().processEvent({name:a.EVENT_AD_INITIATED}),f._isInitiatedSent=!0);f.getRendererController().play();return!0},_commitScheduledAdInstance:function(){if(h){var a=f._parentAdInstancesGroup.indexOf(f);0<=a&&(h._parentAdInstancesGroup=f._parentAdInstancesGroup,f._parentAdInstancesGroup.splice(a,1,h),h=null)}},_nextPlayableAdInstance:function(){if(f){var b=f._parentAdInstancesGroup,c=b.indexOf(f);var d=g.indexOf(b);0<=d&&0<=c&&(f._isImpressionSent||f._isSkipped||c===b.length-1)&&d++}else d=0;if(0>d||d>=g.length)return null;var e;if(y===a.MediaPlayingState.instance)for(b=g[d],e=0;e<b.length;e++){if(c=b[e],c.getRendererController().playable())return c}else if(y===a.MediaReplayingState.instance)for(;d<g.length;d++){b=g[d];for(e=0;e<b.length;e++)if(c=b[e],c._isImpressionSent)return c;for(e=0;e<b.length;e++)if(c=b[e],c.getRendererController().getRendererState()!==a.RendererFailedState.instance&&!c._translated)return c}return null},toString:function(){return"[Slot "+c+"]"},getAdInstances:function(){for(var a=[],b=0;b<g.length;++b)for(var c=g[b],d=0;d<c.length;++d){var e=c[d];if(e.isPlayable()){a.push(e);break}}return a},getPlayheadTime:function(){for(var a=0,b=this.getAdInstances(),c=0;c<b.length;++c)if(b[c]===f){b=f.getPlayheadTime();-1<b&&(a+=b);break}else{var d=b[c].getDuration();-1<d&&(a+=d)}T&&a>T&&(a=T);return a},getTotalDuration:function(){if(d!==a.SLOT_TYPE_TEMPORAL)return-1;for(var b=0,c=this.getAdInstances(),e=0;e<c.length;++e){var f=c[e].getDuration();-1<f&&(b+=f)}return T=b},playCompanionAds:function(b){a.log("Slot.playCompanionAds");var c=[];b._parentAdInstancesGroup=c;c.push(b);g.push(c);z=!0;f&&this.stop();this.play()},getState:function(){return y},setAcceptCompanion:function(a){J=a},getAcceptCompanion:function(){return J},setInitialAdOption:function(a){B=a},getInitialAdOption:function(){return B}}};a.SurveyExtension=function(){this._surveyPingedIds=[]};a.SurveyExtension.prototype={init:function(b){this._context=b;a.log("SurveyExtension.init("+Array.prototype.slice.call(arguments).join(",")+")");this._onAdStarted=a.Util.bind(this,function(b){this._parameters=this._getParameters();if(this._parameters.enabled){a.log("SurveyExtension.onAdStarted()");var c=b.adInstance;if(-1<this._surveyPingedIds.indexOf(c.getAdId()))a.log("won't pingback survey since it has been pinged back");else{
var e=c._creative.getParameter("_fw_survey_url");if(e)try{a.log("append"+e+" to head");var f=document.getElementsByTagName("head")[0],h=document.createElement("script");h.setAttribute("type","text/javascript");h.setAttribute("src",e);f.appendChild(h);this._surveyPingedIds.push(c.getAdId())}catch(g){a.warn("Append survey to head",b.type,g)}}}});this._context.addEventListener(a.EVENT_AD_IMPRESSION,this._onAdStarted)},dispose:function(){a.log("SurveyExtension.dispose()");this._context.removeEventListener(a.EVENT_AD_IMPRESSION,this._onAdStarted);this._parameters=this._onAdStarted=null},_getParameters:function(){var b={};b.enabled="false"!==this._context.getParameter(a.PARAMETER_EXTENSION_SURVEY_ENABLED);a.log(b);return b}};a.SurveyExtension.prototype.constructor=a.SurveyExtension;a.ExtensionManager=function(b){this._extensions={};this._context=b;this._surveyExtension=new a.SurveyExtension;this._surveyExtension.init(b);this._videoStateExtension=new a.VideoStateExtension;this._videoStateExtension.init(b);this._displayRefreshExtension=new a.DisplayRefreshExtension;this._displayRefreshExtension.init(b);this._contentVideoExtension=new a.ContentVideoExtension;this._contentVideoExtension.init(b)};a.ExtensionManager.prototype={_scriptLoaded:function(b){if(null==this._extensions[b])this._loadFail(b,"Extension supposed to be loaded but not found");else{var c=a.Util.getObject(b);"function"!==typeof c?this._loadFail(b,"Script loaded but extension class not found"):(c=new c,"function"===typeof c.init&&"function"===typeof c.dispose?(a.log("Extension loaded: "+b),c.init(this._context),this._context.dispatchEvent(a.EVENT_EXTENSION_LOADED,{success:!0,moduleName:b})):this._loadFail(b,"Extension loaded but is not supported"))}},_getExtensionNameFromUrl:function(a){for(var b=/(?!.*\.{2})(?:[\\/\?=#])([a-z][\w\.]+)(?:\.js(#|\?|$))/gi,d,e;null!=(d=b.exec(a));)e=d;return e?e[1]:null},_loadFail:function(b,c){a.log("Extension failed to load. "+b+" : "+c);this._context.dispatchEvent(a.EVENT_EXTENSION_LOADED,{success:!1,errorVal:c,moduleName:b})},load:function(b){if(b){var c=this._getExtensionNameFromUrl(b);if(null==c)this._loadFail(c,"Extension name not exists in the Url. Url: "+b);else if(this._extensions[c]===b)a.log("Extension is already loaded"),this._loadFail(c,"Extension is already loaded");else{var d=1*this._context.getParameter("moduleLoadTimeout")||6e4,e=!1,f=this,h=window.setTimeout(function(){e=!0;f._loadFail(c,"Timeout occured while loading extension. Url: "+b)},d);a.Util.lazyJavaScriptLoad(b,function(){a.log("async load extension successful, URL:"+b);window.clearTimeout(h);e?a.debug("Extension loaded after timeout, do nothing."):(f._extensions[c]=b,f._scriptLoaded(c))})}}else this._loadFail(c,"Url cannot be empty")},dispose:function(){this._extensions=null;this._surveyExtension.dispose();this._surveyExtension=null;this._displayRefreshExtension.dispose();this._displayRefreshExtension=null;this._videoStateExtension.dispose();this._videoStateExtension=null;this._contentVideoExtension.dispose();this._context=this._contentVideoExtension=null}};a.ExtensionManager.prototype.constructor=a.ExtensionManager;a.EventCallback=function(a){this._url=this._name=this._type=null;this._showBrowser=!1;this._trackingUrls=[];this._adInstance=this._slot=null;this._context=a};a.EventCallback.prototype={};a.EventCallback.prototype.constructor=a.EventCallback;a.EventCallback.getEventCallback=function(b,c,d){for(var e,f=0;f<b.length;f++)if(e=b[f],e._name===c&&e._type===d)return e;for(f=0;f<b.length;f++)if(e=b[f],e._type===a.EVENT_TYPE_GENERIC){if(c=a.EventCallback.newEventCallback(e._context,c,d))c._url=e._url,c._slot=e._slot,c._adInstance=e._adInstance,b.push(c);return c}return null};a.EventCallback.newEventCallback=function(b,c,d){if(d===a.EVENT_TYPE_GENERIC)b=new a.EventCallback(b);else if(d===a.EVENT_TYPE_ERROR)b=new a.ErrorEventCallback(b);else if(d===a.EVENT_TYPE_CLICK)b=new a.AdClickEventCallback(b);else if(d===a.EVENT_TYPE_STANDARD)b=new a.AdStandardEventCallback(b);else if(c===a.EVENT_SLOT_IMPRESSION||c===a.EVENT_SLOT_END)b=new a.SlotImpressionEventCallback(b);else if(c===a.EVENT_AD_IMPRESSION||c===a.EVENT_AD_IMPRESSION_END)b=new a.AdImpressionEventCallback(b);else if(c===a.EVENT_VIDEO_VIEW)b=new a.VideoViewEventCallback(b);else if(c===a.EVENT_RESELLER_NO_AD)b=new a.ResellerNoAdEventCallback(b);else if(c===a.EVENT_AD_FIRST_QUARTILE||c===a.EVENT_AD_MIDPOINT||c===a.EVENT_AD_THIRD_QUARTILE||c===a.EVENT_AD_COMPLETE)b=new a.AdQuartileEventCallback(b);else return null;b._name=c;b._type=d;return b};a.EventCallback.getShortType=function(b){var c="";switch(b){case a.EVENT_TYPE_IMPRESSION:c=a.SHORT_EVENT_TYPE_IMPRESSION;break;case a.EVENT_TYPE_CLICK:c=a.SHORT_EVENT_TYPE_CLICK;break;case a.EVENT_TYPE_STANDARD:c=a.SHORT_EVENT_TYPE_STANDARD;break;case a.EVENT_TYPE_ERROR:c=a.SHORT_EVENT_TYPE_ERROR}return c};a.Util.mixin(a.EventCallback.prototype,{parse:function(a){if(a){this._usage=a.use;this._type=a.type;this._name=a.name;this._url=a.url;this._showBrowser=a.showBrowser;this._trackingUrls=[];var b=0;for(a=a.trackingUrls||[];b<a.length;b++)this._trackingUrls.push(a[b].value)}},copy:function(){var a=new this.constructor(this._context);a._type=this._type;a._name=this._name;a._url=this._url;a._showBrowser=this._showBrowser;a._trackingUrls=this._trackingUrls.slice();a._slot=this._slot;a._adInstance=this._adInstance;return a},getUrl:function(b){var c=this._replaceMacrosInUrl(this._url,b);this._name===a.EVENT_AD_MEASUREMENT?(c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_ET,a.SHORT_EVENT_TYPE_IMPRESSION),c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CONCRETE_EVENT_ID,b[a.INFO_KEY_CONCRETE_EVENT_ID])):c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_ET,a.EventCallback.getShortType(this._type));c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CN,this._name);this._adInstance&&0<this._adInstance._creativeRenditionId&&(c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CREATIVE_RENDITION_ID,this._adInstance._creativeRenditionId));return c},getTrackingUrls:function(b){var c=this._trackingUrls;if(this._adInstance){var d=this._type;d===a.EVENT_TYPE_CLICK&&(d=a.EVENT_TYPE_CLICK_TRACKING);c=c.concat(this._adInstance.getExternalEventCallbackUrls(this._name,d))}d=[];for(var e=0;e<c.length;e++){var f=a.Util.trim(this._replaceMacrosInUrl(c[e],b));a.Util.isBlank(f)||d.push(f)}return d},process:function(b){b=b||{};this._processTrackingUrls(b);a.Util.pingURL(this.getUrl(b))},_processTrackingUrls:function(b){this._shouldSkipSendingTrackingAndExternalUrls()||a.Util.pingURLs(this.getTrackingUrls(b))},_shouldSkipSendingTrackingAndExternalUrls:function(){return!1},_needEmptyCT:function(b){var c=!1;b&&!0===b[a.INFO_KEY_NEED_EMPTY_CT]&&(c=!0);return c},_getAdPlayheadTime:function(){var a=-1;this._adInstance&&(a=this._adInstance.getPlayheadTime());return a},_getCreativeAssetLocation:function(){var a=null;this._adInstance&&this._adInstance.getActiveCreativeRendition()&&this._adInstance.getActiveCreativeRendition().getPrimaryCreativeRenditionAsset()&&(a=this._adInstance.getActiveCreativeRendition().getPrimaryCreativeRenditionAsset().getUrl());return a},_getParameter:function(a){return this._adInstance?this._adInstance._rendererController.getParameter(a):this._slot?this._slot.getParameter(a):this._context.getParameter(a)},_replaceVASTMacro:function(b,c,d){a.log("replace VAST Macro: url=",b+", macro="+c+", value="+d);b&&c&&(d=encodeURIComponent(d?d:""),b=b.replace("["+c+"]",d),b=b.replace("%5B"+c+"%5D",d));return b},_replaceMacrosInUrl:function(b,c){if(a.Util.isBlank(b))return b;c&&c[a.INFO_KEY_VAST_ERROR_CODE]&&(b=this._replaceVASTMacro(b,"ERRORCODE",c[a.INFO_KEY_VAST_ERROR_CODE]));this._getCreativeAssetLocation()&&(b=this._replaceVASTMacro(b,"ASSETURI",this._getCreativeAssetLocation()));var d=this._context._getContentPlayheadTime();this._adInstance&&(c=null!=d&&0<=Number(d)?a.Util.secondsToHms(d):"",b=this._replaceVASTMacro(b,"CONTENTPLAYHEAD",c),b=this._replaceVASTMacro(b,"CACHEBUSTING",a.Util.getFixedDigitRandomNumber(8)),b=this._replaceVASTMacro(b,"TIMESTAMP",a.Util.getDateStringInISOFormat(new Date)));b=b.replace(/#(ce?)\{([^\}]+)\}/g,a.Util.bind(this,function(b,c,h){a.log("matchedSubString"+b);b="ce"===c;c=null;switch(h){case"ad.playheadTime":h=this._getAdPlayheadTime();c=0<=h?Math.round(h)+"":"";break;case"content.playheadTime":c=0<=d?Math.round(d)+"":"";break;case"creative.assetLocation":c=this._getCreativeAssetLocation();break;default:0===h.indexOf("parameter.")&&(c=this._getParameter(h.substr(10)))}a.Util.isBlank(c)&&(c="");return b?encodeURIComponent(c):c}));c="";try{c=a.Util.getParameterInURL(b,a.URL_PARAMETER_KEY_CR)}catch(e){return a.warn(e),b}a.Util.isBlank(c)||(b=a.Util.setParameterInURL(b,a.URL_PARAMETER_KEY_CR,this._replaceMacrosInUrl(c)));return b}});a.AdClickEventCallback=function(b){a.EventCallback.call(this,b)};a.AdClickEventCallback.prototype=new a.EventCallback;a.AdClickEventCallback.prototype.constructor=a.AdClickEventCallback;a.Util.mixin(a.AdClickEventCallback.prototype,{getUrl:function(b){var c=a.EventCallback.prototype.getUrl.call(this,b);b[a.INFO_KEY_URL]&&(a.Util.isParameterInURL(c,a.URL_PARAMETER_KEY_CR)||(c=c+"&"+a.URL_PARAMETER_KEY_CR+"="),c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CR,b[a.INFO_KEY_URL]));return c},process:function(b){b=b||{};var c=this.getUrl(b),d=!0===this._showBrowser;d=b.hasOwnProperty(a.INFO_KEY_SHOW_BROWSER)?!0===b[a.INFO_KEY_SHOW_BROWSER]:d;b[a.INFO_KEY_URL]&&(d=!0);d&&!a.Util.isBlank(c)?(window.open(c),this._processTrackingUrls(b)):a.EventCallback.prototype.process.call(this,b)}});a.AdImpressionEventCallback=function(b){a.EventCallback.call(this,b)};a.AdImpressionEventCallback.prototype=new a.EventCallback;a.AdImpressionEventCallback.prototype.constructor=a.AdImpressionEventCallback;a.Util.mixin(a.AdImpressionEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls:function(){return this._getInitValue()!==a.INIT_VALUE_ONE},_getInitValue:function(){return this._adInstance.getSlot().isPauseSlot()||!this._processed?a.INIT_VALUE_ONE:a.INIT_VALUE_TWO},getUrl:function(b){var c=a.EventCallback.prototype.getUrl.call(this,b);c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_METR,this._adInstance._metr);this._name!==a.EVENT_AD_IMPRESSION&&(c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CT,this._needEmptyCT(b)?"":this._adInstance._timer.tick()));return c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_INIT,this._getInitValue())},process:function(b){a.MODULE_TYPE_TRANSLATOR!==this._adInstance.getRendererController().getRenderer().info()[a.INFO_KEY_MODULE_TYPE]&&(a.EventCallback.prototype.process.call(this,b),this._processed=!0)}});a.AdQuartileEventCallback=function(b){a.EventCallback.call(this,b)};a.AdQuartileEventCallback.prototype=new a.EventCallback;a.AdQuartileEventCallback.prototype.constructor=a.AdQuartileEventCallback;a.Util.mixin(a.AdQuartileEventCallback.prototype,{getUrl:function(b){var c=a.EventCallback.prototype.getUrl.call(this,b);c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_METR,this._adInstance._metr);return c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CT,this._needEmptyCT(b)?"":this._adInstance._timer.tick())},process:function(b){this._processed||(a.EventCallback.prototype.process.call(this,b),this._processed=!0)}});a.AdStandardEventCallback=function(b){a.EventCallback.call(this,b)};a.AdStandardEventCallback.prototype=new a.EventCallback;a.AdStandardEventCallback.prototype.constructor=a.AdStandardEventCallback;a.ErrorEventCallback=function(b){a.EventCallback.call(this,b)};a.ErrorEventCallback.prototype=new a.EventCallback;a.ErrorEventCallback.prototype.constructor=a.ErrorEventCallback;a.Util.mixin(a.ErrorEventCallback.prototype,{getUrl:function(b){var c=a.EventCallback.prototype.getUrl.call(this,b),d=b[a.INFO_KEY_ERROR_CODE];d||(d=a.ERROR_UNKNOWN);var e=b[a.INFO_KEY_ERROR_INFO];e||(e="");(b=b[a.INFO_KEY_ERROR_MODULE])||(b="");c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_CN,d);return c=a.Util.setParameterInURL(c,a.URL_PARAMETER_KEY_KEY_VALUE,encodeURIComponent(a.URL_PARAMETER_KEY_ERROR_MODULE)+"="+encodeURIComponent(b)+"&"+encodeURIComponent(a.URL_PARAMETER_KEY_ERROR_INFO)+"="+a.PLATFORM_ID+"/"+encodeURIComponent(e))}});a.ResellerNoAdEventCallback=function(b){a.EventCallback.call(this,b)};a.ResellerNoAdEventCallback.prototype=new a.EventCallback;a.ResellerNoAdEventCallback.prototype.constructor=a.ResellerNoAdEventCallback;a.Util.mixin(a.ResellerNoAdEventCallback.prototype,{});a.SlotImpressionEventCallback=function(b){a.EventCallback.call(this,b)};a.SlotImpressionEventCallback.prototype=new a.EventCallback;a.SlotImpressionEventCallback.prototype.constructor=a.SlotImpressionEventCallback;a.Util.mixin(a.SlotImpressionEventCallback.prototype,{_shouldSkipSendingTrackingAndExternalUrls:function(){return this._getInitValue()!==a.INIT_VALUE_ONE},_getInitValue:function(){return this._slot.isPauseSlot()||!this._processed?a.INIT_VALUE_ONE:a.INIT_VALUE_TWO},getUrl:function(b){b=a.EventCallback.prototype.getUrl.call(this,b);return b=a.Util.setParameterInURL(b,a.URL_PARAMETER_KEY_INIT,this._getInitValue())},process:function(b){a.EventCallback.prototype.process.call(this,b);this._processed=!0}});a.VideoViewEventCallback=function(b){a.EventCallback.call(this,b)};a.VideoViewEventCallback.prototype=new a.EventCallback;a.VideoViewEventCallback.prototype.constructor=a.VideoViewEventCallback;a.Util.mixin(a.VideoViewEventCallback.prototype,{_getInitValue:function(){return this._processed?a.INIT_VALUE_ZERO:a.INIT_VALUE_ONE},_getCTValue:function(){return this._context._videoAsset.getPlayheadTime()},getUrl:function(b){b=a.EventCallback.prototype.getUrl.call(this,b);b=a.Util.setParameterInURL(b,a.URL_PARAMETER_KEY_INIT,this._getInitValue());return b=a.Util.setParameterInURL(b,a.URL_PARAMETER_KEY_CT,this._getCTValue())},_shouldSkipSendingTrackingAndExternalUrls:function(){return this._processed},process:function(b){a.EventCallback.prototype.process.call(this,b);this._processed=!0}});a.VideoRenderer=function(){this._adVideo=null;this._duration=this._playheadTime=-1;this._dragging=this._stopInvoked=this._isEnded=!1;this._volume=1;this._rendererController=null;this._isBuffering=!1;this._autoPauseAdOnVisibilityChange=!0};a.VideoRenderer.prototype={pause:function(){this._rendererController&&this._rendererController.processEvent({name:a.EVENT_AD_PAUSE});this._adVideo&&!this._adVideo.paused&&this._adVideo.pause()},resume:function(){this._rendererController&&this._rendererController.processEvent({name:a.EVENT_AD_RESUME});this._adVideo&&this._adVideo.paused&&this._adVideo.play()},start:function(b){this._rendererController=b;b=this._rendererController.getAdInstance();var c=b.getSlot(),d=this,e=!1,f=!1,h=!1;this._autoPauseAdOnVisibilityChange=this._rendererController.getParameter(a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE);if(a.PLATFORM_NOT_SUPPORT_VIDEO_AD)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,c.getTimePositionClass());else if(a.PLATFORM_NOT_SUPPORT_MIDROLL_AD&&c.getTimePositionClass()===a.TIME_POSITION_CLASS_MIDROLL)this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"midroll");else{a.log("VideoRenderer.start",c.getTimePositionClass(),b);var g=this._rendererController.getContentVideoElement(),k=c.getVideoDisplaySize().width,m=c.getVideoDisplaySize().height,p=b.getRenderableCreativeRenditions(),y=(k=new a.RenditionSelector(this._rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE)||1e3,this._rendererController.getParameter("arWeight")||1,this._rendererController.getParameter("pxWeight")||1,.2).getBestFitRendition(p,k,m))?k.getPrimaryCreativeRenditionAsset():null;if(y&&p.length)if(y.getUrl()){b.setActiveCreativeRendition(k);a.log("VideoRenderer.start selected rendition is:",y.getUrl());this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON);var w=!a.PLATFORM_NOT_SUPPORT_CLICK_FOR_VIDEO;w||this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF);var t=a.PLATFORM_EVENT_CLICK,P=a.MOBILE_EVENT_DRAG;a.debug("VideoRenderer","use content video element");g.controls=!1;this._adVideo=g;var l=null,E=null,F=null;this._volume=this._rendererController.getContext().getAdVolume();this._adVideo.volume=this._volume;this._adVideo.muted=0===this._volume;var H=function(b){a.debug("VideoRenderer.checkTimeUpdate timeout");S(b)},I=function(){E&&(clearTimeout(E),E=null)},v=a.Util.bind(this,function(b){a.debug("onAdVideoBufferEmpty(): Ad video event "+b.type);b=this._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PLAY_AFTER_STALLED);null!==b&&"undefined"!==typeof b&&!1!==a.Util.str2bool(b)&&(a.debug("play the ad immediately after the stalled event"),g&&g._fw_videoAdPlaying&&g.play())}),K=function(b){d._isBuffering||(d._isBuffering=!0,d._rendererController.processEvent({name:a.EVENT_AD_BUFFERING_START}),a.debug("onAdVideoBufferingStarted(): Ad video event "+b.type))},q=function(b){d._isBuffering&&(d._isBuffering=!1,d._rendererController.processEvent({name:a.EVENT_AD_BUFFERING_END}),a.debug("onAdVideoBufferingEnded(): Ad video event "+b.type))};b=this._rendererController.getParameter(a.PARAMETER_EXTENSION_AD_CONTROL_CLICK_ELEMENT);var x=null;b&&(x=document.getElementById(b));x||(x=g);var G=a.Util.bind(this,function(b){if(g.paused&&a.PLATFORM_NOT_FIRE_CLICK_WHEN_AD_VIDEO_PAUSED)g.play();else{var c=this._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION);null==c&&(c="true");!1!==a.Util.str2bool(c)&&(f?(a.debug("Ad video event "+b.type),this._dragging?this._dragging=!1:this._rendererController.processEvent({name:a.EVENT_AD_CLICK})):a.debug("Ad not started, ignore click."))}}),z=a.Util.bind(this,function(b){a.debug("Ad video event "+b.type);this._dragging=!0}),r,D=function(b){a.debug("Ad video event "+b.type+" ended: "+g.ended+" playing:"+g._fw_videoAdPlaying);if(g.ended&&.2>Math.abs(g.duration-g.currentTime)||!g._fw_videoAdPlaying)r=setTimeout(function(){a.warn("Force ad video end bc ad paused with ended = true");b.type="ended";N(b)},200);else{var c=d._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE);null==c&&(c="true");!1===a.Util.str2bool(c)?a.debug("Pause controls disabled"):g.controls=!0;I()}},J=function(b){a.debug("Ad video event "+b.type);g.controls=!1},B=0,O=function(b){a.debug("Ad video event "+b.type);0>=g.currentTime?a.debug("VideoRenderer.onAdVideoTimeUpdate currentTime is less than or 0"):(I(),g.paused||(b=d._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT)||8e3,E=setTimeout(H,b,b+"ms timeout when playing")),f||(f=!0,d._playheadTime=g.currentTime,0>d._playheadTime&&(d._playheadTime=0),l&&(clearTimeout(l),l=null),d._quartileTimerId=setInterval(function(){var b=g.currentTime,c=g.duration;0<b&&(d._playheadTime=b);0<c&&(d._duration=c);"number"!==typeof b||"number"!==typeof c||F||(b>=.25*c&&1>B&&(d._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),B=1),b>=.5*c&&2>B&&(d._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}),B=2),b>=.75*c&&3>B&&(clearInterval(d._quartileTimerId),d._quartileTimerId=null,d._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),B=3))},1e3),d._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)))};this.dispose=a.Util.bind(this,function(){N()});var N=function(b){var c=F;b&&b.type&&(a.debug("Ad video event "+b.type),"error"===b.type&&(a.warn(b.target.src),a.warn(b.target.currentSrc),q(b)));I();l&&(clearTimeout(l),l=null);w&&(x.removeEventListener(t,G,!1),x.removeEventListener(P,z,!1));r&&(clearTimeout(r),r=null);Q&&d._autoPauseAdOnVisibilityChange&&(document.removeEventListener("visibilitychange",Q,!1),Q=null);g.removeEventListener("ended",N,!1);g.removeEventListener("error",N,!0);g.removeEventListener("pause",D,!1);g.removeEventListener("playing",J,!1);g.removeEventListener("timeupdate",O,!1);g.removeEventListener("stalled",v,!1);g.removeEventListener("waiting",K,!1);g.removeEventListener("canplay",q,!1);g.paused||(a.debug("try pausing video before complete"),g.pause());b&&"error"===b.type&&(c="video error",(b=g.error||b.target.error)&&(c="error:"+b+",code:"+b.code));c||(d._isEnded=!0);a.log("VideoRenderer.complete");e||(e=!0,delete g._fw_videoAdPlaying,d._adVideo=null,d._quartileTimerId&&(clearInterval(d._quartileTimerId),d._quartileTimerId=null),c?d._onRendererFailed(null,c):(d._stopInvoked||(g.currentTime>=.25*g.duration&&1>B&&(d._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE}),B=1),g.currentTime>=.5*g.duration&&2>B&&(d._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT}),B=2),g.currentTime>=.75*g.duration&&3>B&&(d._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE}),B=3),g.currentTime>=g.duration-.5&&4>B&&(d._rendererController.processEvent({name:a.EVENT_AD_COMPLETE}),B=4)),d._stopInvoked=!1,d._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED)));d._rendererController=null};var S=function(b){F=b;a.warn(F);a.PLATFORM_WAIT_WHEN_AD_VIDEO_TIMEOUT||N()},Q=function(b){a.log("onVisibilityChange:"+(document.hidden?"invisible":"visible"));document.hidden?g&&!g.paused&&(g.pause(),h=!0,d._rendererController&&d._rendererController.processEvent({name:a.EVENT_AD_PAUSE}),l&&(clearTimeout(l),l=null)):g&&g.paused&&h&&(g.play(),h=!1,d._rendererController&&d._rendererController.processEvent({name:a.EVENT_AD_RESUME}),f||!g._fw_fromVideoPool&&!a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT||(b=d._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT)||5e3,l=setTimeout(S,b,b+"ms timeout before playing")))};g._fw_videoAdPlaying=!0;var C=!1,L=function(){if(!C){C=!0;w&&(x.addEventListener(t,G,!1),x.addEventListener(P,z,!1));g.addEventListener("ended",N,!1);g.addEventListener("error",N,!0);g.addEventListener("pause",D,!1);g.addEventListener("playing",J,!1);g.addEventListener("timeupdate",O,!1);g.addEventListener("stalled",v,!1);g.addEventListener("waiting",K,!1);g.addEventListener("canplay",q,!1);g.src=y.getUrl();a.log("VideoRenderer play video ad "+g.src);g.load();if(g._fw_fromVideoPool||a.PLATFORM_SUPPORT_VIDEO_START_DETECT_TIMEOUT){var b=d._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT)||5e3;l=setTimeout(S,b,b+"ms timeout before playing")}a.PLATFORM_VIDEO_DOESNOT_SUPPORT_TIMEUPDATE&&d._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED);b=100;0<a.PLATFORM_ANDROID_VERSION&&(b=d._rendererController.getParameter(a.PARAMETER_RENDERER_VIDEO_ANDROID_DELAY)||100);setTimeout(function(){var b=g.play();b&&a.PLATFORM_BLOCKS_AUTOPLAY&&b.catch(function(b){if(b&&"AbortError"===b.name||"NotAllowedError"===b.name)a.warn("Blocked by browser, need player to display a start button. Details: %o",b),l&&(clearTimeout(l),l=null),c.setAutoPlayBlocked(!0),d._rendererController.processEvent({name:a.EVENT_AD_AUTO_PLAY_BLOCKED,info:{apiOnly:!0}})});document.hidden&&g&&d._autoPauseAdOnVisibilityChange&&(a.log("VideoRenderer pause ad when tab is invisible."),g&&!g.paused&&(g.pause(),h=!0,d._rendererController&&d._rendererController.processEvent({name:a.EVENT_AD_PAUSE})),l&&(clearTimeout(l),l=null))},b);d._autoPauseAdOnVisibilityChange&&document.addEventListener("visibilitychange",Q,!1)}};a.VideoRenderer._fw_playedDummyVideo||c.getTimePositionClass()!==a.TIME_POSITION_CLASS_PREROLL||!a.PLATFORM_PLAY_DUMMY_VIDEO_FOR_PREROLL||/\.webm$/.test(y.getUrl())?L():(a.VideoRenderer._fw_playedDummyVideo=!0,a.debug("play dummy video for iOS 3.2-4.1"),g.src="http://127.0.0.1:1/404.mp4",g.load(),g.play(),g._fw_videoAdPlaying=!0,g.addEventListener("error",function(){event.target.removeEventListener("error",g,!0);L()},!0),setTimeout(L,a.PLATFORM_NOT_WAIT_FOR_ERROR_WHEN_PLAY_DUMMY_VIDEO_FOR_PREROLL?500:5e3))}else this._onRendererFailed(a.ERROR_NULL_ASSET);else this._onRendererFailed(a.ERROR_DEVICE_LIMIT,"no compatible asset")}},stop:function(){a.debug("VideoRenderer stop");this._stopInvoked=!0;this._adVideo&&(this._adVideo._fw_videoAdPlaying=!1,this._adVideo.pause(),this.dispose());this._rendererController=null},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){if(this._isEnded&&0<this._duration)return this._duration;if(this._adVideo){var a=this._adVideo.currentTime;if(0<a)return a}return this._playheadTime},getDuration:function(){return this._duration},setVolume:function(b){a.debug("VideoRenderer setVolume("+b+")");this._adVideo?(this._adVideo.volume=b,this._adVideo.muted=0===b,this._volume!==b&&this._rendererController.processEvent({name:a.EVENT_AD_VOLUME_CHANGE}),0===this._volume&&0!==b?this._rendererController.processEvent({name:a.EVENT_AD_UNMUTE}):0!==this._volume&&0===b&&this._rendererController.processEvent({name:a.EVENT_AD_MUTE}),this._volume=b):a.debug("VideoRenderer ad video is null, ignore.")},_onRendererFailed:function(b,c,d){var e={};e[a.INFO_KEY_ERROR_MODULE]="VideoRenderer";e[a.INFO_KEY_ERROR_CODE]=b;d||(d=a.ERROR_VAST_GENERAL_LINEAR_ERROR);e[a.INFO_KEY_VAST_ERROR_CODE]=d;c&&(e[a.INFO_KEY_ERROR_INFO]=c);this._rendererController.handleStateTransition(a.RENDERER_STATE_FAILED,e)}};a.VideoRenderer.prototype.constructor=a.VideoRenderer;a.AdRequest=function(b){this._context=b;this._capabilities=new a.Capabilities;this._keyValues=[];this._playerProfile="";this._compatibleDimensions=null;this._temporalSlots=[];this._siteSectionId=this._siteSectionCustomId="";this._siteSectionNetworkId=0;this._siteSectionFallbackId="";this._siteSectionViewRandom=0;this._requestMode=this._visitorIpV4Address=this._visitorCustomId="";this._subsessionToken=this._requestDuration=0;this._candidateAdIds=[];this._slotScanner=new a.PageSlotScanner(b);this._urlParams={};this._urlKeyValues=[];this._customInfo=""};a.AdRequest.prototype={setCapability:function(a,c){this._capabilities.setCapability(a,c)},addKeyValue:function(b,c){"string"!==typeof b||"string"!==typeof c||0===b.length?a.warn("AdRequest.addKeyValue:","key and value required"):(b=encodeURIComponent(b)+"="+encodeURIComponent(c),0>this._keyValues.indexOf(b)&&this._keyValues.push(b))},removeKey:function(b){if("string"!==typeof b||0===b.length)a.warn("AdRequest.removeKey:","key required");else{b=encodeURIComponent(b);for(var c=this._keyValues,d=c.length-1;0<=d;--d)c[d].split("=")[0]===b&&this._keyValues.splice(d,1)}},setProfile:function(b){"string"!==typeof b?a.warn("AdRequest.setProfile:","player profile required"):this._playerProfile=b},setVideoDisplayCompatibleSizes:function(b){if(b&&b.length){for(var c=[],d={},e=0;e<b.length;++e)if(a.debug("dimension is:",b[e].width,"X",b[e].height),0<b[e].width&&0<b[e].height){var f=b[e].width+","+b[e].height;null==d[f]&&(d[f]="",c.push(f))}0<c.length&&(this._compatibleDimensions=c.join("|"))}else a.warn("AdRequest.setVideoDisplayCompatibleSizes:","compatible dimensions required")},setSiteSection:function(b,c,d,e,f){if(b){switch(e){case a.ID_TYPE_FW:this._siteSectionId=b;break;case a.ID_TYPE_GROUP:this._siteSectionId="g"+b;break;default:this._siteSectionCustomId=b}0<1*c&&(this._siteSectionNetworkId=1*c);0<1*d&&(this._siteSectionViewRandom=1*d);"number"===typeof f&&0<f?this._siteSectionFallbackId=""+f:"string"===typeof f&&(this._siteSectionFallbackId=f.trim())}else a.warn("AdRequest.setSiteSection: id required")},setVisitor:function(b,c){"string"!==typeof b?a.warn("AdRequest.setVisitor:","customId required"):(this._visitorCustomId=b,"string"===typeof c&&""!==c&&(this._visitorIpV4Address=c))},setRequestMode:function(b){b!==a.REQUEST_MODE_ON_DEMAND&&b!==a.REQUEST_MODE_LIVE?a.warn("AdRequest.setRequestMode:","unknown mode: "+b):(this._requestMode=b,this._requestMode===a.REQUEST_MODE_LIVE&&0===this._subsessionToken&&this.setSubsessionToken(1e4*Math.random()+1))},setRequestDuration:function(b){"number"!==typeof b?a.warn("AdRequest.setRequestDuration:","request duration required"):(0>b&&(a.warn("AdRequest.setRequestDuration:","requestDuration is negative, reset it to 0"),b=0),this._requestDuration=b)},addCandidateAd:function(b){"number"!==typeof b?a.warn("AdRequest.addCandidateAd:","candidate ad ID required"):0>b?a.warn("AdRequest.addCandidateAd","invalid ad ID, ignore"):this._candidateAdIds.push(b)},addTemporalSlot:function(b,c,d,e,f,h,g,k,m){if(a.Util.isBlank(b)||a.Util.isBlank(c)||0>d)a.warn("AdRequest.addTemporalSlot:","invalid parameters");else{for(var p=0;p<this._temporalSlots.length;p++)if(this._temporalSlots[p].getCustomId()===b){a.warn("AdRequest.addTemporalSlot:","slot with custom Id: "+b+" is already added, ignoring the duplicate addition");return}p=new a.Slot(this._context);p.setCustomId(b);p.setAdUnit(c);p.setTimePosition(d);p.setSlotProfile(e);p.setCuepointSequence(1*f);p.setMaxDuration(h);p.setMinDuration(g);p.setAcceptContentType(k);p.setSignalId(m);this._temporalSlots.push(p)}},setSubsessionToken:function(a){this._subsessionToken=a},scanPageSlots:function(){this._slotScanner.scanPageSlots()},generateTypeBRequestUrl:function(){var b=this._context._adManager._serverURL.split("?"),c=b[0],d=[/fwmrm\.net$/,/fwmrm\.net\/$/,/fwmrm\.net\/ad$/,/fwmrm\.net\/ad\/$/,/fwmrm\.net\/ad\/g$/,/fwmrm\.net\/ad\/g\/$/,/fwmrm\.net\/ad\/g\/1$/];if(0===c.indexOf("http://")||0===c.indexOf("https://"))for(var e=0;e<d.length;++e)if(c.match(d[e])){c=c.slice(0,c.indexOf("fwmrm.net")+9)+"/ad/g/1";break}this.parseQueryStr(b.slice(1).join("?"));b=this.generateGlobalParametersQueryStr()+";"+this.generateKeyValuesStr()+";";this._capabilities.getCapability(a.CAPABILITY_SKIP_AD_SELECTION)&&1===this._capabilities.getCapability(a.CAPABILITY_SKIP_AD_SELECTION)||(b+=this.generateSlotsTypeBStr());a.Util.isBlank(this._customInfo)||(b+=";"+this._customInfo);return c+"?"+b},generateVideoViewRequestUrlWithDummyContextInstanceId:function(b){this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_ON);this._context.setCapability(a.CAPABILITY_SKIP_AD_SELECTION,a.CAPABILITY_STATUS_ON);var c=this.generateTypeBRequestUrl();c=a.Util.setParameterInURL(c,"cbfn","tv.freewheel.SDK._instanceQueue['Context_"+b+"']._videoAsset.requestComplete");a.debug("generateVideoViewRequestUrlWithDummyContextInstanceId():"+c);this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_UNSET);this._context.setCapability(a.CAPABILITY_SKIP_AD_SELECTION,a.CAPABILITY_STATUS_UNSET);return c},parseQueryStr:function(b){var c=b;a.debug("AdRequest.parseQueryStr("+Array.prototype.slice.call(arguments).join(",")+")");this._urlParams={};this._urlKeyValues=[];this._customInfo="";if(c){";"===c.charAt(c.length-1)&&(c=c.substring(0,c.length-1));c=c.split(";");var d;if(c[0]){var e=c[0].split("&");for(d=0;d<e.length;++d){var f=e[d].split("=");2===f.length&&(this._urlParams[f[0]]=f[1])}}if(c[1])for(e=c[1].split("&"),d=0;d<e.length;++d)this._urlKeyValues.push(e[d]);c[2]&&(this._customInfo=c.slice(2).join(";"))}},generateGlobalParametersQueryStr:function(){a.debug("AdRequest.generateGlobalParametersQueryStr");var b=this._context.getParameter("wrapperVersion");b=[["prof",this._playerProfile,"string"],["nw",this._context._adManager._networkId,"number"],["caid",this._context._videoAsset._customId,"string"],["asid",this._context._videoAsset._id,"string"],["vdur",this._context._videoAsset._duration,"number"],["asnw",this._context._videoAsset._networkId,"number"],["asml",this._context._videoAsset._location,"string"],["vprn",this._context._videoAsset._viewRandom,"number"],["afid",this._context._videoAsset._fallbackId,"string"],["vdty",this._context._videoAsset._durationType,"string"],["vtpo",this._context._videoAsset._currentTpos,"number"],["csid",this._siteSectionCustomId,"string"],["ssid",this._siteSectionId,"string"],["ssnw",this._siteSectionNetworkId,"number"],["pvrn",this._siteSectionViewRandom,"number"],["sfid",this._siteSectionFallbackId,"string"],["vcid",this._visitorCustomId,"string"],["mode",this._requestMode,"string"],["vrdu",this._requestDuration,"number"],["ssto",this._subsessionToken,"number"],["cd",this._compatibleDimensions||this.detectScreenDimension(),"string"],["vclr",a.version+(b?","+b:""),"string"],["resp",a.PLATFORM_SEND_REQUEST_BY_FORM?"json2":"json","string"],["orig",window.location.protocol+"//"+window.location.host,"string"],["cbfn","tv.freewheel.SDK._instanceQueue['Context_"+this._context._instanceId+"'].requestComplete","string"],["vip",this._visitorIpV4Address,"string"],["cana",this._candidateAdIds.join(","),"string"]];
for(var c=0;c<b.length;c++){var d=b[c];switch(d[2]){case"string":a.Util.isBlank(d[1])||(this._urlParams[d[0]]=encodeURIComponent(d[1]));break;case"number":0<d[1]&&(this._urlParams[d[0]]=d[1])}}b="";for(var e in this._urlParams)this._urlParams.hasOwnProperty(e)&&(b+=e+"="+this._urlParams[e]+"&");b=b.substring(0,b.length-1);0<this._slotScanner._candidateAds.length&&(null==this._capabilities._capabilities[a.CAPABILITY_CHECK_COMPANION]&&this._capabilities.setCapability(a.CAPABILITY_CHECK_COMPANION,a.CAPABILITY_STATUS_ON),null==this._capabilities._capabilities[a.CAPABILITY_CHECK_TARGETING]&&this._capabilities.setCapability(a.CAPABILITY_CHECK_TARGETING,a.CAPABILITY_STATUS_OFF));this._context._videoAsset._eventCallback||this._context._videoAsset._requestedVideoViewUrl||!this._context._videoAsset._id&&!this._context._videoAsset._customId||this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_ON);this._capabilities._capabilities[a.CAPABILITY_DISPLAY_REFRESH]&&this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_OFF);b=this._capabilities.parseCapabilities(b);this._context.setCapability(a.CAPABILITY_REQUIRE_VIDEO_CALLBACK,a.CAPABILITY_STATUS_UNSET);switch(this._context._videoAsset._autoPlayType){case a.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED:e="+play+uapl";break;case a.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE:e="-play";break;default:e="+play-uapl"}return b=b.replace(/flag=/,"flag="+encodeURIComponent(e))},generateKeyValuesStr:function(){a.debug("AdRequest.generateKeyValuesStr");var b=a.Util.flashVersion();b=this._keyValues.concat(["_fw_h_x_flash_version="+encodeURIComponent(b),"_fw_dpr="+(void 0===window.devicePixelRatio?"1":window.devicePixelRatio.toFixed(2).toString())]);for(var c=0;c<this._urlKeyValues.length;c++){var d=this._urlKeyValues[c];0>b.indexOf(d)&&b.push(d)}(c=this._context._adManager._location)&&b.push("ltlg="+encodeURIComponent(Math.round(1e4*c.coords.latitude)/1e4+","+Math.round(1e4*c.coords.longitude)/1e4));return b.join("&")},generateSlotsTypeBStr:function(){a.debug("AdRequest.generateSlotsTypeBStr");for(var b="",c=[],d=0;d<this._temporalSlots.length;d++){var e=this._temporalSlots[d];e=[["slid",e.getCustomId(),"string"],["slau",e.getAdUnit(),"string"],["ptgt","a","string"],["tpos",e.getTimePosition(),"number"],["cpsq",e.getCuepointSequence(),"number"],["envp",e.getSlotProfile(),"string"],["maxd",e.getMaxDuration(),"number"],["mind",e.getMinDuration(),"number"],["prct",e.getAcceptContentType(),"string"],["sgid",e.getSignalId(),"string"]];for(var f=[],h=0;h<e.length;h++){var g=e[h];switch(g[2]){case"string":a.Util.isBlank(g[1])||f.push(g[0]+"="+encodeURIComponent(g[1]));break;case"number":-1<["cpsq","maxd","mind"].indexOf(g[0])?0<g[1]&&f.push(g[0]+"="+g[1]):0<=g[1]&&f.push(g[0]+"="+g[1])}}c.push(f.join("&"))}0<c.length&&(b=c.join(";")+";");return b+=this._slotScanner.slotsToTypeBStr()},detectScreenDimension:function(){a.debug("AdRequest.detectScreenDimension:",screen.width+","+screen.height);return screen.width+","+screen.height},useCMP:function(){a.debug("AdRequest.useCMP");if(this._context.getParameter(a.PARAMETER_USE_CMP)){var b=this._context._adManager._fwGDPR||"",c=this._context._adManager._fwGDPRConsent||"";this.removeKey("_fw_gdpr");this.removeKey("_fw_gdpr_consent");this.addKeyValue("_fw_gdpr",b.toString());this.addKeyValue("_fw_gdpr_consent",c)}},useUSPAPI:function(){a.debug("AdRequest.useUSPAPI");if(this._context.getParameter(a.PARAMETER_USE_CCPA_USPAPI)){var b=this._context._adManager._fwUSPString||"";""!=b&&(this.removeKey("_fw_us_privacy"),this.addKeyValue("_fw_us_privacy",b))}}};a.AdInstance=function(b){this._context=b;this._creativeRenditionId=this._creativeId=this._soAdUnit=this._adId=this._slot=null;this._replicaId="";this._primaryCreativeRendition=this._creative=null;this._creativeRenditions=[];this._noLoad=!1;this._companionAdInstances=[];this._eventCallbacks=[];this._externalEventCallbackUrlsDictionary={};this._rendererController=new a.RendererController(b,this);this._timer=new a.Timer;this._metr=0;this._state=a.MediaInitState.instance;this._isStartSuccessfully=this._translated=this._isImpressionSent=this._isInitiatedSent=!1;this._lastDurationFromRenderer=-1;this._slotCustomId=this._parentAdInstancesGroup=null;this._isSkipped=!1;this._wrapperCount=0};a.AdInstance.prototype={};a.AdInstance.prototype.constructor=a.AdInstance;a.METR_MASK_QUARTILE=0;a.METR_MASK_MIDPOINT=1;a.METR_MASK_COMPLETE=2;a.METR_MASK_VOLUME=3;a.METR_MASK_SIZE=4;a.METR_MASK_CONTROL=5;a.METR_MASK_REWIND=6;a.METR_MASK_ACCEPT_INVITATION=7;a.METR_MASK_CLOSE=8;a.METR_MASK_MINIMIZE=9;a.METR_MASK_CLICK=10;a.AdInstance._metrDictionary={};a.AdInstance._metrDictionary[a.EVENT_AD_FIRST_QUARTILE]=a.AdInstance._metrDictionary[a.EVENT_AD_THIRD_QUARTILE]=a.AdInstance._metrDictionary[a.EVENT_AD_QUARTILE]=1<<a.METR_MASK_QUARTILE|1<<a.METR_MASK_MIDPOINT|1<<a.METR_MASK_COMPLETE;a.AdInstance._metrDictionary[a.EVENT_AD_MIDPOINT]=1<<a.METR_MASK_MIDPOINT|1<<a.METR_MASK_COMPLETE;a.AdInstance._metrDictionary[a.EVENT_AD_COMPLETE]=1<<a.METR_MASK_COMPLETE;a.AdInstance._metrDictionary[a.EVENT_AD_MUTE]=1<<a.METR_MASK_VOLUME;a.AdInstance._metrDictionary[a.EVENT_AD_UNMUTE]=1<<a.METR_MASK_VOLUME;a.AdInstance._metrDictionary[a.EVENT_AD_COLLAPSE]=1<<a.METR_MASK_SIZE;a.AdInstance._metrDictionary[a.EVENT_AD_EXPAND]=1<<a.METR_MASK_SIZE;a.AdInstance._metrDictionary[a.EVENT_AD_PAUSE]=1<<a.METR_MASK_CONTROL;a.AdInstance._metrDictionary[a.EVENT_AD_RESUME]=1<<a.METR_MASK_CONTROL;a.AdInstance._metrDictionary[a.EVENT_AD_REWIND]=1<<a.METR_MASK_REWIND;a.AdInstance._metrDictionary[a.EVENT_AD_ACCEPT_INVITATION]=1<<a.METR_MASK_ACCEPT_INVITATION;a.AdInstance._metrDictionary[a.EVENT_AD_CLOSE]=1<<a.METR_MASK_CLOSE;a.AdInstance._metrDictionary[a.EVENT_AD_MINIMIZE]=1<<a.METR_MASK_MINIMIZE;a.AdInstance._metrDictionary[a.EVENT_AD_CLICK]=1<<a.METR_MASK_CLICK;a.Util.mixin(a.AdInstance.prototype,{getAdId:function(){return this._adId},getUniversalAdId:function(){return this.getActiveCreativeRendition()?this.getActiveCreativeRendition().getUniversalAdId():null},getSoAdUnit:function(){return this._soAdUnit},getParameter:function(a){var b=[];this._context.getParameter(a)&&b.push(this._context.getParameter(a));this._primaryCreativeRendition.getParameter(a)&&b.push(this._primaryCreativeRendition.getParameter(a));this._creative.getParameter(a)&&b.push(this._creative.getParameter(a));this._slot.getParameter(a)&&b.push(this._slot.getParameter(a));return b},getEventCallbackUrls:function(b,c){var d=[],e=c===a.EVENT_TYPE_CLICK,f=c===a.EVENT_TYPE_CLICK_TRACKING;b=a.EventCallback.getEventCallback(this._eventCallbacks,b,f?a.EVENT_TYPE_CLICK:c);if(!b)return d;c={};c[a.INFO_KEY_NEED_EMPTY_CT]=!0;e?b._showBrowser&&d.push(b.getUrl(c)):f?b._showBrowser||d.push(b.getUrl(c)):d.push(b.getUrl(c));e||(d=d.concat(b.getTrackingUrls()));return d},addEventCallbackUrls:function(a,c,d){d&&this._isValidEventNameAndType(a,c)&&(this._externalEventCallbackUrlsDictionary[c+"-"+a]=this.getExternalEventCallbackUrls(a,c).concat(d))},setClickThroughUrl:function(b,c){c&&this._isValidEventNameAndType(b,a.EVENT_TYPE_CLICK)&&(b=this.getEventCallback(b,a.EVENT_TYPE_CLICK))&&(a.Util.isParameterInURL(b._url,a.URL_PARAMETER_KEY_CR)||(b._url=b._url+"&"+a.URL_PARAMETER_KEY_CR+"="),b._url=a.Util.setParameterInURL(b._url,a.URL_PARAMETER_KEY_CR,c),b._showBrowser=!0)},addCreativeRendition:function(){var b=new a.CreativeRendition;b.parse({creativeRenditionId:this._creativeRenditionId,adReplicaId:this._replicaId,preference:0});b.setBaseUnit(this._creative.getBaseUnit());b.setDuration(this._creative.getDuration());this._creativeRenditions.push(b);this.isPlaceholder()&&(this._noLoad=!1);return b},getRendererController:function(){return this._rendererController},getSlot:function(){this._slot||(this._slot=this._context._adResponse.getSlotByCustomId(this._slotCustomId));return this._slot},getCompanionSlots:function(){for(var a=[],c=0;c<this._companionAdInstances.length;c++)a.push(this._companionAdInstances[c]._slot);return a},getActiveCreativeRendition:function(){return this._primaryCreativeRendition},setActiveCreativeRendition:function(b){b?(-1===this._creativeRenditions.indexOf(b)&&this._creativeRenditions.push(b),this._primaryCreativeRendition=b,this._creativeRenditionId=b.getId()):a.warn("AdInstance.setActiveCreativeRendition","rendition is null")},getAllCreativeRenditions:function(){var a=this._creativeRenditions.slice();a.sort(function(a,b){return b.getPreference()-a.getPreference()});var c=a.indexOf(this._primaryCreativeRendition);-1<c&&(a.splice(c,1),a.unshift(this._primaryCreativeRendition));return a},getRenderableCreativeRenditions:function(){var a=this._creativeRenditions.slice().sort(function(a,b){return b.getPreference()-a.getPreference()}).filter(function(a){return this._rendererController.rendererMatch(a)},this),c=a.indexOf(this._primaryCreativeRendition);-1<c&&(a.splice(c,1),a.unshift(this._primaryCreativeRendition));return a},getPlayheadTime:function(){var b=-1;if(this._rendererController.getRenderer()&&"function"===typeof this._rendererController.getRenderer().getPlayheadTime)try{b=this._rendererController.getRenderer().getPlayheadTime()}catch(c){a.warn("AdInstance.getPlayheadTime",c.description)}return b},getDuration:function(){var a=-1;this._rendererController.getRenderer()&&"function"===typeof this._rendererController.getRenderer().getDuration&&(this._lastDurationFromRenderer=a=this._rendererController.getRenderer().getDuration());-1===a&&(a=-1<this._lastDurationFromRenderer?this._lastDurationFromRenderer:this.getActiveCreativeRendition().getDuration());return a},parse:function(b){if(b){this._adId=b.adId||null;this._creativeId=b.creativeId||null;this._creativeRenditionId=b.creativeRenditionId||null;this._replicaId=b.hasOwnProperty("replicaId")?b.replicaId:"";this._noLoad=this._context._adResponse.getAd(this._adId).getNoLoad();this._soAdUnit=this._context._adResponse.getAd(this._adId).getSoAdUnit();this._creative=this._context._adResponse.getCreative(this._adId,this._creativeId);this._creativeRenditions=this._creative.getEligibleCreativeRenditionsForAdInstance(this);var c,d;var e=0;for(c=b.eventCallbacks||[];e<c.length;e++){var f=c[e];if(d=a.EventCallback.newEventCallback(this._context,f.name,f.type))d._adInstance=this,d.parse(f),this._eventCallbacks.push(d)}e=0;for(c=b.companionAds||[];e<c.length;++e)(f=c[e])&&f.adSlotCustomId&&(d=new a.AdInstance(this._context),d._slotCustomId=f.adSlotCustomId,d.parse(f),this._companionAdInstances.push(d));e=0;for(c=b.fallbackAds||[];e<c.length;++e)f=c[e],d=new a.AdInstance(this._context),this._parentAdInstancesGroup.push(d),d._slot=this._slot,d._parentAdInstancesGroup=this._parentAdInstancesGroup,d.parse(f);0<this._creativeRenditions.length&&(this._primaryCreativeRendition=this._creativeRenditions[0])}},play:function(){a.log("AdInstance.play "+this._slotCustomId);this._timer.tick();this.processEvent(a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION);this._isStartSuccessfully||(a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]&&this._context.dispatchEvent(a.EVENT_AD_IMPRESSION,{adInstance:this,slotCustomId:this._slotCustomId}),this._isStartSuccessfully=!0);this._state.play(this);if(this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]===a.MODULE_TYPE_RENDERER)for(var b=0;b<this._companionAdInstances.length;b++)this._companionAdInstances[b].isPlaceholder()||this._companionAdInstances[b].getSlot().playCompanionAds(this._companionAdInstances[b])},pause:function(){a.log("AdInstance.pause "+this._slotCustomId);this._isStartSuccessfully?this._rendererController&&this._rendererController.pause():a.log("Ad hasn't started yet. Ignore.")},resume:function(){a.log("AdInstance.resume"+this._slotCustomId);this._isStartSuccessfully?this._rendererController&&this._rendererController.resume():a.log("Ad hasn't started yet. Ignore.")},skip:function(){a.log("AdInstance.skip");"VPAID"!==this.getActiveCreativeRendition().getCreativeApi()?(this._isSkipped=!0,this.processEvent(a.EVENT_AD_SKIPPED,a.EVENT_TYPE_GENERIC),this.stop()):a.log("VPAID creative, skip has been implemented inside of VPAID")},stop:function(){a.log("AdInstance.stop");this._rendererController.stop()},fakeComplete:function(){this._slot.getTimePositionClass()===a.TIME_POSITION_CLASS_DISPLAY&&(this._isStartSuccessfully=!1,this._slot.playNextAdInstance())},complete:function(){this._isStartSuccessfully&&(this.processEvent(a.EVENT_AD_IMPRESSION_END,a.EVENT_TYPE_IMPRESSION),a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]&&this._context.dispatchEvent(a.EVENT_AD_IMPRESSION_END,{adInstance:this}));this._state.complete(this);this._rendererController._restorePlaceholdersForHybrid();this._rendererController.setRenderer(null);this._isStartSuccessfully=!1;this._slot.playNextAdInstance()},isStarted:function(){return this._isStartSuccessfully},onStartPlaying:function(){a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE]?this._isImpressionSent=!0:this._translated=!0},onCompletePlaying:function(){},onStartReplaying:function(){},onCompleteReplaying:function(){},getEventCallback:function(b,c){return a.EventCallback.getEventCallback(this._eventCallbacks,b,c)},processEvent:function(b,c,d,e){var f=!0;c=this.getEventCallback(b,c);b===a.EVENT_AD_IMPRESSION&&this._isStartSuccessfully&&(c=this.getEventCallback(a.EVENT_ERROR,a.EVENT_TYPE_ERROR),d={errorInfo:"Trying to send defaultImpression multiple times"},f=!1);c?e||c.process(d):f=!1;b===a.EVENT_AD_CLICK&&this._context.dispatchEvent(a.EVENT_AD_CLICK,{adInstance:this});if(b!==a.EVENT_AD_IMPRESSION&&b!==a.EVENT_AD_IMPRESSION_END||a.MODULE_TYPE_RENDERER===this._rendererController.getRenderer().info()[a.INFO_KEY_MODULE_TYPE])e={subType:b,adInstance:this,slot:this._slot},b===a.EVENT_ERROR&&(e[a.INFO_KEY_ERROR_CODE]=d[a.INFO_KEY_ERROR_CODE],e[a.INFO_KEY_ERROR_INFO]=d[a.INFO_KEY_ERROR_INFO],e[a.INFO_KEY_ERROR_MODULE]=d[a.INFO_KEY_ERROR_MODULE]),b===a.EVENT_AD_MEASUREMENT&&(e[a.INFO_KEY_CONCRETE_EVENT_ID]=d[a.INFO_KEY_CONCRETE_EVENT_ID]),this._context.dispatchEvent(a.EVENT_AD,e);return f},setVolume:function(b){a.debug("AdInstance.setVolume("+b+")");this.isStarted()&&"function"===typeof this._rendererController.getRenderer().setVolume&&this._rendererController.getRenderer().setVolume(b)},setMetr:function(b,c){var d=a.AdInstance._metrDictionary[b],e=c;d&&(b===a.EVENT_AD_CLICK&&(e=!c),this._metr=e===a.CAPABILITY_STATUS_ON||!0===e?this._metr|d:this._metr&~d)},getExternalEventCallbackUrls:function(a,c){return(this._externalEventCallbackUrlsDictionary[c+"-"+a]||[]).slice()},reset:function(){this._rendererController.reset();for(var b=0;b<this._companionAdInstances.length;b++){var c=this._companionAdInstances[b];c._state!==a.MediaPlayingState.instance&&c._state!==a.MediaReplayingState.instance||c.stop();c._rendererController.reset()}},cloneForTranslation:function(){var b=new a.AdInstance(this._context);b._adId=this._adId;b._creativeId=this._creativeId;b._creative=this._creative.cloneForTranslation();b._creativeRenditionId=this._creativeRenditionId;b._isInitiatedSent=this._isInitiatedSent;b._noLoad=this._noLoad;b._slot=this.getSlot();b._soAdUnit=this.getSoAdUnit();b._replicaId=this._replicaId;b._wrapperCount=this._wrapperCount;for(var c=0;c<this._eventCallbacks.length;c++){var d=this._eventCallbacks[c].copy();d._adInstance=b;b._eventCallbacks.push(d)}b._externalEventCallbackUrlsDictionary=a.Util.copy(this._externalEventCallbackUrlsDictionary);for(c=0;c<this._companionAdInstances.length;c++)this._companionAdInstances[c].isPlaceholder()?b._companionAdInstances.push(this._companionAdInstances[c].cloneForTranslation()):b._companionAdInstances.push(this._companionAdInstances[c]);return b},isPlaceholder:function(){return this._noLoad},setMediaState:function(a){this._state=a},_isValidEventNameAndType:function(b,c){return a.Util.isBlank(b)||a.Util.isBlank(c)?!1:c===a.EVENT_TYPE_CLICK||c===a.EVENT_TYPE_CLICK_TRACKING||c===a.EVENT_TYPE_IMPRESSION&&(b===a.EVENT_AD_IMPRESSION||b===a.EVENT_AD_FIRST_QUARTILE||b===a.EVENT_AD_MIDPOINT||b===a.EVENT_AD_THIRD_QUARTILE||b===a.EVENT_AD_COMPLETE)||c===a.EVENT_TYPE_STANDARD&&(b===a.EVENT_AD_PAUSE||b===a.EVENT_AD_RESUME||b===a.EVENT_AD_REWIND||b===a.EVENT_AD_MUTE||b===a.EVENT_AD_UNMUTE||b===a.EVENT_AD_COLLAPSE||b===a.EVENT_AD_EXPAND||b===a.EVENT_AD_MINIMIZE||b===a.EVENT_AD_CLOSE||b===a.EVENT_AD_ACCEPT_INVITATION)||c===a.EVENT_TYPE_ERROR&&b===a.EVENT_ERROR},isPlayable:function(){var b=!(this._rendererController.getRendererState()===a.RendererFailedState.instance&&!this._isImpressionSent);if(!b)return a.debug("AdInstance.isPlayable returning false isImpressionSent:",this._isImpressionSent),b;(b=b&&!this._translated)||a.debug("AdInstance.isPlayable returning false translated:",this._translated);return b},toString:function(){return"[AdInstance "+this._adId+"]"},getCompanionAdInstances:function(){for(var a=[],c=0;c<this._companionAdInstances.length;++c)this._companionAdInstances[c].isPlaceholder()||a.push(this._companionAdInstances[c]);return a},isRequiredToShow:function(){return this._context._adResponse.getAd(this._adId).isRequiredToShow()},incrementWrapperCount:function(){this._wrapperCount++},getWrapperCount:function(){return this._wrapperCount}});a.EventDispatcher=function(){this._listeners={}};a.EventDispatcher.prototype={addEventListener:function(a,c){"undefined"===typeof this._listeners[a]&&(this._listeners[a]=[]);this._listeners[a].push(c)},dispatchEvent:function(b){"string"===typeof b&&(b={type:b});b.target||(b.target=this);if(b.type&&this._listeners[b.type]instanceof Array)for(var c=this._listeners[b.type],d=0,e=c.length;d<e;d++)try{c[d]&&c[d].call(this,b)}catch(f){a.warn("EventDispatcher.dispatchEvent",b.type,f)}},removeEventListener:function(a,c){if(this._listeners[a]instanceof Array){var b=this._listeners[a];if(null==c)this._listeners[a]=[];else{a=0;for(var e=b.length;a<e;a++)if(b[a]===c){b.splice(a,1);break}}}}};a.EventDispatcher.prototype.constructor=a.EventDispatcher;a.HTMLAdGenerator={log:function(b){a.log("HTMLAdGenerator	"+b)},getExtension:function(a){return a?(a=a.match(/^[^?]+\/[^?.]*(\.\w+)+/))?a[a.length-1].slice(1):"":""},generateAd:function(b,c,d,e,f,h,g){a.HTMLAdGenerator.log("generatorAd("+[].slice.call(arguments,0).join(",")+")");var k=h,m=!1;null==k&&(m=!0,k=a.HTMLAdGenerator.getExtension(b).toLowerCase());switch(k){case"jpeg":case"jpg":case"gif":case"png":case"image/jpeg":case"image/jpg":case"image/gif":case"image/png":case"image/bmp":k=a.HTMLAdGenerator.generateImageHTML(b,c);break;case"swf":case"application/x-shockwave-flash":k=a.HTMLAdGenerator.generateFlashHTML(b,c,d,e,f);break;case"script":case"js":case"text/javascript":case"text/js_ref":case"application/x-javascript":k=a.HTMLAdGenerator.generateScriptHTML(b,d,e,f);break;case"iframe":case"html":case"htm":case"text/html":case"text/html_doc_ref":case"text/html_lit_nowrapper":case"text/html_doc_lit_mobile":k=a.HTMLAdGenerator.generateIFrameHTML(b,c,d,e,f);break;default:k=m?a.HTMLAdGenerator.generateIFrameHTML(b,c,d,e,f):a.HTMLAdGenerator.generateAd(b,c,d,e,f,null,g)}return"text/html_doc_lit_mobile"===g?a.HTMLAdGenerator.htmlLitToHTMLDocLitMobile(k):k},generateImageHTML:function(b,c){a.HTMLAdGenerator.log("generateImageHTML");return c?'<a rel="noopener noreferrer" href="'+c+'" target="_blank"><img src="'+b+'" border="0" /></a>':'<img src="'+b+'" border="0" />'},generateFlashHTML:function(b,c,d,e,f){a.HTMLAdGenerator.log("generateFlashHTML");var h=b;c&&0<c.length&&(h+=-1===b.indexOf("?")?"?":"&",h+="clickTag="+encodeURIComponent(c));b='<OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"WIDTH="'+e+'" HEIGHT="'+f+'" id="'+d+'_external_ad">'+('<PARAM NAME=movie VALUE="'+h+'"/>')+'<PARAM NAME=quality VALUE=high/><PARAM NAME=bgcolor VALUE=#FFFFFF/><PARAM NAME="allowScriptAccess" VALUE="always"/><PARAM NAME="loop" VALUE="true"/>';b+='<EMBED src="'+h+'" ';return b+('quality=high bgcolor=#FFFFFF WIDTH="'+e+'" HEIGHT="'+f+'"NAME="'+d+'_external_video" ALIGN="" TYPE="application/x-shockwave-flash"PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED></OBJECT>')},generateIFrameHTML:function(b,c,d,e,f){a.HTMLAdGenerator.log("generateIFrameHTML");return'<iframe height="'+f+'" width="'+e+'" frameborder="0" scrolling="no" allowtransparency="true" leftmargin="0" rightmargin="0" marginwidth="0" marginheight="0" src="'+b+'"></iframe>'},docLitToHTMLLit:function(b,c,d,e){a.HTMLAdGenerator.log("docLitToHTMLLit");return'<iframe id="_fw_frame_'+c+'" width="'+d+'" height="'+e+'" marginwidth="0" marginheight="0" frameborder="0" scrolling="no"></iframe><script language="javascript" type="text/javascript" id="_fw_container_js_'+c+"\">if(!fw_targets) {var fw_targets = [];}var _fw_wr;var fw_scope = document;var fw_content = '"+a.Util.encodeToHex(b)+"';var trgtFrm = fw_scope.getElementById(\"_fw_frame_"+c+'");trgtFrm = (trgtFrm.contentWindow) ? trgtFrm.contentWindow : (trgtFrm.contentDocument.document) ? trgtFrm.contentDocument.document : trgtFrm.contentDocument;fw_targets["'+c+'"] = trgtFrm;if(navigator.userAgent.match(/\\bMSIE\\b/) || navigator.userAgent.match(/\\bOpera\\b/)){trgtFrm.document.open();trgtFrm.document.write(fw_content);setTimeout(function(){fw_close(fw_targets["'+c+'"])}, 7500);} else if (navigator.userAgent.match(/\\bFirefox\\b/)) {if(true && fw_content.length < 2000){var ec = escape(fw_content);var fw_iframe_url = "http://m2.feiwei.tv/g/lib/template/echo.html?s="+ec;fw_scope.getElementById("_fw_frame_'+c+'").src = fw_iframe_url;} else {trgtFrm.document.open();trgtFrm.document.write(fw_content);trgtFrm.document.close();}} else {trgtFrm.document.open();trgtFrm.document.write(fw_content);trgtFrm.document.close();}function fw_close(theFrame){theFrame.document.close();}</script>'},htmlLitToDocLit:function(b){a.HTMLAdGenerator.log("htmlLitToDocLit");return'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Advertisement</title></head><body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">'+b+"</body></html>"},wrapUnsafeHTML:function(b,c,d,e){return a.HTMLAdGenerator.htmlLitToHTMLDocLitMobile(a.HTMLAdGenerator.docLitToHTMLLit(a.HTMLAdGenerator.htmlLitToDocLit(b),c,d,e))},wrapJSCode:function(b,c,d,e){return a.HTMLAdGenerator.wrapUnsafeHTML('<script language="javascript" type="text/javascript">'+b+"</script>",c,d,e)},generateScriptHTML:function(b,c,d,e){a.HTMLAdGenerator.log("generateScriptHTML");return a.HTMLAdGenerator.wrapUnsafeHTML('<script language="javascript" type="text/javascript" src="'+b+'"></script>',c,d,e)},htmlLitToHTMLDocLitMobile:function(b){a.HTMLAdGenerator.log("htmlLitToHTMLDocLitMobile");return'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta name = "viewport" content = "initial-scale = 1.0, target-densitydpi = device-dpi" /><title>Advertisement</title><script type="text/javascript">window._fw_page_url = "";</script></head><body style="margin:0px;background-color:transparent;">'+b+"</body></html>"}};a.RenditionSelector=function(a,c,d,e){this._targetByterate=a;this._arWeight=c;this._pxWeight=d;this._conversionFactor=e};a.RenditionSelector.prototype={getBestFitRendition:function(b,c,d){var e=this;b.reverse();b=b.filter(function(b){return b&&b.getPrimaryCreativeRenditionAsset()&&(b.getPrimaryCreativeRenditionAsset().getUrl()||b.getPrimaryCreativeRenditionAsset().getContent())&&a.Util.canPlayVideoType(b.getPrimaryCreativeRenditionAsset().getMimeType())}).sort(function(a,b){return e.getBitrate(a)-e.getBitrate(b)});if(!b.length)return null;var f=Number.MAX_VALUE,h=b.filter(function(a){a=e.getBitrate(a);f=a<f?a:f;return a<=e._targetByterate});h.length||(h=b.filter(function(a){return e.getBitrate(a)<=f}));return h.sort(function(a,b){return e.compareVisualMetrics(a,b,c,d)}).pop()},compareVisualMetrics:function(a,c,d,e){var b=this.calculateVisualRatios(a.getWidth(),a.getHeight(),d,e);e=this.calculateVisualRatios(c.getWidth(),c.getHeight(),d,e);return!b&&e?-1:b&&!e?1:b&&e&&(d=this._conversionFactor*this._arWeight*Math.log(e.arRatio),e=this._pxWeight*Math.log(e.pixelation),b=this.findDistance(this._conversionFactor*this._arWeight*Math.log(b.arRatio),this._pxWeight*Math.log(b.pixelation),0,0),d=this.findDistance(d,e,0,0),d!==b)?d-b:a.getPreference()-c.getPreference()},calculateVisualRatios:function(a,c,d,e){if(0<a&&0<c&&0<d&&0<e){var b=a/c,h=d/e;b>h?e=d/b:d=e*b;return{arRatio:b/h,pixelation:a*c/(d*e)}}return null},findDistance:function(a,c,d,e){return isNaN(a)||isNaN(d)||isNaN(c)||isNaN(e)?NaN:Math.sqrt(Math.pow(d-a,2)+Math.pow(e-c,2))},getBitrate:function(a){var b=a.getDuration();return(a=a.getPrimaryCreativeRenditionAsset().getBytes())&&b&&!isNaN(a)&&!isNaN(b)&&0<a&&0<b?8*a/1e3/b:-1}};a.RenditionSelector.prototype.constructor=a.RenditionSelector;a.PageSlotScanner=function(a){this.OPTION_INIT=1;this.OPTION_FCAI=2;this.OPTION_NIIC=4;this.OPTION_NOSA=8;this.OPTION_NSIT=16;this._knownSlots=[];this._slots={};this._candidateAds=[];this._slotOptionFound=!1;this._context=a};a.PageSlotScanner.prototype={isSlotDuplicate:function(a){for(var b=0;b<this._knownSlots.length;++b)if(this._knownSlots[b].id===a)return!0;return!1},findPageSlotByScope:function(b){var c=b.document;if(c){var d=/(^|\s)_fwph(\s|$)/,e=c.getElementsByTagName("span");b._fw_admanager||(b._fw_admanager={});b._fw_admanager.pageScanState=!0;for(b=0;b<e.length;++b){var f;var h=e[b];if(d.test(h.className)&&(h=h.getAttribute("id"),(f=c.getElementById("_fw_input_"+h))&&!this.isSlotDuplicate(h)&&(f=f.getAttribute("value")))){";"!==f.charAt(f.length-1)&&(f+=";");f=f.split(";");var g=f[f.length-2],k=!1;-1!==g.search("lo=i")&&(k=!0);var m=!1;-1!==g.search("prct=")&&(m=!0);0>g.search("flag=")&&(g+="&flag=");0>g.search("ptgt=")&&(g="ptgt=s&"+g);f=[];var p=g.split("&"),y,w;g=!0;for(var t=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE,P=0;P<p.length;++P){var l=p[P].split("=");if(2===l.length){l[1]=decodeURIComponent(l[1]);if("ssct"===l[0])if(m)continue;else m=!0,l[0]="prct";"flag"===l[0]?(-1===l[1].search(/[-\+]cmpn/)&&(l[1]+="+cmpn"),"+"!==l[1].charAt(0)&&"-"!==l[1].charAt(0)&&(l[1]="+"+l[1]),k&&-1===l[1].search("-init")&&(l[1]+="-init"),-1!==l[1].search("-nrpl")&&(l[1]=l[1].replace("-nrpl","+cmpn")),-1!==l[1].search("-cmpn")&&(g=!1),t=this._getInitialOption(l[1]),this._slotOptionFound||(t=k?a.SLOT_OPTION_INITIAL_AD_KEEP_ORIGINAL:a.SLOT_OPTION_INITIAL_AD_STAND_ALONE)):"w"===l[0]?y=Number(l[1]):"h"===l[0]?w=Number(l[1]):"cana"===l[0]&&this._addCandidateAds(l[1]);l=encodeURIComponent(l[0])+"="+encodeURIComponent(l[1]);f.push(l)}}m||""==this._context.getParameter(a.PARAMETER_PAGE_SLOT_CONTENT_TYPE)||(k=this._context.getParameter(a.PARAMETER_PAGE_SLOT_CONTENT_TYPE)||"text/html_doc_lit_mobile,text/html_doc_ref",f.push("prct="+encodeURIComponent(k)));(k=c.getElementById("_fw_container_"+h))?(this._slots[h]=f.join("&")+";",this._knownSlots.push({id:h,width:y,height:w,element:k,acceptCompanion:g,initialAdOption:t})):a.warn("Failed to find container for slot "+h)}}}},scanPageSlots:function(){for(var b=0;b<window.frames.length;++b)try{a.debug("scanPageSlots in frame",b),this.findPageSlotByScope(window.frames[b])}catch(c){a.debug("PageSlotScanner: scanPageSlots exception "+c)}try{window.parent&&window.parent!==window&&(a.debug("scanPageSlots in parent frame"),this.findPageSlotByScope(window.parent))}catch(c){a.debug("PageSlotScanner: scanPageSlots exception "+c)}try{a.debug("scanPageSlots in current window"),this.findPageSlotByScope(window)}catch(c){a.debug("PageSlotScanner: scanPageSlots exception "+c)}},slotsToTypeBStr:function(){var a="",c;for(c in this._slots)if(this._slots.hasOwnProperty(c)){var d=this._slots[c];-1===d.search("slid=")&&(d="slid="+encodeURIComponent(c)+"&"+d);a+=d;";"!==a.charAt(a.length-1)&&(a+=";")}a&&(a=a.substring(0,a.length-1));return a},_addCandidateAds:function(a){a=a.split(",");for(var b=0;b<a.length;b++){var d=parseInt(a[b],10);0<d&&this._candidateAds.push(d)}},_parseFlags:function(a){var b=[],d=[],e="",f=!0;a+="+";for(var h=0;h<a.length;++h){var g=a.charAt(h);switch(g){case"+":case"-":""!==e&&((f?b:d).push(e),e="");f="+"===g;break;default:e+=g}}return[b,d]},_getInitialOption:function(b){var c=!0,d=!1,e=0;b=this._parseFlags(b);for(var f=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE,h=0;h<b.length;++h)for(var g=0;g<b[h].length;++g)switch(b[h][g].toString().toLowerCase()){case"cmpn":c=0===h;break;case"nrpl":c=0!==h;break;case"init":e=0===h?e&~this.OPTION_INIT:e|this.OPTION_INIT;d=!0;break;case"fcai":e=0===h?e|this.OPTION_FCAI:e&~this.OPTION_FCAI;d=!0;break;case"niic":e=0===h?e|this.OPTION_NIIC:e&~this.OPTION_NIIC;d=!0;break;case"nosa":e=0===h?e|this.OPTION_NOSA:e&~this.OPTION_NOSA;d=!0;break;case"nsit":e=0===h?e|this.OPTION_NSIT:e&~this.OPTION_NSIT,d=!0}a.debug("PageSlotScanner: _getInitialOption: acceptCompanion = "+c);switch(e){case 0:d&&(f=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE);break;case 1:f=a.SLOT_OPTION_INITIAL_AD_KEEP_ORIGINAL;break;case 3:f=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_ONLY;break;case 2:f=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_STAND_ALONE;break;case 6:f=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_THEN_STAND_ALONE;break;case 8:f=a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE;break;case 10:f=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE;break;case 16:f=a.SLOT_OPTION_INITIAL_AD_NO_STAND_ALONE_IF_TEMPORAL;break;case 18:f=a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE_IF_TEMPORAL;break;default:f=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE}this._slotOptionFound=d;return f}};a.PageSlotScanner.prototype.constructor=a.PageSlotScanner;a.DisplayRefreshExtension=function(){this.REFRESH_TYPE_NONE="refresh_none";this.REFRESH_TYPE_AD="refresh_ad";this.REFRESH_TYPE_TIME="refresh_time";this.REPLACE_TYPE_NONE="replace_none";this.REPLACE_TYPE_BLANK="replace_blank";this.REPLACE_TYPE_AD="replace_ad";this._subContext=null;this._displaySlots=[];this._companionSlots=[];this._keyValues=[];this._globalParameters=[];this._overrideParameters=[];this._refreshType=this.REFRESH_TYPE_NONE;this._replaceType=this.REPLACE_TYPE_NONE;this._refreshInterval=0;this._refreshTimer=null;this._firstTemporalAd=!0;this._REQUEST_TIME_OUT=5};a.DisplayRefreshExtension.prototype={init:function(b){this._context=b;a.debug("DisplayRefreshExtension.init(context)");this._onRendererEvent=a.Util.bind(this,function(b){a.debug("DisplayRefreshExtension._onRendererEvent()");b.subType===a.EVENT_AD_IMPRESSION&&this._onAdStarted(b)});this._onSlotEnded=a.Util.bind(this,function(b){var c=b.slot.getTimePositionClass();b=b.slot;a.debug("DisplayRefreshExtension._onSlotEnded()",b,c);if(null!=b&&c!==a.TIME_POSITION_CLASS_DISPLAY&&0!==b.getAdInstances().length)if(this._refreshType===this.REFRESH_TYPE_AD)this._resetSubContext(),this._refreshSlots(this._displaySlots);else if(this._refreshType===this.REFRESH_TYPE_TIME){this._resetSubContext();this._refreshSlots(this._displaySlots);var e=this;this._refreshTimer=setInterval(function(){a.debug("DisplayRefreshExtension._onTimeout()");e._resetSubContext();e._refreshSlots(e._displaySlots)},1e3*this._refreshInterval)}});this._onRequestComplete=a.Util.bind(this,function(b){a.debug("DisplayRefreshExtension._onRequestComplete()");if(b.success){switch(this._context.getParameter("refreshType")){case"ad":this._refreshType=this.REFRESH_TYPE_AD;break;case"time":this._refreshInterval=this._context.getParameter("refreshInterval");this._refreshType=0<this._refreshInterval?this.REFRESH_TYPE_TIME:this.REFRESH_TYPE_NONE;break;default:this._refreshType=this.REFRESH_TYPE_NONE}switch(this._context.getParameter("replaceMissingCompanion")){case"blank":this._replaceType=this.REPLACE_TYPE_BLANK;break;case"ad":this._replaceType=this.REPLACE_TYPE_AD;break;default:this._replaceType=this.REPLACE_TYPE_NONE}if(this._refreshType!==this.REFRESH_TYPE_NONE||this._replaceType!==this.REPLACE_TYPE_NONE){if(this._displaySlots=this._context.getSlotsByTimePositionClass(a.TIME_POSITION_CLASS_DISPLAY),
this._companionSlots=this._displaySlots.filter(function(a){return a.getAcceptCompanion()}),this._keyValues=this._context._adRequest._keyValues,this._globalParameters=this._context._globalLevelParameterDictionary,this._overrideParameters=this._context._overrideLevelParameterDictionary,this._firstTemporalAd=!0,this._context.addEventListener(a.EVENT_AD,this._onRendererEvent),this._context.addEventListener(a.EVENT_SLOT_ENDED,this._onSlotEnded),this._refreshType===this.REFRESH_TYPE_TIME){var c=this;this._refreshTimer=setInterval(function(){a.debug("DisplayRefreshExtension._onTimeout()");c._resetSubContext();c._refreshSlots(c._displaySlots)},1e3*this._refreshInterval)}}else this._refreshTimer&&clearInterval(this._refreshTimer)}else a.debug("DisplayRefreshExtension: request complete failed")});this._context.addEventListener(a.EVENT_REQUEST_COMPLETE,this._onRequestComplete)},_resetSubContext:function(){a.debug("DisplayRefreshExtension._resetSubContext()");this._subContext=this._context._adManager.cloneContext(this._context);this._subContext._extensionManager._displayRefreshExtension.dispose();this._subContext._extensionManager._videoStateExtension.dispose();this._subContext.setCapability(a.CAPABILITY_SLOT_TEMPLATE,a.CAPABILITY_STATUS_OFF);this._subContext.setCapability(a.CAPABILITY_DISPLAY_REFRESH,a.CAPABILITY_STATUS_ON);this._playRefreshedSlots=a.Util.bind(this,function(b){a.debug("DisplayRefreshExtension._playRefreshedSlots()");if(b.success){b=this._subContext.getSlotsByTimePositionClass(a.TIME_POSITION_CLASS_DISPLAY);for(var c=0;c<b.length;c++)b[c].play()}else a.debug("DisplayRefreshExtension._playRefreshedSlots(): subContext refresh request error:",b)});this._subContext.addEventListener(a.EVENT_REQUEST_COMPLETE,this._playRefreshedSlots);for(var b=this._subContext._adRequest._keyValues,c=0;c<this._keyValues.length;c++)0>b.indexOf(this._keyValues[c])&&b.push(this._keyValues[c]);for(var d in this._globalParameters)this._globalParameters.hasOwnProperty(d)&&this._subContext.setParameter(d,this._globalParameters[d],a.PARAMETER_LEVEL_GLOBAL);for(d in this._overrideParameters)this._overrideParameters.hasOwnProperty(d)&&this._subContext.setParameter(d,this._overrideParameters[d],a.PARAMETER_LEVEL_OVERRIDE)},_onAdStarted:function(b){a.debug("DisplayRefreshExtension._onAdStarted()");var c=b.adInstance.getSlot();a.debug("DisplayRefreshExtension._onAdStarted(): slot: ",c," | timePositionClass:",c.getTimePositionClass());if(null!=c&&c.getTimePositionClass()!==a.TIME_POSITION_CLASS_DISPLAY&&(this._resetSubContext(),this._refreshTimer&&clearInterval(this._refreshTimer),this._replaceType!==this.REPLACE_TYPE_NONE)){b=b.adInstance;c=c.getAdInstances();for(var d=0;d<c.length;d++)b.getAdId()===c[d].getAdId()&&this._checkMissingCompanionForAd(b)}},_checkMissingCompanionForAd:function(b){a.debug("DisplayRefreshExtension._checkMissingCompanionForAd()",b);var c=this._companionSlots.slice();b=b.getCompanionAdInstances();var d;for(d=0;d<b.length;d++){var e=c.indexOf(b[d].getSlot());-1<e&&c.splice(e,1)}this._firstTemporalAd&&(this._firstTemporalAd=!1,c=c.filter(function(b){if(b.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_ONLY&&b.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_STAND_ALONE&&b.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_THEN_STAND_ALONE&&b.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE&&b.getInitialAdOption()!==a.SLOT_OPTION_INITIAL_AD_FIRST_COMPANION_OR_NO_STAND_ALONE_IF_TEMPORAL)return a.debug("DisplayRefreshExtension._checkMissingCompanionForAd(): firstCompanionAsInitial false in slot ",b.getCustomId()),!0;for(var c=b.getAdInstances(),d=0;d<c.length;d++)if(!c[d].isPlaceholder())return a.debug("DisplayRefreshExtension._checkMissingCompanionForAd(): first companion found in slot ",b.getCustomId()),!1;a.debug("DisplayRefreshExtension._checkMissingCompanionForAd(): firstCompanionAsInitial true, no ad in slot ",b.getCustomId());return!0}));if(this._replaceType===this.REPLACE_TYPE_BLANK)for(d=0;d<c.length;d++)c[d].stop(),this._subContext._replacePageSlot(c[d].getCustomId(),"");else this._replaceType===this.REPLACE_TYPE_AD&&this._refreshSlots(c)},_refreshSlots:function(b){a.debug("DisplayRefreshExtension._refreshSlots()",b);if(null!=b&&0!==b.length){for(var c=0;c<b.length;c++)b[c].stop(),this._subContext._refreshSlots.push(b[c].getCustomId());this._subContext._isRefreshRequest=!0;this._subContext.submitRequest(this._REQUEST_TIME_OUT)}},dispose:function(){a.debug("DisplayRefreshExtension.dispose()");this._context&&(this._context.removeEventListener(a.EVENT_REQUEST_COMPLETE,this._onRequestComplete),this._context.removeEventListener(a.EVENT_SLOT_ENDED,this._onSlotEnded),this._context.removeEventListener(a.EVENT_AD,this._onRendererEvent),this._context=null);this._subContext&&(this._subContext.removeEventListener(a.EVENT_REQUEST_COMPLETE,this._playRefreshedSlots),this._subContext=null);this._displaySlots=[];this._companionSlots=[];this._keyValues=[];this._globalParameters=[];this._overrideParameters=[];this._refreshType=this.REFRESH_TYPE_NONE;this._replaceType=this.REPLACE_TYPE_NONE;this._refreshInterval=0;this._refreshTimer&&clearInterval(this._refreshTimer);this._refreshTimer=null;this._firstTemporalAd=!0}};a.DisplayRefreshExtension.prototype.constructor=a.DisplayRefreshExtension;a.Ad=function(){this._id=null;this._creatives=[];this._noLoad=!1;this._soAdUnit=null;this._isRequiredToShow=!1};a.Ad.prototype={isRequiredToShow:function(){return this._isRequiredToShow},parse:function(b){if(b){this._id=b.adId||null;this._noLoad=b.noLoad;this._soAdUnit=b.adUnit;b.hasOwnProperty("required")&&(this._isRequiredToShow=b.required);var c=0;for(b=b.creatives||[];c<b.length;c++){var d=b[c],e=new a.Creative;e.parse(d);this._creatives.push(e)}}},getSoAdUnit:function(){return this._soAdUnit},getId:function(){return this._id},getNoLoad:function(){return this._noLoad},getCreative:function(a){for(var b=0;b<this._creatives.length;b++)if(this._creatives[b].getId()===a)return this._creatives[b];return null},addCreativeRendition:function(){var b=new a.Creative;this._creatives.push(b);return b}};a.Ad.prototype.constructor=a.Ad;a.Creative=function(){this._duration=this._baseUnit=this._id=null;this._parameters={};this._creativeRenditions=[]};a.Creative.prototype={getId:function(){return this._id},getBaseUnit:function(){return this._baseUnit},getDuration:function(){return this._duration},getParameter:function(a){return this._parameters[a]},setParameter:function(a,c){null==c?delete this._parameters[a]:this._parameters[a]=c},parse:function(b){if(b){this._id=b.creativeId||null;this._baseUnit=b.baseUnit||null;this._duration=1*b.duration;if(b.parameters)if(b.parameters.constructor===Array)for(var c=0,d=b.parameters||[];c<d.length;c++){var e=d[c];this._parameters[e.name]=e.value}else"object"===typeof b.parameters&&(this._parameters=a.Util.copy(b.parameters));c=0;for(d=b.creativeRenditions||[];c<d.length;c++){e=d[c];b=new a.CreativeRendition;b.parse(e);b.setDuration(this._duration);b.setBaseUnit(this._baseUnit);for(var f in this._parameters)this._parameters.hasOwnProperty(f)&&b.setParameter(f,this._parameters[f]);this._creativeRenditions.push(b)}}},getAllCreativeRenditions:function(){return this._creativeRenditions},addCreativeRendition:function(a){this._creativeRenditions.push(a)},getEligibleCreativeRenditionsForAdInstance:function(a){var b=[],d=[],e;for(e=0;e<this._creativeRenditions.length;e++){var f=this._creativeRenditions[e];f.getId()===a._creativeRenditionId&&f.getReplicaId()===a._replicaId&&b.push(f);""===f.getReplicaId()&&d.push(f)}return 0===b.length?d:b},cloneForTranslation:function(){var b=new a.Creative;b.parse({creativeId:this._id,baseUnit:this._baseUnit,duration:this._duration,parameters:a.Util.copy(this._parameters)});return b}};a.Creative.prototype.constructor=a.Creative;a.CreativeRendition=function(){this._id=null;this._creativeApi="None";this._baseUnit=null;this._replicaId="";this._height=this._width=this._preference=this._wrapperUrl=this._wrapperType=this._contentType=null;this._parameters={};this._primaryCreativeRenditionAsset=null;this._otherCreativeRenditionAssets=[];this._universalAdId=this._duration=null};a.CreativeRendition.prototype={getId:function(){return this._id},getCreativeApi:function(){return this._creativeApi},setCreativeApi:function(a){this._creativeApi=a||"None"},getReplicaId:function(){return this._replicaId},getContentType:function(){return this._contentType?this._contentType:this._primaryCreativeRenditionAsset&&this._primaryCreativeRenditionAsset.getContentType()?this._primaryCreativeRenditionAsset.getContentType():null},setContentType:function(a){this._contentType=a},getWrapperType:function(){return this._wrapperType},setWrapperType:function(a){this._wrapperType=a},getWrapperUrl:function(){return this._wrapperUrl},setWrapperUrl:function(a){this._wrapperUrl=a},getBaseUnit:function(){return this._baseUnit},setBaseUnit:function(a){this._baseUnit=a},getPreference:function(){return this._preference},setPreference:function(a){this._preference=a},getWidth:function(){return this._width},setWidth:function(a){this._width=a},getHeight:function(){return this._height},setHeight:function(a){this._height=a},getDuration:function(){return this._duration},setDuration:function(a){this._duration=a},getParameter:function(a){return this._parameters[a]},setParameter:function(a,c){null==c?delete this._parameters[a]:this._parameters[a]=c},getUniversalAdId:function(){return this._universalAdId},setUniversalAdId:function(a){this._universalAdId=a},getPrimaryCreativeRenditionAsset:function(){return this._primaryCreativeRenditionAsset},getOtherCreativeRenditionAssets:function(){return this._otherCreativeRenditionAssets.slice()},addCreativeRenditionAsset:function(b,c){var d=new a.CreativeRenditionAsset;d.setName(b);c?this._primaryCreativeRenditionAsset=d:this._otherCreativeRenditionAssets.push(d);return d},parse:function(b){if(b){this._id=b.creativeRenditionId||null;this._creativeApi=b.creativeApi||"None";this._replicaId=b.hasOwnProperty("adReplicaId")?b.adReplicaId:"";this._contentType=b.contentType||null;this._wrapperType=b.wrapperType||null;this._wrapperUrl=b.wrapperUrl||null;this._preference=1*b.preference;this._width=1*b.width;this._height=1*b.height;for(var c,d=0,e=b.parameters||[];d<e.length;d++)c=e[d],this._parameters[c.name]=c.value;this._primaryCreativeRenditionAsset=new a.CreativeRenditionAsset;this._primaryCreativeRenditionAsset.parse(b.asset);d=0;for(e=b.otherAssets||[];d<e.length;d++)c=e[d],b=new a.CreativeRenditionAsset,b.parse(c),this._otherCreativeRenditionAssets.push(b)}}};a.CreativeRendition.prototype.constructor=a.CreativeRendition;a.CreativeRenditionAsset=function(){this._bytes=this._mimeType=this._contentType=this._content=this._url=this._name=this._id=null};a.CreativeRenditionAsset.prototype={getName:function(){return this._name},setName:function(a){this._name=a},getUrl:function(){return this._url},setUrl:function(a){this._url=a},getContent:function(){return this._content},setContent:function(a){this._content=a},getContentType:function(){return this._contentType},setContentType:function(a){this._contentType=a},getMimeType:function(){return this._mimeType},setMimeType:function(a){this._mimeType=a},getBytes:function(){return this._bytes},setBytes:function(a){this._bytes=a},parse:function(a){a&&(this._id=a.id||null,this._name=a.name||null,this._url=a.url||null,this._content=a.content||null,this._contentType=a.contentType||null,this._mimeType=a.mimeType||null,this._bytes=1*a.bytes)}};a.CreativeRenditionAsset.prototype.constructor=a.CreativeRenditionAsset;a.AdManager=function(){var b=this;this._context=this.newContext();this._context.addEventListener(a.EVENT_REQUEST_COMPLETE,function(a){b.onRequestComplete(a)});this._networkId=this._serverURL="";this._fwGDPRConsent=this._fwGDPR=this._location=null;this._fwCMPExecuted=!1;this._fwUSPString=null;this._fwUSPAPIExecuted=!1;this._onRequestComplete=null;this._fetchGDPRData();this._fetchCCPAData()};a.AdManager.prototype={getVersion:function(){if(a.version){var b=a.version.match(/^js-(\d)\.(\d)\.(\d).(\d)/)||a.version.match(/^js-(\d)\.(\d)\.(\d)/)||a.version.match(/^js-(\d)\.(\d)/);if(null!=b&&0<b.length){for(var c=0,d=0;d<b.length-1;d++)c+=b[b.length-d-1]<<(d<<3);return c}if(0===a.version.indexOf("js-master"))return 4294967295}return 0},setNetwork:function(b){a.debug("AdManager.setNetwork("+Array.prototype.slice.call(arguments).join(",")+")");if(0<1*b){this._networkId=1*b;for(var c in a._instanceQueue)if(a._instanceQueue.hasOwnProperty(c)){var d=a._instanceQueue[c];d&&d._videoAsset._videoPlayPending&&d._videoAsset.play()}}else a.warn("AdManager.setNetwork","valid networkId required")},setServerURL:function(b){a.debug("AdManager.setServerURL("+Array.prototype.slice.call(arguments).join(",")+")");a.warn("AdManager.setServerURL method is DEPRECATED, use AdManager.setServer instead.");this.setServer(b)},setServer:function(b){a.debug("AdManager.setServer("+Array.prototype.slice.call(arguments).join(",")+")");if(b&&"string"===typeof b){this._serverURL=b;for(var c in a._instanceQueue)if(a._instanceQueue.hasOwnProperty(c)){var d=a._instanceQueue[c];d&&d._videoAsset._videoPlayPending&&d._videoAsset.play()}}else a.warn("AdManager.setServer","server url required")},setLocation:function(b){a.debug("AdManager.setLocation("+Array.prototype.slice.call(arguments).join(",")+")");this._location=b},newContext:function(){a.debug("AdManager.newContext("+Array.prototype.slice.call(arguments).join(",")+")");return new a.Context(this)},newContextWithContext:function(b){a.debug("AdManager.newContextWithContext("+Array.prototype.slice.call(arguments).join(",")+")");var c=this.cloneContext(b);c._temporalSlotBase=b._temporalSlotBase;b.getContentVideoElement()&&(c.setContentVideoElement(b.getContentVideoElement()),delete c._temporalSlotBase["_fw_contentVideo_"+b._instanceId]);c._videoDisplaySize=b._videoDisplaySize;c._overriddenAdRenderers=b._overriddenAdRenderers;c._currentContentPlayheadTime=b._currentContentPlayheadTime;c.startSubsession(b._adRequest._subsessionToken);c.setRequestMode(b._adRequest._requestMode);c._adRequest._compatibleDimensions=b._adRequest._compatibleDimensions;c._adRequest._keyValues=b._adRequest._keyValues;c._videoAsset._state=b._videoAsset._state;c._videoAsset._callbackTimer=b._videoAsset._callbackTimer;c._videoAsset._videoPlayPending=b._videoPlayPending;c._videoAsset._requestedVideoViewUrl=b._videoAsset._requestedVideoViewUrl;c._videoAsset._delay=b._videoAsset._delay;c._videoAsset._durationType=b._videoAsset._durationType;var d=b._extensionManager.extensions,e;for(e in d)d.hasOwnProperty(e)&&c.loadExtension(d[e]);return this._context=c},setParameter:function(b,c,d){a.debug("AdManager.setParameter("+Array.prototype.slice.call(arguments).join(",")+")");this._context.setParameter(b,c,d)},getParameter:function(a){return this._context.getParameter(a)},submitRequest:function(b,c){a.debug("AdManager.submitRequest()");b&&"function"===typeof b?this._onRequestComplete=b:a.warn("AdManager.submitRequest(): callback function required");this._context.submitRequest(c/1e3)},onRequestComplete:function(b){a.debug("AdManager.onRequestComplete("+Array.prototype.slice.call(arguments).join(",")+")");this._onRequestComplete&&(this._onRequestComplete({success:b.success,response:b.response}),this._onRequestComplete=null)},registerVideoDisplayBase:function(b){a.debug("AdManager.registerVideoDisplayBase("+Array.prototype.slice.call(arguments).join(",")+")");this._context.registerVideoDisplayBase(b)},setVideoAsset:function(b,c){a.debug("AdManager.setVideoAsset("+Array.prototype.slice.call(arguments).join(",")+")");this._context.setVideoAsset(b,c)},setSiteSection:function(b){a.debug("AdManager.setSiteSection("+Array.prototype.slice.call(arguments).join(",")+")");this._context.setSiteSection(b)},addKeyValue:function(b,c){a.debug("AdManager.addKeyValue("+Array.prototype.slice.call(arguments).join(",")+")");this._context.addKeyValue(b,c)},setVideoDisplayCompatibleSizes:function(b){a.debug("AdManager.setVideoDisplayCompatibleSizes("+Array.prototype.slice.call(arguments).join(",")+")");this._context.setVideoDisplayCompatibleSizes(b)},playSlots:function(b,c){var d=b;a.warn("AdManager.playSlots() has DEPRECATED, use tv.freewheel.SDK.Slot.Play() instead");a.debug("AdManager.playSlots("+b+")");"string"===typeof b&&(d=b.toUpperCase());this._playSlots(d,c)},_playSlots:function(b,c){var d=c;"function"!==typeof d&&(d=function(){});if(this._context._adResponse){var e=[];c=this._context.getTemporalSlots();for(var f=0;f<c.length;++f){var h=c[f];(.1>Math.abs(h.getTimePosition()-b)||b===h.getTimePositionClass())&&e.push(h)}if(0===e.length)a.warn("AdManager.playSlots","no slot matches",b),d();else if(b===a.TIME_POSITION_CLASS_OVERLAY)for(f=0;f<e.length;f++)(function(b){if(!b._onContentVideoTimeUpdate){var c=this._context.getContentVideoElement(),d=b._onContentVideoTimeUpdate=function(e){a.log("_onContentVideoTimeUpdate: event.type = "+e.type);!c.paused&&!0!==c._fw_videoAdPlaying&&0<=c.currentTime-b.getTimePosition()&&1>c.currentTime-b.getTimePosition()&&(c.removeEventListener("timeupdate",d,!1),b._play(function(){var a=setInterval(function(){!c.paused&&2<Math.abs(c.currentTime-b.getTimePosition())&&(c.addEventListener("timeupdate",d,!1),clearInterval(a))},1e3)}))};c.addEventListener("timeupdate",d,!1)}})(e[f]);else(function(){var a=e.shift();a?a._play(d):d()})()}else a.warn("AdManager._playSlots","request is not completed"),d()},_setupConsentPostMessage:function(b){a.debug("AdManager.setupConsentPostMessage");var c=b+"Locator",d=b+"Call",e=b+"Return",f=a.Util.getFrameAncestor(c),h={};window[b]=function(a,b,e){if(f){var g=Math.random()+"",k={};a=(k[d]={command:a,parameter:b,callId:g},k);h[g]=e;f.postMessage(a,"*")}else e({msg:c+" not found"},!1)};window.addEventListener("message",function(a){a="string"===typeof a.data?JSON.parse(a.data):a.data;a[e]&&(a=a[e],"function"===typeof h[a.callId]&&(h[a.callId](a.returnValue,a.success),delete h[a.callId]))},!1)},_retrieveGDPRWithPostMessage:function(){a.debug("AdManager.retrieveGDPRWithPostMessage");this._setupConsentPostMessage("__cmp");this._getGdprConsentData(window.__cmp)},_fetchGDPRData:function(){a.debug("AdManager.fetchGDPRData");var b=a.Util.getTopMostWindow();try{var c=b.__cmp;this._getGdprConsentData(c)}catch(d){a.warn("__cmp function on top window is inaccessible due to the following error: "+d.description),this._retrieveGDPRWithPostMessage()}},_getGdprConsentData:function(b){a.debug("AdManager.getGdprConsentData");if("function"==typeof b)try{var c=this;b("getConsentData",null,function(b,e){e?(e=b.gdprApplies,null!=e?"boolean"==typeof e?c._fwGDPR=e?1:0:(c._fwGDPR=e.toString(),a.warn("VendorConsentData's gdprApplies value is malformed.")):a.warn("VendorConsentData's gdprApplies value is missing."),b=b.consentData,null!=b?"string"==typeof b?c._fwGDPRConsent=b:(c._fwGDPRConsent=b.toString(),a.warn("VendorConsentData's consentData value is malformed.")):a.warn("VendorConsentData's consentData value is missing.")):a.warn("Cannot retrieve gdpr params from CMP.");c._fwCMPExecuted=!0},this)}catch(d){this._fwCMPExecuted=!0,a.warn("AdManager.fetchGDPRData "+d.description)}else this._fwCMPExecuted=!0,a.warn("CMP function cannot be found. _fw_gdpr: "+this._fwGDPR+", _fw_gdpr_consent: "+this._fwGDPRConsent)},_retrieveCCPAWithPostMessage:function(){a.debug("AdManager.retrieveCCPAWithPostMessage");this._setupConsentPostMessage("__uspapi");this._getUSPData(window.__uspapi)},_fetchCCPAData:function(){a.debug("AdManager.fetchCCPAData");var b=a.Util.getTopMostWindow();try{var c=b.__uspapi;this._getUSPData(c)}catch(d){a.warn("__uspapi function on top window is inaccessible due to the following error: "+d.description),this._retrieveCCPAWithPostMessage()}},_getUSPData:function(b){a.debug("AdManager.getUSPData");if("function"==typeof b)try{var c=this;b("getUSPData",1,function(b,e){e?(b=b.uspString,null!=b?"string"==typeof b?c._fwUSPString=b:(c._fwUSPString=b.toString(),a.warn("USPData's uspString value is malformed.")):a.warn("USPData's uspString value is missing.")):a.warn("Cannot retrieve CCPA params from USPAPI.");c._fwUSPAPIExecuted=!0},this)}catch(d){this._fwUSPAPIExecuted=!0,a.warn("AdManager.getUSPData "+d.description)}else this._fwUSPAPIExecuted=!0,a.warn("USPAPI function cannot be found. _fw_us_privacy: "+this._fwUSPString)},dispose:function(){a.debug("AdManager.dispose()");this._context.dispose();this._onRequestComplete=null},cloneContext:function(a){var b=this.newContext(),d=a._adRequest._capabilities._capabilities,e;for(e in d)d.hasOwnProperty(e)&&b.setCapability(e,d[e]);b.setProfile(a._adRequest._playerProfile);b.setSiteSection(a._ss_id,a._ss_networkId,a._ss_pageViewRandom,a._ss_idType,a._ss_fallbackId);b.setVideoAsset(a._va_id,a._va_duration,a._va_networkId,a._va_location,a._va_autoPlayType,a._va_viewRandom,a._va_idType,a._va_fallbackId,a._va_durationType);b.setVisitor(a._adRequest._visitorCustomId,a._adRequest._visitorIpV4Address);return b}};a.AdManager.prototype.constructor=a.AdManager;a._instanceCounter=0;a._instanceQueue={};a.Context=function(b){this._adManager=b;this._eventDispatcher=new a.EventDispatcher;this._adRequest=new a.AdRequest(this);this._adResponse=null;this._videoAsset=new a.VideoAsset(this);this._temporalSlotBase=null;this._videoDisplaySize={};this._globalLevelParameterDictionary={};this._overrideLevelParameterDictionary={};this._globalLevelParameterDictionary[a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE]=!0;this._globalLevelParameterDictionary[a.PARAMETER_DISABLE_CORS_ENFORCEMENT]=!0;this._globalLevelParameterDictionary[a.PARAMETER_USE_CMP]=!0;this._globalLevelParameterDictionary[a.PARAMETER_USE_CCPA_USPAPI]=!0;this._rendererManifest={};this._overriddenAdRenderers=[];this._extensionManager=new a.ExtensionManager(this);this._totalSetDisplaySizeCount=this._autoSetDisplaySizeCount=this._requestState=0;this._instanceId=a._instanceCounter;a._instanceQueue["Context_"+a._instanceCounter]=this;a._instanceCounter++;this._contentVideoAttached=!1;this._currentContentPlayheadTime=0;this._ss_id="";this._ss_networkId=this._ss_pageViewRandom=0;this._ss_idType=a.ID_TYPE_CUSTOM;this._va_location=this._va_networkId=this._va_duration=this._va_id=this._ss_fallbackId="";this._va_autoPlayType=a.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED;this._va_fallbackId="";this._va_viewRandom=0;this._va_idType=a.ID_TYPE_CUSTOM;this._va_durationType=a.VIDEO_ASSET_DURATION_TYPE_EXACT;this._isRefreshRequest=!1;this._refreshSlots=[];this._adVolume=1;this._onVolumeChange=this.__onVolumeChange.bind(this)};a.Context.prototype={getAdVolume:function(){return this._adVolume},setAdVolume:function(b){a.debug("Context.setAdVolume",b);if(this.getContentVideoElement())if("number"!==typeof b||0>b||1<b)a.debug("Invalid volume: "+b);else if((a.PLATFORM_IS_IPHONE_IPOD||a.PLATFORM_IS_IPAD)&&0<b&&1>b)a.debug("iOS doesn't allow volume values other than 0 and 1, ignore.");else if(b===this._adVolume)a.debug("Volume did not change, ignore.");else{this._adVolume=b;b=this.getTemporalSlots();for(var c=0;c<b.length;++c){var d=b[c];if(d.getType()===a.SLOT_TYPE_TEMPORAL&&d.getState()!==a.MediaInitState.instance&&d.getState()!==a.MediaEndState.instance&&(d=d.getCurrentAdInstance())){d.setVolume(this._adVolume);break}}}else a.debug("No video element set, ignore.")},__onVolumeChange:function(b){a.debug("Context._onVolumeChange(): event = "+b.type);a.debug("Context._onVolumeChange(): video element is muted: "+this.getContentVideoElement().muted);0!==this._adVolume||this.getContentVideoElement().muted?this.setAdVolume(this.getContentVideoElement().muted?0:this.getContentVideoElement().volume):this.setAdVolume(this.getContentVideoElement().volume)},addRenderer:function(a,c,d,e,f,h,g){this._overriddenAdRenderers.push({url:a,baseUnit:c,contentType:d,creativeApi:h,slotType:e,soAdUnit:f,parameter:g})},setCapability:function(b,c){a.debug("Context.setCapability",b,c);this._adRequest.setCapability(b,c)},addKeyValue:function(b,c){a.debug("Context.addKeyValue",b,c);this._adRequest.addKeyValue(b,c)},setParameter:function(b,c,d){a.debug("Context.setParameter",b,c,d);if(d===a.PARAMETER_LEVEL_GLOBAL)d=this._globalLevelParameterDictionary;else if(d===a.PARAMETER_LEVEL_OVERRIDE)d=this._overrideLevelParameterDictionary;else return;null==c?delete d[b]:d[b]=c},getParameter:function(a){return a?this._overrideLevelParameterDictionary.hasOwnProperty(a)?this._overrideLevelParameterDictionary[a]:this._adResponse&&this._adResponse._profileParameters.hasOwnProperty(a)?this._adResponse._profileParameters[a]:this._globalLevelParameterDictionary.hasOwnProperty(a)?this._globalLevelParameterDictionary[a]:null:null},setVideoState:function(b){a.debug("Context.setVideoState",b);this._videoAsset.setVideoState(b)},registerVideoDisplayBase:function(b){a.debug("Context.registerVideoDisplayBase",b);if(b&&"string"===typeof b){if(this._temporalSlotBase&&this._temporalSlotBase.id===b){a.debug("Context.registerVideoDisplayBase","register the same display base, will only change size");var c=this._temporalSlotBase.getElementsByTagName("video")}else{this._temporalSlotBase&&this.getContentVideoElement().removeEventListener("volumechange",this._onVolumeChange);this._temporalSlotBase=document.getElementById(b);if(!this._temporalSlotBase){a.warn("Context.registerVideoDisplayBase","could not get element",b);return}c=this._temporalSlotBase.getElementsByTagName("video");if(0===c.length){a.warn("Context.registerVideoDisplayBase","could not get video element from",b);this._temporalSlotBase=null;return}this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]=c[0];this.getContentVideoElement().addEventListener("volumechange",this._onVolumeChange);this._adVolume=c[0].muted?0:c[0].volume}this._setVideoDisplaySizeByContentVideo(c[0])}else a.warn("Context.registerVideoDisplayBase","id required")},setContentVideoElement:function(b){a.debug("Context.setContentVideoElement()");if(b&&b.parentNode){var c=this._temporalSlotBase;this._temporalSlotBase=b.parentNode;this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]===b?a.debug("Context.setContentVideoElement","set the same video in same div, will only change size"):(c&&c["_fw_contentVideo_"+this._instanceId]&&c["_fw_contentVideo_"+this._instanceId].removeEventListener("volumechange",this._onVolumeChange),this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]=b,this.getContentVideoElement().addEventListener("volumechange",this._onVolumeChange),this._adVolume=this.getContentVideoElement().muted?0:this.getContentVideoElement().volume);this._setVideoDisplaySizeByContentVideo(b)}else a.warn("Context.setContentVideoElement","contentVideo and contentVideo.parentNode is required")},getContentVideoElement:function(){return this._temporalSlotBase?this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]:(a.warn("SlotBase is null"),null)},setVideoDisplaySize:function(b,c,d,e,f){a.debug("Context.setVideoDisplaySize("+Array.prototype.slice.call(arguments).join(",")+")");this._totalSetDisplaySizeCount++;this._videoDisplaySize={left:b,top:c,width:d,height:e,position:f};for(var h=this.getTemporalSlots(),g=0;g<h.length;++g){var k=h[g];k.setWidth(d);k.setHeight(e);if(k.getState()===a.MediaPlayingState.instance||k.getState()===a.MediaReplayingState.instance){if(h=k.getCurrentAdInstance())(h=h.getRendererController().getRenderer())&&h.resize?h.resize():a.debug("renderer do not support resize");break}}},getVideoDisplaySize:function(){function a(a){a=parseInt(a,10);isNaN(a)&&(a=0);return a}this._videoDisplaySize.left=a(this._videoDisplaySize.left);this._videoDisplaySize.right=a(this._videoDisplaySize.right);this._videoDisplaySize.width=a(this._videoDisplaySize.width);this._videoDisplaySize.height=a(this._videoDisplaySize.height);return this._videoDisplaySize},setVideoDisplayCompatibleSizes:function(b){a.debug("Context.setVideoDisplayCompatibleSizes",b);this._adRequest.setVideoDisplayCompatibleSizes(b)},resize:function(b,c){a.debug("Context.resize("+Array.prototype.slice.call(arguments).join(",")+")");if(!this._temporalSlotBase)return a.warn("SlotBase is null"),null;this.setVideoDisplaySize(this._videoDisplaySize.left,this._videoDisplaySize.right,b,c,this._videoDisplaySize.position)},setProfile:function(b){a.debug("Context.setProfile",b);this._adRequest.setProfile(b)},setVideoAsset:function(b,c,d,e,f,h,g,k,m){a.debug("Context.setVideoAsset("+Array.prototype.slice.call(arguments).join(",")+")");this._videoAsset.setVideoAsset(b,c,d,e,f,h,g,k,m);this._va_id=b;this._va_duration=c;this._va_networkId=d;this._va_location=e;this._va_autoPlayType=f;this._va_viewRandom=h;this._va_idType=g;this._va_fallbackId=k;this._va_durationType=m},setVideoAssetCurrentTimePosition:function(b){a.debug("Context.setVideoAssetCurrentTimePosition("+b+")");this._videoAsset.setVideoAssetCurrentTimePosition(b)},setSiteSection:function(b,c,d,e,f){a.debug("Context.setSiteSection("+Array.prototype.slice.call(arguments).join(",")+")");this._adRequest.setSiteSection(b,c,d,e,f);this._ss_id=b;this._ss_networkId=c;this._ss_pageViewRandom=d;this._ss_idType=e;this._ss_fallbackId=f},setVisitor:function(b,c){a.debug("Context.setVisitor("+Array.prototype.slice.call(arguments).join(",")+")");this._adRequest.setVisitor(b,c)},startSubsession:function(b){a.debug("Context.startSubsession("+b+")");this._adRequest.setSubsessionToken(b)},setRequestMode:function(b){a.debug("Context.setRequestMode("+b+")");this._adRequest.setRequestMode(b)},setRequestDuration:function(b){a.debug("Context.setRequestDuration("+b+")");this._adRequest.setRequestDuration(b)},addCandidateAd:function(b){a.debug("Context.addCandidateAd("+b+")");this._adRequest.addCandidateAd(b)},addTemporalSlot:function(b,c,d,e,f,h,g,k,m){a.debug("Context.addTemporalSlot("+Array.prototype.slice.call(arguments).join(",")+")");this._adRequest.addTemporalSlot(b,c,d,e,f,h,g,k,m)},getTemporalSlots:function(){return this._adResponse?this._adResponse._temporalSlots.slice():[]},getSlotByCustomId:function(a){return this._adResponse?this._adResponse.getSlotByCustomId(a):null},getSlotsByTimePositionClass:function(a){var b=[],d;if(this._adResponse){for(d=0;d<this._adResponse._temporalSlots.length;d++)this._adResponse._temporalSlots[d].getTimePositionClass()===a&&b.push(this._adResponse._temporalSlots[d]);for(d=0;d<this._adResponse._siteSectionNonTemporalSlots.length;d++)this._adResponse._siteSectionNonTemporalSlots[d].getTimePositionClass()===a&&b.push(this._adResponse._siteSectionNonTemporalSlots[d]);for(d=0;d<this._adResponse._videoPlayerNonTemporalSlots.length;d++)this._adResponse._videoPlayerNonTemporalSlots[d].getTimePositionClass()===a&&b.push(this._adResponse._videoPlayerNonTemporalSlots[d])}return b},_isConsentRequired:function(){var b=this.getParameter(a.PARAMETER_USE_CMP)&&!this._adManager._fwCMPExecuted,c=this.getParameter(a.PARAMETER_USE_CCPA_USPAPI)&&!this._adManager._fwUSPAPIExecuted;return b||c},submitRequest:function(b){a.debug("Context.submitRequest",b);var c=0;if(!this._isConsentRequired()||this._isRefreshRequest)this._submitValidatedRequest(b);else var d=setInterval(function(){!this._isConsentRequired()||500<=c?(clearInterval(d),this._submitValidatedRequest(b)):c+=100}.bind(this),100)},_submitValidatedRequest:function(b){this.dispatchEvent(a.EVENT_REQUEST_INITIATED,{});if(this._requestState)a.warn("Context.submitRequest: request already submitted");else if(a.Util.isBlank(this._adManager._serverURL))a.warn("Context.submitRequest: serverURL is not set");else{this._requestState=1;this._adRequest.useCMP();this._adRequest.useUSPAPI();this._adRequest.scanPageSlots();if(this._isRefreshRequest){var c={},d=[],e,f;for(e=0;e<this._refreshSlots.length;e++){var h=this._refreshSlots[e];if(void 0!==this._adRequest._slotScanner._slots[h]){c[h]=this._adRequest._slotScanner._slots[h];var g=c[h].split("&");for(f=0;f<g.length;f++)-1!==g[f].search("flag")&&(g[f]="flag=-cmpn");c[h]=g.join("&")}for(f=0;f<this._adRequest._slotScanner._knownSlots.length;f++)this._adRequest._slotScanner._knownSlots[f].id===h&&(g=this._adRequest._slotScanner._knownSlots[f],
g.acceptCompanion=!1,g.initialAdOption=a.SLOT_OPTION_INITIAL_AD_STAND_ALONE,d.push(g))}this._adRequest._slotScanner._slots=c;this._adRequest._slotScanner._knownSlots=d}this.getParameter(a.PARAMETER_ENABLE_FORM_TRANSPORT)&&(a.debug("Context.submitRequest: enabling Safari transport mechanism globally"),a.PLATFORM_SEND_REQUEST_BY_FORM=!0);c=this._adManager._serverURL;".js"!==c.substring(c.length-3,c.length)&&(c=this._adRequest.generateTypeBRequestUrl());d=function(){1===this._requestState&&(a.warn("Context.submitRequest: request timeout"),this.requestComplete(null))}.bind(this);if("number"!==typeof b||0>=b||!b)b=5;setTimeout(d,1e3*b);a.log("Context.submitRequest: sending request to",c,"timeout",b);a.PLATFORM_SEND_REQUEST_BY_FORM?(a.debug("Context.submitRequest:","use json2"),a.Util.pingURLWithForm(c,this._instanceId,!0),this._onMessagePosted=function(a){"object"===typeof a.data&&a.data.hasOwnProperty("cbfn")&&-1<a.data.cbfn.indexOf("['Context_"+this._instanceId+"']")&&this.requestComplete(a.data.response)}.bind(this),window.addEventListener("message",this._onMessagePosted,!1)):a.Util.pingURLWithScript(c)}},requestComplete:function(b){if(1!==this._requestState)a.warn("ad request complete after timeout"),this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:!1});else{this._requestState=2;a.debug("Context.requestComplete");if(a.PLATFORM_SEND_REQUEST_BY_FORM){window.removeEventListener("message",this._onMessagePosted,!1);var c=document.getElementById("_fw_request_iframe_"+this._instanceId);document.body.removeChild(c)}if(null!=b){a._instanceQueue["Context_"+this._instanceId]=null;this._adResponse=new a.AdResponse(this);this._adResponse.parse(b,this._temporalSlotBase);a.log("Ad request succeeded");if(this._adResponse._profileParameters.autoloadExtensions){c=this._adResponse._profileParameters.autoloadExtensions.split(",");for(var d=0;d<c.length;d++){var e=c[d].trim();a.log("Loading extension: "+e);this.loadExtension(e)}}this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:!0,response:b});c=this._adResponse.getSiteSectionNonTemporalSlots();for(b=0;b<c.length;++b)a.log("Auto play site section nonTemporal slots"),c[b].play();c=this._adResponse.getVideoPlayerNonTemporalSlots();for(b=0;b<c.length;++b)a.log("Auto play video player nonTemporal slots"),c[b].play()}else a.warn("Ad request failed"),this.dispatchEvent(a.EVENT_REQUEST_COMPLETE,{success:!1})}},addEventListener:function(b,c){a.debug("Context.addEventListener",b);this._eventDispatcher.addEventListener(b,c)},removeEventListener:function(b,c){a.debug("Context.removeEventListener",b);this._eventDispatcher.removeEventListener(b,c)},dispatchEvent:function(b,c){a.log("Context.dispatchEvent type: "+b+", payload: "+c);if(b===a.EVENT_SLOT_STARTED){var d=c.slot.getTimePositionClass();if(d===a.TIME_POSITION_CLASS_PREROLL||d===a.TIME_POSITION_CLASS_MIDROLL||d===a.TIME_POSITION_CLASS_POSTROLL)this._contentVideoAttached=!0,this._markCurrentContentPlayheadTime()}else b===a.EVENT_SLOT_ENDED&&(d=c.slot.getTimePositionClass(),d===a.TIME_POSITION_CLASS_PREROLL||d===a.TIME_POSITION_CLASS_MIDROLL||d===a.TIME_POSITION_CLASS_POSTROLL)&&(this._contentVideoAttached=!1);c=c||{};c.type=b;c.target=this;this._eventDispatcher.dispatchEvent(c)},dispose:function(){a.debug("Context.dispose");this.setVideoState(a.VIDEO_STATE_STOPPED);if(this._adResponse){if(this._temporalSlotBase){for(var b=0,c=this._adResponse._temporalSlots||[];b<c.length;++b){var d=c[b];d.getCurrentAdInstance()&&d.stop();if(d._onContentVideoTimeUpdate){var e=this._temporalSlotBase["_fw_contentVideo_"+this._instanceId];e&&e.removeEventListener("timeupdate",d._onContentVideoTimeUpdate,!1);d._onContentVideoTimeUpdate=null}}this.getContentVideoElement().removeEventListener("volumechange",this._onVolumeChange);this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]=null}this._isRefreshRequest=!1;this._refreshSlots=[];this._extensionManager.dispose();this._extensionManager=null}},loadExtension:function(a){this._extensionManager.load(a,this)},_markCurrentContentPlayheadTime:function(){var a=this._temporalSlotBase["_fw_contentVideo_"+this._instanceId].currentTime;0<a&&(this._currentContentPlayheadTime=a)},_getContentPlayheadTime:function(){var a=-1;!this._contentVideoAttached&&this._temporalSlotBase&&this._temporalSlotBase["_fw_contentVideo_"+this._instanceId]&&(a=this._temporalSlotBase["_fw_contentVideo_"+this._instanceId].currentTime);return 0<a?a:this._currentContentPlayheadTime},_requestContentVideoToPauseBySlot:function(a){this._videoAsset.requestPauseBySlot(a)},_requestContentVideoToResumeBySlot:function(a){this._videoAsset.requestResumeBySlot(a)},_setVideoDisplaySizeByContentVideo:function(a){if(this._autoSetDisplaySizeCount===this._totalSetDisplaySizeCount){var b=a.style.left,d=a.style.top,e=a.offsetWidth?a.offsetWidth:a.style.pixelWidth,f=a.offsetHeight?a.offsetHeight:a.style.pixelHeight;a=a.style.position;this._autoSetDisplaySizeCount++;this.setVideoDisplaySize(b,d,e,f,a)}},_replacePageSlot:function(b,c){a.debug("fw replace %s",b);var d;try{var e=document.getElementById(b)?document:parent.document.getElementById(b)?parent.document:null;var f=document.getElementById(b)?"window":parent.document.getElementById(b)?"parent":null}catch(m){f=e=null}if(!e)for(var h=0;h<window.frames.length;h++)try{window.frames[h].document.getElementById(b)&&(e=window.frames[h].document,f="window.frames["+h+"]")}catch(m){a.debug(m)}f&&(d=f+".document");a.debug("fw replacing slot %s in frame %s",b,d);if(!e)throw"Slot element not found: "+b;h=e.getElementById("_fw_container_"+b);h.innerHTML=c;c=h.getElementsByTagName("script");var g=e.getElementsByTagName("head")[0];for(h=0;h<c.length;++h)if(a.PLATFORM_IS_FIREFOX||c[h].src){var k=e.createElement("script");c[h].charset&&(k.charset=c[h].charset);c[h].src&&(k.src=c[h].src);c[h].innerHTML&&(k.innerHTML=c[h].innerHTML);k.onload=k.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||g.removeChild(k)};a.debug("fw append script for %s",b);g.appendChild(k)}else k=c[h].innerHTML,k=k.replace(/var fw_scope = document;/,"var fw_scope="+d+";"),k=k.replace(/var fw_scope_window = window;/,"var fw_scope_window="+f+";"),a.debug("fw eval in %s for %s, %s",d,b,k),eval(k);a.debug("fw finish replace %s",b)}};a.Context.prototype.constructor=a.Context;a.Capabilities=function(){this._capabilities={};this.init()};a.Capabilities.prototype={init:function(){for(var b=[a.CAPABILITY_SLOT_TEMPLATE,a.CAPABILITY_MULTIPLE_CREATIVE_RENDITIONS,a.CAPABILITY_FALLBACK_UNKNOWN_ASSET,a.CAPABILITY_FALLBACK_UNKNOWN_SITE_SECTION,a.CAPABILITY_FALLBACK_ADS,a.CAPABILITY_SLOT_CALLBACK,a.CAPABILITY_NULL_CREATIVE,a.CAPABILITY_AUTO_EVENT_TRACKING,a.CAPABILITY_RENDERER_MANIFEST],c=0;c<b.length;c++)this._capabilities[b[c]]=a.CAPABILITY_STATUS_ON},setCapability:function(a,c){this._capabilities[a]=c},getCapability:function(a){return this._capabilities[a]},parseCapabilities:function(b){var c="",d;for(d in this._capabilities)if(this._capabilities.hasOwnProperty(d)){switch(this._capabilities[d]){case a.CAPABILITY_STATUS_ON:c+="+"+d;break;case a.CAPABILITY_STATUS_OFF:c+="-"+d}b=b.replace(new RegExp("(%2B|-|\\+)"+d,"g"),"")}c=encodeURIComponent(c);return b=-1<b.indexOf("flag=")?b.replace(/flag=/,"flag="+c):b+("&flag="+c)}};a.VideoAsset=function(b){this._defaultTimeouts=[5,10,15,30,60,120,180,300];this._context=b;this._internalState=a.MediaInitState.instance;this._eventCallback=this._state="";this._callbackTimer=null;this._requestedVideoViewUrl=this._videoPlayPending=!1;this._dummyInstanceId="";this._delay=0;this._location=this._networkId=this._duration=this._customId=this._id="";this._autoPlayType=null;this._fallbackId="";this._viewRandom=0;this._durationType=null;this._currentTpos=0};a.VideoAsset.prototype={setVideoAsset:function(b,c,d,e,f,h,g,k,m){if(b){switch(g){case a.ID_TYPE_FW:g=this._id!==b;this._id=b;break;case a.ID_TYPE_GROUP:g=this._id!=="g"+b;this._id="g"+b;break;default:g=this._customId!==b,this._customId=b}g&&(this._eventCallback="");"number"===typeof c&&(this._duration=Math.round(10*c)/10);0<1*d&&(this._networkId=1*d);"string"===typeof e&&(this._location=e);"number"===typeof f&&(this._autoPlayType=f);0<1*h&&(this._viewRandom=1*h);"number"===typeof k&&0<k?this._fallbackId=""+k:"string"===typeof k&&(this._fallbackId=k.trim());if(m===a.VIDEO_ASSET_DURATION_TYPE_EXACT||m===a.VIDEO_ASSET_DURATION_TYPE_VARIABLE)this._durationType=m;this._videoPlayPending&&this.play()}else a.warn("AdRequest.setVideoAsset","id is required.")},setVideoAssetCurrentTimePosition:function(b){!b||0>b?a.warn("AdRequest.setVideoAssetCurrentTimePosition","valid timePosition is required"):this._currentTpos=b},setVideoState:function(b){b===a.VIDEO_STATE_PLAYING?(this._state===a.VIDEO_STATE_PAUSED&&this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_RESUMED),this.play()):b===a.VIDEO_STATE_PAUSED||b===a.VIDEO_STATE_STOPPED?(this.pause(),b===a.VIDEO_STATE_PAUSED&&this._state===a.VIDEO_STATE_PLAYING&&this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_PAUSED)):b===a.VIDEO_STATE_COMPLETED&&this.complete();this._state=b},callback:function(b){this._eventCallback?this._eventCallback.process():b=!0;b||((b=this._defaultTimeouts.shift())||(b=300),this._callbackTimer=new a.Timer(b,a.Util.bind(this,this.callback)),this._callbackTimer.start())},getPlayheadTime:function(){var a=this._delay;this._delay=0;a+=this._callbackTimer?this._callbackTimer.getCTValue():0;return Math.floor(a)},play:function(){this._context._adManager._serverURL&&this._context._adManager._networkId&&(this._id||this._customId)?this._eventCallback?(this._videoPlayPending=!1,this._internalState.play(this)):this._requestedVideoViewUrl||(this._requestedVideoViewUrl=!0,this.requestForVideoViewCallback(),this._callbackTimer||(this._callbackTimer=new a.Timer,this._callbackTimer.tick())):(a.warn("Server URL or Network ID or Video Asset id/customId is not set, delay video asset state change until these are provided."),this._videoPlayPending=!0,this._callbackTimer||(this._callbackTimer=new a.Timer,this._callbackTimer.tick()))},pause:function(){this._internalState.pause(this)},complete:function(){this._internalState.complete(this)},onStartPlaying:function(){this.callback()},onStartReplaying:function(){this.callback()},onPausePlaying:function(){this.callback(!0);this._callbackTimer.pause()},onResumePlaying:function(){this._callbackTimer.start()},onCompletePlaying:function(){this.callback(!0);this._callbackTimer.stop();this._callbackTimer=null;this._eventCallback="";this._requestedVideoViewUrl=!1},onCompleteReplaying:function(){this.onCompletePlaying()},setMediaState:function(a){this._internalState=a},requestPauseBySlot:function(b){a.debug("requestPauseBySlot");this._internalState===a.MediaPlayingState.instance||this._internalState===a.MediaReplayingState.instance?this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,{slot:b}):a.debug("Not sending content pause request because content video state is",JSON.stringify(this._internalState))},requestResumeBySlot:function(b){a.debug("requestResumeBySlot");this._internalState===a.MediaPausedState.instance||this._internalState===a.MediaReplayPausedState.instance?this._context.dispatchEvent(a.EVENT_CONTENT_VIDEO_RESUME_REQUEST,{slot:b}):a.debug("Not sending content resume request because content video state is ",JSON.stringify(this._internalState))},requestForVideoViewCallback:function(){var b=new a.Context(this._context._adManager);b._videoAsset=this;this._dummyInstanceId=b._instanceId;b=this._context._adRequest.generateVideoViewRequestUrlWithDummyContextInstanceId(b._instanceId);var c=this;a.PLATFORM_SEND_REQUEST_BY_FORM?(a.debug("Context.submitRequest:","use json2"),a.Util.pingURLWithForm(b,this._dummyInstanceId,!0),c._onMessagePosted=function(a){"object"===typeof a.data&&a.data.hasOwnProperty("cbfn")&&-1<a.data.cbfn.indexOf("['Context_"+this._dummyInstanceId+"']")&&c.requestComplete(a.data.response)},window.addEventListener("message",c._onMessagePosted,!1)):a.Util.pingURLWithScript(b)},requestComplete:function(b){this._delay=this._callbackTimer.tick();this._callbackTimer=null;if(a.PLATFORM_SEND_REQUEST_BY_FORM){window.removeEventListener("message",this._onMessagePosted,!1);var c=document.getElementById("_fw_request_iframe_"+this._dummyInstanceId);document.body.removeChild(c)}null!=b?(a._instanceQueue["Context_"+this._dummyInstanceId]=null,this.parse(a.Util.getObject("siteSection.videoPlayer.videoAsset",b)||{}),this.play()):a.warn("Failed to get video view callback url.")},parse:function(b){if(b){this._customId=b.customId;this._networkId=parseInt(b.networkId);for(var c=0,d=b.eventCallbacks||[];c<d.length;c++){b=d[c];var e=a.EventCallback.newEventCallback(this._context,b.name,b.type);if(e&&b.name===a.EVENT_VIDEO_VIEW){e.parse(b);this._eventCallback=e;a.debug("Parsed video view url: "+this._eventCallback._url);break}}}}};a.NullRenderer=function(){this._rendererController=null};a.NullRenderer.prototype={start:function(b){this._rendererController=b;this._rendererController.setCapability(a.EVENT_AD_CLICK,a.CAPABILITY_STATUS_OFF);this._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED);this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED)},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){return-1},getDuration:function(){return-1}};a.NullRenderer.prototype.constructor=a.NullRenderer;a.VPAIDWrapper=function(){this._creative=null;this._timeoutInMs=0;this._eventHandlers={};this._timeoutTimer=null;this._timeoutOperation="";this.timeoutReached=!1;this._visibilityChangeListener=null;this._creativePausedByTabSwitch=!1;this._autoPauseAdOnVisibilityChange=!0;this._loadIntervalTimer=null;this._isCORSEnforcementDisabled=!0};a.VPAIDWrapper.prototype={_isCreativeFunctionInvokable:function(a){return this._creative?(a=this._creative[a])&&"function"===typeof a:!1},checkVPAIDInterface:function(a){for(var b={passed:!0,missingInterfaces:""},d=a.length-1;0<=d;d--)this._isCreativeFunctionInvokable(a[d])||(b.passed=!1,b.missingInterfaces+=a[d]+" ");return b},loadCreativeAsset:function(b){a.log("loadCreativeAsset("+b+")");var c=document.getElementById("vpaidFrame"),d=document.createElement("iframe");d.id="vpaidFrame";null==c?document.body.appendChild(d):document.body.replaceChild(d,c);d.width=0;d.height=0;d.style.display="none";d.contentWindow.document.open();if(this._isCORSEnforcementDisabled){a.log("CORS Enforcement Disabled");d.contentWindow.document.write('<script type="text/javascript" src="'+b+'"> </script>');d.contentWindow.document.close();this._timeoutOperation="loadCreativeAsset";this._waitForTimeout();var e=this;this._loadIntervalTimer=setInterval(function(){var b=document.getElementById("vpaidFrame").contentWindow.getVPAIDAd;b&&"function"===typeof b&&(clearInterval(e._loadIntervalTimer),b=b(),"undefined"===typeof b?a.debug("getVPAIDAd() returns undefined value"):null==b?a.debug("getVPAIDAd() returns null"):(e._creative=b,e._eventHandlers.CreativeAssetLoaded()))},200)}else{d.contentWindow.document.close();this._timeoutOperation="loadCreativeAsset";e=this;var f=new XMLHttpRequest;f.open("GET",b);f.timeout=e._timeoutInMs;f.onreadystatechange=function(){if(4==f.readyState)if(200===f.status)try{d.contentWindow.eval(f.responseText);var c=d.contentWindow.getVPAIDAd;if(c&&"function"===typeof c){var g=c();if("undefined"===typeof g)throw"getVPAIDAd() returns undefined value";if(null==g)throw"getVPAIDAd() returns null";e._creative=g;e._eventHandlers.CreativeAssetLoaded()}else throw"getVPAIDAd() funtion does not exist"}catch(k){a.warn(k),e._eventHandlers.loaderror(a.ERROR_3P_COMPONENT,"Creative is not VPAID: "+k)}else 400<=f.status&&e._eventHandlers.loaderror(a.ERROR_IO,"creativeUrl="+b+"; status code="+f.status+"; status text="+f.statusText)};f.ontimeout=function(){e._eventHandlers.timeout.call()};f.onerror=function(){0===f.status?(a.warn("CORS error"),e._eventHandlers.loaderror(a.ERROR_SECURITY,"creativeUrl="+b+";cors error")):(a.warn("exception:"+f.statusText),e._eventHandlers.loaderror(a.ERROR_IO,"creativeUrl="+b+";exception="+f.statusText))};f.send()}},setCallbacksForCreative:function(a,c){for(var b in a)a.hasOwnProperty(b)&&this._creative.subscribe(a[b],b,c)},removeCallbacksForCreative:function(a){for(var b in a)a.hasOwnProperty(b)&&this._creative.unsubscribe(a[b],b)},handshakeVersion:function(b){a.log("VPAID Creative: handshakeVersion("+b+")");return this._creative.handshakeVersion(b)},initAd:function(b,c,d,e,f,h){a.log("VPAID Creative: initAd()");this._timeoutOperation="initAd";this._waitForTimeout();this._creative.initAd(b,c,d,e,f,h)},startAd:function(){a.log("VPAID Creative: startAd()");this._timeoutOperation="startAd";this._waitForTimeout();this._creative.startAd();document.hidden&&this._autoPauseAdOnVisibilityChange&&(a.log("VPAIDRenderer pause ad when tab is invisible"),this._creative.pauseAd(),this._creativePausedByTabSwitch=!0)},stopAd:function(){a.log("VPAID Creative: stopAd()");"loadCreativeAsset"===this._timeoutOperation?(clearInterval(this._loadIntervalTimer),this._timeoutOperation="loadCreativeAsset and stopAd"):"startAd"===this._timeoutOperation?(clearTimeout(this._timeoutTimer),this._timeoutOperation="startAd and stopAd"):this._timeoutOperation+="stopAd";this._creative&&(this._waitForTimeout(),this._creative.stopAd())},canPauseAd:function(){return this._isCreativeFunctionInvokable("pauseAd")},canResumeAd:function(){return this._isCreativeFunctionInvokable("resumeAd")},canResizeAd:function(){return this._isCreativeFunctionInvokable("resizeAd")},pauseAd:function(){this.canPauseAd()&&(a.log("VPAID Creative: pauseAd()"),this._creative.pauseAd())},resumeAd:function(){this.canResumeAd()&&(a.log("VPAID Creative: resumeAd()"),this._creative.resumeAd())},resizeAd:function(b,c,d){this.canResizeAd()?(a.log("VPAID Creative: resizeAd()"),this._creative.resizeAd(b,c,d)):a.log("The creative is not able to resize")},getAdVolume:function(){return this._isCreativeFunctionInvokable("getAdVolume")?this._creative.getAdVolume():-1},setAdVolume:function(a){this._isCreativeFunctionInvokable("setAdVolume")&&this._creative.setAdVolume(a)},getAdExpanded:function(){return this._isCreativeFunctionInvokable("getAdExpanded")?this._creative.getAdExpanded():!1},getAdRemainingTime:function(){return this._isCreativeFunctionInvokable("getAdRemainingTime")?this._creative.getAdRemainingTime():-1},getAdDuration:function(){return this._isCreativeFunctionInvokable("getAdDuration")?this._creative.getAdDuration():-1},getAdLinear:function(){return this._creative.getAdLinear()},getAdCompanions:function(){return this._isCreativeFunctionInvokable("getAdCompanions")?this._creative.getAdCompanions():""},setTimeoutValueInMs:function(a){this._timeoutInMs=a},cancelTimeoutEvent:function(){a.log("cancelTimeoutEvent");var b="startAd and stopAd"!==this._timeoutOperation;clearTimeout(this._timeoutTimer);if(!b){this._timeoutOperation="startAd";var c=this;setTimeout(function(){c._eventHandlers&&c._eventHandlers.timeout&&c._eventHandlers.timeout.call()},500)}},addEventListener:function(a,c){this._eventHandlers[a]=c},removeEventListener:function(a){this._eventHandlers[a]=null},_waitForTimeout:function(){a.log("Wait for "+this._timeoutOperation+" for "+this._timeoutInMs+"ms");if(this._eventHandlers.timeout){var b=this;this._timeoutTimer=setTimeout(function(){b.timeoutReached||(b.timeoutReached=!0);"startAd"===b._timeoutOperation?b.stopAd():("loadCreativeAsset"===b._timeoutOperation&&clearInterval(b._loadIntervalTimer),b._eventHandlers&&b._eventHandlers.timeout&&b._eventHandlers.timeout.call())},this._timeoutInMs)}},getTimeoutOperation:function(){return this._timeoutOperation}};a.VPAIDWrapper.prototype.constructor=a.VPAIDWrapper;a.VPAIDRenderer=function(){this._rendererController=null;this._isCORSEnforcementDisabled=!0;this.vpaidCreative=null;this.vpaidVolume=this.vpaidDuration=-1;this.creativeEventCallbacks={};this.isMuted=!1;this.adPlaybackState="";this.creativeTimeoutDelayInMs=1e4;this.vpaidDesiredBitrate=268;this.vpaidViewmode="normal";this.playheadTime=0;this.videoBase=document.createElement("div");this.videoParent=null;this.SUPPORTED_CREATIVE_VPAID_VERSION_MIN=this.PLAYER_VPAID_VERSION=2};a.VPAIDRenderer.prototype={};a.VPAIDRenderer.prototype.constructor=a.VPAIDRenderer;a.VPAIDRenderer.VastCompanion=function(a,c,d,e){this._width=a;this._height=c;this._apiFramework=d;this._xmlNode=e};a.VPAIDRenderer.VastCompanion.prototype={getWidth:function(){return this._width},getHeight:function(){return this._height},_isValidResource:function(a,c){return"StaticResource"===a&&c["@attributes"].creativeType||"IFrameResource"===a&&c.value||"HTMLResource"===a&&c.value},hasValidRendtions:function(){for(var a in this._xmlNode)if(this._xmlNode.hasOwnProperty(a)&&("StaticResource"===a||"IFrameResource"===a||"HTMLResource"===a))for(var c=[].concat(this._xmlNode[a]),d=c.length-1;0<=d;d--)if(this._isValidResource(a,c[d]))return!0;return!1},translateToAdInstance:function(b){this._xmlNode.CompanionClickThrough&&b.setClickThroughUrl(a.EVENT_AD_CLICK,this._xmlNode.CompanionClickThrough.value);var c;if(this._xmlNode.TrackingEvents){var d=this._xmlNode.TrackingEvents;if(d.Tracking){d=[].concat(d.Tracking);var e=[];for(c=d.length-1;0<=c;c--)"creativeView"===d[c]["@attributes"].event&&e.push(d[c].value);0<e.length&&b.addEventCallbackUrls(a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,e)}}for(var f in this._xmlNode)if(this._xmlNode.hasOwnProperty(f)&&("StaticResource"===f||"IFrameResource"===f||"HTMLResource"===f))for(d=[].concat(this._xmlNode[f]),c=d.length-1;0<=c;c--)if(this._isValidResource(f,d[c])){e=d[c];var h=b.addCreativeRendition();h.setWidth(this._width);h.setHeight(this._height);h.setCreativeApi("None");var g=h.addCreativeRenditionAsset("VPAIDAsset"+c,!0);g.setContentType("text/html_doc_lit_mobile");g.setMimeType("text/html");var k=b.getEventCallbackUrls(a.EVENT_AD_CLICK,a.EVENT_TYPE_CLICK)[0],m=f;if("HTMLResource"===m)g.setContent(a.HTMLAdGenerator.wrapUnsafeHTML(e.value,b.getSlot().getCustomId(),this._width,this._height));else{var p;"IFrameResource"===m?p="iframe":"StaticResource"===m&&(p=this._xmlNode.creativeType);g.setContent(a.HTMLAdGenerator.generateAd(e.value,k,b.getSlot().getCustomId(),this._width,this._height,p,g.getContentType()))}a.debug("rendtion width: "+h.getWidth()+" height:"+h.getHeight()+" asset content:"+g.getContent())}}};a.VPAIDRenderer.VastCompanion.prototype.constructor=a.VPAIDRenderer.VastCompanion;a.VPAIDRenderer.VastAdSelect=function(){};a.VPAIDRenderer.VastAdSelect.prototype={_getDeadSpaceRatio:function(b,c){var d=b.getWidth();b=b.getHeight();var e=c.getWidth();c=c.getHeight();var f=1;d<=e&&b<=c&&(f=1-d*b/(e*c));a.debug("computing dead space ratio ("+f+") for slot "+e+"x"+c+" and ad "+d+"x"+b);return f},matchAdsWithSlots:function(b,c){a.log("VPAIDRenderer: Matching ads with slots");var d;for(d=0;d<c.length;++d)c[d].matched=!1;var e=[],f=[];for(d=0;d<b.length;d++)for(var h=0;h<c.length;h++)f.push({ratio:this._getDeadSpaceRatio(b[d],c[h]),adIndex:d,slotIndex:h});f.sort(function(a,b){return a.ratio-b.ratio});for(d=0;d<f.length&&1!==f[d].ratio;d++){h=f[d];var g=b[h.adIndex],k=c[h.slotIndex];g.matched||k.matched||(a.log("Winning ratio:"+h.ratio+" Winning ad:"+g.getWidth()+"x"+g.getHeight()+" for slot:"+k.getWidth()+"x"+k.getHeight()),e.push({ad:g,slot:k}),g.matched=!0,k.matched=!0)}return e}};a.VPAIDRenderer.VastAdSelect.prototype.constructor=a.VPAIDRenderer.VastAdSelect;a.Util.mixin(a.VPAIDRenderer.prototype,{_initParams:function(){var b=this._rendererController.getParameter(a.PARAMETER_VPAID_CREATIVE_TIMEOUT_DELAY);this._isCORSEnforcementDisabled=this._rendererController.getParameter(a.PARAMETER_DISABLE_CORS_ENFORCEMENT);b&&0<Number(b)&&(this.creativeTimeoutDelayInMs=Number(b));a.log("initParams(), creative timeout delay in miliseconds:"+this.creativeTimeoutDelayInMs);b=parseFloat(this._rendererController.getParameter(a.PARAMETER_DESIRED_BITRATE));this.vpaidDesiredBitrate=0<b?b:this.vpaidDesiredBitrate;a.log("initParams(), desired bitrate: "+this.vpaidDesiredBitrate)},_failWithError:function(b,c,d){var e={};e[a.INFO_KEY_ERROR_MODULE]="VPAIDRenderer";e[a.INFO_KEY_ERROR_CODE]=b;d||(d=a.ERROR_VAST_GENERAL_VPAID_ERROR);e[a.INFO_KEY_VAST_ERROR_CODE]=d;c&&(e[a.INFO_KEY_ERROR_INFO]=c);this._rendererController.handleStateTransition(a.RENDERER_STATE_FAILED,e);this.dispose()},onCreativeLoadError:function(b,c){a.log("VPAIDRenderer: onCreativeLoadError()");this.vpaidCreative.cancelTimeoutEvent();this._failWithError(b,c)},onCreativeTimeout:function(){a.log("VPAIDRenderer: onCreativeTimeout()");var b=this.vpaidCreative.getTimeoutOperation();this._failWithError(a.ERROR_TIMEOUT,"loadCreativeAsset"!==b?"Creative function "+b+" timeout":"load creative asset timeout")},setVolume:function(b){a.log("VPAIDRenderer: setVolume("+b+")");this.vpaidCreative&&this.vpaidCreative.setAdVolume(b)},onAdVolumeChange:function(){a.log("VPAIDRenderer: onAdVolumeChange()");var b=this.vpaidCreative.getAdVolume();0>b||1<b?a.log("Invalid ad volume value"):(this.isMuted&&2<100*b?(this.isMuted=!1,this._rendererController.processEvent({name:a.EVENT_AD_UNMUTE})):!this.isMuted&&2>100*b&&(this.isMuted=!0,this._rendererController.processEvent({name:a.EVENT_AD_MUTE})),this._rendererController.processEvent({name:a.EVENT_AD_VOLUME_CHANGE}))},onAdExpandedChange:function(){a.log("VPAIDRenderer: onAdExpandedChange()");this.vpaidCreative.getAdExpanded()?this._rendererController.processEvent({name:a.EVENT_AD_EXPAND}):this._rendererController.processEvent({name:a.EVENT_AD_COLLAPSE})},onAdDurationChange:function(){a.log("VPAIDRenderer: onAdDurationChange(): duration changed to "+this.vpaidCreative.getAdDuration())},onAdClickThru:function(b,c,d){a.log("VPAIDRenderer: onAdClickThru() with url:"+b+" id:"+c+" playerHandles:"+d);c={name:a.EVENT_AD_CLICK,info:{}};c.info[a.INFO_KEY_SHOW_BROWSER]=!0===d;!0===d?b?(a.log("onAdClickThru(): open window with overrided url"),c.info[a.INFO_KEY_URL]=b):a.log("onAdClickThru(): open window with url booked in MRM UI or VAST clickthru url"):a.log("onAdClickThru(): send click tracking");this._rendererController.processEvent(c)},onCreativeAssetLoaded:function(){a.log("VPAIDRenderer: onCreativeAssetLoaded()");this.vpaidCreative.cancelTimeoutEvent();var b=this,c=function(){var c=b.vpaidCreative.handshakeVersion(b.PLAYER_VPAID_VERSION.toFixed(1));return c?parseFloat(c)<b.SUPPORTED_CREATIVE_VPAID_VERSION_MIN?(b._failWithError(a.ERROR_INVALID_VALUE,"Only support creatives with VPAID version >= "+b.SUPPORTED_CREATIVE_VPAID_VERSION_MIN.toFixed(1)),!1):!0:(b._failWithError(a.ERROR_3P_COMPONENT,"Cannot get VPAID version from the creative"),!1)};if(function(){var c=b.vpaidCreative.checkVPAIDInterface("handshakeVersion initAd startAd stopAd subscribe unsubscribe getAdLinear".split(" "));c.passed||b._failWithError(a.ERROR_3P_COMPONENT,"Missing interfaces in the VPAID creative: "+c.missingInterfaces);return c.passed}()&&c()){b.creativeEventCallbacks={AdStarted:b.onAdStarted,AdStopped:b.onAdStopped,AdSkipped:b.onAdSkipped,AdLoaded:b.onAdLoaded,AdLinearChange:b.onAdLinearChange,AdSizeChange:b.onAdSizeChange,AdExpandedChange:b.onAdExpandedChange,AdDurationChange:b.onAdDurationChange,AdVolumeChange:b.onAdVolumeChange,AdImpression:b.onAdImpression,AdClickThru:b.onAdClickThru,AdVideoFirstQuartile:b.onAdVideoFirstQuartile,AdVideoMidpoint:b.onAdVideoMidpoint,AdVideoThirdQuartile:b.onAdVideoThirdQuartile,AdVideoComplete:b.onAdVideoComplete,AdUserAcceptInvitation:b.onAdUserAcceptInvitation,AdUserMinimize:b.onAdUserMinimize,AdUserClose:b.onAdUserClose,AdPaused:b.onAdPaused,AdPlaying:b.onAdResumed,AdError:b.onAdError,AdLog:b.onAdLog};b.vpaidCreative.setCallbacksForCreative(b.creativeEventCallbacks,b);this._rendererController.setCapability(a.EVENT_AD_QUARTILE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MUTE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_EXPAND,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_PAUSE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_CLOSE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_MINIMIZE,a.CAPABILITY_STATUS_ON);this._rendererController.setCapability(a.EVENT_AD_ACCEPT_INVITATION,a.CAPABILITY_STATUS_ON);(c=this.rendition?this.rendition.getParameter("creativeData"):null)||(c=this.rendition?this.rendition.getParameter("VPAID_creativeData"):null);c&&(c=a.Util.trim(c));c={AdParameters:c};var d=this._rendererController.getAdInstance().getSlot();this.videoBase.style.width="0px";this.videoBase.style.height="0px";this.videoBase.style.zIndex="100000";this.videoBase.style.position="absolute";this.videoBase.style.left=this._rendererController.getContentVideoElement().style.left;this.videoBase.style.top=this._rendererController.getContentVideoElement().style.top;this.videoBase.className="fw_vpaid_slot";this.videoParent=d.getBase();var e=this._rendererController.getContentVideoElement();if("nodeType"in e&&0<e.nodeType)try{this.videoParent.insertBefore(this.videoBase,this._rendererController.getContentVideoElement())}catch(h){this.videoParent.insertBefore(this.videoBase,this.videoParent.firstChild)}else this.videoParent.insertBefore(this.videoBase,this.videoParent.firstChild);e={slot:this.videoBase,videoSlot:this._rendererController.getContentVideoElement(),videoSlotCanAutoPlay:!0};var f=d.getWidth();d=d.getHeight();f&&d||!this.rendition||(f=this.rendition.getWidth(),d=this.rendition.getHeight());this.vpaidCreative.initAd(f,d,this.vpaidViewmode,this.vpaidDesiredBitrate,c,e)}},onAdLoaded:function(){a.log("VPAIDRenderer: onAdLoaded()");this.vpaidCreative.cancelTimeoutEvent();a.log("Ad duration:"+this.getDuration());var b=this,c=function(c,d){var e=d;a.debug(e.length+" companion slots to fill.");if(0!==e.length&&0!==c.length){var f=(new a.VPAIDRenderer.VastAdSelect).matchAdsWithSlots(c,e);if(0!==f.length){c=[];e=[];for(d=f.length-1;0<=d;d--)c.push(f[d].ad),e.push(f[d].slot);e=b._rendererController.scheduleAdInstances(e);for(d=e.length-1;0<=d;d--)c[d].translateToAdInstance(e[d])}}},d=function(b){if(!b)return a.log("The adCompanions property is empty."),null;a.log("parsing adCompanions: "+b);if(window.DOMParser)var c=(new DOMParser).parseFromString(b,"text/xml");else c=new ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.loadXML(b);b=a.Util.xmlToJson(c);if(!b||!b.CompanionAds||!b.CompanionAds.Companion)return a.log("No companion ads found in parsed xml"),[];b=[].concat(b.CompanionAds.Companion);c=[];for(var d=b.length-1;0<=d;d--){var e=b[d];if(e["@attributes"]){var k=e["@attributes"].width,m=e["@attributes"].height;if(!k||!m||0>k||0>m)a.log("Missing width/height for companion.");else{var p=e["@attributes"].apiFramework||"";a.debug("Companion "+k+"x"+m+" api:"+p);e=new a.VPAIDRenderer.VastCompanion(k,m,p,e);e.hasValidRendtions()&&c.push(e)}}}return c}(b.vpaidCreative.getAdCompanions());d&&0<d.length?c(d,this._rendererController.getCompanionSlots()):a.log("VPAIDAdRenderer: No companions from VPAID creative.");c=this._rendererController.getAdInstance()._context.getAdVolume();!this.isMuted&&2>100*c&&(this.isMuted=!0);this.setVolume(c);this.vpaidCreative.startAd()},onVisibilityChange:function(){a.log("onVisibilityChange:"+(document.hidden?"invisible":"visible"));a.log("Current playback state:"+this.adPlaybackState);document.hidden&&"playing"===this.adPlaybackState?(a.log("Pause the VPAID creative"),this.vpaidCreative.pauseAd(),this.vpaidCreative._creativePausedByTabSwitch=!0):!document.hidden&&"paused"===this.adPlaybackState&&this.vpaidCreative._creativePausedByTabSwitch&&(a.log("Resume the VPAID creative"),this.vpaidCreative.resumeAd(),this.vpaidCreative._creativePausedByTabSwitch=!1)},onAdStarted:function(){a.log("VPAIDRenderer: onAdStarted()");this.vpaidCreative.timeoutReached?a.log("VPAID ad has already failed due to timeout. The AdStarted event will not be handled."):(this.vpaidCreative.cancelTimeoutEvent(),this.vpaidCreative._autoPauseAdOnVisibilityChange&&(this._visibilityChangeListener=this.onVisibilityChange.bind(this),
document.addEventListener("visibilitychange",this._visibilityChangeListener,!1)))},onAdStopped:function(){a.log("VPAIDRenderer: onAdStopped()");this.vpaidCreative?(this.vpaidCreative.cancelTimeoutEvent(),this.timePositionClass===a.TIME_POSITION_CLASS_OVERLAY&&this.vpaidCreative.getAdLinear()&&this._rendererController.requestContentStateChange(!1),this.vpaidCreative&&!this.vpaidCreative.timeoutReached&&(this.adPlaybackState?(this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED),this.dispose()):(a.warn("Expecting AdStarted and AdImpression events but got AdStopped event instead. Fail."),this._failWithError(a.ERROR_3P_COMPONENT,"Expecting AdStarted and AdImpression events from the VPAID creative but got AdStopped event instead")))):a.log("The VPAID creative has been disposed. Return.")},onAdImpression:function(){a.log("VPAIDRenderer: onAdImpression()");if(this.vpaidCreative.timeoutReached)a.log("VPAID ad has already failed due to timeout. The AdImpression event will not be handled.");else{var b=this.vpaidCreative.getAdVolume();this.isMuted=0<b&&2>=100*b;this.adPlaybackState="playing";this._rendererController.handleStateTransition(a.RENDERER_STATE_STARTED)}},onAdLinearChange:function(){a.log("VPAIDRenderer: onAdLinearChange()");var b=this.vpaidCreative.getAdLinear();b?a.log("onAdLinearChange(): non-linear click to linear -> request content video to pause"):a.log("onAdLinearChange(): linear back to non-linear -> request content video to resume");this._rendererController.requestContentStateChange(b)},onAdSizeChange:function(){a.log("VPAIDRenderer: onAdSizeChange()")},onAdPaused:function(){a.log("VPAIDRenderer: onAdPaused()");"playing"===this.adPlaybackState&&this._rendererController.processEvent({name:a.EVENT_AD_PAUSE});this.adPlaybackState="paused"},onAdResumed:function(){a.log("VPAIDRenderer: onAdResumed()");"paused"===this.adPlaybackState&&this._rendererController.processEvent({name:a.EVENT_AD_RESUME});this.adPlaybackState="playing"},onAdSkipped:function(){a.log("VPAIDRenderer: onAdSkipped()");this.dispose();this._rendererController.handleStateTransition(a.RENDERER_STATE_COMPLETED)},onAdVideoFirstQuartile:function(){a.log("VPAIDRenderer: onAdVideoFirstQuartile()");this._rendererController.processEvent({name:a.EVENT_AD_FIRST_QUARTILE})},onAdVideoMidpoint:function(){a.log("VPAIDRenderer: onAdVideoMidpoint()");this._rendererController.processEvent({name:a.EVENT_AD_MIDPOINT})},onAdVideoThirdQuartile:function(){a.log("VPAIDRenderer: onAdVideoThirdQuartile()");this._rendererController.processEvent({name:a.EVENT_AD_THIRD_QUARTILE})},onAdVideoComplete:function(){a.log("VPAIDRenderer: onAdVideoComplete");this._rendererController.processEvent({name:a.EVENT_AD_COMPLETE})},onAdUserAcceptInvitation:function(){a.log("VPAIDRenderer: onAdUserAcceptInvitation()");this._rendererController.processEvent({name:a.EVENT_AD_ACCEPT_INVITATION})},onAdUserClose:function(){a.log("VPAIDRenderer: onAdUserClose()");this._rendererController.processEvent({name:a.EVENT_AD_CLOSE})},onAdUserMinimize:function(){a.log("VPAIDRenderer: onAdUserMinimize()");this._rendererController.processEvent({name:a.EVENT_AD_MINIMIZE})},onAdLog:function(b){a.log("VPAIDRenderer: onAdLog: "+b)},onAdError:function(b){a.log("VPAIDRenderer: onAdError(): "+b);this._failWithError(a.ERROR_3P_COMPONENT,"AdError event:"+b)},start:function(b){a.log("VPAIDRenderer start()");this._rendererController=b;this.timePositionClass=this._rendererController.getAdInstance().getSlot().getTimePositionClass();this.rendition=this._rendererController.getAdInstance().getActiveCreativeRendition();this._initParams();if(b=(b=this.rendition?this.rendition.getPrimaryCreativeRenditionAsset():null)?b.getUrl():null){this.vpaidCreative=new a.VPAIDWrapper;this.vpaidCreative._autoPauseAdOnVisibilityChange=this._rendererController.getParameter(a.PARAMETER_AUTO_PAUSE_AD_ONVISIBILITYCHANGE);this.vpaidCreative._isCORSEnforcementDisabled=this._isCORSEnforcementDisabled;this.vpaidCreative.setTimeoutValueInMs(this.creativeTimeoutDelayInMs);this.vpaidCreative.addEventListener("loaderror",this.onCreativeLoadError.bind(this));this.vpaidCreative.addEventListener("timeout",this.onCreativeTimeout.bind(this));this.vpaidCreative.addEventListener("CreativeAssetLoaded",this.onCreativeAssetLoaded.bind(this));try{this.vpaidCreative.loadCreativeAsset(b)}catch(c){a.warn(c),this._isCORSEnforcementDisabled?(this._failWithError(a.ERROR_UNKNOWN,"Error when loading creative"+c),this.cancelTimeoutEvent()):that._eventHandlers.loaderror(a.ERROR_UNKNOWN,"Error when loading creative: "+c)}}else this._failWithError(a.ERROR_NULL_ASSET,"Creative asset url cannot be null")},stop:function(){a.log("VPAIDRenderer stop()");this.vpaidCreative.stopAd();"loadCreativeAsset and stopAd"==this.vpaidCreative.getTimeoutOperation()&&this.dispose()},info:function(){return{moduleType:a.MODULE_TYPE_RENDERER}},getPlayheadTime:function(){var a=this.vpaidCreative.getAdDuration(),c=this.vpaidCreative.getAdRemainingTime();0<=a&&0<=c&&(this.playheadTime=a-c);0>this.playheadTime&&(this.playheadTime=-1);return this.playheadTime},getDuration:function(){var a=this.vpaidCreative.getAdDuration();return 0<=a?a:-1},pause:function(){a.log("VPAIDRenderer pause()");this._rendererController.processEvent({name:a.EVENT_AD_PAUSE});this.vpaidCreative.canPauseAd()?"playing"===this.adPlaybackState&&(this.adPlaybackState="pausing",this.vpaidCreative.pauseAd()):a.log("The creative is not able to pause")},resume:function(){a.log("VPAIDRenderer resume()");this._rendererController.processEvent({name:a.EVENT_AD_RESUME});this.vpaidCreative.canResumeAd()?"paused"===this.adPlaybackState&&(this.adPlaybackState="resuming",this.vpaidCreative.resumeAd()):a.log("The creative is not able to resume")},dispose:function(){a.log("VPAIDRenderer dispose()");this.vpaidCreative&&(this.videoParent&&(this.videoParent.removeChild(this.videoBase),this.videoParent=null),this._visibilityChangeListener&&this.vpaidCreative._autoPauseAdOnVisibilityChange&&(a.log("remove visibilitychange listener"),document.removeEventListener("visibilitychange",this._visibilityChangeListener,!1)),this.vpaidCreative.removeCallbacksForCreative(this.creativeEventCallbacks),this.vpaidCreative.removeEventListener("CreativeAssetLoaded"),this.vpaidCreative.removeEventListener("timeout"),this.vpaidCreative.removeEventListener("loaderror"),this.vpaidCreative=null)},resize:function(){a.log("VPAIDAdRenderer resize()");var b=this._rendererController.getAdInstance().getSlot(),c=b.getWidth();b=b.getHeight();a.log("VPAIDRenderer new size width:"+c+" height:"+b);this.vpaidCreative.resizeAd(c,b,this.vpaidViewmode)}});a.VastTranslator=function(){this._rendererController=this._request=null};a.VastTranslator.prototype={start:function(b){function c(b){a.log("VastTranslator	"+b)}function d(b){a.warn("VastTranslator	"+b)}function e(a,b){if(a)if(a.length&&"string"!==typeof a)for(var c=0;c<a.length;c++)b(a[c].value);else a.value&&b(a.value)}function f(a,b){e(b,function(b){b&&a.push(b)})}function h(b){if(!b)return!1;for(var c=0;c<x.length;c++)if(a.Util.trim(x[c]).toLowerCase()===a.Util.trim(b).toLowerCase())return!0;return!1}function g(b){if(!b)return null;"string"!==typeof b&&(b=b.toString());b=a.Util.trim(b);return-1<b.indexOf("://")?b:null}function k(a){this.code=this.url=null;this.height=this.width=NaN;this.resourceType=this.creativeType=null;this.bitrate=NaN;this.creativeApi=null;this.ad=a;this.clickThrough=null;this.clickTrackings=[];this.customClicks=[];this.creativeData=null}function m(){this.creativeView=[];this.start=[];this.firstQuartile=[];this.midpoint=[];this.thirdQuartile=[];this.complete=[];this.mute=[];this.unmute=[];this.pause=[];this.rewind=[];this.resume=[];this.replay=[];this.fullscreen=[];this.expand=[];this.collapse=[];this.acceptInvitation=[];this.stop=[]}function p(a){this._impressions=[];this.clickThrough=null;this.clickTrackings=[];this.customClicks=[];this.creativeData=null;this.sequence=-1;this.universalAdId=null;this.vastRenditions=[];this.duration=NaN;this.adp=a;this.isDrivingAd=!1}function y(a){p.call(this,a)}function w(a){p.call(this,a)}function t(a){p.call(this,a)}function P(){}function l(a,b,d,e){if(a&&e&&0<e.length){c("augmentCallbacks("+b+", "+d+", "+e+")");for(var f=a.getEventCallbackUrls(b,d),n=0;n<f.length;n++)-1<e.indexOf(f[n])&&(c("augmentCallbacks() url = "+f[n]),e.unshift(f[n]));a.addEventCallbackUrls(b,d,e)}else c("augmentCallbacks("+b+", "+d+", "+e+"), empty callbacks")}function E(b,d){c("initErrorTrackings()");b&&d&&l(b,a.EVENT_ERROR,a.EVENT_TYPE_ERROR,d.errorTrackings)}function F(b,d){c("initTrackingEvents()");d&&b&&(l(b,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,d.creativeView),l(b,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,d.start),l(b,a.EVENT_AD_FIRST_QUARTILE,a.EVENT_TYPE_IMPRESSION,d.firstQuartile),l(b,a.EVENT_AD_MIDPOINT,a.EVENT_TYPE_IMPRESSION,d.midpoint),l(b,a.EVENT_AD_THIRD_QUARTILE,a.EVENT_TYPE_IMPRESSION,d.thirdQuartile),l(b,a.EVENT_AD_COMPLETE,a.EVENT_TYPE_IMPRESSION,d.complete),l(b,a.EVENT_AD_MUTE,a.EVENT_TYPE_STANDARD,d.mute),l(b,a.EVENT_AD_UNMUTE,a.EVENT_TYPE_STANDARD,d.unmute),l(b,a.EVENT_AD_PAUSE,a.EVENT_TYPE_STANDARD,d.pause),l(b,a.EVENT_AD_RESUME,a.EVENT_TYPE_STANDARD,d.resume),l(b,a.EVENT_AD_REWIND,a.EVENT_TYPE_STANDARD,d.rewind),l(b,a.EVENT_AD_EXPAND,a.EVENT_TYPE_STANDARD,d.fullscreen),l(b,a.EVENT_AD_COLLAPSE,a.EVENT_TYPE_STANDARD,d.collapse),l(b,a.EVENT_AD_EXPAND,a.EVENT_TYPE_STANDARD,d.expand),l(b,a.EVENT_AD_CLOSE,a.EVENT_TYPE_STANDARD,d.stop),l(b,a.EVENT_AD_ACCEPT_INVITATION,a.EVENT_TYPE_STANDARD,d.acceptInvitation))}function H(b,d,e,f,g){c("initClickAndImpressionEvents");if(b){d&&b.setClickThroughUrl(a.EVENT_AD_CLICK,d);e&&0<e.length&&l(b,a.EVENT_AD_CLICK,a.EVENT_TYPE_CLICK_TRACKING,e);if(f&&0<f.length)for(d=0;d<f.length;d++)f[d].url&&l(b,f[d].id,a.EVENT_TYPE_CLICK_TRACKING,[f[d].url]);g&&l(b,a.EVENT_AD_IMPRESSION,a.EVENT_TYPE_IMPRESSION,g)}}function I(a,b){c("initTemporalAdInstance");a||d("initTemporalAdInstance: Invalid adInstance");if(b.selectedDrivingAd){b.surveyUrl&&a._creative.setParameter("_fw_survey_url",b.surveyUrl);var e=b.selectedDrivingAd,f=b.selectedDrivingRenditions;c("vastRenditions:"+f);for(var n=4===J,g=0;g<f.length;g++){var u=a.addCreativeRendition();var k=u.addCreativeRenditionAsset("VAST_CRA",!0);var l=f[g];a:{var m=l.creativeType;switch(m){case"video/mp4":m="video/mp4-h264";break a;case"video/3gp":m="video/3gpp"}}c("initTemporalAdInstance() set rendition/asset [vastRd.creativeApi,vastAd.duration,vastRd.width,vastRd.height,vastRd.url,assetContentType,vastRd.creativeType] =  "+[l.creativeApi,e.duration,l.width,l.height,l.url,m,l.creativeType]);u.setCreativeApi(l.creativeApi);isNaN(e.duration)||u.setDuration(e.duration);l.width&&!isNaN(l.width)&&u.setWidth(l.width);l.height&&!isNaN(l.height)&&u.setHeight(l.height);e.universalAdId&&u.setUniversalAdId(e.universalAdId);l.url&&k.setUrl(l.url);l.code&&k.setContent(l.code);k.setMimeType(l.creativeType);"static"===l.resourceType&&"text/html"===l.creativeType?k.setContentType("text/html_doc_ref"):"application/x-javascript"===l.creativeType||"application/javascript"===l.creativeType?k.setContentType("text/js_ref"):"iframe"===l.resourceType?k.setContentType("text/html_doc_ref"):"text/html"===l.creativeType||"text/html_doc_ref"===l.creativeType?k.setContentType("text/html_doc_ref"):"text/html_doc_lit_mobile"===l.creativeType?k.setContentType("text/html_doc_lit_mobile"):n||h(m)?(k.setContentType("text/html_doc_lit_mobile"),k.setUrl(null),k.setContent(v(a,D.getCustomId(),e,l,"text/html_doc_lit_mobile"))):k.setContentType(m);e.creativeData&&0!==e.creativeData.length&&(c("initTemporalAdInstance(), set asset parameter creativeData:"+e.creativeData),u.setParameter("creativeData",e.creativeData));n||h(m)||(l=l.bitrate,!isNaN(l)&&0<l&&k.setBytes(1e3*l*e.duration/8));m=O;k=N;l=!1;if(u.getContentType()&&m){var p=u.getContentType().toLowerCase(),q=m.toLowerCase();if(p===q)l=!0;else if(0===p.indexOf("video/mp4")&&0===q.indexOf("video/mp4")||"application/javascript"===q&&"text/js_ref"===p)u.setContentType(m),l=!0}m=!1;u.getCreativeApi()&&k&&(p=u.getCreativeApi().toLowerCase(),q=k.toLowerCase(),p===q?m=!0:0===p.indexOf("mraid")&&0===q.indexOf("mraid")&&(m=!0,u.setCreativeApi(k)));l&&m?u.setPreference(10):m?u.setPreference(6):l?u.setPreference(5):u.setPreference(0);c("adjustMatchedRendition "+u.getId()+", contentType "+u.getContentType()+", creativeAPI "+u.getCreativeApi()+", preference "+u.getPreference())}F(a,e.trackingEvents);E(a,b);H(a,n?f[0].clickThrough:e.clickThrough,e.clickTrackings,e.customClicks,e.impressions)}else u=a.addCreativeRendition(),u.setContentType("null/null"),k=u.addCreativeRenditionAsset("VAST_CRA",!0),k.setContentType("null/null")}function v(b,d,e,f,g){c("getCoadHTML, ad id = "+b.getAdId());return f.url&&0<f.url.length?((e=f.clickThrough)&&0<e.length&&b.setClickThroughUrl(a.EVENT_AD_CLICK,e),b=b.getEventCallbackUrls(a.EVENT_AD_CLICK,a.EVENT_TYPE_CLICK)[0],a.HTMLAdGenerator.generateAd(f.url,b,d,f.width,f.height,f.creativeType,g)):f.code&&0<f.code.length?"script"===f.resourceType||"text/javascript"===f.resourceType||"text/js_ref"===f.resourceType||"application/x-javascript"===f.resourceType?a.HTMLAdGenerator.wrapJSCode(f.code,d,f.width,f.height):a.HTMLAdGenerator.wrapUnsafeHTML(f.code,d,f.width,f.height):null}function K(b,d,e,f){c("initPageAdInstance ad:"+d.getAdId());var n=e.vastRenditions[0];if(n.url||n.code){var g=d.addCreativeRendition(),h=g.addCreativeRenditionAsset("VAST_CRA",!0);g.setCreativeApi(n.creativeApi);g.setWidth(n.width);g.setHeight(n.height);"static"===n.resourceType&&"text/html"===n.creativeType||"iframe"===n.resourceType?(h.setContentType("text/html_doc_ref"),h.setUrl(n.url)):"HTML"===n.resourceType?(h.setContentType("text/html_doc_lit_mobile"),h.setContent(a.HTMLAdGenerator.wrapUnsafeHTML(n.code,b.getCustomId(),n.width,n.height))):(h.setContentType("text/html_doc_lit_mobile"),h.setContent(v(d,b.getCustomId(),e,n,"text/html_doc_lit_mobile")));h.setMimeType("text/html")}else c("initPageAdInstance will add a tracking only companion ad");F(d,e.trackingEvents);E(d,f);H(d,n.clickThrough,n.clickTrackings,n.customClicks,e.impressions)}function q(b){if(200===b.status)if(b.responseXML){var d=(new P).parseAdData(b.responseXML);if(d){c("scheduleVastAds");if(d&&0!==d.length)if(b=d[0].selectedPackage,d=d[0].redirectPackage,!b&&!d)if(c("scheduleVastAds(), no ads from vast response!!!"),G)if(4!==J)r.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"Expecting linear ad but returned non-linear ad",a.ERROR_VAST_LINEARITY_NOT_MATCH);else r.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"Expecting non-linear ad but returned linear ad",a.ERROR_VAST_LINEARITY_NOT_MATCH);else r.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"wrapperUrl="+C);else if(!b&&d){c("scheduleVastAds(), no ads scheduled, redirect to downstream Secondary Ad Server");c("scheduleRedirect");b=[];var e=[];b.push(D);e.push({});for(var f=B,g=d.selectedCompanionAds,n=0;n<f.length;n++){var h=f[n];g&&g[h.getCustomId()]&&(b.push(h),e.push(g[h.getCustomId()]))}(f=r._rendererController.scheduleAdInstances(b))&&0<f.length&&(g=f[0],n=g.addCreativeRendition(),n.setWrapperUrl(a.Util.transformUrlToProxy(d.tagUrl)),n.setWrapperType(S),n.setContentType(O),n.setCreativeApi(N),F(g,d.getTrackingEventsOfWrapper()),E(g,d),H(g,d.getClickThroughOfWrapper(),d.getClickTrackingsOfWrapper(),d.getCustomClicksOfWrapper(),d.getImpressionOfWrapper()));c("scheduleRedirect, schedule companion for redirect ad "+d);for(n=1;n<f.length;n++)if(g=f[n])h=e[n],h instanceof t&&K(b[n],g,h,d)}else{if(b){c("scheduleVastAds(), ads returned from vast response, going to schedule them");b.selectedDrivingAd?(c("scheduleVastAds(), ads returned from vast response, going to schedule them with driving ad"),b.selectedDrivingAd.isDrivingAd=!0):c("scheduleVastAds(), ads returned from vast response, going to schedule them without driving ad");c("scheduleAdPackage()");d=[];e=[];d.push(D);b.selectedDrivingAd&&e.push(b.selectedDrivingAd);f=B;g=b.selectedCompanionAds;for(n=0;n<f.length;n++)h=f[n],g&&g[h.getCustomId()]&&(d.push(h),e.push(g[h.getCustomId()]));g=r._rendererController.scheduleAdInstances(d);if(0<g.length){c("scheduleAdPackage, scheduled "+g.length+" ads"+b.selectedDrivingAd?"":", 1 of it is nullAd for pure companion ad schedule");b.selectedDrivingAd||c("Driving ad is not selected, will create a dummy null ad.");b.selectedDrivingAd||(d.shift(),I(g.shift(),b));for(n=0;n<g.length;n++)if(h=g[n]){var k=e[n];k instanceof t?K(d[n],h,k,b):I(h,b)}!b.selectedDrivingAd&&0<f.length&&0<b.companionAds.length&&0===e.length&&(c("found empty companion slots and companion ads in package, but none of them matches slot size"),r.onTranslatorFailed(a.ERROR_UNMATCHED_SLOT_SIZE))}else c("scheduleAdPackage, no ad scheduled.")}}else c("no ads for scheduleVastAds");r._request=null;r._rendererController.handleStateTransition(a.TRANSLATOR_STATE_STARTED);r._rendererController.handleStateTransition(a.TRANSLATOR_STATE_COMPLETED)}}else r.onTranslatorFailed(a.ERROR_PARSE,"wrapperUrl="+C,a.ERROR_VAST_XML_PARSING);else if(400<=b.status)r.onTranslatorFailed(a.ERROR_IO,"wrapperUrl="+C)}this._rendererController=b;var x="image/gif image/jpeg image/png text/html text/javascript text/html_doc_ref text/html_doc_lit_mobile application/x-javascript application/javascript".split(" "),G=!1,z=this._rendererController.getAdInstance(),r=this,D=z.getSlot(),J=function(){if(!D)return 1;switch(D.getTimePositionClass()){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_MIDROLL:case a.TIME_POSITION_CLASS_POSTROLL:return 2;case a.TIME_POSITION_CLASS_OVERLAY:return 4;case a.TIME_POSITION_CLASS_DISPLAY:return D&&!D.getBase()?8:1;default:return 1}}(),B=this._rendererController.getCompanionSlots().filter(function(b){if(!b)return!1;switch(b.getTimePositionClass()){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_MIDROLL:case a.TIME_POSITION_CLASS_PAUSE_MIDROLL:case a.TIME_POSITION_CLASS_POSTROLL:return!1;default:return!0}});c("Checking CompanionSlots, length = "+B.length+", this._rendererController.getCompanionSlots().length = "+this._rendererController.getCompanionSlots().length+", AdInstance.getCompanionSlots.length = "+z.getCompanionSlots().length);var O=z.getActiveCreativeRendition().getContentType(),N=z.getActiveCreativeRendition().getCreativeApi()||"None";this.log("ExpectedDrivingContentType:"+O+", ExpectedDrivingAPI:"+N);var S=z.getActiveCreativeRendition().getWrapperType();k.prototype={init:function(a,b,c,d,e,f,g,h){this.log("init("+[].slice.call(arguments,0).join(",")+")");this.url=a;this.width=1*b;this.height=1*c;this.creativeType=d;this.resourceType=e;this.bitrate=f;var n;if((n=g)&&0!==n.length)switch(n.toLowerCase()){case"flashvar":case"flashvars":n="clickTag";break;case"vpaid":n="VPAID";break;case"mraid":n="MRAID-1.0"}else n="None";this.creativeApi=n;this.code=h||null},log:function(b){a.log("VastTranslator.VastRendition	"+b)},toString:function(){var a=[],b;for(b in this)this.hasOwnProperty(b)&&"function"!==typeof this[b]&&"ad"!==b&&a.push(b+":"+this[b]);return a.join(",")}};k.prototype.constructor=k;p.prototype={parse:function(b){this.log("parse()");if(b.Duration)if(b.Duration.value){var c=/(\d+):(\d+):(\d+)/.exec(b.Duration.value);c?this.duration=3600*c[1]+60*c[2]+1*c[3]:this.warn("Failed to parse duration value for creative "+b)}else this.warn("No duration value set for creative "+b);b.VideoClicks&&(b.VideoClicks=[].concat(b.VideoClicks),a.Util.forEachOnArray(b.VideoClicks,function(a){a.ClickThrough&&a.ClickThrough.value&&(this.clickThrough=g(a.ClickThrough.value));var b;if(a.ClickTracking){a.ClickTracking=[].concat(a.ClickTracking);for(var c=0;c<a.ClickTracking.length;c++)(b=g(a.ClickTracking[c].value))&&this.clickTrackings.push(b)}if(a.CustomClick)for(a.CustomClick=[].concat(a.CustomClick),c=0;c<a.CustomClick.length;c++){var d=null;a.CustomClick[c]["@attributes"]&&(d=a.CustomClick[c]["@attributes"].id);(b=g(a.CustomClick[c].value))&&this.customClicks.push({id:d,url:b})}},this));b.MediaFiles&&b.MediaFiles.MediaFile&&(b.MediaFiles.MediaFile=[].concat(b.MediaFiles.MediaFile),a.Util.forEachOnArray(b.MediaFiles.MediaFile,function(a){var b=g(a.value),c=NaN,d=NaN,e=null,f="None",h=NaN;a["@attributes"]&&(c=a["@attributes"].width||NaN,d=a["@attributes"].height||NaN,e=a["@attributes"].type,f=a["@attributes"].apiFramework||"None",h=a["@attributes"].bitrate||NaN);b&&-1!==b.indexOf(":")?(a=new k(this),a.init(b,c,d,e,"",h,f,null),a.clickThrough=this.clickThrough,this.vastRenditions.push(a),(isNaN(c)||isNaN(d))&&this.log("continue with missing [width,height]"+[c,d])):this.warn("will ignore this mediaFile because some required field is missing [url,width,height]:"+[b,c,d])},this));b.TrackingEvents&&this.parseTrackingEvents(b.TrackingEvents,this.setTrackingEvents());b.AdParameters&&(this.log("parse() got AdParameters:"+b.AdParameters.value),this.creativeData=b.AdParameters.value);b.Companion&&(b.Companion=[].concat(b.Companion),a.Util.forEachOnArray(b.Companion,function(b){var c=null,d=null,e="",f="",n=null,l=null,u=!1;b.CompanionClickThrough&&(f=g(b.CompanionClickThrough.value));b.StaticResource&&(c=g(b.StaticResource.value),b.StaticResource["@attributes"]&&(d=b.StaticResource["@attributes"].creativeType),e="static");b.IFrameResource&&(c=g(b.IFrameResource.value))&&(d="text/html_doc_ref",e="iframe");b.HTMLResource&&(n=b.HTMLResource["#cdata-section"]||"",n=a.Util.trim(n))&&(d="text/html_doc_lit_mobile",e="HTML");b.TrackingEvents&&(l=b.TrackingEvents);var M=new t(this.adp);M.sequence=this.sequence;M.clickThrough=f;l&&M.parseTrackingEvents(l,M.setTrackingEvents());if(b["@attributes"]){l=b["@attributes"].width||NaN;var m=b["@attributes"].height||NaN;b=b["@attributes"].apiFramework||"None";if((c&&-1!==c.indexOf(":")||n)&&!isNaN(l)&&!isNaN(m)&&h(d)||this.adp.isWrapper){var p=new k(M);p.init(c,l,m,d,e,NaN,b,n);p.clickThrough=f;M.vastRenditions.push(p)}else u=!0,this.warn("will ignore this rendition because some required fields is missing or incompatible [creativeType,url,code,width,height]:"+[d,c,n,l,m])}else this.adp.isWrapper||(u=!0,this.warn("for InLine ad package, No attributes found for the Companion ads:"+b));u?this.adp.isWrapper&&this.adp.companionAds.push(M):this.adp.companionAds.push(M)},this));b.NonLinear&&(b.NonLinear=[].concat(b.NonLinear),a.Util.forEachOnArray(b.NonLinear,function(b){var c=null,d=null,e="",f="",n="",l=null,u=!1;b.AdParameters&&(n=b.AdParameters.value);b.NonLinearClickThrough&&(f=g(b.NonLinearClickThrough.value));b.StaticResource&&(c=g(b.StaticResource.value),b.StaticResource["@attributes"]&&(d=b.StaticResource["@attributes"].creativeType),e="static");b.IFrameResource&&(c=g(b.IFrameResource.value),d="text/html_doc_ref",e="iframe");b.HTMLResource&&(l=b.HTMLResource["#cdata-section"]||"",l=a.Util.trim(l),d="text/html_doc_lit_mobile",e="HTML");var m=new w(this.adp);m.sequence=this.sequence;m.clickThrough=f;m._trackingEvents=this._trackingEvents;n&&(m.creativeData=n);if(b["@attributes"]){n=b["@attributes"].width||NaN;var M=b["@attributes"].height||NaN;b=b["@attributes"].apiFramework||"None";if(!c&&!l||isNaN(n)||isNaN(M)||!h(d))u=!0,this.warn("will ignore this rendition because some required fields is missing or incompatible:[creativeType,url,code,width,height]:"+[d,c,l,n,M]);else{var p=new k(m);p.init(c,n,M,d,e,NaN,b,l);p.clickThrough=f;m.vastRenditions.push(p)}}else this.adp.isWrapper||(u=!0,this.warn("for InLine ad package, No attributes found for the NonLinear ads:"+b));this.adp.nonLinearAds.push(m);u?this.adp.isWrapper&&this.adp.nonLinearAds.push(m):this.adp.nonLinearAds.push(m)},this))},parseLinears:function(a){2!==J?(this.log("TargetAdType != TARGET_LINEAR, skipping parse"),G=!0):this.parse(a)},parseNonLinears:function(a){4!==J?(this.log("TargetAdType != TARGET_NONLINEAR, skipping parse"),G=!0):this.parse(a)},parseCompanionAds:function(a){this.parse(a)},setTrackingEvents:function(){this._trackingEvents||(this._trackingEvents=new m);return this._trackingEvents},parseTrackingEvents:function(b,c){this.log("parseTrackingEvents");b.Tracking&&(b.Tracking=[].concat(b.Tracking),a.Util.forEachOnArray(b.Tracking,function(a){var b=a["@attributes"].event;if(a=g(a.value))switch(b){case"creativeView":case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":case"mute":case"unmute":case"pause":case"resume":case"rewind":case"replay":case"fullscreen":case"expand":case"collapse":case"acceptInvitation":case"stop":c[b].push(a);break;case"close":c.stop.push(a)}},this))},toString:function(){return this.constructor.name+", renditions:"+this.vastRenditions},log:function(b){a.log("VastTranslator."+this.constructor.name+"	"+b)},warn:function(b){a.warn("VastTranslator."+this.constructor.name+"	"+b)}};b=Object.defineProperty||function(a,b,c){c.get&&a.__defineGetter__(b,c.get);c.set&&a.__defineSetter__(b,c.set)};b(p.prototype,"trackingEvents",{get:function(){this.log("get trackingEvents()");return this._trackingEvents?this._trackingEvents:this.isDrivingAd?this.adp.trackingEvents:null}});b(p.prototype,"impressions",{set:function(a){this._impressions=a},get:function(){return this.isDrivingAd?this._impressions.concat(this.adp.impressions):this._impressions}});p.prototype.constructor=p;y.prototype=new p;y.prototype.constructor=y;w.prototype=new p;w.prototype.constructor=w;t.prototype=new p;t.prototype.getPrimaryRendition=function(){return this.vastRenditions[0]||null};b(t.prototype,"impressions",{get:function(){return 8===J?this._impressions.concat(this.adp.impressions):this._impressions}});t.prototype.constructor=t;var Q=function(){this.impressions=[];this.errorTrackings=[];this.linearAds=[];this.nonLinearAds=[];this.companionAds=[];this.extensions=[];this.tagUrl="";this.isWrapper=!1;this.surveyUrl=null;this.selectedDrivingRenditions=[];this.selectedDrivingAd=null;this.selectedCompanionAds={}};Q.prototype={parse:function(a){this.log("parse("+a+")");if(a)if(this.isWrapper||a.Creatives&&a.Creatives.Creative){a.Creatives=a.Creatives||[];f(this.impressions,a.Impression);f(this.extensions,a.Extensions);f(this.errorTrackings,a.Error);this.isWrapper&&a.VASTAdTagURI&&(this.tagUrl=a.VASTAdTagURI.value||"");a.Survey&&a.Survey.value&&0<a.Survey.value.length&&(this.surveyUrl=a.Survey.value);a.Creatives.Creative=a.Creatives.Creative?[].concat(a.Creatives.Creative):[];for(var b=0;b<a.Creatives.Creative.length;b++){var c=a.Creatives.Creative[b],d=-1;c["@attributes"]&&(d=c["@attributes"].sequence||-1,d*=1);if(c.Linear){var e=new y(this);e.sequence=d;e.parseLinears(c.Linear);this.linearAds.push(e)}else c.NonLinearAds?(e=new w(this),e.sequence=d,e.parseNonLinears(c.NonLinearAds)):c.CompanionAds&&(e=new t(this),e.sequence=d,e.parseCompanionAds(c.CompanionAds));e&&c.UniversalAdId?(e.universalAdId={idRegistry:c.UniversalAdId["@attributes"].idRegistry,idValue:c.UniversalAdId["@attributes"].idValue},this.log("Universal Ad ID with idRegistry "+e.universalAdId.idRegistry+" and idValue "+e.universalAdId.idValue)):this.log("No Universal Ad ID is present in the VAST response.")}}else this.warn("parse(): no creative found!");else this.warn("parse(): empty adpackage")},testAndUpdatePackageForTemporalSlot:function(a){this.log("testAndUpdatePackageForTemporalSlot("+a+")");a=a?this.linearAds:this.nonLinearAds;if(1>a.length)return!1;this.log("testAndUpdatePackageForTemporalSlot(), ads.length = "+a.length+"");var b=!1;if(!b)for(var c=0;c<a.length;c++){var d=this.findRenditionGroupByContentType(a[c]);if(0<d.length){this.log("testAndUpdatePackageForTemporalSlot() : found driving ad and renditions group: "+d);this.selectedDrivingRenditions=d;this.selectedDrivingAd=a[c];b=!0;break}}return b},testAndUpdatePackageForPageSlots:function(a){var b=!1,c=this.companionAds,d=B.slice(0);this.log("testAndUpdatePackageForPageSlots("+a+"), ads are "+c.join(",")+", slots are "+d.join(","));if(a){if(a=this.matchAdsToSlots(c,d),0<a.length)for(b=!0,c=0;c<a.length;c++){d=a[c];var e=d.ad;this.selectedCompanionAds[d.slot.getCustomId()]=e}}else a=this.matchAdsToSlots(c,[D]),1===a.length?(b=!0,this.selectedDrivingAd=a[0].ad):this.selectedDrivingAd=null;return b},renditionFitsInSlot:function(a,b){return a?a.width<=b.getWidth()&&a.height<=b.getHeight():!1},calcDeadSpaceRatio:function(a,b){a=a.getPrimaryRendition();if(!a)return 0;this.log("ad w,h  slot w,h"+[a.width,a.height,b.getWidth(),b.getHeight()]);return this.renditionFitsInSlot(a,b)?1-a.width*a.height/b.getWidth()*b.getHeight():1},matchAdsToSlots:function(a,b){this.log("matchAdsToSlots(ads="+a.join(",")+", slots="+b.join(",")+")");for(var c=[],d=null,e=null,f=1,g=0;g<a.length;g++)for(var h=a[g],n=0;n<b.length;n++){var k=b[n],l=this.calcDeadSpaceRatio(h,k);l<f&&(d=h,e=k,f=l)}null!=d&&(c.push({ad:d,slot:e}),a.splice(a.indexOf(d),1),b.splice(b.indexOf(e),1),c=c.concat(this.matchAdsToSlots(a,b)));this.log("matchAdsToSlots: winningAd:"+d+" winningSlot:"+e+" ratio:"+f);return c},getAllRenditions:function(a){return a.vastRenditions},findRenditionGroupByContentType:function(b){this.log("findRenditionGroupByContentType:"+b);var c=[];if(b instanceof y&&isNaN(b.duration))return this.warn("findRenditionGroupByContentType(), duration of linear ad is NaN, will not used for scheduling"),c;for(var d=this.getAllRenditions(b),e=0;e<d.length;e++){var f=d[e];if(b instanceof y){if(null==f.creativeType||""===a.Util.trim(f.creativeType)){this.warn("findRenditionGroupByContentType, the contentType "+f.creativeType+" not supported for linearAd");continue}}else if(!h(f.creativeType)){this.warn("findRenditionGroupByContentType, the contentType "+f.creativeType+" not supported for non-linearAd");continue}c.push(f)}return c},formalizeString:function(b){return b?a.Util.trim(b).toLowerCase():""},getAdsByTargetType:function(){this.log("getAdsByTargetType");var a=[];switch(J){case 8:a=this.companionAds;break;case 2:a=this.linearAds;break;case 4:a=this.nonLinearAds}for(var b=0;b<a.length;b++)a[b].isDrivingAd=!0;return a},getImpressionOfWrapper:function(){this.log("getImpressionOfWrapper");for(var a=this.getAdsByTargetType(),b=null,c=0;c<a.length;c++){var d=a[c];if(d&&d._impressions&&0<d._impressions.length){b=d._impressions;break}}b||(b=this.impressions);return b},getTrackingEventsOfWrapper:function(){this.log("getTrackingEventsOfWrapper");for(var a=this.getAdsByTargetType(),b=null,c=0;c<a.length;c++){var d=a[c];if(d&&d._trackingEvents){b=d._trackingEvents;break}}return b},getClickThroughOfWrapper:function(){this.log("getClickThroughOfWrapper");for(var a=this.getAdsByTargetType(),b=null,c=0;c<a.length;c++){var d=a[c];if(d){d.clickThrough&&(b=d.clickThrough);d=d.vastRenditions;for(var e=0;e<d.length;e++){var f=d[e];if(f.clickThrough){b=f.clickThrough;break}}if(b)break}}return b},getClickTrackingsOfWrapper:function(){this.log("getClickTrackingsOfWrapper");for(var a=this.getAdsByTargetType(),b=null,c=0;c<a.length;c++){var d=a[c];if(d){d.clickTrackings&&0<d.clickTrackings.length&&(b=d.clickTrackings);d=d.vastRenditions;for(var e=0;e<d.length;e++){var f=d[e];if(f.clickTrackings&&0<f.clickTrackings.length){b=f.clickTrackings;break}}if(b)break}}return b},getCustomClicksOfWrapper:function(){this.log("getCustomClicksOfWrapper");for(var a=this.getAdsByTargetType(),b=null,c=0;c<a.length;c++){var d=a[c];if(d){d.customClicks&&0<d.customClicks.length&&(b=d.customClicks);d=d.vastRenditions;for(var e=0;e<d.length;e++){var f=d[e];if(f.customClicks&&0<f.customClicks.length){b=f.customClicks;break}}if(b)break}}return b},testWrapperForRedirect:function(){this.log("testAndUpdateWrapperForRedirect()");return this.tagUrl&&0<this.tagUrl.length},log:function(b){a.log("VastTranslator.VastAdPackage	"+b)},warn:function(b){a.warn("VastTranslator.VastAdPackage	"+b)}};Q.prototype.constructor=Q;P.prototype={getVastVersion:function(a){this.log("getVastVersion("+a+")");return a&&0!==a.indexOf(".")?0<a.indexOf(".")?parseInt(a.substring(0,a.indexOf("."))):parseInt(a):-1},parseAdData:function(b){this.log("parseAdData()");var c={},d;c.selectedPackage=null;c.redirectPackage=null;var e=a.Util.xmlToJson(b);if(e)if(e.VAST&&e.VAST["@attributes"])if(this.getVastVersion(e.VAST["@attributes"].version)<a.MINIMUM_VAST_VERSION_SUPPORTED||this.getVastVersion(e.VAST["@attributes"].version)>a.MAXIMUM_VAST_VERSION_SUPPORTED)r.onTranslatorFailed(a.ERROR_PARSE,"wrapperUrl="+C,a.ERROR_VAST_VERSION_NOT_SUPPORTED);else{
if(e.VAST.Ad){e.VAST.Ad=[].concat(e.VAST.Ad);var f=[];b=[];for(d=0;d<e.VAST.Ad.length;d++){var g=new Q;g.isWrapper=!!e.VAST.Ad[d].Wrapper;g.isWrapper?(g.parse(e.VAST.Ad[d].Wrapper),b.push(g)):(g.parse(e.VAST.Ad[d].InLine),f.push(g))}e=!1;if(0===f.length&&0===b.length)return this.log("parseAdData(): no ads from vast response!!!"),[c];this.log("parseAdData(): "+f.length+"inline ads, "+b.length+" wrapper ads.");g=null;for(d=0;d<f.length;d++)if(this.selectUsableAdsForDrivingSlot(f[d])){this.log("parseAdData(): package for driving slot is found!!!");g=f[d];break}d=0<B.length&&z.getSlot().getTimePositionClass()!==a.TIME_POSITION_CLASS_DISPLAY;if(g)d&&this.selectUsableAdsCompanionSlots(g)&&this.log("parseAdData(): companion ads are found for companion slots, with driving slot"),c.selectedPackage=g;else if(d){d=!1;for(var h=0;h<f.length;h++)g=f[h],this.selectUsableAdsCompanionSlots(g)&&(this.log("parseAdData(): companion ads are found for companion slots,without driving slot"),c.selectedPackage=g,d=!0);d||(this.log("parseAdData(): companion ads are not found for companion slots,without driving slot"),e=!0)}else this.log("parseAdData(): no usable ads found in vast response!!!"),e=!0;if(e&&0<b.length)for(f=0;f<b.length;f++)if(this.testWrapperForRedirect(b[f])){c.redirectPackage=b[f];z.incrementWrapperCount();this.selectUsableAdsCompanionSlots(b[f])&&this.log("parseAdData(): companion ads are found for wrapper ad");break}return[c]}e.VAST.Error&&l(z,a.EVENT_ERROR,a.EVENT_TYPE_ERROR,e.VAST.Error.value);r.onTranslatorFailed(a.ERROR_NO_AD_AVAILABLE,"wrapperUrl="+C,a.ERROR_VAST_NO_AD)}else r.onTranslatorFailed(a.ERROR_PARSE,"wrapperUrl="+C,a.ERROR_VAST_SCHEMA_VALIDATION);else r.onTranslatorFailed(a.ERROR_PARSE,"wrapperUrl="+C,a.ERROR_VAST_XML_PARSING)},selectUsableAdsForDrivingSlot:function(a){this.log("selectUsableAdsForDrivingSlot()");switch(J){case 2:a=this.testAndUpdatePackageForTemporalSlot(a,!0);break;case 4:a=this.testAndUpdatePackageForTemporalSlot(a,!1);break;case 8:a=this.testAndUpdatePackageForPageSlots(a,!1);break;default:a=!1}return a},selectUsableAdsCompanionSlots:function(a){this.log("selectUsableAdsCompanionSlots(pk)");return this.testAndUpdatePackageForPageSlots(a,!0)},testAndUpdatePackageForTemporalSlot:function(a,b){this.log("testAndUpdatePackageForTemporalSlot(pk,isLinear), isLinear = "+b);return a.testAndUpdatePackageForTemporalSlot(b)},testAndUpdatePackageForPageSlots:function(a,b){this.log("testAndUpdatePackageForPageSlots(pk,isCompanion) isCompanion = "+b);return a.testAndUpdatePackageForPageSlots(b)},testWrapperForRedirect:function(a){this.log("testWrapperForRedirect(pk)");return a.testWrapperForRedirect()},log:function(b){a.log("VastTranslator.VastParser	"+b)},warn:function(b){a.warn("VastTranslator.VastParser	"+b)}};var C=z.getActiveCreativeRendition().getWrapperUrl();b=z.getActiveCreativeRendition().getWrapperType();c("AdInstance.getActiveCreativeRendition().getWrapperUrl()="+C+", getWrapperType()="+b);if(0!==b.indexOf("external/vast-"))r.onTranslatorFailed(a.ERROR_NO_RENDERER,"wrapperType="+b+";wrapperUrl="+C,a.ERROR_VAST_TRACKING_ERROR);else if(C&&0!==C.length){var L=a.VAST_DEFAULT_MAX_WRAPPER_COUNT;(b=this._rendererController.getParameter(a.PARAMETER_VAST_MAX_WRAPPER_COUNT))&&0<Number(b)&&(L=Number(b));if(z.getWrapperCount()>=L)r.onTranslatorFailed(a.ERROR_IO,"maximum wrapper limit is reached "+z.getWrapperCount(),a.ERROR_VAST_WRAPPER_LIMIT_REACH);else{L=this._rendererController.getParameter("translator.vast.asyncLoad");L=!0===a.Util.str2bool(L);c("will load vast xml, asyncAjax:"+L);var U=this._rendererController.getParameter("translator.vast.loadWithCookie");U=!0===a.Util.str2bool(U);var A=null,R=5e3;(b=this._rendererController.getParameter(a.PARAMETER_VAST_TIMEOUT_IN_MILLISECONDS))&&0<Number(b)&&(R=Number(b));try{window.XDomainRequest?(A=new XDomainRequest,L=!0):(A=new XMLHttpRequest,A.withCredentials=U),r._request=A,L?(A.open("GET",C),window.XDomainRequest?A.onload=function(){var a=new ActiveXObject("Microsoft.XMLDOM");a.async=!1;a.loadXML(A.responseText);A.responseXML=a;A.status=200;q(A)}:(A.timeout=R,A.onreadystatechange=function(){4===A.readyState&&q(A)}),A.ontimeout=function(){r.onTranslatorFailed(a.ERROR_TIMEOUT,"wrapperUrl="+C+" timed out.",a.ERROR_VAST_URI_TIMEOUT)},A.onerror=function(){window.XDomainRequest&&(A.status=0);0===A.status?(d("CORS error"),r.onTranslatorFailed(a.ERROR_SECURITY,"wrapperUrl="+C)):(d("exception:"+A.statusText),r.onTranslatorFailed(a.ERROR_UNKNOWN,"wrapperUrl="+C+";exception="+A.statusText))},A.send()):(A.open("GET",C,!1),A.send(),q(A))}catch(n){b=!1;if(!window.XMLHttpRequestException)n.code===DOMException.NETWORK_ERR&&(d("CORS in IE10"),b=!0);else if(n instanceof XMLHttpRequestException)switch(n.code){case XMLHttpRequestException.NETWORK_ERR:b=!0}b?(d("CORS error:"+n),r.onTranslatorFailed(a.ERROR_SECURITY,"wrapperUrl="+C)):(d("exception:"+n),r.onTranslatorFailed(a.ERROR_UNKNOWN,"wrapperUrl="+C+";exception="+n))}}}else r.onTranslatorFailed(a.ERROR_NULL_ASSET,"wrapperUrl="+C,a.ERROR_VAST_TRACKING_ERROR)},info:function(){return{moduleType:a.MODULE_TYPE_TRANSLATOR}},log:function(b){a.log("VastTranslator	"+b)},warn:function(b){a.warn("VastTranslator	"+b)},getPlayheadTime:function(){return-1},getDuration:function(){return-1},stop:function(){a.debug("VastTranslator stop");this._request&&(this._request.abort(),a.log("VastTranslator Stop: request aborted"));this._request=null;this._rendererController&&this._rendererController.handleStateTransition(a.TRANSLATOR_STATE_COMPLETED)},onTranslatorFailed:function(b,c,d){this._request&&(this._request=null);var e={};e[a.INFO_KEY_ERROR_MODULE]="VastTranslator";e[a.INFO_KEY_ERROR_CODE]=b;e[a.INFO_KEY_VAST_ERROR_CODE]=d;c&&(e[a.INFO_KEY_ERROR_INFO]=c);this._rendererController.handleStateTransition(a.TRANSLATOR_STATE_FAILED,e)}};a.VastTranslator.prototype.constructor=a.VastTranslator;a.ContentVideoExtension=function(){this.autoSourceRestore=this.respondPauseResume=!0;this._originalTime=0;this._contentVideoControls=this._contentVideoSrc=null};a.ContentVideoExtension.prototype={_isEnabled:function(){var b=this._context.getParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED);return(null==b||!0===a.Util.str2bool(b))&&null!=this._context.getContentVideoElement()},_getBooleanParameter:function(b,c){b=this._context.getParameter(b);null==b&&(b=c);return a.Util.str2bool(b)},init:function(b){a.debug("ContentVideoExtension.init(context)");this._context=b;this._fixContentVideoCurrentTime=a.Util.bind(this,function(b){a.log("_fixContentVideoCurrentTime: event = "+b.type);if(!(0>=this._context.getContentVideoElement().currentTime||0>=this._context.getContentVideoElement().seekable.length)&&(this._context.getContentVideoElement().removeEventListener("timeupdate",this._fixContentVideoCurrentTime,!1),0<this._context.getContentVideoElement().currentTime&&1>this._context.getContentVideoElement().currentTime&&1<this._originalTime)){a.log("ContentVideoExtension: seeking to original time",this._originalTime);try{this._context.getContentVideoElement().currentTime=this._originalTime}catch(d){a.warn("ContentVideoExtension: seek error")}}});this._pause=a.Util.bind(this,function(b){a.log("_pause: event = "+b.type);this._isEnabled()?this._respondPauseResume()&&(a.debug("ContentVideoExtension: EVENT_CONTENT_VIDEO_PAUSE_REQUEST pausing content video",this._context.getContentVideoElement().src),this._originalTime=this._context.getContentVideoElement().currentTime,this._context.getContentVideoElement().pause()):a.debug("ContentVideoExtension: extension is not enabled, do nothing.")});this._resume=a.Util.bind(this,function(b){a.log("_resume: event = "+b.type);this._isEnabled()?this._respondPauseResume()&&(a.debug("ContentVideoExtension: EVENT_CONTENT_VIDEO_RESUME_REQUEST resume content video",this._context.getContentVideoElement().src),!this._context._videoAsset||null!=this._context._videoAsset._state&&this._context._videoAsset._state!==a.VIDEO_STATE_COMPLETED?(a.log("ContentVideoExtension: resume content video"),this._context.getContentVideoElement().play(),a.PLATFORM_AUTO_SEEK_AFTER_MIDROLL&&!0===this._getBooleanParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SEEK_BACK,!0)&&this._context.getContentVideoElement().addEventListener("timeupdate",this._fixContentVideoCurrentTime,!1)):a.warn("ContentVideoExtension: video state is uninitialized or completed, skip resume.")):a.debug("ContentVideoExtension: extension is not enabled, do nothing.")});this._onAttach=a.Util.bind(this,function(b){if(!this._isEnabled())a.debug("ContentVideoExtension: extension is not enabled, do nothing.");else if(this._autoSourceRestore())switch(b.slot.getTimePositionClass()){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_POSTROLL:a.debug("ContentVideoExtension: store current content video src",this._context.getContentVideoElement().src),this._contentVideoSrc=this._context.getContentVideoElement().src,this._contentVideoControls=this._context.getContentVideoElement().controls,this._context.getContentVideoElement().paused||this._context.getContentVideoElement().pause()}});this._onDetach=a.Util.bind(this,function(b){if(!this._isEnabled())a.debug("ContentVideoExtension: extension is not enabled, do nothing.");else if(this._autoSourceRestore())switch(b=b.slot.getTimePositionClass(),b){case a.TIME_POSITION_CLASS_PREROLL:case a.TIME_POSITION_CLASS_POSTROLL:a.debug("ContentVideoExtension: restore content video src to",this._contentVideoSrc),this._context.getContentVideoElement().src!==this._contentVideoSrc&&(this._context.getContentVideoElement().src=this._contentVideoSrc),this._context.getContentVideoElement().controls=this._contentVideoControls,b===a.TIME_POSITION_CLASS_PREROLL&&this._context.getContentVideoElement().load()}});a.debug("ContentVideoExtension: enabling content video pause resume request handling.");this._context.addEventListener(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this._pause);this._context.addEventListener(a.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this._resume);a.debug("ContentVideoExtension: enabling content video source management.");this._context.addEventListener(a.EVENT_SLOT_STARTED,this._onAttach);this._context.addEventListener(a.EVENT_SLOT_ENDED,this._onDetach)},_respondPauseResume:function(){return this._getBooleanParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_RESPOND_PAUSE_RESUME,!0)},_autoSourceRestore:function(){return this._getBooleanParameter(a.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SOURCE_RESTORE,!0)},dispose:function(){a.debug("ContentVideoExtension.dispose()");this._context&&(this._context.removeEventListener(a.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this._pause),this._context.removeEventListener(a.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this._resume),this._context.removeEventListener(a.EVENT_SLOT_STARTED,this._onAttach),this._context.removeEventListener(a.EVENT_SLOT_ENDED,this._onDetach),this._context=null)}};a.ContentVideoExtension.prototype.constructor=a.ContentVideoExtension;return a};w.tv.freewheel.SDK||(w.tv.freewheel.SDK=w.tv.freewheel[R]("tv.freewheel.SDK"));return w})()};function initMoatTracking(a,g,e){if(!1===g.hasOwnProperty("partnerCode"))return!1;var k=window.location.protocol,n="https:"===k?"z":"js",l=document.createElement("script");e=e||a&&("undefined"!==typeof a.O?a.O.parentNode:document.body)||document.body;var f=[],c={adsManager:a,ids:g,imaSDK:!0,events:[]},p={complete:"AdVideoComplete",firstquartile:"AdVideoFirstQuartile",impression:"AdImpression",loaded:"AdLoaded",midpoint:"AdVideoMidpoint",pause:"AdPaused",skip:"AdSkipped",start:"AdVideoStart",thirdquartile:"AdVideoThirdQuartile",volumeChange:"AdVolumeChange"};if(google&&google.ima&&a){var d="_moatApi"+Math.floor(1e8*Math.random()),h;for(h in google.ima.AdEvent.Type){var m=function(b){if(c.sendEvent){for(b=f.length-1;0<=b;b--)a.removeEventListener(f[b].type,f[b].func);c.sendEvent(c.events)}else c.events.push({type:p[b.type]||b.type,adVolume:a.getVolume()})};a.addEventListener(google.ima.AdEvent.Type[h],m);f.push({type:google.ima.AdEvent.Type[h],func:m})}}d="undefined"!==typeof d?d:"";window[d]=c;e&&e.appendChild(l);l.src=k+"//"+n+".moatads.com/"+g.partnerCode+"/moatvideo.js#"+d}window.addHeartbeatAnalyticsLibrary=function(){!function(a){if("undefined"==typeof b)var b={};if("undefined"==typeof c)var c={};if("undefined"==typeof d)var d={};if(d.radio||(d.radio={}),d.plugin||(d.plugin={}),"undefined"==typeof e)var e={};e.clock||(e.clock={}),function(a){"use strict";function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[(c+64>>>9<<4)+14]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;c<16;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}a.md5=t}(b),function(a){"use strict";var b={};b.startsWith=function(a,b){return 0==a.indexOf(b)},a.StringUtils=b}(b),function(a){"use strict";var b={};b.clone=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},b.merge=function(a,c){var d=b.clone(a);for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);return d},a.ObjectUtils=b}(b),function(a){"use strict";function b(a,b,c){this.fn=a,this.ctx=b,this.params=c}b.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},a.radio.Command=b}(d),function(a){"use strict";function b(a,b){this._queue=[],this._lastTs=0,this._isSuspended="undefined"!=typeof a&&a,this._delay="undefined"!=typeof b?b:0}b.prototype.addCommand=function(a){this._queue.push(a),this._drain()},b.prototype.cancelAllCommands=function(){this._queue=[]},b.prototype.isEmpty=function(){return 0===this._queue.length},b.prototype.suspend=function(){this._isSuspended=!0},b.prototype.resume=function(){this._isSuspended=!1,this._drain()},b.prototype.flush=function(){this._isSuspended=!1;for(var a=0;a<this._queue.length;a++){var b=this._queue[a];b.run()}this._queue=[]},b.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var a=this;!function b(){var c=a._queue.shift();c?a._runCommand(c,function(){a._isSuspended||b()}):a._drainInProgress=!1}()}},b.prototype._runCommand=function(a,b){function c(){a.run(),null!=b&&b.call(d)}var d=this;if(0==this._lastTs)c();else{var e=(new Date).getTime(),f=e-this._lastTs;this._lastTs=e,f<this._delay?setTimeout(c,this._delay-f):c()}},a.radio.CommandQueue=b}(d),function(a){"use strict";function b(a,b){if(this._name=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}function c(a,c){if(a===c)return!0;for(var d=(a||"").split(b.SEPARATOR),e=(c||"").split(b.SEPARATOR),f=!0,g=0;g<d.length;g++)f=f&&(d[g]===b.WILDCARD||d[g]===e[g]);return f}b.WILDCARD="*",b.SEPARATOR=":",b.prototype.toString=function(){return"<channel: "+this._name+">"},b.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(d,"#shutdown > Shutting down"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},b.prototype.on=function(a,b,c){this._isShutDown||(this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push({fn:b,ctx:c}))},b.prototype.off=function(a,b,c){if(!this._isShutDown){if(b="function"==typeof b?b:null,!a&&null==b&&!c)return void(this._listeners={});if(a)this._removeListener(a,b,c);else for(a in this._listeners)this._listeners.hasOwnProperty(a)&&this._removeListener(a,b,c)}},b.prototype.trigger=function(a){if(!this._isShutDown)for(var b in this._listeners)if(this._listeners.hasOwnProperty(b)&&c(b,a.name))for(var d=this._listeners[b].slice(0),e=0;e<d.length;e++){var f=d[e];f.fn.call(f.ctx,a)}},b.prototype.comply=function(a,b,c){this._isShutDown||(this._commands[a]={cmd:b,ctx:c})},b.prototype.command=function(a,b){if(!this._isShutDown){var c=this._commands[a];return c?void c.cmd.call(c.ctx,b):void this._logger.warn(d,"#command > No command handler for: "+a)}},b.prototype.reply=function(a,b,c){this._isShutDown||(this._requests[a]={fn:b,ctx:c})},b.prototype.request=function(a){if(!this._isShutDown){var b=this._requests[a];return b?b.fn.call(b.ctx):(this._logger.warn(d,"#request > No request handler for: "+a),null)}},b.prototype._removeListener=function(a,b,c){b="function"==typeof b?b:null;var d=this._listeners[a];if(d){if(!d.length||null==b&&!c)return void delete this._listeners[a];for(var e=0;e<d.length;e++){var f=d[e];null!==b&&b!==f.fn||c&&c!==f.ctx||this._listeners[a].splice(e,1)}}};var d="radio::Channel";a.radio.Channel=b}(d),function(a){"use strict";function b(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._channels={}}var c=a.radio.Channel;b.prototype.channel=function(a){return this._channels[a]||(this._channels[a]=new c(a,this._logger)),this._channels[a]},b.prototype.shutdown=function(){for(var a in this._channels)this._channels.hasOwnProperty(a)&&this._channels[a].shutdown()},a.radio.Radio=b}(d),function(a){"use strict";function b(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a}a.extend=b}(d),function(a){"use strict";function b(){}b.prototype.write=function(a){throw new Error("Implementation error: Method must be overridden.")},a.ILogWriter=b}(d),function(a){"use strict";function b(){}b.prototype.write=function(a){window.console&&window.console.log&&window.console.log(a)},a.LogWriter=b}(d),function(a){"use strict";function b(){}b.prototype.setLogWriter=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getLogWriter=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getEnabled=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.debug=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.info=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.warn=function(a,b){throw new Error("Implementation error: Method must be overridden.")},b.prototype.error=function(a,b){throw new Error("Implementation error: Method must be overridden.")},a.ILogger=b}(d),function(a){"use strict";function b(){this._logWriter=new d}function c(a){return a<10?"00"+a:a<100?"0"+a:""+a}var d=a.LogWriter;b.prototype.setLogWriter=function(a){if(!a)throw new Error("Reference to the ILogWriter object cannot be NULL");this._logWriter=a,this._enabled=!1},b.prototype.getLogWriter=function(){return this._logWriter},b.prototype.getEnabled=function(){return this._enabled},b.prototype.enable=function(){this._enabled=!0},b.prototype.disable=function(){this._enabled=!1},b.prototype.debug=function(a,b){this._log(a,f,b)},b.prototype.info=function(a,b){this._log(a,e,b)},b.prototype.warn=function(a,b){this._log(a,g,b)},b.prototype.error=function(a,b){this._log(a,h,b)},b.prototype._log=function(a,b,d){if(b==h||this._enabled){var e="",f=new Date;e+="["+f.toTimeString()+"."+c(f.getMilliseconds())+"] ["+b+"] ",e+="["+a+"] "+d,this._logWriter.write(e)}};var e="INFO",f="DEBUG",g="WARN",h="ERROR";a.Logger=b}(d),function(a){"use strict";function b(a,b){this._pluginName=a,this._eventName=b}var c=a.radio.Channel;b.prototype.getPluginName=function(){return this._pluginName},b.prototype.getEventName=function(){return this._eventName},b.prototype.getName=function(){return this._pluginName+c.SEPARATOR+this._eventName},a.Trigger=b}(d),function(a){"use strict";function b(a,b){this.name=a,this.data=b}b.SUCCESS="success",b.ERROR="error",b.createFromTrigger=function(a){return new b(a.getName())},a.Event=b}(d),function(a){"use strict";function b(){this._events={}}b.prototype.addEventListener=function(a,b,c){a&&b&&(c=c||window,this._events[a]=this._events[a]||[],this._events[a].push({cb:b,ctx:c}))},b.prototype.removeEventListener=function(a,b,c){if(a&&b){c=c||window;var d,e,f=!1;for(e in this._events)if(a===e){f=!0;break}if(f){for(d=this._events[e].length-1;d>=0;d--){var g=this._events[e][d];b===g.cb&&c===g.ctx&&this._events[e].splice(d,1)}this._events[e].length||delete this._events[e]}}},b.prototype.dispatchEvent=function(a){if(a.name){var b,c;for(b in this._events)if(this._events.hasOwnProperty(b)&&a.name===b){var d=this._events[b],e=d.slice(0),f=e.length;for(c=0;c<f;c++)e[c].cb.call(e[c].ctx,a);break}}},b.prototype.removeAllListeners=function(a){if(a){var b,c;for(c in this._events)if(this._events.hasOwnProperty(c)){for(b=this._events[c].length-1;b>=0;b--){var d=this._events[c][b];d.ctx===a&&this._events[c].splice(b,1)}this._events[c].length||delete this._events[c]}}else this._events={}},a.EventDispatcher=b}(d),function(a){"use strict";function b(){}function c(a,b){this.url=a||null,this.method=b,this._xmlhttp=null}function d(){d.__super__.constructor.call(this),this._connection=null}var e=a.Event,f=a.EventDispatcher;b.GET="GET",d.RESPONSE="response",d.INSTANCE="instance",a.extend(d,f),d.prototype.close=function(){this.removeAllListeners(null)},d.prototype.load=function(a){a&&a.method&&a.url&&(a._xmlhttp=this._createCORSRequest(a),a._xmlhttp?a._xmlhttp.send():this._loadImage(a))},d.prototype._createCORSRequest=function(a){var b=null;if("undefined"!=typeof window.XMLHttpRequest){var c=new window.XMLHttpRequest;"withCredentials"in c&&(b=c,b.open(a.method,a.url,!0))}if(null==b&&"undefined"!=typeof window.XDomainRequest&&(b=new window.XDomainRequest,b.open(a.method,a.url)),b){var f={};f[d.INSTANCE]=this;var g=this;b.onload=function(){return b.status&&parseInt(b.status,10)>=400?this.onerror():(f[d.RESPONSE]=b.responseText,void g.dispatchEvent(new e(e.SUCCESS,f)))},b.onerror=function(){g.dispatchEvent(new e(e.ERROR,f))}}return b},d.prototype._loadImage=function(a){this._connection||(this._connection=new Image,this._connection.alt=""),this._connection.src=a.url;var b={};b[d.RESPONSE]="",b[d.INSTANCE]=this,this.dispatchEvent(new e(e.SUCCESS,b))},a.URLRequestMethod=b,a.URLRequest=c,a.URLLoader=d}(d),function(a){"use strict";var b="js",c="2.0.2.123",d="150f2b",e=4,f={};f.getVersion=function(){return b+"-"+c+"-"+d},f.getMajor=function(){return f.getNumberAtPosition(0)},f.getMinor=function(){return f.getNumberAtPosition(1)},f.getMicro=function(){return f.getNumberAtPosition(2)},f.getPatch=function(){return f.getNumberAtPosition(3)},f.getBuild=function(){return d},f.getApiLevel=function(){return e},f.getNumberAtPosition=function(a){return c.split(".")[a]},a.Version=f}(c),function(a){"use strict";function b(a,b){this._message=a,this._details=b}b.prototype.getMessage=function(){return this._message},b.prototype.getDetails=function(){return this._details},a.ErrorInfo=b}(c),function(a){"use strict";function b(){this.debugLogging=!1}a.HeartbeatConfig=b}(c),function(a){"use strict";function b(){}b.prototype.onError=function(a){},a.HeartbeatDelegate=b}(c),function(a){"use strict";function b(){}b.prototype.configure=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.bootstrap=function(a){throw new Error("Implementation error: Method must be overridden.")},b.prototype.setup=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.destroy=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.enable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.disable=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getName=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.isInitialized=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.resolveData=function(a){throw new Error("Implementation error: Method must be overridden.")},a.plugin.IPlugin=b}(d),function(a){"use strict";function b(a,b,c,d){this.trigger=a,this.action=c,this.plugin=b,this._paramMappings={},this.mergeParams(d)}var c=a.plugin.ParamMapping;b.prototype.mergeParams=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b];this._paramMappings[c.getKeyName()]=c}},b.prototype.getParams=function(){var a=[];for(var b in this._paramMappings)this._paramMappings.hasOwnProperty(b)&&a.push(this._paramMappings[b]);return a},b.prototype.addParam=function(a){this._paramMappings[a.getKeyName()]=a},b.prototype.removeParam=function(a,b){var d=new c(a,b);this._paramMappings.hasOwnProperty(d.getKeyName())&&delete this._paramMappings[d.getKeyName()]},a.plugin.Behaviour=b}(d),function(a){"use strict";function b(a,b,d){this._pluginName=a,this._key=b,this._paramName=d||a+c.SEPARATOR+b}var c=a.radio.Channel;b.prototype.getPluginName=function(){return this._pluginName},b.prototype.getKey=function(){return this._key},b.prototype.getKeyName=function(){return this._pluginName+c.SEPARATOR+this._key},b.prototype.getParamName=function(){return this._paramName},a.plugin.ParamMapping=b}(d),function(a){"use strict";function b(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._plugins={},this._behaviours={},this._radio=new d(this._logger),this._dataChannel=this._radio.channel(g),this._ctrlChannel=this._radio.channel(h)}var c=a.Event,d=a.radio.Radio,e=a.radio.Channel,f=a.plugin.Behaviour;b.ERROR="error",b.prototype.addPlugin=function(a){var b=a.getName();this._plugins[b]&&this._logger.warn(i,"#addPlugin > Replacing plugin: "+b),this._plugins[b]=a,a.bootstrap(this)},b.prototype.setupPlugins=function(){for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].setup()},b.prototype.pluginExists=function(a){return!!this._plugins[a]},b.prototype.isPluginInitialized=function(a){return this._plugins[a]&&this._plugins[a].isInitialized()},b.prototype.on=function(a,b,c,d){this._dataChannel.on(a+e.SEPARATOR+b,c,d)},b.prototype.off=function(a,b,c,d){var f=a&&b?a+e.SEPARATOR+b:null;this._dataChannel.off(f,c,d)},b.prototype.trigger=function(a){var b=a.name,c=this._behaviours[b];if(c){var d,e,f,g,h,i={},j={};for(d=0;d<c.length;d++)if(f=c[d],g=f.getParams())for(e=0;e<g.length;e++)h=g[e],i[h.getPluginName()]=i[h.getPluginName()]||[],h.key in i[h.getPluginName()]||i[h.getPluginName()].push(h.getKey());for(var k in i)i.hasOwnProperty(k)&&(j[k]=this.request(k,i[k]));for(d=0;d<c.length;d++){f=c[d];var l={_behaviour:f,_eventData:a.data||{}};if(g=f.getParams()){for(e=0;e<g.length;e++)h=g[e],l[h.getParamName()]=j[h.getPluginName()]?j[h.getPluginName()][h.getKey()]:null;this.command(f.plugin.getName(),f.action,l)}}}this._dataChannel.trigger(a)},b.prototype.request=function(a,b){var c=this._plugins[a];return c&&b&&0!=b.length?c.resolveData(b):null},b.prototype.raise=function(a){this._errorInfo=a;var d=new c(b.ERROR,a);this._ctrlChannel.trigger(d)},b.prototype.getErrorInfo=function(){return this._errorInfo},b.prototype.destroy=function(){this._radio.shutdown();for(var a in this._plugins)this._plugins.hasOwnProperty(a)&&this._plugins[a].destroy()},b.prototype.comply=function(a,b,c){this._dataChannel.comply(a.getName()+e.SEPARATOR+b,c,a)},b.prototype.command=function(a,b,c){this._dataChannel.command(a+e.SEPARATOR+b,c)},b.prototype.registerBehaviour=function(a,b,c,d){var e=a.getName(),g=new f(a,b,c,d);this._behaviours[e]=this._behaviours[e]||[],this._behaviours[e].push(g)};var g="data_channel",h="ctrl_channel",i="plugin::PluginManager";a.plugin.PluginManager=b}(d),function(a,b){"use strict";function c(a){this._name=a,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag="plugin::"+this.getName(),this._logger=new d}var d=a.Logger,e=a.Trigger,f=a.Event,g=b.ErrorInfo;c.INITIALIZED="initialized",c.prototype.configure=function(a){},c.prototype.bootstrap=function(a){this._pluginManager=a,this._isDestroyed&&this._pluginManager.raise(new g("Invalid state.","Plugin already destroyed."))},c.prototype.setup=function(){this._trigger(c.INITIALIZED),this._isInitialized=!0},c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},c.prototype.enable=function(){this._isEnabled=!0,this._enabled()},c.prototype.disable=function(){this._isEnabled=!1,this._disabled()},c.prototype.getName=function(){return this._name},c.prototype.getLogger=function(){return this._logger},c.prototype.isInitialized=function(){return this._isInitialized},c.prototype.resolveData=function(a){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,"Unable to retrieve plugin data. Plugin: "+this._name+". Enabled: "+this._isEnabled+". Initialized: "+this._isInitialized+"."),
null;if("function"==typeof this._dataResolver)return this._dataResolver.call(this,a);var b=null;if(a)for(var c=0;c<a.length;c++){var d=a[c];this._dataResolver.hasOwnProperty(d)&&(b=b||{},"function"==typeof this._dataResolver[d]?b[d]=this._dataResolver[d].call(this):b[d]=this._dataResolver[d])}return b},c.prototype.toString=function(){return"<plugin: "+this._name+">"},c.prototype._enabled=function(){},c.prototype._disabled=function(){},c.prototype._teardown=function(){},c.prototype._canProcess=function(){return this._isEnabled?!this._isDestroyed||(this._logger.error(this._logTag,"Plugin destroyed."),!1):(this._logger.error(this._logTag,"Plugin disabled."),!1)},c.prototype._trigger=function(a,b){var c=f.createFromTrigger(new e(this.getName(),a));c.data=b,this._pluginManager.trigger(c)},a.plugin.BasePlugin=c}(d,c),function(a){"use strict";function b(a,b,c){this.name=a,this.interval=b,this.isActive=!1,this.repeatCount="undefined"!=typeof c?c:e,this._nextTickTimestamp=0,this.reset()}function c(a,b){if(!a)throw new Error("Reference to the ClockService object cannot be NULL");if(this._service=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._isDestroyed=!1,this._timers={};var c=this;this._clock=window.setInterval(function(){c._onTick()},1e3*f)}b.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},b.prototype.shouldTick=function(){var a=(new Date).getTime();return a>this._nextTickTimestamp-f/2&&(this.tick++,this._updateNextTickTimestamp(),!0)},b.prototype._updateNextTickTimestamp=function(){this._nextTickTimestamp=this._createdTimestamp+1e3*this.interval*(this.tick+1)},c.prototype.createTimer=function(a,c,d){this._timers[a]=new b(a,c,d)},c.prototype.destroyTimer=function(a){delete this._timers[a]},c.prototype.resumeTimer=function(a,b){b="undefined"!=typeof b&&b,this._logger.debug(d,"#resumeTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!0,b&&c.reset())},c.prototype.pauseTimer=function(a,b){b="undefined"!=typeof b&&b,this._logger.debug(d,"#pauseTimer(name="+a+", reset="+b+")");var c=this._timers[a];c&&(c.isActive=!1,b&&c.reset())},c.prototype.isTimerPaused=function(a){var b=this._timers[a];return!!b&&!b.isActive},c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},c.prototype._onTick=function(){for(var a in this._timers)if(this._timers.hasOwnProperty(a)){var b=this._timers[a];b.isActive&&b.shouldTick()&&(b.interval>1&&this._logger.debug(d,"#_onTick() > "+b.name+"("+b.tick+" | "+b.repeatCount+")"),0!=b.repeatCount?(this._service.onTick(b.name,b.interval,b.tick),b.repeatCount!=e&&b.repeatCount--):this.destroyTimer(b.name))}};var d="service.clock::TimerManager",e=-1,f=.25;a.clock.TimerDescriptor=b,a.clock.TimerManager=c}(e),function(a,b,c){"use strict";function d(a){if(d.__super__.constructor.call(this,h),!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a,this._timerManager=new e(this,this._logger),this._setupDataResolver()}var e=c.clock.TimerManager,f=b.StringUtils,g=a.plugin.BasePlugin;a.extend(d,g),d.prototype.bootstrap=function(a){d.__super__.bootstrap.call(this,a),this._pluginManager.comply(this,i,this._cmdCreate),this._pluginManager.comply(this,k,this._cmdResume),this._pluginManager.comply(this,j,this._cmdPause),this._pluginManager.comply(this,l,this._cmdDestroy)},d.prototype._teardown=function(){this._timerManager.destroy()},d.prototype._cmdCreate=function(a){var b=a[o]||s;this._timerManager.createTimer(a[m],a[n],b)},d.prototype._cmdPause=function(a){this._timerManager.pauseTimer(a[m],!!a[q])},d.prototype._cmdResume=function(a){this._timerManager.resumeTimer(a[m],!!a[q])},d.prototype._cmdDestroy=function(a){this._timerManager.destroyTimer(a[m])},d.prototype.onTick=function(a,b,c){a+=".tick";var d={};d[m]=a,d[n]=b,d[p]=c,this._trigger(a,d)},d.prototype._setupDataResolver=function(){var a={},b=this._timerManager;a[r]=function(a){return b.isTimerPaused(a)},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];if(c=c||{},f.startsWith(e,r)){var g=e.split(r+".");g.length>0&&(c[e]=a[r].call(this,g[1]))}}return c}};var h="service.clock",i="create",j="pause",k="resume",l="destroy",m="name",n="interval",o="repeat_count",p="tick",q="reset",r="is_paused",s=-1;c.clock.ClockService=d}(d,b,e),function(a,b,c){"use strict";function d(a,b){if(this._logger=new e,this._pluginManager=new f(this._logger),this._pluginManager.addPlugin(new g(this._logger)),b)for(var c=0;c<b.length;c++)this._pluginManager.addPlugin(b[c]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var e=a.Logger,f=a.plugin.PluginManager,g=b.clock.ClockService;d.prototype.configure=function(a){if(!a)throw new Error("Configuration object cannot be NULL.");a.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(h,"Instance is destroyed.")},d.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var h="Heartbeat";c.Heartbeat=d}(d,e,c),a.ADB||(a.ADB={}),a.ADB.core||(a.ADB.core=d),a.ADB.va||(a.ADB.va=c),a.ADB.va.utils||(a.ADB.va.utils=b),a.ADB.va.plugins||(a.ADB.va.plugins={})}(this);!function(a){if("undefined"==typeof b)var b={};!function(a){"use strict";var b={};b.ASSET_TYPE_VOD="vod",b.ASSET_TYPE_LIVE="live",b.ASSET_TYPE_LINEAR="linear",a.AssetType=b}(b),function(a){"use strict";function b(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}b.prototype.toString=function(){return"playerName="+this.playerName+", name="+this.name+", position="+this.position+", startTime="+this.startTime},a.AdBreakInfo=b}(b),function(a){"use strict";function b(){this.id=null,this.name=null,this.length=null,this.position=null}b.prototype.toString=function(){return"id="+this.id+", name="+this.name+", length="+this.length+", position="+this.position},a.AdInfo=b}(b),function(a){"use strict";function b(){this.name=null,this.length=null,this.position=null,this.startTime=null}b.prototype.toString=function(){return"name="+this.name+", length="+this.length+", position="+this.position+", startTime="+this.startTime},a.ChapterInfo=b}(b),function(a){"use strict";function b(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}b.prototype.toString=function(){return"bitrate="+this.bitrate+", fps="+this.fps+", droppedFrames="+this.droppedFrames+", startupTime="+this.startupTime},a.QoSInfo=b}(b),function(a){"use strict";function b(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.streamType=null,this.resumed=!1}b.prototype.toString=function(){return"playerName="+this.playerName+", id="+this.id+", name="+this.name+", length="+this.length+", playhead="+this.playhead+", streamType="+this.streamType+", resumed="+this.resumed},a.VideoInfo=b}(b),function(a){"use strict";function b(){this.debugLogging=!1}a.VideoPlayerPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.getVideoInfo=function(){throw new Error("Implementation error: Method must be overridden.")},b.prototype.getAdBreakInfo=function(){return null},b.prototype.getAdInfo=function(){return null},b.prototype.getChapterInfo=function(){return null},b.prototype.getQoSInfo=function(){return null},a.VideoPlayerPluginDelegate=b}(b),function(a,b){"use strict";function c(a){if(c.__super__.constructor.call(this,h),!a)throw new Error("PlayerPlugin delegate cannot be NULL.");this._delegate=a,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._isTrackingAd=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._setupDataResolver()}var d=a.plugin.ParamMapping,e=a.Trigger,f=a.plugin.BasePlugin,g=b.VideoPlayerPluginConfig;a.extend(c,f),c.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof g))throw new Error("Expected config data to be instance of VideoPlayerPluginConfig.");a.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure(debugLogging="+a.debugLogging+")")},c.prototype.bootstrap=function(a){c.__super__.bootstrap.call(this,a),this._registerCommands(),this._registerBehaviours()},c.prototype._cmdVideoIdleStart=function(a){this._logger.info(this._logTag,"#_cmdVideoIdleStart()"),this._videoIdle=!0},c.prototype._cmdVideoIdleResume=function(a){this._logger.info(this._logTag,"#_cmdVideoIdleResume()"),this._videoIdle&&(this._trigger(o),this._trigger(p),a.isInChapter&&this._trigger(A),a.isInAd&&(this._trigger(u),this._isTrackingAd=!0)),this._videoIdle=!1},c.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,"#trackSessionStart()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackSessionStart() > No active tracking session.");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,"#trackSessionStart() > Tracking session already started.");this._trigger(o),this._isTrackingSessionStarted=!0;var a=this._dataResolver(["video.resumed"]);a.hasOwnProperty("video.resumed")&&a["video.resumed"]&&this._trigger(p)}},c.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,"#trackVideoLoad()"),this._canProcess()&&(this._trigger(m),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},c.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,"#trackVideoUnload()"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,"#trackVideoUnload() > No active tracking session.");this._stopPlayheadTimer(),this._trigger(n),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._videoIdle=!1}},c.prototype.trackPlay=function(){this._logger.info(this._logTag,"#trackPlay()"),this._canProcess()&&this._startSessionIfNeeded("trackPlay")&&(this._trigger(s),this._startPlayheadTimer())},c.prototype.trackPause=function(){if(this._logger.info(this._logTag,"#trackPause()"),this._canProcess()&&this._startSessionIfNeeded("trackPause")){this._stopPlayheadTimer();var a={};a[H]=!1,this._trigger(t,a)}},c.prototype.trackBufferStart=function(){this._logger.info(this._logTag,"#trackBufferStart()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferStart")&&(this._stopPlayheadTimer(),this._trigger(w))},c.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,"#trackBufferComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackBufferComplete")&&(this._trigger(x),this._startPlayheadTimer())},c.prototype.trackSeekStart=function(){this._logger.info(this._logTag,"#trackSeekStart()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekStart")&&(this._stopPlayheadTimer(),this._trigger(y))},c.prototype.trackSeekComplete=function(){if(this._logger.info(this._logTag,"#trackSeekComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackSeekComplete")){this._trigger(z),this._startPlayheadTimer();var a=this._dataResolver(["ad.isInAd"]);this._isTrackingAd=a.hasOwnProperty("ad.isInAd")&&a["ad.isInAd"]}},c.prototype.trackComplete=function(a){if(this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackComplete")){var b={};b[G]=a,this._stopPlayheadTimer(),this._trigger(q,b)}},c.prototype.trackTimedMetadata=function(a){this._logger.info(this._logTag,"#trackComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackTimedMetadata")&&this._trigger(r,a)},c.prototype.trackChapterStart=function(){this._logger.info(this._logTag,"#trackChapterStart()"),this._canProcess()&&this._startSessionIfNeeded("#trackChapterStart")&&this._trigger(A)},c.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,"trackChapterComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackChapterComplete")&&this._trigger(B)},c.prototype.trackAdStart=function(){this._logger.info(this._logTag,"#trackAdStart()"),this._canProcess()&&this._startSessionIfNeeded("trackAdStart")&&(this._trigger(u),this._isTrackingAd=!0)},c.prototype.trackAdComplete=function(){this._logger.info(this._logTag,"#trackAdComplete()"),this._canProcess()&&this._startSessionIfNeeded("trackAdComplete")&&(this._trigger(v),this._isTrackingAd=!1)},c.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,"#trackBitrateChange()"),this._canProcess()&&this._startSessionIfNeeded("trackBitrateChange")&&this._trigger(C)},c.prototype.trackVideoPlayerError=function(a){if(this._logger.info(this._logTag,"#trackVideoPlayerError(errorId="+a+")"),this._startSessionIfNeeded("trackVideoPlayerError")){var b={};b[I]=l,b[J]=a,this._trigger(D,b)}},c.prototype.trackApplicationError=function(a){if(this._logger.info(this._logTag,"#trackApplicationError(errorId="+a+")"),this._startSessionIfNeeded("trackApplicationError")){var b={};b[I]=k,b[J]=a,this._trigger(D,b)}},c.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoIdleStart",this._cmdVideoIdleStart),this._pluginManager.comply(this,"handleVideoIdleResume",this._cmdVideoIdleResume)},c.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new e(j,E),this,"handleVideoIdleStart"),this._pluginManager.registerBehaviour(new e(j,F),this,"handleVideoIdleResume",[new d(i,"ad.isInAd","isInAd"),new d(i,"chapter.isInChapter","isInChapter")])},c.prototype._setupDataResolver=function(){function a(){return g.video?g.video:(g.video=h._delegate.getVideoInfo(),h._logger.info(h._logTag,"Data from delegate > VideoInfo: "+g.video),g.video)}function b(){return g.ad?g.ad:(g.ad=h._delegate.getAdInfo(),h._logger.info(h._logTag,"Data from delegate > AdInfo: "+g.ad),g.ad)}function c(){return g.pod?g.pod:(g.pod=h._delegate.getAdBreakInfo(),h._logger.info(h._logTag,"Data from delegate > AdBreakInfo: "+g.pod),g.pod)}function d(){return g.chapter?g.chapter:(g.chapter=h._delegate.getChapterInfo(),h._logger.info(h._logTag,"Data from delegate > ChapterInfo: "+g.chapter),g.chapter)}function e(){return g.qos?g.qos:(g.qos=h._delegate.getQoSInfo(),h._logger.info(h._logTag,"Data from delegate > QoSInfo: "+g.qos),g.qos)}var f={},g={},h=this;f["video.id"]=function(){var b=a(),c=b?b.id:null;return h._logger.debug(h._logTag,"Resolving video.id: "+c),c},f["video.name"]=function(){var b=a(),c=b?b.name:null;return h._logger.debug(h._logTag,"Resolving video.name: "+c),c},f["video.length"]=function(){var b=a(),c=b?b.length:NaN;return h._logger.debug(h._logTag,"Resolving video.length: "+c),c},f["video.playerName"]=function(){var b=a(),c=b?b.playerName:null;return h._logger.debug(h._logTag,"Resolving video.playerName: "+c),c},f["video.streamType"]=function(){var b=a(),c=b?b.streamType:null;return h._logger.debug(h._logTag,"Resolving video.streamType: "+c),c},f["video.playhead"]=function(){var b=a(),c=b?b.playhead:NaN;return h._logger.debug(h._logTag,"Resolving video.playhead: "+c),c},f["video.resumed"]=function(){var b=a(),c=!!b&&b.resumed;return h._logger.debug(h._logTag,"Resolving video.resumed: "+c),c},f["video.playheadStalled"]=function(){return this._playheadStalled},f["pod.name"]=function(){var a=c(),b=a?a.name:null;return h._logger.debug(h._logTag,"Resolving pod.name: "+b),b},f["pod.playerName"]=function(){var a=c(),b=a?a.playerName:null;return h._logger.debug(h._logTag,"Resolving pod.playerName: "+b),b},f["pod.position"]=function(){var a=c(),b=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving pod.position: "+b),b},f["pod.startTime"]=function(){var a=c(),b=a?a.startTime:NaN;return h._logger.debug(h._logTag,"Resolving pod.startTime: "+b),b},f["ad.isInAd"]=function(){var a=b(),c=null!=a;return h._logger.debug(h._logTag,"Resolving ad.isInAd: "+c),c},f["ad.isInAdBreak"]=function(){var a=c(),b=null!=a;return h._logger.debug(h._logTag,"Resolving ad.isInAdBreak: "+b),b},f["ad.id"]=function(){var a=b(),c=a?a.id:null;return h._logger.debug(h._logTag,"Resolving ad.id: "+c),c},f["ad.name"]=function(){var a=b(),c=a?a.name:null;return h._logger.debug(h._logTag,"Resolving ad.name: "+c),c},f["ad.length"]=function(){var a=b(),c=a?a.length:NaN;return h._logger.debug(h._logTag,"Resolving ad.length: "+c),c},f["ad.position"]=function(){var a=b(),c=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving ad.position: "+c),c},f["chapter.isInChapter"]=function(){var a=d(),b=null!=a;return h._logger.debug(h._logTag,"Resolving chapter.isInChapter: "+b),b},f["chapter.name"]=function(){var a=d(),b=a?a.name:null;return h._logger.debug(h._logTag,"Resolving chapter.name: "+b),b},f["chapter.length"]=function(){var a=d(),b=a?a.length:NaN;return h._logger.debug(h._logTag,"Resolving chapter.length: "+b),b},f["chapter.position"]=function(){var a=d(),b=a?a.position:NaN;return h._logger.debug(h._logTag,"Resolving chapter.position: "+b),b},f["chapter.startTime"]=function(){var a=d(),b=a?a.startTime:NaN;return h._logger.debug(h._logTag,"Resolving chapter.startTime: "+b),b},f["qos.bitrate"]=function(){var a=e(),b=a?a.bitrate:NaN;return h._logger.debug(h._logTag,"Resolving qos.bitrate: "+b),b},f["qos.fps"]=function(){var a=e(),b=a?a.fps:NaN;return h._logger.debug(h._logTag,"Resolving qos.fps: "+b),b},f["qos.droppedFrames"]=function(){var a=e(),b=a?a.droppedFrames:NaN;return h._logger.debug(h._logTag,"Resolving qos.droppedFrames: "+b),b},f["qos.startupTime"]=function(){var a=e(),b=a?1e3*a.startupTime:NaN;return h._logger.debug(h._logTag,"Resolving qos.startupTime: "+b),b},this._dataResolver=function(a){if(!a||0==a.length)return null;g={};for(var b=null,c=0;c<a.length;c++){var d=a[c];b=b||{},b[d]=f.hasOwnProperty(d)?f[d].call(this):null}return b}},c.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,"#_trackPlayheadStall()"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(t)))},c.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,this._playheadStalled&&(this._logger.info(this._logTag,"#_trackExitStall()"),this._playheadStalled=!1,this._trigger(s)))},c.prototype._startPlayheadTimer=function(){var a=this;this._playheadTimer||(this._playheadTimer=setInterval(function(){if(a._canProcess()){var b=a._dataResolver(["ad.isInAd","video.playhead"]);if(a._isTrackingAd)a._playheadStalled&&a._trackExitStall(),b.hasOwnProperty("ad.isInAd")&&!b["ad.isInAd"]&&(a._isTrackingAd=!1);else{var c=b["video.playhead"];c!=a._previousPlayhead?a._trackExitStall():a._previousPlayhead>=0&&c==a._previousPlayhead&&(a._stalledPlayheadCount++,a._stalledPlayheadCount==L&&a._trackPlayheadStall()),a._previousPlayhead=c}}},K))},c.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},c.prototype._startSessionIfNeeded=function(a){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,"#"+a+"() > Tracking session auto-start."),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,"#"+a+"() > No active tracking session."),!1)};var h="player",i=h,j="adobe-heartbeat",k="sourceErrorExternal",l="sourceErrorSDK",m="video_load",n="video_unload",o="video_start",p="video_resume",q="video_complete",r="timed_metadata",s="play",t="pause",u="ad_start",v="ad_complete",w="buffer_start",x="buffer_complete",y="seek_start",z="seek_complete",A="chapter_start",B="chapter_complete",C="bitrate_change",D="track_error",E="video_idle_start",F="video_idle_resume",G="callback",H="filter_report",I="source",J="error_id",K=1001,L=2;b.VideoPlayerPlugin=c}(a.ADB.core,b),a.ADB.va.plugins.videoplayer||(a.ADB.va.plugins.videoplayer=b)}(this);!function(a){if("undefined"==typeof b)var b={};b.clock||(b.clock={}),b.context||(b.context={}),b.filter||(b.filter={}),b.model||(b.model={}),b.network||(b.network={}),function(a,b){"use strict";function c(a,b,c,d,e){if(!b)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=b,!a)throw new Error("Reference to the pluginManager object cannot be NULL");if(this._pluginManager=a,!e)throw new Error("Reference to the logger object cannot be NULL");this._logTag="ah::Timer."+c,this._logger=e,this._isDestroyed=!1,this._createTimer(c,d),this._installHandlers()}var d=a.Event;c.KEY_NAME="name",c.KEY_INTERVAL="interval",c.KEY_RESET="reset",c.prototype.resume=function(a){this._logger.debug(this._logTag,"Starting timer: "+this._name);var b={};b[c.KEY_NAME]=e+"."+this._name,b[c.KEY_RESET]=a,this._pluginManager.command(f,i,b)},c.prototype.pause=function(a){this._logger.debug(this._logTag,"Stopping timer: "+this._name);var b={};b[c.KEY_NAME]=e+"."+this._name,b[c.KEY_RESET]=a,this._pluginManager.command(f,h,b)},c.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0,this._uninstallHandlers();var a={};a[c.KEY_NAME]=e+"."+this._name,this._pluginManager.command(f,j,a)}},c.prototype.setInterval=function(a){var b=k+"."+e+"."+this._name,c=this._pluginManager.request(f,[b])[b];this.pause(!0),this._createTimer(this._name,a),c||this.resume(!0)},c.prototype._cmdResume=function(a){var b=!1;null!=a&&a.hasOwnProperty(c.KEY_RESET)&&(b=a[c.KEY_RESET]),this.resume(b)},c.prototype._cmdPause=function(a){var b=!1;null!=a&&a.hasOwnProperty(c.KEY_RESET)&&(b=a[c.KEY_RESET]),this.pause(b)},c.prototype._onTick=function(a,b){this._channel.trigger(new d("clock:"+this._name+".tick",b))},c.prototype._installHandlers=function(){this._channel.comply("clock:"+this._name+".resume",this._cmdResume,this),this._channel.comply("clock:"+this._name+".pause",this._cmdPause,this),this._pluginManager.on(f,e+"."+this._name+".tick",this._onTick,this)},c.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},c.prototype._createTimer=function(a,b){this._name=a,this._interval=b;var d={};d[c.KEY_NAME]=e+"."+this._name,d[c.KEY_INTERVAL]=this._interval,this._pluginManager.command(f,g,d)};var e="heartbeat",f="service.clock",g="create",h="pause",i="resume",j="destroy",k="is_paused";b.clock.Timer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,f,h,d)}var d=a.Event,e=b.clock.Timer;a.extend(c,e),c.prototype._onCheckStatusComplete=function(a){var b=a.data[l];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+b+")"),b){if(b==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");b>g?(this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Interval value too large: "+b),this.setInterval(g)):(this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+b),this.setInterval(b))}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(h)},c.prototype._getSettings=function(a){this._logger.debug(this._logTag,"#_getSettings()"),this._channel.trigger(new d(i))},c.prototype._installHandlers=function(){c.__super__._installHandlers.call(this),this._channel.on(j,this._getSettings,this),this._channel.on(k,this._onCheckStatusComplete,this),this._channel.reply(l,function(){return this._interval},this)};var f="check_status",g=600,h=60,i="clock:check_status.tick",j="clock:check_status.get_settings",k="net:check_status_complete",l="check_status_interval";b.clock.CheckStatusTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d)}var d=b.clock.Timer;a.extend(c,d),c.prototype._onCheckStatusComplete=function(a){var b=a.data[g];if(this._logger.debug(this._logTag,"#_onCheckStatusComplete(interval="+b+")"),b){if(b==this._interval)return void this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval value not changed.");this._logger.debug(this._logTag,"#_onCheckStatusComplete() > Interval changed to: "+b),this.setInterval(b)}else this._logger.warn(this._logTag,"#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(f)},c.prototype._installHandlers=function(){c.__super__._installHandlers.call(this),this._channel.on(h,this._onCheckStatusComplete,this),this._channel.reply(g,function(){return this._interval},this)};var e="reporting",f=10,g="reporting_interval",h="net:check_status_complete";b.clock.ReportingTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d)}var d=b.clock.Timer;a.extend(c,d);var e="idle",f=1800;b.clock.IdleTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,d){c.__super__.constructor.call(this,a,b,e,f,d)}var d=b.clock.Timer;a.extend(c,d);var e="flush_filter",f=.25;b.clock.FlushFilterTimer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,c){if(!a)throw new Error("Reference to the pluginManager object cannot be NULL");if(!b)throw new Error("Reference to the channel object cannot be NULL");if(!c)throw new Error("Reference to the logger object cannot be NULL");this._isDestroyed=!1,this._reportingTimer=new f(a,b,c),this._checkStatusTimer=new d(a,b,c),this._flushFilterTimer=new e(a,b,c),this._idleTimer=new g(a,b,c)}var d=b.clock.CheckStatusTimer,e=b.clock.FlushFilterTimer,f=b.clock.ReportingTimer,g=b.clock.IdleTimer;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},b.clock.Clock=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){this.value=a,this.hint=b}function d(a){this.realm=a,this.data={}}c.HINT_SHORT="short",d.prototype.setField=function(a,b,d){this.data[a]=new c(b,d)},d.prototype._createAccessor=function(a,b,c){var d=this;return function(){return arguments.length&&(d[a]=arguments[0],d.setField(b,arguments[0],c)),d[a]}},b.model.Dao=d,b.model.DaoField=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"asset"),this.adId=this._createAccessor("_adId","ad_id",null),this.sid=this._createAccessor("_sid","ad_sid",null),this.resolver=this._createAccessor("_resolver","resolver",null),this.podId=this._createAccessor("_podId","pod_id",null),this.podPosition=this._createAccessor("_podPosition","pod_position",null),this.podOffset=this._createAccessor("_podOffset","pod_offset",null),this.podName=this._createAccessor("_podName","pod_name",null),this.adLength=this._createAccessor("_adLength","ad_length",null),this.adName=this._createAccessor("_adName","ad_name",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.adId(a.adId()),this.sid(a.sid()),this.resolver(a.resolver()),this.podId(a.podId()),this.podPosition(a.podPosition()),this.podOffset(a.podOffset()),this.podName(a.podName()),this.adLength(a.adLength()),this.adName(a.adName())}else this.adId(""),this.sid(""),this.resolver(""),this.podId(""),this.podPosition(""),this.podOffset(0),this.podName(""),this.adLength(0),this.adName("")}var d=b.model.Dao;a.extend(c,d),b.model.AdDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"sc"),this.reportSuiteId=this._createAccessor("_reportSuiteId","rsid",null),this.trackingServer=this._createAccessor("_trackingServer","tracking_server",null),this.ssl=this._createAccessor("_ssl","ssl",e.HINT_SHORT),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.reportSuiteId(a.reportSuiteId()),this.trackingServer(a.trackingServer()),this.ssl(a.ssl())}else this.reportSuiteId(""),this.trackingServer(""),this.ssl(0)}var d=b.model.Dao,e=b.model.DaoField;a.extend(c,d),b.model.AdobeAnalyticsDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.id=this._createAccessor("_id","chapter_id",null),this.sid=this._createAccessor("_sid","chapter_sid",null),this.name=this._createAccessor("_name","chapter_name",null),this.position=this._createAccessor("_position","chapter_pos",null),this.length=this._createAccessor("_length","chapter_length",null),this.offset=this._createAccessor("_offset","chapter_offset",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.id(a.id()),this.sid(a.sid()),this.name(a.name()),this.position(a.position()),this.length(a.length()),this.offset(a.offset())}else this.id(""),this.sid(""),this.name(""),this.position(0),this.length(0),this.offset(0)}var d=b.model.Dao;a.extend(c,d),b.model.ChapterDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"asset"),this.type=this._createAccessor("_type","type",null),this.videoId=this._createAccessor("_videoId","video_id",null),this.publisher=this._createAccessor("_publisher","publisher",null),this.adData=this._createAccessor("_adData","ad_data",null),this.chapterData=this._createAccessor("_chapterData","chapter_data",null),this.length=this._createAccessor("_length","length",null),this.name=this._createAccessor("_name","name",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type()),this.name(a.name()),this.videoId(a.videoId()),this.publisher(a.publisher()),this.length(a.length());var b=a.adData()?new e(a.adData()):null;this.adData(b);var d=a.chapterData()?new f(a.chapterData()):null;this.chapterData(d)}else this.type(""),this.name(""),this.videoId(""),this.publisher(""),this.length(0),this.adData(null),this.chapterData(null)}var d=b.model.Dao,e=b.model.AdDao,f=b.model.ChapterDao;a.extend(c,d),c.TYPE_AD="ad",c.TYPE_MAIN_CONTENT="main",b.model.AssetDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"event"),this.type=this._createAccessor("_type","type",null),this.duration=this._createAccessor("_duration","duration",null),this.playhead=this._createAccessor("_playhead","playhead",null),this.id=this._createAccessor("_id","id",null),this.source=this._createAccessor("_source","source",null),this.ts=this._createAccessor("_ts","ts",null),this.prevTs=this._createAccessor("_prevTs","prev_ts",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type()),this.duration(a.duration()),this.playhead(a.playhead()),this.id(a.id()),this.source(a.source()),this.ts(a.ts()),this.prevTs(a.prevTs())}else this.type(""),this.duration(0),this.playhead(0),this.id(""),this.source(""),this.ts(0),this.prevTs(-1)}var d=b.model.Dao;a.extend(c,d),c.EVENT_TYPE_AA_START="aa_start",c.EVENT_TYPE_AA_AD_START="aa_ad_start",c.EVENT_TYPE_START="start",c.EVENT_TYPE_RESUME="resume",c.EVENT_TYPE_CHAPTER_START="chapter_start",c.EVENT_TYPE_CHAPTER_COMPLETE="chapter_complete",c.EVENT_TYPE_PLAY="play",c.EVENT_TYPE_PAUSE="pause",c.EVENT_TYPE_STALL="stall",c.EVENT_TYPE_BUFFER="buffer",c.EVENT_TYPE_BITRATE_CHANGE="bitrate_change",c.EVENT_TYPE_ERROR="error",c.EVENT_TYPE_COMPLETE="complete",b.model.EventDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.bitrate=this._createAccessor("_bitrate","bitrate",null),this.fps=this._createAccessor("_fps","fps",null),this.droppedFrames=this._createAccessor("_droppedFrames","dropped_frames",null),this.startupTime=this._createAccessor("_startup_time","startup_time",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.bitrate(a.bitrate()),this.fps(a.fps()),this.droppedFrames(a.droppedFrames()),this.startupTime(a.startupTime()),this.isStartupTimeOverridden=a.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}var d=b.model.Dao;a.extend(c,d),b.model.QoSDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"sp"),this.ovp=this._createAccessor("_ovp","ovp",null),this.sdk=this._createAccessor("_sdk","sdk",null),this.channel=this._createAccessor("_channel","channel",null),this.playerName=this._createAccessor("_playerName","player_name",null),this.libVersion=this._createAccessor("_libVersion","hb_version",null),this.apiLevel=this._createAccessor("_apiLevel","hb_api_lvl",null),
arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.ovp(a.ovp()),this.sdk(a.sdk()),this.channel(a.channel()),this.playerName(a.playerName()),this.libVersion(a.libVersion()),this.apiLevel(a.apiLevel())}else this.ovp(e),this.sdk(e),this.channel(e),this.playerName(""),this.libVersion(""),this.apiLevel(0)}var d=b.model.Dao;a.extend(c,d);var e="unknown";b.model.ServiceProviderDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"event"),this.sessionId=this._createAccessor("_sessionId","sid",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.sessionId(a.sessionId())}else this.sessionId(null)}var d=b.model.Dao;a.extend(c,d),b.model.SessionDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"stream"),this.type=this._createAccessor("_type","type",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.type(a.type())}else this.type(null)}var d=b.model.Dao;a.extend(c,d),b.model.StreamDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"user"),this.analyticsVisitorId=this._createAccessor("_analyticsVisitorId","aid",null),this.marketingCloudVisitorId=this._createAccessor("_marketingCloudVisitorId","mid",null),this.visitorId=this._createAccessor("_visitorId","id",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.analyticsVisitorId(a.analyticsVisitorId()),this.marketingCloudVisitorId(a.marketingCloudVisitorId()),this.visitorId(a.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}var d=b.model.Dao;a.extend(c,d),b.model.UserDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(){if(c.__super__.constructor.call(this,"aam"),this.audienceManagerBlob=this._createAccessor("_audienceManagerBlob","blob",null),this.audienceManagerLocationHint=this._createAccessor("_audienceManagerLocationHint","loc_hint",null),arguments.length&&arguments[0]instanceof c){var a=arguments[0];this.audienceManagerBlob(a.audienceManagerBlob()),this.audienceManagerLocationHint(a.audienceManagerLocationHint())}else this.audienceManagerBlob(null),this.audienceManagerLocationHint(null)}var d=b.model.Dao;a.extend(c,d),b.model.AudienceManagerDao=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b,c,i,j){this.eventData=new e,this.eventData.type(b),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(c),this.assetData=new f(a._assetData),this.streamData=new g(a._streamData),this.qosData=new h(a._qosData),this.cuserData=d.clone(a._cuserData),this.meta=i,this.callback=j,this.filterReport=!0}var d=a.ObjectUtils,e=b.model.EventDao,f=b.model.AssetDao,g=b.model.StreamDao,h=b.model.QoSDao;b.model.TrackItem=c}(a.ADB.va.utils,b),function(a,b){"use strict";function c(a,b,c,i,j,k){this.adobeAnalyticsData=a,this.userData=b,this.aamData=c,this.serviceProviderData=i,this.sessionData=j,this.eventData=new e(k.eventData),this.assetData=new f(k.assetData),this.streamData=new g(k.streamData),this.qosData=new h(k.qosData),this.cuserData=d.clone(k.cuserData),this.meta=d.clone(k.meta),this.callback=k.callback,this.filterReport=k.filterReport}var d=a.ObjectUtils,e=b.model.EventDao,f=b.model.AssetDao,g=b.model.StreamDao,h=b.model.QoSDao;b.model.CUserDao;b.model.Report=c}(a.ADB.va.utils,b),function(a){"use strict";function b(){}b.prototype.serializeReport=function(a){},b.prototype.serializeDao=function(a){},b.prototype.serializeMap=function(a){},b.prototype.serializeNumber=function(a,b,c,d){},b.prototype.serializeString=function(a,b,c,d){},a.model.ISerializer=b}(b),function(a,b){"use strict";function c(a){if(!a)throw new Error("Reference to the logger object cannot be NULL");this._logger=a}var d=b.model.Dao,e=b.model.DaoField,f=b.model.ISerializer;a.extend(c,f),c.prototype.serializeReport=function(a){var b=[];return b.push(this.serializeDao(a.adobeAnalyticsData)),b.push(this.serializeDao(a.userData)),b.push(this.serializeDao(a.aamData)),b.push(this.serializeMap(a.cuserData,"cuser")),b.push(this.serializeDao(a.serviceProviderData)),b.push(this.serializeDao(a.sessionData)),b.push(this.serializeDao(a.eventData)),b.push(this.serializeDao(a.assetData)),b.push(this.serializeDao(a.streamData)),b.push(this.serializeDao(a.qosData)),b.push(this.serializeMap(a.meta,"meta")),{serializedOutput:b.filter(function(a){return!!a}).join("&"),callback:a.callback}},c.prototype.serializeDao=function(a){var b=this._processDao(a);return b.filter(function(a){return!!a}).join("&")},c.prototype.serializeMap=function(a,b){var c=[],d=b?b:"meta";for(var e in a)a.hasOwnProperty(e)&&a[e]&&c.push("s:"+d+":"+e+"="+window.encodeURIComponent(a[e]));return c.join("&")},c.prototype.serializeNumber=function(a,b,c,d){var f=h;return null==b||isNaN(b)?null:(d===e.HINT_SHORT&&(f=i),f+":"+c+":"+a+"="+Math.floor(b))},c.prototype.serializeString=function(a,b,c,d){return b?j+":"+c+":"+a+"="+window.encodeURIComponent(b):null},c.prototype._processDao=function(a){var b=[];for(var c in a.data)if(a.data.hasOwnProperty(c)){var e=a.data[c],f=e.value,h=e.hint,i=null,j=a.realm;if(null==f)continue;"number"==typeof f?i=this.serializeNumber(c,f,j,h):"string"==typeof f?i=this.serializeString(c,f,j,h):f instanceof d?i=this.serializeDao(f):this._logger.warn(g,"#_processDao() > Unable to serialize DAO. Field: "+c+". Value: "+f+"."),i&&b.push(i)}return b};var g="ah::QuerystringSerializer",h="l",i="h",j="s";b.model.QuerystringSerializer=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(!a)throw new Error("Reference to the data object cannot be NULL");if(this._data=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b}c.prototype.parse=function(){var a,b,c,i,j;if(window.DOMParser){var k=new window.DOMParser;j=k.parseFromString(this._data,"text/xml")}else j=new window.ActiveXObject("Microsoft.XMLDOM"),j.async=!1,j.loadXML(this._data);var l;l=parseInt(j.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10),l&&(a=l),l=parseInt(j.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10),l&&(b=l),l=parseInt(j.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10),l&&(c=1==l),j.getElementsByTagName("nielsenEnabled")[0]?(l=parseInt(j.getElementsByTagName("nielsenEnabled")[0].childNodes[0].nodeValue,10),i=1==l):i=!0;var m={};return m[e]=a,m[f]=b,m[g]=c,m[h]=i,this._logger.debug(d,"#parse() > Obtained configuration settings."),m};var d="ah::SettingsParser",e="reporting_interval",f="check_status_interval",g="track_external_errors",h="nielsen_enabled";b.network.SettingsParser=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._quietMode=!1,this._visitorOptedOut=!1,this._prevReportSent=null,!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._serializer=new i(b),this._installEventListeners()}var d=a.Event,e=a.URLRequestMethod,f=a.URLRequest,g=a.URLLoader,h=b.network.SettingsParser,i=b.model.QuerystringSerializer;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(j,"#destroy()"),this._uninstallEventListeners())},c.prototype._onApiConfig=function(a){var b=a.data;this._logger.debug(j,"#_onApiConfig(sb_server="+b[k]+", check_status_server="+b[l]+", publisher="+b[m]+", quiet_mode="+b[n]+", ssl="+b[o]+")"),this._trackingServer=this._updateRequestProtocol(b[k],b[o]),this._checkStatusServer=this._updateRequestProtocol(b[l],b[o]),this._publisher=b[m],this._quietMode=b[n],this._isConfigured=!0},c.prototype._onUpdateVisitorOptOut=function(a){var b=a.data;this._logger.debug(j,"#_onUpdateVisitorOptOut(visitor_opt_out="+b[q]+")"),this._visitorOptedOut=b[q]},c.prototype._onFilterReportAvailable=function(a){var b=a.data;if(!this._isConfigured)return void this._logger.warn(j,"#_onFilterReportAvailable() > Unable to send request: not configured.");var c=b[p],h=this._serializer.serializeReport(c),i=this._trackingServer+"/?"+h.serializedOutput;if(this._prevReportSent&&this._prevReportSent.eventData&&c.eventData&&this._prevReportSent.eventData.playhead==c.eventData.playhead&&this._prevReportSent.eventData.ts==c.eventData.ts&&this._prevReportSent.eventData.prevTs==c.eventData.prevTs&&this._prevReportSent.eventData.type==c.eventData.type)return void this._logger.debug(j,"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\n"+i);this._prevReportSent=c;var k=new f(i,e.GET);this._logger.debug(j,"#_onFilterReportAvailable() > "+k.url);var l=this,m=function(a){o.close(),h.callback&&h.callback.call(null)},n=function(a){o.close(),l._logger.warn(j,"#_onFilterReportAvailable() > Failed to send heartbeat report."),h.callback&&h.callback.call(null)};if(!this._quietMode&&!this._visitorOptedOut){var o=new g;o.addEventListener(d.SUCCESS,m,this),o.addEventListener(d.ERROR,n,this),o.load(k)}},c.prototype._onClockCheckStatusTick=function(a){function b(a){if(a.data){var b=new h(a.data.response,i._logger),c=b.parse();c?i._channel.trigger(new d(v,c)):i._logger.warn(j,"#_onClockCheckStatusTick() > Failed to parse the config. settings.")}n.close()}function c(a){i._logger.warn(j,"#_onClockCheckStatusTick() > Failed to obtain the config. settings."),n.close()}if(!this._isConfigured)return void this._logger.warn(j,"#_onClockCheckStatusTick() > Unable to send request: not configured.");if(!this._publisher)return void this._logger.warn(j,"#_onClockCheckStatusTick() > Publisher is NULL.");var i=this,k=this._publisher.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),l=this._checkStatusServer+k+".xml?r="+(new Date).getTime(),m=new f(l,e.GET),n=new g;n.addEventListener(d.SUCCESS,b,this),n.addEventListener(d.ERROR,c,this),this._logger.debug(j,"#_onClockCheckStatusTick() > Get new settings from: "+l),n.load(m)},c.prototype._updateRequestProtocol=function(a,b){var c=a;return 0===c.indexOf("http://")?c=c.slice(7):0===c.indexOf("https://")&&(c=c.slice(8)),b?"https://"+c:"http://"+c},c.prototype._installEventListeners=function(){this._channel.on(r,this._onApiConfig,this),this._channel.on(s,this._onUpdateVisitorOptOut,this),this._channel.on(t,this._onFilterReportAvailable,this),this._channel.on(u,this._onClockCheckStatusTick,this)},c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var j="ah::Network",k="tracking_server",l="check_status_server",m="publisher",n="quiet_mode",o="ssl",p="report",q="visitor_opt_out",r="api:config",s="api:update_visitor_optout",t="filter:data_available",u="clock:check_status.tick",v="net:check_status_complete";b.network.Network=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){if(!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new i,this._installEventListeners()}function d(a){var b=[];return a&&a.forEach(function(a){a.eventData.type()==k.EVENT_TYPE_PAUSE||a.eventData.type()==k.EVENT_TYPE_STALL?(!a.filterReport||a.eventData.duration()>u)&&b.push(a):b.push(a)}),b}function e(a){var b=-1,c=-1,d=[];return a.forEach(function(a){a.eventData.type()==k.EVENT_TYPE_START?a.assetData.type()==l.TYPE_MAIN_CONTENT?b==-1?b=d.push(a)-1:(a.eventData.prevTs(-1),d[b]=a):c==-1?c=d.push(a)-1:(a.eventData.prevTs(-1),d[c]=a):d.push(a)}),d}function f(a){var b=[];return a.forEach(function(c){if(c.eventData.type()==k.EVENT_TYPE_PLAY){if(c.eventData.duration()>t)b.push(c);else if(0==c.eventData.duration()&&c.assetData.type()==l.TYPE_MAIN_CONTENT){var d=g(a);d.indexOf(c)==d.length-1&&b.push(c)}}else b.push(c)}),b}function g(a){var b=[];return a.forEach(function(a){a.eventData.type()!=k.EVENT_TYPE_PLAY&&a.eventData.type()!=k.EVENT_TYPE_BUFFER&&a.eventData.type()!=k.EVENT_TYPE_START||b.push(a)}),b}var h=a.radio.Command,i=a.radio.CommandQueue,j=a.Event,k=b.model.EventDao,l=b.model.AssetDao;c.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(w,"#destroy()"),this._uninstallEventListeners(),this.clear())},c.prototype.clear=function(){this._logger.debug(w,"#clear()"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},c.prototype.flush=function(){this._workQueue.addCommand(new h(this._flushBufferReport,this))},c.prototype._bufferReport=function(a){if(!this._isDestroyed){var b=a[q];if(b){var c=b.sessionData.sessionId();this._reportBuffer[c]=this._reportBuffer[c]||[],this._reportBuffer[c].push(b)}if(!this._isBufferingInProgress){this._isBufferingInProgress=!0;var d={};d[p]=!0,d[r]=1,this._channel.command(s,d)}}},c.prototype._flushBufferReport=function(){function a(a){if(a)for(var c=0;c<a.length;c++){var d=a[c],e=d.sessionData.sessionId();b._tsHistory[e]=b._tsHistory[e]||{};var f=d.eventData.type()+"."+(d.assetData.type()==l.TYPE_AD?d.assetData.adData().adId():d.assetData.videoId());b._tsHistory[e].hasOwnProperty(f)&&d.eventData.prevTs(b._tsHistory[e][f]),b._tsHistory[e][f]=d.eventData.ts()}}if(!this._isDestroyed){var b=this;for(var c in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(c)){var g=f(e(d(this._reportBuffer[c])));a(g);for(var h=0;h<g.length;h++){var i=g[h],k={};k[q]=i,this._channel.trigger(new j(n,k))}}this._reportBuffer={};var m=this._channel.request(v),o=this._tsHistory[m]||{};this._tsHistory={},this._tsHistory[m]=o,this._isBufferingInProgress=!1}},c.prototype._onContextReportAvailable=function(a){var b=a.data;this._workQueue.addCommand(new h(this._bufferReport,this,[b]))},c.prototype._onClockFlushFilterTick=function(a){this.flush()},c.prototype._installEventListeners=function(){this._channel.on(m,this._onContextReportAvailable,this),this._channel.on(o,this._onClockFlushFilterTick,this)},c.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var m="context:report_available",n="filter:data_available",o="clock:flush_filter.tick",p="reset",q="report",r="repeat_count",s="clock:flush_filter.resume",t=250,u=250,v="session_id",w="ah::ReportFilter";b.filter.ReportFilter=c}(a.ADB.core,b),function(a,b){"use strict";function c(a,b){this._onFail={fn:a,ctx:b}}var d=a.ErrorInfo;c.prototype.validateFields=function(a,b){if(!a)return this._fail("Data cannot be null");if(b)for(var c=0;c<b.length;c++){var d=b[c];switch(d){case"videoId":if(!a.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof a.videoId)return this._fail("The ID for the main video must be a String.");if(""===a.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!a.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof a.streamType)return this._fail("The stream type for the main video must be a String.");if(""===a.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"videoLength":if(!a.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof a.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(a.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"playhead":if(!a.hasOwnProperty("playhead"))return this._fail("The playhead for the main video must be specified.");if("number"!=typeof a.playhead)return this._fail("The playhead for the main video must be a Number.");if(isNaN(a.playhead))return this._fail("The playhead for the main video cannot be NaN.");break;case"playerName":if(!a.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof a.playerName)return this._fail("The player name for the main video must be a String.");if(""===a.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"rsid":if(!a.hasOwnProperty("rsid"))return this._fail("account (rsid) is required and has to be set in the AppMeasurement instance.");if("string"!=typeof a.rsid)return this._fail("account (rsid) of the AppMeasurement instance must be a String.");if(""===a.rsid)return this._fail("account (rsid) of the AppMeasurement instance  cannot be an empty string.");break;case"trackingServer":if(!a.hasOwnProperty("trackingServer"))return this._fail("trackingServer is required and has to be set in the AppMeasurement instance.");if("string"!=typeof a.trackingServer)return this._fail("trackingServer of the AppMeasurement instance must be a String.");if(""===a.trackingServer)return this._fail("trackingServer of the AppMeasurement instance cannot be an empty string.");break;case"podPlayerName":if(!a.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof a.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===a.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!a.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof a.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(a.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!a.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof a.adId)return this._fail("The ad ID must be a String.");if(""===a.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!a.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof a.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(a.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"chapterPosition":if(!a.hasOwnProperty("chapterPosition"))return this._fail("Position (index) of the chapter must be specified.");if("number"!=typeof a.chapterPosition)return this._fail("Position (index) of the chapter must be a Number.");if(isNaN(a.chapterPosition))return this._fail("Position (index) of the chapter cannot be NaN.");break;case"chapterOffset":if(!a.hasOwnProperty("chapterOffset"))return this._fail("Chapter start-time (offset) must be specified.");if("number"!=typeof a.chapterOffset)return this._fail("Chapter start-time (offset) must be a Number.");if(isNaN(a.chapterOffset))return this._fail("Chapter start-time (offset) cannot be NaN.");break;case"chapterLength":if(!a.hasOwnProperty("chapterLength"))return this._fail("The length of the chapter must be specified.");if("number"!=typeof a.chapterLength)return this._fail("The length of the chapter must be a Number.");if(isNaN(a.chapterLength))return this._fail("The length of the chapter cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+d)}}return!0},c.prototype._fail=function(a){var b=new d("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,b),!1},b.context.InputDataValidator=c}(a.ADB.va,b),function(a,b){"use strict";function c(a,b){if(!b)throw new Error("Reference to the logger object cannot be NULL");if(this._logger=b,!a)throw new Error("Reference to the context object cannot be NULL");this._context=a}var d=b.model.Report;c.prototype.createReportForItem=function(a){return this._logger.debug(e,"Creating report for item: "+a.eventData.type()),new d(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,a)};var e="ah::ReportFactory";b.context.ReportFactory=c}(a.ADB.core,b),function(a,b,c,d){"use strict";function e(a,b){if(!a)throw new Error("Reference to the channel object cannot be NULL");if(this._channel=a,!b)throw new Error("Reference to the logger object cannot be NULL");this._logger=b,this._lastInBandItem=null,this._autoComputedStartupTime=0,this._reportingInterval=fa,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new j,this._serviceProviderData=new k,this._userData=new l,this._aamData=new m,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._activeAssetId=null,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new u(this,this._logger),this._inputDataValidator=new v(function(a){this._logger.error(w,a.getMessage()+" | "+a.getDetails()),this._channel.trigger(new h(y,a))},this),this._stashedChapterData=null,this._stashedAdData=null,this._trackExternalErrors=!0,this._installEventListeners()}var f=c.md5,g=c.ObjectUtils,h=a.Event,i=d.model.SessionDao,j=d.model.AdobeAnalyticsDao,k=d.model.ServiceProviderDao,l=d.model.UserDao,m=d.model.AudienceManagerDao,n=d.model.EventDao,o=d.model.AssetDao,p=d.model.StreamDao,q=d.model.QoSDao,r=d.model.AdDao,s=d.model.ChapterDao,t=d.model.TrackItem,u=d.context.ReportFactory,v=d.context.InputDataValidator;e.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(w,"#destroy()"),this._uninstallEventListeners())},e.prototype._onApiAnalyticsStart=function(a){this._logger.debug(w,"#_onApiAnalyticsStart()");var b=a.data;if(this._checkCall("_onApiAnalyticsStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._userData.visitorId(b.vid),this._userData.analyticsVisitorId(b.aid),this._userData.marketingCloudVisitorId(b.mid),this._aamData.audienceManagerBlob(b.blob),this._aamData.audienceManagerLocationHint(b.loc_hint),b.customerIDs&&(this._cuserData=b.customerIDs),this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_AA_START,b.playhead,null,b._eventData[E]);c.assetData.adData(null),c.assetData.type(o.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(c)}},e.prototype._onApiAnalyticsAdStart=function(a){this._logger.debug(w,"#_onApiAnalyticsAdStart()");var b=a.data;if(this._checkCall("_onApiAnalyticsAdStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_AA_AD_START,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiVideoLoad=function(a){var b=a.data;this._logger.debug(w,"#_onApiVideoLoad(rsid="+b.rsid+", aa_trackingServer="+b.trackingServer+")"),this._resetInternalState(),this._inputDataValidator.validateFields(b,["rsid","trackingServer"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},e.prototype._onApiVideoUnload=function(a){return this._logger.debug(w,"#_onApiVideoUnload()"),this._isTrackingSessionActive?void(this._isTrackingSessionActive=!1):void this._logger.debug(w,"#_onApiVideoUnload() > No active tracking session.")},e.prototype._onApiVideoStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiVideoStart(id="+b.videoId+", name="+b.videoName+", length="+b.videoLength+", type="+b.streamType+", playerName="+b.playerName+")"),this._checkCall("_onApiVideoStart")&&this._inputDataValidator.validateFields(b,["videoId","streamType","videoLength","playhead","playerName"])){this._adobeAnalyticsData.reportSuiteId(b.rsid),this._adobeAnalyticsData.trackingServer(b.trackingServer),this._adobeAnalyticsData.ssl(Number(b.useSsl)),this._serviceProviderData.ovp(b.ovp),this._serviceProviderData.sdk(b.sdk),this._serviceProviderData.channel(b.channel),this._serviceProviderData.libVersion(b.version),this._serviceProviderData.apiLevel(b.apiLvl),this._activeAssetId=b.videoId,this._serviceProviderData.playerName(b.playerName),this._assetData.videoId(this._activeAssetId),this._assetData.length(b.videoLength),this._assetData.type(o.TYPE_MAIN_CONTENT),this._assetData.publisher(b.publisher),this._assetData.name(b.videoName),this._streamData.type(b.streamType),this._updateQoSInfo(b);var c=b.metaNielsen?g.merge(b.metaVideo,b.metaNielsen):b.metaVideo,d=new t(this,n.EVENT_TYPE_START,b.playhead,c,b._eventData[E]);this._sendHit(d)}},e.prototype._onApiVideoResume=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiVideoResume(id="+b.videoId+", name="+b.videoName+", length="+b.videoLength+", type="+b.streamType+", playerName="+b.playerName+")"),this._checkCall("_onApiVideoResume")&&this._inputDataValidator.validateFields(b,["videoId","streamType","videoLength","playhead","playerName"])){this._activeAssetId=b.videoId,this._assetData.videoId(this._activeAssetId),this._assetData.length(b.videoLength),this._assetData.type(o.TYPE_MAIN_CONTENT),this._assetData.name(b.videoName),this._streamData.type(b.streamType);var c=new t(this,n.EVENT_TYPE_RESUME,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiVideoComplete=function(a){this._logger.debug(w,"#_onApiVideoComplete()");var b=a.data;if(this._checkCall("_onApiVideoComplete")){var c=new t(this,n.EVENT_TYPE_COMPLETE,this._assetData.length(),null,b._eventData[E]);this._sendHit(c),this._isVideoComplete=!0}},e.prototype._onApiPlay=function(a){this._logger.debug(w,"#_onApiPlay()");var b=a.data;if(this._checkCall("_onApiPlay")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_PLAY,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiPause=function(a){this._logger.debug(w,"#_onApiPause()");var b=a.data;if(this._checkCall("_onApiPause")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=b.playheadStalled?n.EVENT_TYPE_STALL:n.EVENT_TYPE_PAUSE,d=new t(this,c,b.playhead,null,b._eventData[E]);b._eventData.hasOwnProperty(F)&&(d.filterReport=b._eventData[F]),this._sendHit(d)}},e.prototype._onApiBufferStart=function(a){this._logger.debug(w,"#_onApiBufferStart()");var b=a.data;if(this._checkCall("_onApiBufferStart")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_BUFFER,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiSeekStart=function(a){this._logger.debug(w,"#_onApiSeekStart()"),this._checkCall("_onApiSeekStart")&&(this._stashedAdData=this._assetData.adData(),this._stashedChapterData=this._assetData.chapterData(),this._assetData.adData(null),this._assetData.type(o.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId(),this._assetData.chapterData(null))},e.prototype._onApiSeekComplete=function(a){this._logger.debug(w,"#_onApiSeekComplete()");var b=a.data;if(this._checkCall("_onApiSeekComplete")&&this._inputDataValidator.validateFields(b,["playhead"])){if(b.isInAd){if(!this._inputDataValidator.validateFields(b,["adId","adPosition","podPosition","podPlayerName"]))return;var c=f(this._assetData.videoId())+"_"+b.podPosition;if(this._stashedAdData&&this._stashedAdData.podId()==c&&parseInt(this._stashedAdData.podPosition(),10)==b.adPosition)this._assetData.adData(this._stashedAdData),this._activeAssetId=this._stashedAdData.adId();else if(!this._assetData.adData()){this._activeAssetId=b.adId;var d=new r;d.adId(this._activeAssetId),d.adName(b.adName),d.adLength(b.adLength),d.podId(c),d.resolver(b.podPlayerName),d.podPosition(b.podPosition+""),d.podName(b.podName),d.podOffset(b.podSecond),d.sid(this._generateSessionId()),this._assetData.adData(d)}this._assetData.type(o.TYPE_AD)}else this._assetData.adData(null),this._assetData.type(o.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId();if(b.isInChapter){if(!this._inputDataValidator.validateFields(b,["chapterPosition","chapterLength","chapterOffset"]))return;if(this._stashedChapterData&&b.chapterPosition==this._stashedChapterData.position())this._assetData.chapterData(this._stashedChapterData);else if(!this._assetData.chapterData()){var e=new s;e.id(f(this._assetData.videoId())+"_"+b.chapterPosition),e.name(b.chapterName),e.length(b.chapterLength),e.position(b.chapterPosition),e.offset(b.chapterOffset),e.sid(this._generateSessionId()),this._assetData.chapterData(e)}}else this._assetData.chapterData(null);this._stashedAdData=null,this._stashedChapterData=null}},e.prototype._onApiAdStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiAdStart(id="+b.adId+", player_name="+b.podPlayerName+", parent_name="+this._assetData.videoId()+", pod_pos="+b.adPosition+")"),this._checkCall("_onApiAdStart")&&this._inputDataValidator.validateFields(b,["playhead","podPosition","podPlayerName","adId","adPosition"])){this._activeAssetId=b.adId;var c=new r;c.adId(this._activeAssetId),c.adName(b.adName),c.adLength(b.adLength),c.resolver(b.podPlayerName),c.podId(f(this._assetData.videoId())+"_"+b.podPosition),c.podPosition(b.adPosition+""),c.podName(b.podName),c.podOffset(b.podSecond),c.sid(this._generateSessionId()),this._assetData.adData(c),this._assetData.type(o.TYPE_AD),this._updateQoSInfo(b);var d=g.merge(b.metaVideo,b.metaAd);d=b.metaNielsen?g.merge(d,b.metaNielsen):d;var e=new t(this,n.EVENT_TYPE_START,b.playhead,d,b._eventData[E]);this._sendHit(e)}},e.prototype._onApiAdComplete=function(a){this._logger.debug(w,"#_onApiAdComplete()");var b=a.data;if(this._checkCall("_onApiAdComplete")&&this._inputDataValidator.validateFields(b,["playhead"])){if(this._assetData.type()!=o.TYPE_AD)return void this._logger.warn(w,"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.");this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_COMPLETE,b.playhead,null,b._eventData[E]);this._sendHit(c),this._assetData.adData(null),this._assetData.type(o.TYPE_MAIN_CONTENT),this._activeAssetId=this._assetData.videoId()}},e.prototype._onApiChapterStart=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiChapterStart(name="+b.chapterName+", length="+b.chapterLength+", position="+b.chapterPosition+", chapter_offset="+b.chapterOffset+")"),this._checkCall("_onApiChapterStart")&&this._inputDataValidator.validateFields(b,["playhead","chapterPosition","chapterOffset","chapterLength"])){var c=new s;c.id(f(this._assetData.videoId())+"_"+b.chapterPosition),c.name(b.chapterName),c.length(b.chapterLength),c.position(b.chapterPosition),c.offset(b.chapterOffset),c.sid(this._generateSessionId()),this._assetData.chapterData(c),this._updateQoSInfo(b);var d=g.merge(b.metaVideo,b.metaChapter),e=new t(this,n.EVENT_TYPE_CHAPTER_START,b.playhead,d,b._eventData[E]);e.assetData.adData(null),e.assetData.type(o.TYPE_MAIN_CONTENT),this._sendHit(e)}},e.prototype._onApiChapterComplete=function(a){this._logger.debug(w,"#_onApiChapterComplete()");var b=a.data;if(this._checkCall("_onApiChapterComplete")&&this._inputDataValidator.validateFields(b,["playhead"])){if(!this._assetData.chapterData())return void this._logger.warn(w,"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.");this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_CHAPTER_COMPLETE,b.playhead,null,b._eventData[E]);c.assetData.adData(null),c.assetData.type(o.TYPE_MAIN_CONTENT),this._sendHit(c),this._assetData.chapterData(null)}},e.prototype._onApiBitrateChange=function(a){this._logger.debug(w,"#_onApiBitrateChange()");var b=a.data;if(this._checkCall("_onApiBitrateChange")&&this._inputDataValidator.validateFields(b,["playhead"])){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_BITRATE_CHANGE,b.playhead,null,b._eventData[E]);this._sendHit(c)}},e.prototype._onApiTrackError=function(a){var b=a.data;if(this._logger.debug(w,"#_onApiTrackError(source="+b._eventData.source+", err_id="+b._eventData.error_id+")"),!this._isTrackingSessionActive)return void this._logger.warn(w,"#_onApiTrackError() > No active tracking session.");if(this._trackExternalErrors||b._eventData.source===x){this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_ERROR,0,null,b._eventData[E]);c.eventData.id(b._eventData.error_id),
c.eventData.source(b._eventData.source),this._sendHit(c)}},e.prototype._onApiTrackInternalError=function(a){var b=a.data;this._logger.debug(w,"#_onApiTrackInternalError(source="+b.source+", err_id="+b.error_id+")"),this._updateQoSInfo(b);var c=new t(this,n.EVENT_TYPE_ERROR,0);c.eventData.id(b.error_id),c.eventData.source(b.source),this._sendHit(c)},e.prototype._onApiQuantumEnd=function(a){this._logger.debug(w,"#_onApiQuantumEnd(interval="+this._channel.request(B)+")");var b=a.data;this._checkCall("_onApiQuantumEnd")&&this._inputDataValidator.validateFields(b,["playhead"])&&(this._lastInBandItem&&(this._lastInBandItem.eventData.playhead(b.playhead),this._updateQoSInfo(b),this._lastInBandItem.qosData.bitrate(this._qosData.bitrate()),this._lastInBandItem.qosData.fps(this._qosData.fps()),this._lastInBandItem.qosData.droppedFrames(this._qosData.droppedFrames()),this._lastInBandItem.qosData.startupTime(this._qosData.startupTime())),this._sendHit(this._lastInBandItem))},e.prototype._onNetworkCheckStatusComplete=function(a){var b=a.data;this._trackExternalErrors=b[I],this._reportingInterval=b[J],this._reportingInterval||(this._reportingInterval=fa),this._logger.debug(w,"#_onNetworkCheckStatusComplete(track_ext_err="+this._trackExternalErrors+")")},e.prototype._onResetSessionId=function(a){var b=this._generateSessionId();this._sessionData=new i,this._sessionData.sessionId(b),this._logger.debug(w,"#_resetSessionId(new sessionId="+b+")")},e.prototype._installEventListeners=function(){this._channel.on(K,this._onApiAnalyticsStart,this),this._channel.on(L,this._onApiAnalyticsAdStart,this),this._channel.on(M,this._onApiVideoLoad,this),this._channel.on(N,this._onApiVideoUnload,this),this._channel.on(O,this._onApiVideoStart,this),this._channel.on(P,this._onApiVideoComplete,this),this._channel.on(Q,this._onApiVideoResume,this),this._channel.on(R,this._onApiAdStart,this),this._channel.on(S,this._onApiAdComplete,this),this._channel.on(T,this._onApiPlay,this),this._channel.on(U,this._onApiPause,this),this._channel.on(V,this._onApiBufferStart,this),this._channel.on(W,this._onApiSeekStart,this),this._channel.on(X,this._onApiSeekComplete,this),this._channel.on(Y,this._onApiChapterStart,this),this._channel.on(Z,this._onApiChapterComplete,this),this._channel.on(aa,this._onApiBitrateChange,this),this._channel.on($,this._onApiTrackError,this),this._channel.on(_,this._onApiTrackInternalError,this),this._channel.on(ba,this._onApiQuantumEnd,this),this._channel.on(da,this._onNetworkCheckStatusComplete,this),this._channel.on(D,this._onResetSessionId,this),this._channel.reply(C,function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null},this)},e.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},e.prototype._resetInternalState=function(){this._logger.debug(w,"#_resetInternalState()"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._streamData=new p,this._qosData=new q,this._sessionData=new i,this._assetData=new o,this._cuserData=null,this._stashedAdData=null,this._stashedChapterData=null,this._lastInBandItem=null},e.prototype._generateSessionId=function(){return""+(new Date).getTime()+Math.floor(1e9*Math.random())},e.prototype._updateQoSInfo=function(a){this._qosData.bitrate(a.bitrate||0),this._qosData.fps(a.fps||0),this._qosData.droppedFrames(a.droppedFrames||0),null==a.startupTime||isNaN(a.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(a.startupTime),this._qosData.isStartupTimeOverridden=!0)},e.prototype._checkCall=function(a){return this._isTrackingSessionActive?!this._isVideoComplete||(this._logger.warn(w,"#"+a+"() > The video content already completed."),!1):(this._logger.warn(w,"#"+a+"() > No active tracking session."),!1)},e.prototype._updateLastInBandItem=function(a){var b=(new Date).getTime(),c=1e3*Math.abs(a.eventData.playhead()-this._lastInBandItem.eventData.playhead()),d=Math.abs(b-this._lastInBandItem.eventData.ts());this._lastInBandItem.eventData.type()!=n.EVENT_TYPE_PAUSE&&this._lastInBandItem.eventData.type()!=n.EVENT_TYPE_STALL?(c<=d*ea||this._doNotOverrideEventDuration)&&d<=this._reportingInterval*ea*1e3?this._lastInBandItem.eventData.duration(b-this._lastInBandItem.eventData.ts()):(this._logger.warn(w,"[WARNING] Resetting duration in lastInBandItem to 0. playheadDelta:"+c+" tsDelta:"+d+" event type:"+this._lastInBandItem.eventData.type()),this._lastInBandItem.eventData.duration(0)):this._lastInBandItem.eventData.duration(b-this._lastInBandItem.eventData.ts()),this._doNotOverrideEventDuration&&(this._doNotOverrideEventDuration=!1),this._lastInBandItem.eventData.ts(b),this._lastInBandItem.eventData.playhead(a.eventData.playhead()),this._lastInBandItem.qosData.startupTime(a.qosData.startupTime()),this._lastInBandItem.qosData.isStartupTimeOverridden=a.qosData.isStartupTimeOverridden},e.prototype._sendHit=function(a){function b(a){var b=c._reportFactory.createReportForItem(a);b.qosData.isStartupTimeOverridden||b.qosData.startupTime(c._autoComputedStartupTime);var e={};e[G]=b,c._channel.trigger(new h(ca,e)),b.eventData.type()!=n.EVENT_TYPE_PLAY&&b.eventData.type()!=n.EVENT_TYPE_BUFFER&&b.eventData.type()!=n.EVENT_TYPE_START||(d={},d[H]=!0,c._channel.command(z,d))}var c=this,d={};switch(a.eventData.type()){case n.EVENT_TYPE_START:case n.EVENT_TYPE_PLAY:case n.EVENT_TYPE_PAUSE:case n.EVENT_TYPE_STALL:case n.EVENT_TYPE_BUFFER:this._lastInBandItem&&(this._updateLastInBandItem(a),this._lastInBandItem.eventData.type()==n.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==o.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),a!=this._lastInBandItem&&b(this._lastInBandItem)),b(a),this._lastInBandItem=a,d={},d[H]=!0,this._channel.command(z,d);break;case n.EVENT_TYPE_COMPLETE:this._lastInBandItem&&(a.assetData.type()==o.TYPE_AD&&(this._doNotOverrideEventDuration=!0),this._updateLastInBandItem(a),b(this._lastInBandItem)),b(a),a.assetData.type()==o.TYPE_MAIN_CONTENT?(this._lastInBandItem=null,d={},d[H]=!0,this._channel.command(A,d)):a.assetData.type()==o.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(o.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case n.EVENT_TYPE_CHAPTER_START:case n.EVENT_TYPE_CHAPTER_COMPLETE:this._lastInBandItem&&(this._updateLastInBandItem(a),b(this._lastInBandItem)),b(a),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(a.eventData.type()==n.EVENT_TYPE_CHAPTER_START?new s(a.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),b(this._lastInBandItem));break;default:b(a)}};var w="ah::Context",x="sourceErrorSDK",y="error",z="clock:reporting.resume",A="clock:reporting.pause",B="reporting_interval",C="session_id",D="reset_session_id",E="callback",F="filter_report",G="report",H="reset",I="track_external_errors",J="reporting_interval",K="api:aa_start",L="api:aa_ad_start",M="api:video_load",N="api:video_unload",O="api:video_start",P="api:video_complete",Q="api:video_resume",R="api:ad_start",S="api:ad_complete",T="api:play",U="api:pause",V="api:buffer_start",W="api:seek_start",X="api:seek_complete",Y="api:chapter_start",Z="api:chapter_complete",$="api:track_error",_="api:track_internal_error",aa="api:bitrate_change",ba="api:quantum_end",ca="context:report_available",da="net:check_status_complete",ea=1.5,fa=10;d.context.Context=e}(a.ADB.core,a.ADB.va,a.ADB.va.utils,b),function(a){"use strict";function b(a,b){this.trackingServer=a,this.publisher=b,this.ssl=!1,this.ovp=c,this.sdk=c,this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}var c="unknown";a.AdobeHeartbeatPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.onError=function(a){},a.AdobeHeartbeatPluginDelegate=b}(b),function(a,b,c){"use strict";function d(a){d.__super__.constructor.call(this,q),this._radio=new i(this._logger),this._channel=this._radio.channel(y),this._delegate=a,this._context=new l(this._channel,this._logger),this._filter=new m(this._channel,this._logger),this._network=new n(this._channel,this._logger),this._setupDataResolver()}var e=a.Event,f=a.Trigger,g=a.plugin.BasePlugin,h=a.plugin.ParamMapping,i=a.radio.Radio,j=b.ErrorInfo,k=b.Version,l=c.context.Context,m=c.filter.ReportFilter,n=c.network.Network,o=c.clock.Clock,p=c.AdobeHeartbeatPluginConfig;a.extend(d,g),d.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof p))throw new Error("Expected config data to be instance of AdobeHeartbeatPluginConfig.");this._config=a,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.trackingServer+", publisher="+this._config.publisher+", quietMode="+this._config.quietMode+", ssl="+this._config.ssl+"})");var b=this._config.trackingServer+"/settings/",c={};c[ba]=this._config.trackingServer,c[ca]=b,c[da]=this._config.publisher,c[ea]=this._config.quietMode,c[fa]=this._config.ssl,this._channel.trigger(new e(ja,c)),this._isConfigured=!0},d.prototype.bootstrap=function(a){d.__super__.bootstrap.call(this,a),this._channel.on(z,this._onError,this),this._clock=new o(this._pluginManager,this._channel,this._logger),this._channel.command(Ea),this._channel.trigger(new e(La)),this._registerCommands(),this._registerBehaviours()},d.prototype._teardown=function(){this._logger.debug(this._logTag,"#_teardown()"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},d.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,"_canProcess() > Plugin in ERROR state."),!1):d.__super__._canProcess.call(this):(this._logger.error(this._logTag,"_canProcess() > Plugin not configured."),!1)},d.prototype._cmdAnalyticsError=function(a){this._errorInfo||(this._errorInfo=new j("Internal error","AdobeAnalyticsPlugin is in ERROR state."),this._trigger(z,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},d.prototype._cmdAnalyticsStart=function(a){if(this._canProcess()){var b={};b[ga]=a.visitorOptedOut,this._channel.trigger(new e(ka,b)),this._channel.trigger(new e(ha,a))}},d.prototype._cmdAnalyticsAdStart=function(a){this._canProcess()&&this._channel.trigger(new e(ia,a))},d.prototype._cmdVideoLoad=function(a){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new e(ma,a)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new e(la,a)),this._isTrackingSessionActive=!0)},d.prototype._cmdVideoUnload=function(a){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new e(ma,a)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},d.prototype._cmdVideoStart=function(a){this._canProcess()&&this._channel.trigger(new e(na,a))},d.prototype._cmdVideoComplete=function(a){this._canProcess()&&this._channel.trigger(new e(oa,a))},d.prototype._cmdVideoResume=function(a){this._canProcess()&&this._channel.trigger(new e(pa,a))},d.prototype._cmdPlay=function(a){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(a))},d.prototype._cmdPause=function(a){this._canProcess()&&(this._channel.trigger(new e(ta,a)),this._isPaused=!0,this._runIdleTimer(!0))},d.prototype._cmdAdStart=function(a){this._canProcess()&&(this._channel.trigger(new e(qa,a)),this._resumePlaybackIfPossible(a))},d.prototype._cmdAdComplete=function(a){this._canProcess()&&(this._channel.trigger(new e(ra,a)),a.isInAdBreak||this._resumePlaybackIfPossible(a))},d.prototype._cmdBufferStart=function(a){this._canProcess()&&(this._channel.trigger(new e(ua,a)),this._isBuffering=!0,this._runIdleTimer(!0))},d.prototype._cmdBufferComplete=function(a){this._canProcess()&&(this._isBuffering=!1,this._resumePlaybackIfPossible(a))},d.prototype._cmdSeekStart=function(a){this._canProcess()&&(this._channel.trigger(new e(va,a)),this._channel.trigger(new e(ta,a)),this._isSeeking=!0,this._runIdleTimer(!0))},d.prototype._cmdSeekComplete=function(a){this._canProcess()&&(this._channel.trigger(new e(wa,a)),this._isSeeking=!1,this._resumePlaybackIfPossible(a))},d.prototype._cmdChapterStart=function(a){this._canProcess()&&this._channel.trigger(new e(xa,a))},d.prototype._cmdChapterComplete=function(a){this._canProcess()&&this._channel.trigger(new e(ya,a))},d.prototype._cmdBitrateChange=function(a){this._canProcess()&&this._channel.trigger(new e(Ba,a))},d.prototype._cmdTrackError=function(a){this._canProcess()&&this._channel.trigger(new e(za,a))},d.prototype._cmdClockReportingTick=function(a){this._canProcess()&&this._channel.trigger(new e(Ca,a))},d.prototype._cmdIdleTick=function(a){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(V),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(T))},d.prototype._onError=function(a){this._errorInfo=a.data;var b={};b[_]=Da,b[aa]=this._errorInfo.getMessage()+"|"+this._errorInfo.getDetails(),this._channel.trigger(new e(Aa,b)),this._runReportingTimer(!1),this._trigger(z,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},d.prototype._runIdleTimer=function(a){var b={};b[$]=!0,a?this._channel.command(Ja,b):this._channel.command(Ka,b)},d.prototype._runFlushFilterTimer=function(a){var b={};b[$]=!0,a?this._channel.command(Ha,b):this._channel.command(Ia,b)},d.prototype._runReportingTimer=function(a){var b={};b[$]=!0,a?this._channel.command(Fa,b):this._channel.command(Ga,b)},d.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleAnalyticsError",this._cmdAnalyticsError),this._pluginManager.comply(this,"handleAnalyticsStart",this._cmdAnalyticsStart),this._pluginManager.comply(this,"handleAnalyticsAdStart",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoUnload",this._cmdVideoUnload),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleVideoComplete",this._cmdVideoComplete),this._pluginManager.comply(this,"handleVideoResume",this._cmdVideoResume),this._pluginManager.comply(this,"handlePlay",this._cmdPlay),this._pluginManager.comply(this,"handlePause",this._cmdPause),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleAdComplete",this._cmdAdComplete),this._pluginManager.comply(this,"handleBufferStart",this._cmdBufferStart),this._pluginManager.comply(this,"handleBufferComplete",this._cmdBufferComplete),this._pluginManager.comply(this,"handleSeekStart",this._cmdSeekStart),this._pluginManager.comply(this,"handleSeekComplete",this._cmdSeekComplete),this._pluginManager.comply(this,"handleChapterStart",this._cmdChapterStart),this._pluginManager.comply(this,"handleChapterComplete",this._cmdChapterComplete),this._pluginManager.comply(this,"handleBitrateChange",this._cmdBitrateChange),this._pluginManager.comply(this,"handleTrackError",this._cmdTrackError),this._pluginManager.comply(this,"handleClockReportingTick",this._cmdClockReportingTick),this._pluginManager.comply(this,"handleIdleTick",this._cmdIdleTick)},d.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new f(t,C),this,"handleVideoLoad",[new h(s,"rsid","rsid"),new h(s,"tracking_server","trackingServer")]),this._pluginManager.registerBehaviour(new f(t,D),this,"handleVideoUnload"),this._pluginManager.registerBehaviour(new f(t,E),this,"handleVideoStart",[new h(t,"video.id","videoId"),new h(t,"video.name","videoName"),new h(t,"video.length","videoLength"),new h(t,"video.playhead","playhead"),new h(t,"video.playerName","playerName"),new h(t,"video.streamType","streamType"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"rsid","rsid"),new h(s,"tracking_server","trackingServer"),new h(s,"channel","channel"),new h(s,"meta.video.*","metaVideo"),new h(s,"ssl","useSsl"),new h(u,"meta","metaNielsen"),new h(r,"publisher","publisher"),new h(r,"sdk","sdk"),new h(r,"ovp","ovp"),new h(r,"version","version"),new h(r,"api_level","apiLvl")]),this._pluginManager.registerBehaviour(new f(t,G),this,"handleVideoComplete",[new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,F),this,"handleVideoResume",[new h(t,"video.id","videoId"),new h(t,"video.name","videoName"),new h(t,"video.length","videoLength"),new h(t,"video.playhead","playhead"),new h(t,"video.playerName","playerName"),new h(t,"video.streamType","streamType")]),this._pluginManager.registerBehaviour(new f(t,H),this,"handlePlay",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,I),this,"handlePause",[new h(t,"video.playhead","playhead"),new h(t,"video.playheadStalled","playheadStalled"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,J),this,"handleAdStart",[new h(t,"video.playhead","playhead"),new h(t,"ad.id","adId"),new h(t,"ad.name","adName"),new h(t,"ad.length","adLength"),new h(t,"ad.position","adPosition"),new h(t,"pod.name","podName"),new h(t,"pod.playerName","podPlayerName"),new h(t,"pod.position","podPosition"),new h(t,"pod.startTime","podSecond"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"meta.video.*","metaVideo"),new h(s,"meta.ad.*","metaAd"),new h(u,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(t,K),this,"handleAdComplete",[new h(t,"video.playhead","playhead"),new h(t,"ad.isInAdBreak","isInAdBreak"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,L),this,"handleBufferStart",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,M),this,"handleBufferComplete",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,N),this,"handleSeekStart",[new h(t,"video.playhead","playhead")]),this._pluginManager.registerBehaviour(new f(t,O),this,"handleSeekComplete",[new h(t,"video.playhead","playhead"),new h(t,"ad.isInAd","isInAd"),new h(t,"ad.id","adId"),new h(t,"ad.position","adPosition"),new h(t,"pod.playerName","podPlayerName"),new h(t,"pod.position","podPosition"),new h(t,"chapter.isInChapter","isInChapter"),new h(t,"chapter.position","chapterPosition"),new h(t,"chapter.name","chapterName"),new h(t,"chapter.length","chapterLength"),new h(t,"chapter.startTime","chapterOffset"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,P),this,"handleChapterStart",[new h(t,"video.playhead","playhead"),new h(t,"chapter.position","chapterPosition"),new h(t,"chapter.name","chapterName"),new h(t,"chapter.length","chapterLength"),new h(t,"chapter.startTime","chapterOffset"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime"),new h(s,"meta.video.*","metaVideo"),new h(s,"meta.chapter.*","metaChapter"),new h(u,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(t,Q),this,"handleChapterComplete",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,R),this,"handleBitrateChange",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(t,S),this,"handleTrackError"),this._pluginManager.registerBehaviour(new f(v,X),this,"handleClockReportingTick",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(v,Z),this,"handleIdleTick",[]),this._pluginManager.registerBehaviour(new f(r,V),this,"handleClockReportingTick",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(s,z),this,"handleAnalyticsError"),this._pluginManager.registerBehaviour(new f(s,A),this,"handleAnalyticsStart",[new h(s,"vid","vid"),new h(s,"aid","aid"),new h(s,"mid","mid"),new h(s,"customerIDs","customerIDs"),new h(s,"visitorOptedOut","visitorOptedOut"),new h(s,"blob","blob"),new h(s,"loc_hint","loc_hint"),new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")]),this._pluginManager.registerBehaviour(new f(s,B),this,"handleAnalyticsAdStart",[new h(t,"video.playhead","playhead"),new h(t,"qos.fps","fps"),new h(t,"qos.droppedFrames","droppedFrames"),new h(t,"qos.bitrate","bitrate"),new h(t,"qos.startupTime","startupTime")])},d.prototype._setupDataResolver=function(){var a={},b=this;a.version=function(){return k.getVersion()},a.api_level=function(){return k.getApiLevel()},a.tracking_server=function(){return b._config?b._config.trackingServer:null},a.publisher=function(){return b._config?b._config.publisher:null},a.quiet_mode=function(){return!!b._config&&b._config.quietMode},a.ovp=function(){return b._config?b._config.ovp:null},a.sdk=function(){return b._config?b._config.sdk:null},a.is_primetime=function(){return!!b._config&&b._config.__isPrimetime},a.psdk_version=function(){return b._config?b._config.__psdkVersion:null},a.session_id=function(){return b._channel.request(w)},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];c=c||{},c[e]=a.hasOwnProperty(e)?a[e].call(this):null}return c}},d.prototype._resumePlaybackIfPossible=function(a){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle&&(this._isVideoIdle=!1,this._resumePlaybackFromIdle()),this._runIdleTimer(!1),this._channel.trigger(new e(sa,a)))},d.prototype._resumePlaybackFromIdle=function(){this._trigger(V),this._filter.clear(),this._channel.trigger(new e(x)),this._trigger(U),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)};var q="adobe-heartbeat",r=q,s="adobe-analytics",t="player",u="nielsen",v="service.clock",w="session_id",x="reset_session_id",y="heartbeat-channel",z="error",A="aa_start",B="sc_ad_start",C="video_load",D="video_unload",E="video_start",F="video_resume",G="video_complete",H="play",I="pause",J="ad_start",K="ad_complete",L="buffer_start",M="buffer_complete",N="seek_start",O="seek_complete",P="chapter_start",Q="chapter_complete",R="bitrate_change",S="track_error",T="video_idle_start",U="video_idle_resume",V="quantum_close",W="heartbeat.reporting",X=W+".tick",Y="heartbeat.idle",Z=Y+".tick",$="reset",_="source",aa="error_id",ba="tracking_server",ca="check_status_server",da="publisher",ea="quiet_mode",fa="ssl",ga="visitor_opt_out",ha="api:aa_start",ia="api:aa_ad_start",ja="api:config",ka="api:update_visitor_optout",la="api:video_load",ma="api:video_unload",na="api:video_start",oa="api:video_complete",pa="api:video_resume",qa="api:ad_start",ra="api:ad_complete",sa="api:play",ta="api:pause",ua="api:buffer_start",va="api:seek_start",wa="api:seek_complete",xa="api:chapter_start",ya="api:chapter_complete",za="api:track_error",Aa="api:track_internal_error",Ba="api:bitrate_change",Ca="api:quantum_end",Da="sourceErrorHeartbeat",Ea="clock:check_status.resume",Fa="clock:reporting.resume",Ga="clock:reporting.pause",Ha="clock:flush_filter.resume",Ia="clock:flush_filter.pause",Ja="clock:idle.resume",Ka="clock:idle.pause",La="clock:check_status.get_settings";c.AdobeHeartbeatPlugin=d}(a.ADB.core,a.ADB.va,b),a.ADB.va.plugins.ah||(a.ADB.va.plugins.ah=b)}(this);!function(a){if("undefined"==typeof b)var b={};!function(a,b){"use strict";function c(a,b){this._onFail={fn:a,ctx:b}}var d=a.ErrorInfo;c.prototype.validateFields=function(a,b){if(!a)return this._fail("Data cannot be null");if(b)for(var c=0;c<b.length;c++){var d=b[c];switch(d){case"videoId":if(!a.hasOwnProperty("videoId"))return this._fail("The ID for the main video must be specified.");if("string"!=typeof a.videoId)return this._fail("The ID for the main video must be a String.");if(""===a.videoId)return this._fail("The ID for the main video cannot be an empty string.");break;case"streamType":if(!a.hasOwnProperty("streamType"))return this._fail("The stream type for the main video must be specified.");if("string"!=typeof a.streamType)return this._fail("The stream type for the main video must be a String.");if(""===a.streamType)return this._fail("The stream type for the main video cannot be an empty string.");break;case"playerName":if(!a.hasOwnProperty("playerName"))return this._fail("The player name for the main video must be specified.");if("string"!=typeof a.playerName)return this._fail("The player name for the main video must be a String.");if(""===a.playerName)return this._fail("The player name for the main video cannot be an empty string.");break;case"videoLength":if(!a.hasOwnProperty("videoLength"))return this._fail("The length of the main video must be specified.");if("number"!=typeof a.videoLength)return this._fail("The length of the main video must be a Number.");if(isNaN(a.videoLength))return this._fail("The length of the main video cannot be NaN.");break;case"podPlayerName":if(!a.hasOwnProperty("podPlayerName"))return this._fail("The player name for the ad-break must be specified.");if("string"!=typeof a.podPlayerName)return this._fail("The player name for the ad-break must be a String.");if(""===a.podPlayerName)return this._fail("The player name for the ad-break cannot be an empty string.");break;case"podPosition":if(!a.hasOwnProperty("podPosition"))return this._fail("Position (index) of the ad-break must be specified.");if("number"!=typeof a.podPosition)return this._fail("Position (index) of the ad-break must be a Number.");if(isNaN(a.podPosition))return this._fail("Position (index) of the ad-break cannot be NaN.");break;case"adId":if(!a.hasOwnProperty("adId"))return this._fail("The ad ID must be specified.");if("string"!=typeof a.adId)return this._fail("The ad ID must be a String.");if(""===a.adId)return this._fail("The ad ID cannot be an empty string.");break;case"adPosition":if(!a.hasOwnProperty("adPosition"))return this._fail("Position (index) of the ad must be specified.");if("number"!=typeof a.adPosition)return this._fail("Position (index) of the ad must be a Number.");if(isNaN(a.adPosition))return this._fail("Position (index) of the ad cannot be NaN.");break;case"adLength":if(!a.hasOwnProperty("adLength"))return this._fail("The length of the ad must be specified.");if("number"!=typeof a.adLength)return this._fail("The length of the ad must be a Number.");if(isNaN(a.adLength))return this._fail("The length of the ad cannot be NaN.");break;default:return this._fail("Unable to validate unknown parameter: "+d)}}return!0},c.prototype._fail=function(a){var b=new d("Invalid input data",a);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,b),!1},b.InputDataValidator=c}(a.ADB.va,b),function(a){"use strict";function b(){this.channel=c,this.debugLogging=!1}var c="";a.AdobeAnalyticsPluginConfig=b}(b),function(a){"use strict";function b(){}b.prototype.onError=function(a){},a.AdobeAnalyticsPluginDelegate=b}(b),function(a,b,c,d){"use strict";function e(a,b){if(e.__super__.constructor.call(this,r),!a)throw new Error("The reference to the AppMeasurement object cannot be NULL.");this._appMeasurement=a,this._delegate=b,this._customMetaKeys=[],this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._workQueue=new k(!0,w),this._inputDataValidator=new q(function(a){this._errorInfo=a,this._logger.error(this._logTag,a.getMessage()+" | "+a.getDetails());var b=this;setTimeout(function(){b._trigger(x,a),b._delegate&&b._delegate.onError(b._errorInfo)},0)},this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var f=a.Trigger,g=a.plugin.BasePlugin,h=a.plugin.ParamMapping,i=a.radio.Channel,j=a.radio.Command,k=a.radio.CommandQueue,l=b.ErrorInfo,m=c.md5,n=c.StringUtils,o=c.ObjectUtils,p=d.AdobeAnalyticsPluginConfig,q=d.InputDataValidator;a.extend(e,g),e.prototype.configure=function(a){if(!a)throw new Error("Reference to the configuration data cannot be NULL.");if(!(a instanceof p))throw new Error("Expected config data to be instance of AdobeAnalyticsPluginConfig.");this._config=a,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,"#configure({trackingServer="+this._config.debugLogging+", channel="+this._config.channel+", ssl="+this._appMeasurement.ssl+"})")},e.prototype.bootstrap=function(a){e.__super__.bootstrap.call(this,a),this._registerCommands(),this._registerBehaviours()},e.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[]),e.__super__.setup.call(this)},e.prototype.setVideoMetadata=function(a){this._videoMetadata=o.clone(a)},e.prototype.setAdMetadata=function(a){this._adMetadata=o.clone(a)},e.prototype.setChapterMetadata=function(a){this._chapterMetadata=o.clone(a)},e.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,"#_canProcess() > In ERROR state."),!1):e.__super__._canProcess.call(this)},e.prototype._cmdVideoLoad=function(a){this._errorInfo=null},e.prototype._cmdVideoStart=function(a){this._logger.debug(this._logTag,"#_cmdVideoStart()"),this._canProcess()&&this._workQueue.addCommand(new j(this._executeOpen,this,[a]))},e.prototype._cmdAdStart=function(a){this._logger.debug(this._logTag,"#_cmdAdStart()"),this._canProcess()&&this._workQueue.addCommand(new j(this._executeOpenAd,this,[a]))},e.prototype._cmdHeartbeatPluginError=function(a){this._errorInfo||(this._errorInfo=new l("Internal error","HeartbeatPlugin is in ERROR state."),this._trigger(x,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},e.prototype._resetAppMeasurementContextData=function(){delete this._appMeasurement.contextData["a.contentType"],delete this._appMeasurement.contextData["a.media.name"],delete this._appMeasurement.contextData["a.media.friendlyName"],delete this._appMeasurement.contextData["a.media.length"],delete this._appMeasurement.contextData["a.media.playerName"],delete this._appMeasurement.contextData["a.media.channel"],delete this._appMeasurement.contextData["a.media.view"],delete this._appMeasurement.contextData["a.media.ad.name"],
delete this._appMeasurement.contextData["a.media.ad.friendlyName"],delete this._appMeasurement.contextData["a.media.ad.podFriendlyName"],delete this._appMeasurement.contextData["a.media.ad.length"],delete this._appMeasurement.contextData["a.media.ad.playerName"],delete this._appMeasurement.contextData["a.media.ad.pod"],delete this._appMeasurement.contextData["a.media.ad.podPosition"],delete this._appMeasurement.contextData["a.media.ad.podSecond"],delete this._appMeasurement.contextData["a.media.ad.view"];for(var a=0;a<this._customMetaKeys.length;a++){var b=this._customMetaKeys[a];delete this._appMeasurement.contextData[b]}this._customMetaKeys=[]},e.prototype._executeOpen=function(a){if(this._logger.debug(this._logTag,"#_executeOpen(id="+a.videoId+", videoName="+a.videoName+", streamType="+a.streamType+", length="+a.videoLength+", playerName="+a.playerName+", channel="+a.channel+", isPrimetime="+a.isPrimetime+", sessionId="+a.sessionId+")"),this._canProcess()&&this._inputDataValidator.validateFields(a,["videoId","streamType","videoLength","playerName"])){this._resetAppMeasurementContextData();for(var b in a.metaVideo)a.metaVideo.hasOwnProperty(b)&&(this._appMeasurement.contextData[b]=a.metaVideo[b],this._customMetaKeys.push(b));if(a.metaNielsen)for(var b in a.metaNielsen)a.metaNielsen.hasOwnProperty(b)&&(this._appMeasurement.contextData[b]=a.metaNielsen[b],this._customMetaKeys.push(b));this._appMeasurement.contextData["a.contentType"]=a.streamType,this._appMeasurement.contextData["a.media.name"]=a.videoId,this._appMeasurement.contextData["a.media.friendlyName"]=a.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(a.videoLength)||"0.0",this._appMeasurement.contextData["a.media.playerName"]=a.playerName,this._appMeasurement.contextData["a.media.channel"]=a.channel||"",this._appMeasurement.contextData["a.media.view"]=!0,this._appMeasurement.contextData["a.media.vsid"]=a.sessionId,this._appMeasurement.pev3=y,this._appMeasurement.pe=a.isPrimetime?B:A,this._appMeasurement.track();var c=this;setTimeout(function(){c._trigger(E,a)},0)}},e.prototype._executeOpenAd=function(a){var b=m(a.videoId)+"_"+a.podPosition;if(this._logger.debug(this._logTag,"#_executeOpenAd(id="+a.adId+", streamType="+a.streamType+", length="+a.adLength+", podPlayerName="+a.podPlayerName+", parentId="+a.videoId+", podId="+b+", parentPodPosition="+a.adPosition+", podSecond="+a.podSecond+")"),this._canProcess()&&this._inputDataValidator.validateFields(a,["videoId","streamType","playerName","adId","adLength","podPlayerName","adPosition"])){a.podSecond=null==a.podSecond||isNaN(a.podSecond)?a.playhead:a.podSecond,this._resetAppMeasurementContextData();var c;for(c in a.metaVideo)a.metaVideo.hasOwnProperty(c)&&(this._appMeasurement.contextData[c]=a.metaVideo[c],this._customMetaKeys.push(c));for(c in a.metaAd)a.metaAd.hasOwnProperty(c)&&(this._appMeasurement.contextData[c]=a.metaAd[c],this._customMetaKeys.push(c));if(a.metaNielsen)for(var c in a.metaNielsen)a.metaNielsen.hasOwnProperty(c)&&(this._appMeasurement.contextData[c]=a.metaNielsen[c],this._customMetaKeys.push(c));this._appMeasurement.contextData["a.contentType"]=a.streamType,this._appMeasurement.contextData["a.media.name"]=a.videoId,this._appMeasurement.contextData["a.media.playerName"]=a.playerName,this._appMeasurement.contextData["a.media.channel"]=a.channel||"",this._appMeasurement.contextData["a.media.vsid"]=a.sessionId,this._appMeasurement.contextData["a.media.friendlyName"]=a.videoName||"",this._appMeasurement.contextData["a.media.length"]=Math.floor(a.videoLength)||"0.0",this._appMeasurement.contextData["a.media.ad.name"]=a.adId,this._appMeasurement.contextData["a.media.ad.friendlyName"]=a.adName||"",this._appMeasurement.contextData["a.media.ad.podFriendlyName"]=a.podName||"",this._appMeasurement.contextData["a.media.ad.length"]=Math.floor(a.adLength)||"0.0",this._appMeasurement.contextData["a.media.ad.playerName"]=a.podPlayerName,this._appMeasurement.contextData["a.media.ad.pod"]=b,this._appMeasurement.contextData["a.media.ad.podPosition"]=Math.floor(a.adPosition)||"0.0",this._appMeasurement.contextData["a.media.ad.podSecond"]=Math.floor(a.podSecond)||"0.0",this._appMeasurement.contextData["a.media.ad.view"]=!0,this._appMeasurement.pev3=z,this._appMeasurement.pe=a.isPrimetime?D:C,this._appMeasurement.track();var d=this;setTimeout(function(){d._trigger(F,a)},0)}},e.prototype._setupDataResolver=function(){var a={},b=this;a.rsid=function(){return b._appMeasurement.account},a.tracking_server=function(){return b._appMeasurement.ssl&&b._appMeasurement.trackingServerSecure?b._appMeasurement.trackingServerSecure:b._appMeasurement.trackingServer},a.ssl=function(){return b._appMeasurement.ssl},a.vid=function(){return b._appMeasurement.visitorID},a.aid=function(){return b._appMeasurement.analyticsVisitorID},a.mid=function(){return b._appMeasurement.marketingCloudVisitorID},a.blob=function(){return b._appMeasurement.audienceManagerBlob},a.loc_hint=function(){return b._appMeasurement.audienceManagerLocationHint?parseInt(b._appMeasurement.audienceManagerLocationHint):""},a.customerIDs=function(){var a=b._appMeasurement.visitor.getCustomerIDs(),c={};for(var d in a)if(a.hasOwnProperty(d)){var e=a[d];if("object"==typeof e){for(var f in e)e.hasOwnProperty(f)&&("authState"==f?c[d+".as"]=e[f]:c[d+"."+f]=e[f]);c[d+".as"]||(c[d+".as"]="0")}}return c},a.channel=function(){return b._config?b._config.channel:null},a.meta=function(a){var c=a.split(".");if(c.length<2)return null;var d=c.shift();switch(a=c.join("."),d){case"video":return a==i.WILDCARD?b._videoMetadata:b._videoMetadata[a];case"ad":return a==i.WILDCARD?b._adMetadata:b._adMetadata[a];case"chapter":return a==i.WILDCARD?b._chapterMetadata:b._chapterMetadata[a];default:return null}},a.visitorOptedOut=function(){return void 0!=b._appMeasurement.visitorOptedOut&&b._appMeasurement.visitorOptedOut},this._dataResolver=function(b){if(!b||0==b.length)return null;for(var c=null,d=0;d<b.length;d++){var e=b[d];c=c||{},n.startsWith(e,"meta.")?c[e]=a.meta(e.split("meta.")[1]):c[e]=a.hasOwnProperty(e)?a[e].call(this):null}return c}},e.prototype._registerCommands=function(){this._pluginManager.comply(this,"handleVideoLoad",this._cmdVideoLoad),this._pluginManager.comply(this,"handleVideoStart",this._cmdVideoStart),this._pluginManager.comply(this,"handleAdStart",this._cmdAdStart),this._pluginManager.comply(this,"handleHeartbeatPluginError",this._cmdHeartbeatPluginError)},e.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new f(u,G),this,"handleVideoLoad"),this._pluginManager.registerBehaviour(new f(u,H),this,"handleVideoStart",[new h(u,"video.id","videoId"),new h(u,"video.streamType","streamType"),new h(u,"video.name","videoName"),new h(u,"video.length","videoLength"),new h(u,"video.playerName","playerName"),new h(u,"video.streamType","streamType"),new h(v,"is_primetime","isPrimetime"),new h(v,"session_id","sessionId"),new h(s,"channel","channel"),new h(s,"meta.video.*","metaVideo"),new h(t,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(u,I),this,"handleAdStart",[new h(u,"video.id","videoId"),new h(u,"video.streamType","streamType"),new h(u,"video.playhead","playhead"),new h(u,"video.playerName","playerName"),new h(u,"video.name","videoName"),new h(u,"video.length","videoLength"),new h(u,"ad.id","adId"),new h(u,"ad.length","adLength"),new h(u,"ad.position","adPosition"),new h(u,"ad.name","adName"),new h(u,"pod.name","podName"),new h(u,"pod.position","podPosition"),new h(u,"pod.playerName","podPlayerName"),new h(u,"pod.startTime","podSecond"),new h(v,"is_primetime","isPrimetime"),new h(v,"session_id","sessionId"),new h(s,"channel","channel"),new h(s,"meta.video.*","metaVideo"),new h(s,"meta.ad.*","metaAd"),new h(t,"meta","metaNielsen")]),this._pluginManager.registerBehaviour(new f(v,x),this,"handleHeartbeatPluginError")},e.prototype._onAppMeasurementReady=function(){this._workQueue.resume()};var r="adobe-analytics",s=r,t="nielsen",u="player",v="adobe-heartbeat",w=2e3,x="error",y="video",z="videoAd",A="ms_s",B="msp_s",C="msa_s",D="mspa_s",E="aa_start",F="sc_ad_start",G="video_load",H="video_start",I="ad_start";d.AdobeAnalyticsPlugin=e}(a.ADB.core,a.ADB.va,a.ADB.va.utils,b),function(a){"use strict";var b={SHOW:"a.media.show",SEASON:"a.media.season",EPISODE:"a.media.episode",ASSET_ID:"a.media.asset",GENRE:"a.media.genre",FIRST_AIR_DATE:"a.media.airDate",FIRST_DIGITAL_DATE:"a.media.digitalDate",RATING:"a.media.rating",ORIGINATOR:"a.media.originator",NETWORK:"a.media.network",SHOW_TYPE:"a.media.type",AD_LOAD:"a.media.adLoad",MVPD:"a.media.pass.mvpd",AUTHORIZED:"a.media.pass.auth",DAY_PART:"a.media.dayPart",FEED:"a.media.feed",STREAM_FORMAT:"a.media.format"},c={ADVERTISER:"a.media.ad.advertiser",CAMPAIGN_ID:"a.media.ad.campaign",CREATIVE_ID:"a.media.ad.creative",PLACEMENT_ID:"a.media.ad.placement",SITE_ID:"a.media.ad.site",CREATIVE_URL:"a.media.ad.creativeURL"};a.VideoMetadataKeys=b,a.AdMetadataKeys=c}(b),a.ADB.va.plugins.aa||(a.ADB.va.plugins.aa=b)}(this);!function(a){!function(a){"use strict";function b(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}a.MediaHeartbeatConfig=b,a.MediaHeartbeatConfig.sharedInstance=new b}(a.ADB.va),function(a){"use strict";function b(){this.data={}}var c=a.plugins.videoplayer.VideoInfo,d=a.plugins.videoplayer.AdBreakInfo,e=a.plugins.videoplayer.AdInfo,f=a.plugins.videoplayer.ChapterInfo,g=a.plugins.videoplayer.QoSInfo;b.MEDIAINFO_KEY_NAME="a.name",b.MEDIAINFO_KEY_VIDEOID="a.videoId",b.MEDIAINFO_KEY_ADID="a.adId",b.MEDIAINFO_KEY_LENGTH="a.length",b.MEDIAINFO_KEY_PLAYHEAD="a.playhead",b.MEDIAINFO_KEY_STREAMTYPE="a.streamType",b.MEDIAINFO_KEY_POSITION="a.position",b.MEDIAINFO_KEY_STARTTIME="a.startTime",b.MEDIAINFO_KEY_BITRATE="a.bitrate",b.MEDIAINFO_KEY_FPS="a.fps",b.MEDIAINFO_KEY_DROPPEDFRAMES="a.droppedFrames",b.MEDIAINFO_KEY_STARTUPTIME="a.startupTime",b.MEDIAINFO_KEY_TIMEDMETADATA="a.timedMetadata",b.prototype.setValue=function(a,b){this.data[a]=b},b.prototype.getValue=function(a){return this.data.hasOwnProperty(a)?this.data[a]:null},b.prototype.createVideoInfo=function(){var a=new c;return a.id=null!=this.getValue(b.MEDIAINFO_KEY_VIDEOID)?this.getValue(b.MEDIAINFO_KEY_VIDEOID):"",a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.playhead=null!=this.getValue(b.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(b.MEDIAINFO_KEY_PLAYHEAD):0,a.streamType=null!=this.getValue(b.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(b.MEDIAINFO_KEY_STREAMTYPE):"",a},b.prototype.createAdBreakInfo=function(){var a=new d;return a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a.startTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTTIME)?this.getValue(b.MEDIAINFO_KEY_STARTTIME):0,a},b.prototype.createAdInfo=function(){var a=new e;return a.id=null!=this.getValue(b.MEDIAINFO_KEY_ADID)?this.getValue(b.MEDIAINFO_KEY_ADID):"",a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a},b.prototype.createChapterInfo=function(){var a=new f;return a.name=null!=this.getValue(b.MEDIAINFO_KEY_NAME)?this.getValue(b.MEDIAINFO_KEY_NAME):"",a.length=null!=this.getValue(b.MEDIAINFO_KEY_LENGTH)?this.getValue(b.MEDIAINFO_KEY_LENGTH):0,a.startTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTTIME)?this.getValue(b.MEDIAINFO_KEY_STARTTIME):0,a.position=null!=this.getValue(b.MEDIAINFO_KEY_POSITION)?this.getValue(b.MEDIAINFO_KEY_POSITION):0,a},b.prototype.createQoSInfo=function(){var a=new g;return a.bitrate=null!=this.getValue(b.MEDIAINFO_KEY_BITRATE)?this.getValue(b.MEDIAINFO_KEY_BITRATE):0,a.fps=null!=this.getValue(b.MEDIAINFO_KEY_FPS)?this.getValue(b.MEDIAINFO_KEY_FPS):0,a.droppedFrames=null!=this.getValue(b.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(b.MEDIAINFO_KEY_DROPPEDFRAMES):0,a.startupTime=null!=this.getValue(b.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(b.MEDIAINFO_KEY_STARTUPTIME):0,a},a.MediaObject=b}(a.ADB.va),function(a,b){"use strict";function c(a){c.__super__.constructor.call(this),this._heartbeat=a}function d(a){d.__super__.constructor.call(this),this._heartbeat=a}function e(a){e.__super__.constructor.call(this),this._heartbeat=a}function f(a){f.__super__.constructor.call(this),this._heartbeat=a}a.extend(c,b.plugins.aa.AdobeAnalyticsPluginDelegate),c.prototype.onError=function(a){b.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)},a.extend(d,b.plugins.ah.AdobeHeartbeatPluginDelegate),d.prototype.onError=function(a){b.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)},a.extend(e,b.HeartbeatDelegate),e.prototype.onError=function(a){b.MediaHeartbeat._onDelegateError.call(this._heartbeat,a)},a.extend(f,b.plugins.videoplayer.VideoPlayerPluginDelegate),f.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},f.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},f.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},f.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},f.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var a=this._heartbeat._delegate.getQoSObject();if(a&&"object"==typeof a&&a.setValue)return a.createQoSInfo()}return null},b._MediaAnalyticsPluginDelegate=c,b._MediaHeartbeatPluginDelegate=d,b._ADBMediaHeartbeatDelegate=e,b._MediaHeartbeatVideoPlayerPluginDelegate=f}(a.ADB.core,a.ADB.va),function(a,b){"use strict";function c(){}function d(a){d.__super__.constructor.call(this),this._heartbeat=a}var e=b.MediaHeartbeatConfig;b.plugins.nielsen&&(c.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA="media_nielsen_content_metadata",c.MEDIAHEARTBEAT_NIELSEN_AD_METADATA="media_nielsen_ad_metadata",c.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA="media_nielsen_channel_metadata",e.prototype.nielsenConfigKey=void 0,e.prototype.nielsenAppInfo=void 0,a.extend(d,b.plugins.nielsen.NielsenPluginDelegate),d.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var a=this._heartbeat._currentContentMediaObject.getValue(c.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA);if("object"==typeof a)return a}return null},d.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdMediaObject){var a=this._heartbeat._currentAdMediaObject.getValue(c.MEDIAHEARTBEAT_NIELSEN_AD_METADATA);if("object"==typeof a)return a}return null},d.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentContentMediaObject){var a=this._heartbeat._currentContentMediaObject.getValue(c.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA);if("object"==typeof a)return a}return null},d.prototype.onError=function(a){this._heartbeat&&b.MediaHeartbeat._onError.call(this._heartbeat,a)},b._MediaHeartbeatNielsen=c,b._MediaHeartbeatNielsenPluginDelegate=d)}(a.ADB.core,a.ADB.va),function(b,c){"use strict";function d(){}function e(b,d,e){if(this._logger=new z,this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._nielsenPlugin=null,this._currentContentMediaObject=void 0,this._currentAdMediaObject=void 0,this._videoInfo=void 0,this._adBreakInfo=void 0,this._adInfo=void 0,this._chapterInfo=void 0,this._state={},this._delegate=b,e)this.appMeasurement=e;else{if(!a.s)return void this._logger.error($,"Valid AppMeasurement instance required for initialising MediaHeartbeat");this.appMeasurement=a.s}d&&"object"==typeof d&&void 0!=d.trackingServer?(this._config=d,c.MediaHeartbeat._debugLogging||this._config.debugLogging?this._logger.enable():this._logger.disable()):this._logger.error($,"Valid config required for initialising MediaHeartbeat")}function f(a,b){if(a==e.Event.AdBreakStart){if(this._logger.info($,"#::trackEvent(AdBreakStart)"),!t.call(this,Y))return void this._logger.error($,"API call trackEvent:AdBreakStart is unsupported in the current state.");b&&"object"==typeof b&&b.setValue?(this._adBreakInfo=b.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:""):this._logger.error($,"Invalid AdBreak Info for MediaHeartbeatEvent.AdBreakStart event.")}else{if(this._logger.info($,"#::trackEvent(AdBreakComplete)"),!t.call(this,Y,!0))return void this._logger.error($,"API call trackEvent:AdBreakComplete is unsupported in the current state.");this._adBreakInfo=void 0}}function g(a,b,c){if(a==e.Event.AdStart){if(this._logger.info($,"#::trackEvent(AdStart)"),!t.call(this,X))return void this._logger.error($,"API call trackEvent:AdStart is unsupported in the current state.");if(b&&"object"==typeof b&&b.setValue){this._currentAdMediaObject=b,this._adInfo=b.createAdInfo();var d=b.getValue(e.MediaObjectKey.StandardAdMetadata);if(d&&"object"==typeof d)for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f]);this._aaPlugin&&this._aaPlugin.setAdMetadata(c),this._playerPlugin.trackAdStart(),this._state[Z]||this._state[S]||this.trackPlay()}else this._logger.error($,"Invalid Ad Info for MediaHeartbeatEvent.AdStart event.")}else if(a==e.Event.AdComplete){if(this._logger.info($,"#::trackEvent(AdComplete)"),!t.call(this,X,!0))return void this._logger.error($,"API call trackEvent:AdComplete is unsupported in the current state.");this._playerPlugin.trackAdComplete(),this._adInfo=null}else{if(this._logger.info($,"#::trackEvent(AdSkip)"),!t.call(this,X,!0))return void this._logger.error($,"API call trackEvent:AdSkip is unsupported in the current state.");this._adInfo=null}}function h(a){if(a==e.Event.SeekStart){if(this._logger.info($,"#::trackEvent(SeekStart)"),!t.call(this,V))return void this._logger.error($,"API call trackEvent:SeekStart is unsupported in the current state.");this._playerPlugin.trackSeekStart()}else{if(this._logger.info($,"#::trackEvent(SeekComplete)"),!t.call(this,V,!0))return void this._logger.error($,"API call trackEvent:SeekComplete is unsupported in the current state.");this._playerPlugin.trackSeekComplete()}}function i(a,b,c){if(a==e.Event.ChapterStart){if(this._logger.info($,"#::trackEvent(ChapterStart)"),!t.call(this,W))return void this._logger.error($,"API call trackEvent:ChapterStart is unsupported in the current state.");b&&"object"==typeof b&&b.setValue?(this._chapterInfo=b.createChapterInfo(),this._aaPlugin&&this._aaPlugin.setChapterMetadata(c),this._playerPlugin.trackChapterStart(),this._state[Z]||this._state[S]||this.trackPlay()):this._logger.error($,"Invalid Chapter Info for MediaHeartbeatEvent.ChapterStart event.")}else if(a==e.Event.ChapterComplete){if(this._logger.info($,"#::trackEvent(ChapterComplete)"),!t.call(this,W,!0))return void this._logger.error($,"API call trackEvent:ChapterComplete is unsupported in the current state.");this._chapterInfo=null,this._playerPlugin.trackChapterComplete()}else{if(this._logger.info($,"#::trackEvent(ChapterSkip)"),!t.call(this,W,!0))return void this._logger.error($,"API call trackEvent:ChapterSkip is unsupported in the current state.");this._chapterInfo=null}}function j(a){if(a==e.Event.BufferStart){if(this._logger.info($,"#::trackEvent(BufferStart)"),!t.call(this,U))return void this._logger.error($,"API call trackEvent:BufferStart is unsupported in the current state.");this._playerPlugin.trackBufferStart()}else{if(this._logger.info($,"#::trackEvent(BufferComplete)"),!t.call(this,U,!0))return void this._logger.error($,"API call trackEvent:BufferComplete is unsupported in the current state.");this._playerPlugin.trackBufferComplete()}}function k(){return this._logger.info($,"#::trackEvent(BitrateChange)"),w.call(this)?void this._playerPlugin.trackBitrateChange():void this._logger.error($,"API call trackEvent:BitrateChange is unsupported in the current state.")}function l(a){if(this._logger.info($,"#::trackEvent(TimedMetadataUpdate)"),a&&"object"==typeof a&&a.setValue){var b=a.getValue(B.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin&&b&&"string"==typeof b&&this._playerPlugin.trackTimedMetadata(b)}}function m(){this._aaPlugin=new I(this.appMeasurement,new K(this));var a=new J;a.channel=this._config.channel?this._config.channel:"",a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(a),this._plugins.push(this._aaPlugin)}function n(){this._ahPlugin=new L(new N(this));var a=new M(this._config.trackingServer,this.appMeasurement.visitor.marketingCloudOrgID);a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,a.ovp=this._config.ovp?this._config.ovp:"",a.ssl=this._config.ssl,a.sdk=this._config.appVersion?this._config.appVersion:"";var b=s.call(this);b&&b.length>0&&(a.__primetime=!0,a.__psdkVersion=b),this._ahPlugin.configure(a),this._plugins.push(this._ahPlugin)}function o(){this._playerPlugin=new F(new H(this));var a=new G;a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(a),this._plugins.push(this._playerPlugin)}function p(){if(c.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo){this._nielsenPlugin=new c.plugins.nielsen.NielsenPlugin(new c._MediaHeartbeatNielsenPluginDelegate(this));var a=new c.plugins.nielsen.NielsenPluginConfig;a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,a.appInfo=this._config.nielsenAppInfo,a.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(a),this._plugins.push(this._nielsenPlugin)}}function q(){var a=new D;a.debugLogging=c.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new C(new E(this),this._plugins),this._heartbeat.configure(a)}function r(a){this._logger.error($,a.getMessage()+" | "+a.getDetails())}function s(){return this._currentContentMediaObject?this._currentContentMediaObject.getValue(_):null}function t(a,b){if(a!=Q&&(!this._state[Q]||this._state[T]))return!1;a===R&&u.call(this);var c=!(a===Y&&!b);if(c&&(b?!this._state[a]:this._state[a]))return!1;switch(a){case R:this._state[S]=b,this._state[Z]=!0;break;case S:this._state[R]=b;break;case Y:if(!b&&this._state[X])return!1;break;case X:if(!b&&!this._state[Y])return!1}return this._state[a]=!b,!0}function u(){this._state[V]&&this.trackEvent(e.Event.SeekComplete),this._state[U]&&this.trackEvent(e.Event.BufferComplete)}function v(a){this._state[a]=!1}function w(){return this._state[Q]}function x(){this._state={}}function y(){this._plugins=[],this._aaPlugin=null,this._ahPlugin=null,this._playerPlugin=null,this._nielsenPlugin=null,this._heartbeat&&(this._heartbeat.destroy(),this._heartbeat=null)}var z=b.Logger,A=c.plugins.videoplayer.AssetType,B=c.MediaObject,C=c.Heartbeat,D=c.HeartbeatConfig,E=c._ADBMediaHeartbeatDelegate,F=c.plugins.videoplayer.VideoPlayerPlugin,G=c.plugins.videoplayer.VideoPlayerPluginConfig,H=c._MediaHeartbeatVideoPlayerPluginDelegate,I=c.plugins.aa.AdobeAnalyticsPlugin,J=c.plugins.aa.AdobeAnalyticsPluginConfig,K=c._MediaAnalyticsPluginDelegate,L=c.plugins.ah.AdobeHeartbeatPlugin,M=c.plugins.ah.AdobeHeartbeatPluginConfig,N=c._MediaHeartbeatPluginDelegate;if(d.prototype.getCurrentPlaybackTime=function(){return null},d.prototype.getQoSObject=function(){return null},e.Event={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",TimedMetadataUpdate:"timedMetadataUpdate"},e.StreamType={VOD:"vod",LIVE:"live",LINEAR:"linear"},e.MediaObjectKey={StandardVideoMetadata:"media_standard_content_metadata",StandardAdMetadata:"media_standard_ad_metadata",VideoResumed:"resumed"},e.VideoMetadataKeys=c.plugins.aa.VideoMetadataKeys,e.AdMetadataKeys=c.plugins.aa.AdMetadataKeys,e.version=function(){return c.Version.getVersion()},e.prototype.trackSessionStart=function(a,b){if(this._logger.info($,"#::trackSessionStart()"),!t.call(this,Q))return void this._logger.error($,"API call trackSessionStart is unsupported in the current state.");if(!a||"object"!=typeof a||!a.setValue)return v.call(this,Q),void this._logger.error($,"Invalid Media Info object");this._currentContentMediaObject=a,this._videoInfo=a.createVideoInfo(),this._videoInfo.playerName=void 0!=this._config.playerName?this._config.playerName:"";var c=a.getValue(e.MediaObjectKey.StandardVideoMetadata);if(c&&"object"==typeof c)for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d]);var f=a.getValue(e.MediaObjectKey.VideoResumed);f&&"boolean"==typeof f&&(this._videoInfo.resumed=a.getValue(e.MediaObjectKey.VideoResumed)),P.call(this),this._playerPlugin&&(this._aaPlugin&&this._aaPlugin.setVideoMetadata(b),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart())},e.prototype.trackPlay=function(){return this._logger.info($,"#::trackPlay()"),t.call(this,R)?void this._playerPlugin.trackPlay():void this._logger.error($,"API call trackPlay is unsupported in the current state.")},e.prototype.trackPause=function(){return this._logger.info($,"#::trackPause()"),t.call(this,S)?void(this._playerPlugin&&this._playerPlugin.trackPause()):void this._logger.error($,"API call trackPause is unsupported in the current state.")},e.prototype.trackComplete=function(){return this._logger.info($,"#::trackComplete()"),t.call(this,T)?void(this._playerPlugin&&this._playerPlugin.trackComplete(function(){})):void this._logger.error($,"API call trackComplete is unsupported in the current state.")},e.prototype.trackSessionEnd=function(){return this._logger.info($,"#::trackSessionEnd()"),t.call(this,Q,!0)?(this._playerPlugin&&this._playerPlugin.trackVideoUnload(),x.call(this),void y.call(this)):(x.call(this),y.call(this),void this._logger.error($,"API call trackSessionEnd is unsupported in the current state."))},e.prototype.trackError=function(a){return this._logger.info($,"#::trackError()"),w.call(this)?void(this._playerPlugin&&this._playerPlugin.trackVideoPlayerError(a?a:"unknown_error_id")):void this._logger.error($,"API call trackError is unsupported in the current state.")},e.prototype.trackEvent=function(a,b,c){switch(a){case e.Event.AdBreakStart:case e.Event.AdBreakComplete:f.call(this,a,b);break;case e.Event.AdStart:case e.Event.AdComplete:case e.Event.AdSkip:g.call(this,a,b,c);break;case e.Event.SeekStart:case e.Event.SeekComplete:h.call(this,a);break;case e.Event.ChapterStart:case e.Event.ChapterComplete:case e.Event.ChapterSkip:i.call(this,a,b,c);break;case e.Event.BufferStart:case e.Event.BufferComplete:j.call(this,a);break;case e.Event.BitrateChange:k.call(this);break;case e.Event.TimedMetadataUpdate:l.call(this,b)}},c.plugins.nielsen){var O=c._MediaHeartbeatNielsen;e.MediaObjectKey.NielsenContentMetadata=O.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA,e.MediaObjectKey.NielsenAdMetadata=O.MEDIAHEARTBEAT_NIELSEN_AD_METADATA,e.MediaObjectKey.NielsenChannelMetadata=O.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA,e.prototype.nielsenLoadMetadata=function(a){this._nielsenPlugin&&this._nielsenPlugin.loadMetadata(a)}}var P=function(){if(!this.appMeasurement||!this.appMeasurement.visitor)throw new Error("appMeasurement.visitor object cannot be NULL.");m.call(this),n.call(this),o.call(this),p.call(this),q.call(this)},Q=1,R=2,S=3,T=4,U=5,V=6,W=7,X=8,Y=9,Z=10;e.createMediaObject=function(a,b,c,d){var f=new B;f.setValue(B.MEDIAINFO_KEY_VIDEOID,b),f.setValue(B.MEDIAINFO_KEY_NAME,a),f.setValue(B.MEDIAINFO_KEY_LENGTH,c),f.setValue(B.MEDIAINFO_KEY_PLAYHEAD,0);var g=A.ASSET_TYPE_VOD;switch(d){case e.StreamType.VOD:g=A.ASSET_TYPE_VOD;break;case e.StreamType.LIVE:g=A.ASSET_TYPE_LIVE;break;case e.StreamType.LINEAR:g=A.ASSET_TYPE_LINEAR}return f.setValue(B.MEDIAINFO_KEY_STREAMTYPE,g),f},e.createAdBreakObject=function(a,b,c){var d=new B;return d.setValue(B.MEDIAINFO_KEY_NAME,a),d.setValue(B.MEDIAINFO_KEY_POSITION,b),d.setValue(B.MEDIAINFO_KEY_STARTUPTIME,c),d},e.createAdObject=function(a,b,c,d){var e=new B;return e.setValue(B.MEDIAINFO_KEY_NAME,a),e.setValue(B.MEDIAINFO_KEY_ADID,b),e.setValue(B.MEDIAINFO_KEY_POSITION,c),e.setValue(B.MEDIAINFO_KEY_LENGTH,d),e},e.createChapterObject=function(a,b,c,d){var e=new B;return e.setValue(B.MEDIAINFO_KEY_NAME,a),e.setValue(B.MEDIAINFO_KEY_POSITION,b),e.setValue(B.MEDIAINFO_KEY_LENGTH,c),e.setValue(B.MEDIAINFO_KEY_STARTTIME,d),e},e.createQoSObject=function(a,b,c,d){var e=new B;return e.setValue(B.MEDIAINFO_KEY_BITRATE,a),e.setValue(B.MEDIAINFO_KEY_FPS,c),e.setValue(B.MEDIAINFO_KEY_DROPPEDFRAMES,d),e.setValue(B.MEDIAINFO_KEY_STARTUPTIME,b),e},e.createTimedMetadataObject=function(a){var b=new B;return b.setValue(B.MEDIAINFO_KEY_TIMEDMETADATA,a),b};var $="MediaHeartbeat",_="a.__pttvsdkVersion";c.MediaHeartbeat=e,c.MediaHeartbeatDelegate=d,c.MediaHeartbeat._onDelegateError=r,c.MediaHeartbeat._debugLogging=!1}(a.ADB.core,a.ADB.va),a.ADB||(a.ADB={}),a.ADB.core||(a.ADB.core=core),a.ADB.va||(a.ADB.va=va),a.ADB.va.plugins||(a.ADB.va.plugins={})}(this)};var e=function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var n=this.callbacks[e].push(t)-1,i=this;return function(){i.callbacks[e].splice(n,1)}},execute:function(e,t){if(this.callbacks[e]){t=void 0===t?[]:t,t=t instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var n=this.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(e,t){(t||e&&!j.isObjectEmpty(e))&&Object.keys(this.callbacks).forEach(function(t){var n=void 0!==e[t]?e[t]:"";this.execute(t,n)},this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}function i(e,t,n){var i=null==e?void 0:e[t];return void 0===i?n:i}function r(e){for(var t=/^\d+$/,n=0,i=e.length;n<i;n++)if(!t.test(e[n]))return!1;return!0}function a(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}function o(e,t){for(var n=0;n<e.length;n++){var i=parseInt(e[n],10),r=parseInt(t[n],10);if(i>r)return 1;if(r>i)return-1}return 0}function s(e,t){if(e===t)return 0;var n=e.toString().split("."),i=t.toString().split(".");return r(n.concat(i))?(a(n,i),o(n,i)):NaN}function l(e){return e===Object(e)&&0===Object.keys(e).length}function c(e){return"function"==typeof e||e instanceof Array&&e.length}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};this.log=_e("log",e,t),this.warn=_e("warn",e,t),this.error=_e("error",e,t)}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isEnabled,n=e.cookieName,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.cookies;return t&&n&&r?{remove:function(){r.remove(n)},get:function(){var e=r.get(n),t={};try{t=JSON.parse(e)}catch(e){t={}}return t},set:function(e,t){t=t||{},r.set(n,JSON.stringify(e),{domain:t.optInCookieDomain||"",cookieLifetime:t.optInStorageExpiry||3419e4,expires:!0})}}:{get:Pe,set:Pe,remove:Pe}}function f(e){
this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}function p(){function e(e,t){var n=De(e);return n.length?n.every(function(e){return!!t[e]}):Se(t)}function t(){M(b),O(ce.COMPLETE),_(h.status,h.permissions),m.set(h.permissions,{optInCookieDomain:l,optInStorageExpiry:c}),C.execute(xe)}function n(e){return function(n,i){if(!Ae(n))throw new Error("[OptIn] Invalid category(-ies). Please use the `OptIn.Categories` enum.");return O(ce.CHANGED),Object.assign(b,ye(De(n),e)),i||t(),h}}var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.doesOptInApply,a=i.previousPermissions,o=i.preOptInApprovals,s=i.isOptInStorageEnabled,l=i.optInCookieDomain,c=i.optInStorageExpiry,u=i.isIabContext,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=f.cookies,g=Le(a);Re(g,"Invalid `previousPermissions`!"),Re(o,"Invalid `preOptInApprovals`!");var m=d({isEnabled:!!s,cookieName:"adobeujs-optin"},{cookies:p}),h=this,_=le(h),C=ge(),I=Me(g),v=Me(o),D=m.get(),S={},A=function(e,t){return ke(e)||t&&ke(t)?ce.COMPLETE:ce.PENDING}(I,D),y=function(e,t,n){var i=ye(pe,!r);return r?Object.assign({},i,e,t,n):i}(v,I,D),b=be(y),O=function(e){return A=e},M=function(e){return y=e};h.deny=n(!1),h.approve=n(!0),h.denyAll=h.deny.bind(h,pe),h.approveAll=h.approve.bind(h,pe),h.isApproved=function(t){return e(t,h.permissions)},h.isPreApproved=function(t){return e(t,v)},h.fetchPermissions=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?h.on(ce.COMPLETE,e):Pe;return!r||r&&h.isComplete||!!o?e(h.permissions):t||C.add(xe,function(){return e(h.permissions)}),n},h.complete=function(){h.status===ce.CHANGED&&t()},h.registerPlugin=function(e){if(!e||!e.name||"function"!=typeof e.onRegister)throw new Error(je);S[e.name]||(S[e.name]=e,e.onRegister.call(e,h))},h.execute=Ne(S),Object.defineProperties(h,{permissions:{get:function(){return y}},status:{get:function(){return A}},Categories:{get:function(){return ue}},doesOptInApply:{get:function(){return!!r}},isPending:{get:function(){return h.status===ce.PENDING}},isComplete:{get:function(){return h.status===ce.COMPLETE}},__plugins:{get:function(){return Object.keys(S)}},isIabContext:{get:function(){return u}}})}function g(e,t){function n(){r=null,e.call(e,new f("The call took longer than you wanted!"))}function i(){r&&(clearTimeout(r),e.apply(e,arguments))}if(void 0===t)return e;var r=setTimeout(n,t);return i}function m(){if(window.__cmp)return window.__cmp;var e=window;if(e===window.top)return void Ie.error("__cmp not found");for(var t;!t;){e=e.parent;try{e.frames.__cmpLocator&&(t=e)}catch(e){}if(e===window.top)break}if(!t)return void Ie.error("__cmp not found");var n={};return window.__cmp=function(e,i,r){var a=Math.random()+"",o={__cmpCall:{command:e,parameter:i,callId:a}};n[a]=r,t.postMessage(o,"*")},window.addEventListener("message",function(e){var t=e.data;if("string"==typeof t)try{t=JSON.parse(e.data)}catch(e){}if(t.__cmpReturn){var i=t.__cmpReturn;n[i.callId]&&(n[i.callId](i.returnValue,i.success),delete n[i.callId])}},!1),window.__cmp}function h(){var e=this;e.name="iabPlugin",e.version="0.0.1";var t=ge(),n={allConsentData:null},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n[e]=t};e.fetchConsentData=function(e){var t=e.callback,n=e.timeout,i=g(t,n);r({callback:i})},e.isApproved=function(e){var t=e.callback,i=e.category,a=e.timeout;if(n.allConsentData)return t(null,s(i,n.allConsentData.vendorConsents,n.allConsentData.purposeConsents));var o=g(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.vendorConsents,a=n.purposeConsents;t(e,s(i,r,a))},a);r({category:i,callback:o})},e.onRegister=function(t){var n=Object.keys(de),i=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.purposeConsents,a=i.gdprApplies,o=i.vendorConsents;!e&&a&&o&&r&&(n.forEach(function(e){var n=s(e,o,r);t[n?"approve":"deny"](e,!0)}),t.complete())};e.fetchConsentData({callback:i})};var r=function(e){var r=e.callback;if(n.allConsentData)return r(null,n.allConsentData);t.add("FETCH_CONSENT_DATA",r);var s={};o(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.purposeConsents,o=e.gdprApplies,l=e.vendorConsents;(arguments.length>1?arguments[1]:void 0)&&(s={purposeConsents:r,gdprApplies:o,vendorConsents:l},i("allConsentData",s)),a(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(arguments.length>1?arguments[1]:void 0)&&(s.consentString=e.consentData,i("allConsentData",s)),t.execute("FETCH_CONSENT_DATA",[null,n.allConsentData])})})},a=function(e){var t=m();t&&t("getConsentData",null,e)},o=function(e){var t=Fe(de),n=m();n&&n("getVendorConsents",t,e)},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!!t[de[e]];return i&&function(){return fe[e].every(function(e){return n[e]})}()}}var _="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,n,i=1;i<arguments.length;++i){n=arguments[i];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e};var C,I,v={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},D={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},S={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",ALLFIELDS:"getVisitorValues"},A={CUSTOMERIDS:"getCustomerIDs"},y={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"isOptedOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs",ALLFIELDS:"getVisitorValues"},b={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},O={MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},M={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},k={GLOBAL:"global"},E={MESSAGES:v,STATE_KEYS_MAP:D,ASYNC_API_MAP:S,SYNC_API_MAP:A,ALL_APIS:y,FIELDGROUP_TO_FIELD:b,FIELDS:O,AUTH_STATE:M,OPT_OUT:k},T=E.STATE_KEYS_MAP,P=function(e){function t(){}function n(t,n){var i=this;return function(){var r=e(0,t),a={};return a[t]=r,i.setStateAndPublish(a),n(r),r}}this.getMarketingCloudVisitorID=function(e){e=e||t;var i=this.findField(T.MCMID,e),r=n.call(this,T.MCMID,e);return void 0!==i?i:r()},this.getVisitorValues=function(e){this.getMarketingCloudVisitorID(function(t){e({MCMID:t})})}},L=E.MESSAGES,R=E.ASYNC_API_MAP,w=E.SYNC_API_MAP,F=function(){function e(){}function t(e,t){var n=this;return function(){return n.callbackRegistry.add(e,t),n.messageParent(L.GETSTATE),""}}function n(n){this[R[n]]=function(i){i=i||e;var r=this.findField(n,i),a=t.call(this,n,i);return void 0!==r?r:a()}}function i(t){this[w[t]]=function(){return this.findField(t,e)||{}}}Object.keys(R).forEach(n,this),Object.keys(w).forEach(i,this)},N=E.ASYNC_API_MAP,x=function(){Object.keys(N).forEach(function(e){this[N[e]]=function(t){this.callbackRegistry.add(e,t)}},this)},j=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(t,n){n.isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},n.isValueEmpty=function(e){return""===e||n.isObjectEmpty(e)};var i=function(){var e=navigator.appName,t=navigator.userAgent;return"Microsoft Internet Explorer"===e||t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0&&t.indexOf("Windows NT 6")>=0};n.getIeVersion=function(){return document.documentMode?document.documentMode:i()?7:null},n.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},n.isObject=function(t){return null!==t&&"object"===e(t)&&!1===Array.isArray(t)},n.defineGlobalNamespace=function(){return window.adobe=n.isObject(window.adobe)?window.adobe:{},window.adobe},n.pluck=function(e,t){return t.reduce(function(t,n){return e[n]&&(t[n]=e[n]),t},Object.create(null))},n.parseOptOut=function(e,t,n){t||(t=n,e.d_optout&&e.d_optout instanceof Array&&(t=e.d_optout.join(",")));var i=parseInt(e.d_ottl,10);return isNaN(i)&&(i=7200),{optOut:t,d_ottl:i}},n.normalizeBoolean=function(e){var t=e;return"true"===e?t=!0:"false"===e&&(t=!1),t}}),V=(j.isObjectEmpty,j.isValueEmpty,j.getIeVersion,j.encodeAndBuildRequest,j.isObject,j.defineGlobalNamespace,j.pluck,j.parseOptOut,j.normalizeBoolean,n),U=E.MESSAGES,H={0:"prefix",1:"orgID",2:"state"},B=function(e,t){this.parse=function(e){try{var t={};return e.data.split("|").forEach(function(e,n){if(void 0!==e){t[H[n]]=2!==n?e:JSON.parse(e)}}),t}catch(e){}},this.isInvalid=function(n){var i=this.parse(n);if(!i||Object.keys(i).length<2)return!0;var r=e!==i.orgID,a=!t||n.origin!==t,o=-1===Object.keys(U).indexOf(i.prefix);return r||a||o},this.send=function(n,i,r){var a=i+"|"+e;r&&r===Object(r)&&(a+="|"+JSON.stringify(r));try{n.postMessage(a,t)}catch(e){}}},G=E.MESSAGES,Y=function(e,t,n,i){function r(e){Object.assign(p,e)}function a(e){Object.assign(p.state,e),Object.assign(p.state.ALLFIELDS,e),p.callbackRegistry.executeAll(p.state)}function o(e){if(!h.isInvalid(e)){m=!1;var t=h.parse(e);p.setStateAndPublish(t.state)}}function s(e){!m&&g&&(m=!0,h.send(i,e))}function l(){r(new P(n._generateID)),p.getMarketingCloudVisitorID(),p.callbackRegistry.executeAll(p.state,!0),_.removeEventListener("message",c)}function c(e){if(!h.isInvalid(e)){var t=h.parse(e);m=!1,_.clearTimeout(p._handshakeTimeout),_.removeEventListener("message",c),r(new F(p)),_.addEventListener("message",o),p.setStateAndPublish(t.state),p.callbackRegistry.hasCallbacks()&&s(G.GETSTATE)}}function u(){g&&postMessage?(_.addEventListener("message",c),s(G.HANDSHAKE),p._handshakeTimeout=setTimeout(l,250)):l()}function d(){_.s_c_in||(_.s_c_il=[],_.s_c_in=0),p._c="Visitor",p._il=_.s_c_il,p._in=_.s_c_in,p._il[p._in]=p,_.s_c_in++}function f(){function e(e){0!==e.indexOf("_")&&"function"==typeof n[e]&&(p[e]=function(){})}Object.keys(n).forEach(e),p.getSupplementalDataID=n.getSupplementalDataID,p.isAllowed=function(){return!0}}var p=this,g=t.whitelistParentDomain;p.state={ALLFIELDS:{}},p.version=n.version,p.marketingCloudOrgID=e,p.cookieDomain=n.cookieDomain||"",p._instanceType="child";var m=!1,h=new B(e,g);p.callbackRegistry=V(),p.init=function(){d(),f(),r(new x(p)),u()},p.findField=function(e,t){if(void 0!==p.state[e])return t(p.state[e]),p.state[e]},p.messageParent=s,p.setStateAndPublish=a},q=E.MESSAGES,X=E.ALL_APIS,W=E.ASYNC_API_MAP,J=E.FIELDGROUP_TO_FIELD,K=function(e,t){function n(){var t={};return Object.keys(X).forEach(function(n){var i=X[n],r=e[i]();j.isValueEmpty(r)||(t[n]=r)}),t}function i(){var t=[];return e._loading&&Object.keys(e._loading).forEach(function(n){if(e._loading[n]){var i=J[n];t.push(i)}}),t.length?t:null}function r(t){return function n(r){var a=i();if(a){var o=W[a[0]];e[o](n,!0)}else t()}}function a(e,i){var r=n();t.send(e,i,r)}function o(e){l(e),a(e,q.HANDSHAKE)}function s(e){r(function(){a(e,q.PARENTSTATE)})()}function l(n){function i(i){r.call(e,i),t.send(n,q.PARENTSTATE,{CUSTOMERIDS:e.getCustomerIDs()})}var r=e.setCustomerIDs;e.setCustomerIDs=i}return function(e){if(!t.isInvalid(e)){(t.parse(e).prefix===q.HANDSHAKE?o:s)(e.source)}}},z=function(e,t){function n(e){return function(n){i[e]=n,r++,r===a&&t(i)}}var i={},r=0,a=Object.keys(e).length;Object.keys(e).forEach(function(t){var i=e[t];if(i.fn){var r=i.args||[];r.unshift(n(t)),i.fn.apply(i.context||null,r)}})},Q={get:function(e){e=encodeURIComponent(e);var t=(";"+document.cookie).split(" ").join(";"),n=t.indexOf(";"+e+"="),i=n<0?n:t.indexOf(";",n+1);return n<0?"":decodeURIComponent(t.substring(n+2+e.length,i<0?t.length:i))},set:function(e,t,n){var r=i(n,"cookieLifetime"),a=i(n,"expires"),o=i(n,"domain"),s=i(n,"secure"),l=s?"Secure":"";if(a&&"SESSION"!==r&&"NONE"!==r){var c=""!==t?parseInt(r||0,10):-60;if(c)a=new Date,a.setTime(a.getTime()+1e3*c);else if(1===a){a=new Date;var u=a.getYear();a.setYear(u+2+(u<1900?1900:0))}}else a=0;return e&&"NONE"!==r?(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(a?" expires="+a.toGMTString()+";":"")+(o?" domain="+o+";":"")+l,this.get(e)===t):0},remove:function(e,t){var n=i(t,"domain");n=n?" domain="+n+";":"",document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+n}},$=function(e){var t;!e&&_.location&&(e=_.location.hostname),t=e;var n,i=t.split(".");for(n=i.length-2;n>=0;n--)if(t=i.slice(n).join("."),Q.set("test","cookie",{domain:t}))return Q.remove("test",{domain:t}),t;return""},Z={compare:s,isLessThan:function(e,t){return s(e,t)<0},areVersionsDifferent:function(e,t){return 0!==s(e,t)},isGreaterThan:function(e,t){return s(e,t)>0},isEqual:function(e,t){return 0===s(e,t)}},ee=!!_.postMessage,te={postMessage:function(e,t,n){var i=1;t&&(ee?n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+i++ +"&"+e))},receiveMessage:function(e,t){var n;try{ee&&(e&&(n=function(n){if("string"==typeof t&&n.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(n.origin))return!1;e(n)}),_.addEventListener?_[e?"addEventListener":"removeEventListener"]("message",n):_[e?"attachEvent":"detachEvent"]("onmessage",n))}catch(e){}}},ne=function(e){var t,n,i="0123456789",r="",a="",o=8,s=10,l=10;if(1==e){for(i+="ABCDEF",t=0;16>t;t++)n=Math.floor(Math.random()*o),r+=i.substring(n,n+1),n=Math.floor(Math.random()*o),a+=i.substring(n,n+1),o=16;return r+"-"+a}for(t=0;19>t;t++)n=Math.floor(Math.random()*s),r+=i.substring(n,n+1),0===t&&9==n?s=3:(1==t||2==t)&&10!=s&&2>n?s=10:2<t&&(s=10),n=Math.floor(Math.random()*l),a+=i.substring(n,n+1),0===t&&9==n?l=3:(1==t||2==t)&&10!=l&&2>n?l=10:2<t&&(l=10);return r+a},ie=function(e,t){return{corsMetadata:function(){var e="none",t=!0;return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(t=!1),Object.prototype.toString.call(_.HTMLElement).indexOf("Constructor")>0&&(t=!1)),{corsType:e,corsCookiesEnabled:t}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new _[this.corsMetadata.corsType]},fireCORS:function(t,n,i){function r(e){var n;try{if((n=JSON.parse(e))!==Object(n))return void a.handleCORSError(t,null,"Response is not JSON")}catch(e){return void a.handleCORSError(t,e,"Error parsing response as JSON")}try{for(var i=t.callback,r=_,o=0;o<i.length;o++)r=r[i[o]];r(n)}catch(e){a.handleCORSError(t,e,"Error forming callback function")}}var a=this;n&&(t.loadErrorHandler=n);try{var o=this.getCORSInstance();o.open("get",t.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(o.withCredentials=!0,o.timeout=e.loadTimeout,o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4===this.readyState&&200===this.status&&r(this.responseText)}),o.onerror=function(e){a.handleCORSError(t,e,"onerror")},o.ontimeout=function(e){a.handleCORSError(t,e,"ontimeout")},o.send(),e._log.requests.push(t.corsUrl)}catch(e){this.handleCORSError(t,e,"try-catch")}},handleCORSError:function(t,n,i){e.CORSErrors.push({corsData:t,error:n,description:i}),t.loadErrorHandler&&("ontimeout"===i?t.loadErrorHandler(!0):t.loadErrorHandler(!1))}}},re={POST_MESSAGE_ENABLED:!!_.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/,FIRST_PARTY_SERVER_COOKIE:"s_ecid"},ae=function(e,t){var n=_.document;return{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var t,i="http://fast.",r="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(n.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),e.loadSSL&&(i=e.idSyncSSLUseAkamai?"https://fast.":"https://"),t=i+this.subdomain+".demdex.net/dest5.html"+r,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+this.subdomain+"_"+e.idSyncContainerID,t},checkDPIframeSrc:function(){var t="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(n.location.href);"string"==typeof e.dpIframeSrc&&e.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(e._subdomain||this.subdomain||(new Date).getTime())+"_"+e.idSyncContainerID,this.iframeHost=this.getIframeHost(e.dpIframeSrc),this.url=e.dpIframeSrc+t)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:re.POST_MESSAGE_ENABLED?null:100,onPageDestinationsFired:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframePreliminary:function(){return!(e.idSyncDisableSyncs||e.disableIdSyncs||e.idSyncDisable3rdPartySyncing||e.disableThirdPartyCookies||e.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||e._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||e._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){r=n.createElement("iframe"),r.sandbox="allow-scripts allow-same-origin",r.title="Adobe ID Syncing iFrame",r.id=i.id,r.name=i.id+"_name",r.style.cssText="display: none; width: 0; height: 0;",r.src=i.url,i.newIframeCreated=!0,t(),n.body.appendChild(r)}function t(e){r.addEventListener("load",function(){r.className="aamIframeLoaded",i.iframeHasLoaded=!0,i.fireIframeLoadedCallbacks(e),i.requestToProcess()})}this.startedAttachingIframe=!0;var i=this,r=n.getElementById(this.id);r?"IFRAME"!==r.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==r.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=r,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=r},fireIframeLoadedCallbacks:function(e){this.iframeLoadedCallbacks.forEach(function(t){"function"==typeof t&&t({message:e||"The destination publishing iframe was attached and loaded successfully."})}),this.iframeLoadedCallbacks=[]},requestToProcess:function(t){function n(){r.jsonForComparison.push(t),r.jsonWaiting.push(t),r.processSyncOnPage(t)}var i,r=this;if(t===Object(t)&&t.ibs)if(i=JSON.stringify(t.ibs||[]),this.jsonForComparison.length){var a,o,s,l=!1;for(a=0,o=this.jsonForComparison.length;a<o;a++)if(s=this.jsonForComparison[a],i===JSON.stringify(s.ibs||[])){l=!0;break}l?this.jsonDuplicates.push(t):n()}else n();if((this.receivedThirdPartyCookiesNotification||!re.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var c=this.jsonWaiting.shift();this.process(c),this.requestToProcess()}e.idSyncDisableSyncs||e.disableIdSyncs||!this.iframeHasLoaded||!this.messages.length||this.sendingMessages||(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){r.messageSendingInterval=re.POST_MESSAGE_ENABLED?null:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(t,n){var i=e._getField("MCAAMLH"),r=t.d_region||t.dcs_region;return i?r&&(e._setFieldExpire("MCAAMLH",n),e._setField("MCAAMLH",r),parseInt(i,10)!==r&&(this.regionChanged=!0,this.timesRegionChanged++,e._setField("MCSYNCSOP",""),e._setField("MCSYNCS",""),i=r)):(i=r)&&(e._setFieldExpire("MCAAMLH",n),e._setField("MCAAMLH",i)),i||(i=""),i},processSyncOnPage:function(e){var t,n,i,r;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(i=0;i<n;i++)r=t[i],r.syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e){var t,n,i,r,a,o=encodeURIComponent,s=!1;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(s=!0,i=0;i<n;i++)r=t[i],a=[o("ibs"),o(r.id||""),o(r.tag||""),j.encodeAndBuildRequest(r.url||[],","),o(r.ttl||""),"","",r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(a.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,a.join("|")));s&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(t,n,i){var r="syncOnPage"===i,a=r?"MCSYNCSOP":"MCSYNCS";e._readVisitor();var o,s,l=e._getField(a),c=!1,u=!1,d=Math.ceil((new Date).getTime()/re.MILLIS_PER_DAY);l?(o=l.split("*"),s=this.pruneSyncData(o,t.id,d),c=s.dataPresent,u=s.dataValid,c&&u||this.fireSync(r,t,n,o,a,d)):(o=[],this.fireSync(r,t,n,o,a,d))},pruneSyncData:function(e,t,n){var i,r,a,o=!1,s=!1;for(r=0;r<e.length;r++)i=e[r],a=parseInt(i.split("-")[1],10),i.match("^"+t+"-")?(o=!0,n<a?s=!0:(e.splice(r,1),r--)):n>=a&&(e.splice(r,1),r--);return{dataPresent:o,dataValid:s}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(t,n,i,r,a,o){var s=this;if(t){if("img"===n.tag){var l,c,u,d,f=n.url,p=e.loadSSL?"https:":"http:";for(l=0,c=f.length;l<c;l++){u=f[l],d=/^\/\//.test(u);var g=new Image;g.addEventListener("load",function(t,n,i,r){return function(){s.onPagePixels[t]=null,e._readVisitor();var o,l=e._getField(a),c=[];if(l){o=l.split("*");var u,d,f;for(u=0,d=o.length;u<d;u++)f=o[u],f.match("^"+n.id+"-")||c.push(f)}s.setSyncTrackingData(c,n,i,r)}}(this.onPagePixels.length,n,a,o)),g.src=(d?p:"")+u,this.onPagePixels.push(g)}}}else this.addMessage(i),this.setSyncTrackingData(r,n,a,o)},addMessage:function(t){var n=encodeURIComponent,i=n(e._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((re.POST_MESSAGE_ENABLED?"":i)+t)},setSyncTrackingData:function(t,n,i,r){t.push(n.id+"-"+(r+Math.ceil(n.ttl/60/24))),this.manageSyncsSize(t),e._setField(i,t.join("*"))},sendMessages:function(){var e,t=this,n="",i=encodeURIComponent;this.regionChanged&&(n=i("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?re.POST_MESSAGE_ENABLED?(e=n+i("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(n+e),setTimeout(function(){t.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){te.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,n=/^---destpub-to-parent---/;"string"==typeof e&&n.test(e)&&(t=e.replace(n,"").split("|"),"canSetThirdPartyCookies"===t[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(i){(null==this.url||i.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof e._subdomain&&e._subdomain.length?this.subdomain=e._subdomain:this.subdomain=i.subdomain||"",this.url=this.getUrl()),i.ibs instanceof Array&&i.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(e.idSyncAttachIframeOnWindowLoad?(t.windowLoaded||"complete"===n.readyState||"loaded"===n.readyState)&&this.attachIframe():this.attachIframeASAP()),"function"==typeof e.idSyncIDCallResult?e.idSyncIDCallResult(i):this.requestToProcess(i),"function"==typeof e.idSyncAfterIDCallResult&&e.idSyncAfterIDCallResult(i)},canMakeSyncIDCall:function(t,n){return e._forceSyncIDCall||!t||n-t>re.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){function e(){t.startedAttachingIframe||(n.body?t.attachIframe():setTimeout(e,30))}var t=this;e()}}},oe={audienceManagerServer:{},audienceManagerServerSecure:{},cookieDomain:{},cookieLifetime:{},cookieName:{},doesOptInApply:{},disableThirdPartyCalls:{},discardTrackingServerECID:{},idSyncAfterIDCallResult:{},idSyncAttachIframeOnWindowLoad:{},idSyncContainerID:{},idSyncDisable3rdPartySyncing:{},disableThirdPartyCookies:{},idSyncDisableSyncs:{},disableIdSyncs:{},idSyncIDCallResult:{},idSyncSSLUseAkamai:{},isCoopSafe:{},isIabContext:{},isOptInStorageEnabled:{},loadSSL:{},loadTimeout:{},marketingCloudServer:{},marketingCloudServerSecure:{},optInCookieDomain:{},optInStorageExpiry:{},overwriteCrossDomainMCIDAndAID:{},preOptInApprovals:{},previousPermissions:{},resetBeforeVersion:{},sdidParamExpiry:{},serverState:{},sessionCookieName:{},secureCookie:{},takeTimeoutMetrics:{},trackingServer:{},trackingServerSecure:{},whitelistIframeDomains:{},whitelistParentDomain:{}},se={getConfigNames:function(){return Object.keys(oe)},getConfigs:function(){return oe},normalizeConfig:function(e){return"function"!=typeof e?e:e()}},le=function(e){var t={};return e.on=function(e,n,i){if(!n||"function"!=typeof n)throw new Error("[ON] Callback should be a function.");t.hasOwnProperty(e)||(t[e]=[]);var r=t[e].push({callback:n,context:i})-1;return function(){t[e].splice(r,1),t[e].length||delete t[e]}},e.off=function(e,n){t.hasOwnProperty(e)&&(t[e]=t[e].filter(function(e){if(e.callback!==n)return e}))},e.publish=function(e){if(t.hasOwnProperty(e)){var n=[].slice.call(arguments,1);t[e].slice(0).forEach(function(e){e.callback.apply(e.context,n)})}},e.publish},ce={PENDING:"pending",CHANGED:"changed",COMPLETE:"complete"},ue={AAM:"aam",ADCLOUD:"adcloud",ANALYTICS:"aa",CAMPAIGN:"campaign",ECID:"ecid",LIVEFYRE:"livefyre",TARGET:"target",MEDIA_ANALYTICS:"mediaaa"},de=(C={},t(C,ue.AAM,565),t(C,ue.ECID,565),C),fe=(I={},t(I,ue.AAM,[1,2,5]),t(I,ue.ECID,[1,2,5]),I),pe=function(e){return Object.keys(e).map(function(t){return e[t]})}(ue),ge=function(){var e={};return e.callbacks=Object.create(null),e.add=function(t,n){if(!c(n))throw new Error("[callbackRegistryFactory] Make sure callback is a function or an array of functions.");e.callbacks[t]=e.callbacks[t]||[];var i=e.callbacks[t].push(n)-1;return function(){e.callbacks[t].splice(i,1)}},e.execute=function(t,n){if(e.callbacks[t]){n=void 0===n?[]:n,n=n instanceof Array?n:[n];try{for(;e.callbacks[t].length;){var i=e.callbacks[t].shift();"function"==typeof i?i.apply(null,n):i instanceof Array&&i[1].apply(i[0],n)}delete e.callbacks[t]}catch(e){}}},e.executeAll=function(t,n){(n||t&&!l(t))&&Object.keys(e.callbacks).forEach(function(n){var i=void 0!==t[n]?t[n]:"";e.execute(n,i)},e)},e.hasCallbacks=function(){return Boolean(Object.keys(e.callbacks).length)},e},me=function(){},he=function(e){var t=window,n=t.console;return!!n&&"function"==typeof n[e]},_e=function(e,t,n){return n()?function(){if(he(e)){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console[e].apply(console,[t].concat(i))}}:me},Ce=u,Ie=new Ce("[ADOBE OPT-IN]"),ve=function(t,n){return e(t)===n},De=function(e,t){return e instanceof Array?e:ve(e,"string")?[e]:t||[]},Se=function(e){var t=Object.keys(e);return!!t.length&&t.every(function(t){return!0===e[t]})},Ae=function(e){return!(!e||Oe(e))&&De(e).every(function(e){return pe.indexOf(e)>-1})},ye=function(e,t){return e.reduce(function(e,n){return e[n]=t,e},{})},be=function(e){return JSON.parse(JSON.stringify(e))},Oe=function(e){return"[object Array]"===Object.prototype.toString.call(e)&&!e.length},Me=function(e){if(Te(e))return e;try{return JSON.parse(e)}catch(e){return{}}},ke=function(e){return void 0===e||(Te(e)?Ae(Object.keys(e)):Ee(e))},Ee=function(e){try{var t=JSON.parse(e);return!!e&&ve(e,"string")&&Ae(Object.keys(t))}catch(e){return!1}},Te=function(e){return null!==e&&ve(e,"object")&&!1===Array.isArray(e)},Pe=function(){},Le=function(e){return ve(e,"function")?e():e},Re=function(e,t){ke(e)||Ie.error("".concat(t))},we=function(e){return Object.keys(e).map(function(t){return e[t]})},Fe=function(e){return we(e).filter(function(e,t,n){return n.indexOf(e)===t})},Ne=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.command,i=t.params,r=void 0===i?{}:i,a=t.callback,o=void 0===a?Pe:a;if(!n||-1===n.indexOf("."))throw new Error("[OptIn.execute] Please provide a valid command.");try{var s=n.split("."),l=e[s[0]],c=s[1];if(!l||"function"!=typeof l[c])throw new Error("Make sure the plugin and API name exist.");var u=Object.assign(r,{callback:o});l[c].call(l,u)}catch(e){Ie.error("[execute] Something went wrong: "+e.message)}}};f.prototype=Object.create(Error.prototype),f.prototype.constructor=f;var xe="fetchPermissions",je="[OptIn#registerPlugin] Plugin is invalid.";p.Categories=ue,p.TimeoutError=f;var Ve=Object.freeze({OptIn:p,IabPlugin:h}),Ue=function(e,t){e.publishDestinations=function(n){var i=arguments[1],r=arguments[2];try{r="function"==typeof r?r:n.callback}catch(e){r=function(){}}var a=t;if(!a.readyToAttachIframePreliminary())return void r({error:"The destination publishing iframe is disabled in the Visitor library."});if("string"==typeof n){if(!n.length)return void r({error:"subdomain is not a populated string."});if(!(i instanceof Array&&i.length))return void r({error:"messages is not a populated array."});var o=!1;if(i.forEach(function(e){"string"==typeof e&&e.length&&(a.addMessage(e),o=!0)}),!o)return void r({error:"None of the messages are populated strings."})}else{if(!j.isObject(n))return void r({error:"Invalid parameters passed."});var s=n;if("string"!=typeof(n=s.subdomain)||!n.length)return void r({error:"config.subdomain is not a populated string."});var l=s.urlDestinations;if(!(l instanceof Array&&l.length))return void r({error:"config.urlDestinations is not a populated array."});var c=[];l.forEach(function(e){j.isObject(e)&&(e.hideReferrer?e.message&&a.addMessage(e.message):c.push(e))});!function e(){c.length&&setTimeout(function(){var t=new Image,n=c.shift();t.src=n.url,a.onPageDestinationsFired.push(n),e()},100)}()}a.iframe?(r({message:"The destination publishing iframe is already attached and loaded."}),a.requestToProcess()):!e.subdomain&&e._getField("MCMID")?(a.subdomain=n,a.doAttachIframe=!0,a.url=a.getUrl(),a.readyToAttachIframe()?(a.iframeLoadedCallbacks.push(function(e){r({message:"Attempted to attach and load the destination publishing iframe through this API call. Result: "+(e.message||"no result")})}),a.attachIframe()):r({error:"Encountered a problem in attempting to attach and load the destination publishing iframe through this API call."})):a.iframeLoadedCallbacks.push(function(e){r({message:"Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: "+(e.message||"no result")})})}},He=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var i,r,a=Math.pow,o=a(2,32),s="",l=[],c=8*t.length,u=e.h=e.h||[],d=e.k=e.k||[],f=d.length,p={},g=2;f<64;g++)if(!p[g]){for(i=0;i<313;i+=g)p[i]=g;u[f]=a(g,.5)*o|0,d[f++]=a(g,1/3)*o|0}for(t+="";t.length%64-56;)t+="\x00";for(i=0;i<t.length;i++){if((r=t.charCodeAt(i))>>8)return;l[i>>2]|=r<<(3-i)%4*8}for(l[l.length]=c/o|0,l[l.length]=c,r=0;r<l.length;){var m=l.slice(r,r+=16),h=u;for(u=u.slice(0,8),i=0;i<64;i++){var _=m[i-15],C=m[i-2],I=u[0],v=u[4],D=u[7]+(n(v,6)^n(v,11)^n(v,25))+(v&u[5]^~v&u[6])+d[i]+(m[i]=i<16?m[i]:m[i-16]+(n(_,7)^n(_,18)^_>>>3)+m[i-7]+(n(C,17)^n(C,19)^C>>>10)|0);u=[D+((n(I,2)^n(I,13)^n(I,22))+(I&u[1]^I&u[2]^u[1]&u[2]))|0].concat(u),u[4]=u[4]+D|0}for(i=0;i<8;i++)u[i]=u[i]+h[i]|0}for(i=0;i<8;i++)for(r=3;r+1;r--){var S=u[i]>>8*r&255;s+=(S<16?0:"")+S.toString(16)}return s},Be=function(e,t){return"SHA-256"!==t&&"SHA256"!==t&&"sha256"!==t&&"sha-256"!==t||(e=He(e)),e},Ge=function(e){return String(e).trim().toLowerCase();
},Ye=Ve.OptIn;j.defineGlobalNamespace(),window.adobe.OptInCategories=Ye.Categories;var qe=function(t,n,i){function r(e){var t=e;return function(e){var n=e||D.location.href;try{var i=m._extractParamFromUri(n,t);if(i)return N.parsePipeDelimetedKeyValues(i)}catch(e){}}}function a(e){function t(e,t,n){e&&e.match(re.VALID_VISITOR_ID_REGEX)&&(n===y&&(v=!0),t(e))}t(e[y],m.setMarketingCloudVisitorID,y),m._setFieldExpire(T,-1),t(e[M],m.setAnalyticsVisitorID)}function o(e){e=e||{},m._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",m._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},m._supplementalDataIDLast=e.supplementalDataIDLast||"",m._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function s(e){function t(e,t,n){return n=n?n+="|":n,n+=e+"="+encodeURIComponent(t)}function n(e,n){var i=n[0],r=n[1];return null!=r&&r!==P&&(e=t(i,r,e)),e}var i=e.reduce(n,"");return function(e){var t=N.getTimestampInSeconds();return e=e?e+="|":e,e+="TS="+t}(i)}function l(e){var t=e.minutesToLive,n="";return(m.idSyncDisableSyncs||m.disableIdSyncs)&&(n=n||"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||(n=n||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(n=n||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||t<=0)&&(n=n||"Error: config.minutesToLive needs to be a positive number")),{error:n,ttl:t}}function c(){return!!m.configs.doesOptInApply&&!(h.optIn.isComplete&&u())}function u(){return m.configs.doesOptInApply&&m.configs.isIabContext?h.optIn.isApproved(h.optIn.Categories.ECID)&&I:h.optIn.isApproved(h.optIn.Categories.ECID)}function d(){[["getMarketingCloudVisitorID"],["setCustomerIDs",void 0],["getAnalyticsVisitorID"],["getAudienceManagerLocationHint"],["getLocationHint"],["getAudienceManagerBlob"]].forEach(function(e){var t=e[0],n=2===e.length?e[1]:"",i=m[t];m[t]=function(e){return u()&&m.isAllowed()?i.apply(m,arguments):("function"==typeof e&&m._callCallback(e,[n]),n)}})}function f(e,t){if(I=!0,e)throw new Error("[IAB plugin] : "+e);t.gdprApplies&&(C=t.consentString),m.init(),g()}function p(){h.optIn.isComplete&&(h.optIn.isApproved(h.optIn.Categories.ECID)?m.configs.isIabContext?h.optIn.execute({command:"iabPlugin.fetchConsentData",callback:f}):(m.init(),g()):(d(),g()))}function g(){h.optIn.off("complete",p)}if(!i||i.split("").reverse().join("")!==t)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var m=this,h=window.adobe,C="",I=!1,v=!1;m.version="4.6.0";var D=_,S=D.Visitor;S.version=m.version,S.AuthState=E.AUTH_STATE,S.OptOut=E.OPT_OUT,D.s_c_in||(D.s_c_il=[],D.s_c_in=0),m._c="Visitor",m._il=D.s_c_il,m._in=D.s_c_in,m._il[m._in]=m,D.s_c_in++,m._instanceType="regular",m._log={requests:[]},m.marketingCloudOrgID=t,m.cookieName="AMCV_"+t,m.sessionCookieName="AMCVS_"+t,m.cookieDomain=$(),m.loadSSL=!0,m.loadTimeout=3e4,m.CORSErrors=[],m.marketingCloudServer=m.audienceManagerServer="dpm.demdex.net",m.sdidParamExpiry=30;var A=null,y="MCMID",b="MCIDTS",O="A",M="MCAID",k="AAM",T="MCAAMB",P="NONE",L=function(e){return!Object.prototype[e]},R=ie(m);m.FIELDS=E.FIELDS,m.cookieRead=function(e){return Q.get(e)},m.cookieWrite=function(e,t,n){var i=m.cookieLifetime?(""+m.cookieLifetime).toUpperCase():"",r=!1;return m.configs&&m.configs.secureCookie&&"https:"===location.protocol&&(r=!0),Q.set(e,""+t,{expires:n,domain:m.cookieDomain,cookieLifetime:i,secure:r})},m.resetState=function(e){e?m._mergeServerState(e):o()},m._isAllowedDone=!1,m._isAllowedFlag=!1,m.isAllowed=function(){return m._isAllowedDone||(m._isAllowedDone=!0,(m.cookieRead(m.cookieName)||m.cookieWrite(m.cookieName,"T",1))&&(m._isAllowedFlag=!0)),"T"===m.cookieRead(m.cookieName)&&m._helpers.removeCookie(m.cookieName),m._isAllowedFlag},m.setMarketingCloudVisitorID=function(e){m._setMarketingCloudFields(e)},m._use1stPartyMarketingCloudServer=!1,m.getMarketingCloudVisitorID=function(e,t){m.marketingCloudServer&&m.marketingCloudServer.indexOf(".demdex.net")<0&&(m._use1stPartyMarketingCloudServer=!0);var n=m._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;return m._getRemoteField(y,i,e,t,n)};var w=function(e,t){var n={};m.getMarketingCloudVisitorID(function(){t.forEach(function(e){n[e]=m._getField(e,!0)}),-1!==t.indexOf("MCOPTOUT")?m.isOptedOut(function(t){n.MCOPTOUT=t,e(n)},null,!0):e(n)},!0)};m.getVisitorValues=function(e,t){var n={MCMID:{fn:m.getMarketingCloudVisitorID,args:[!0],context:m},MCOPTOUT:{fn:m.isOptedOut,args:[void 0,!0],context:m},MCAID:{fn:m.getAnalyticsVisitorID,args:[!0],context:m},MCAAMLH:{fn:m.getAudienceManagerLocationHint,args:[!0],context:m},MCAAMB:{fn:m.getAudienceManagerBlob,args:[!0],context:m}},i=t&&t.length?j.pluck(n,t):n;t&&-1===t.indexOf("MCAID")?w(e,t):z(i,e)},m._currentCustomerIDs={},m._customerIDsHashChanged=!1,m._newCustomerIDsHash="",m.setCustomerIDs=function(t,n){function i(){m._customerIDsHashChanged=!1}if(!m.isOptedOut()&&t){if(!j.isObject(t)||j.isObjectEmpty(t))return!1;m._readVisitor();var r,a,o;for(r in t)if(L(r)&&(a=t[r],n=a.hasOwnProperty("hashType")?a.hashType:n,a))if("object"===e(a)){var s={};if(a.id){if(n){if(!(o=Be(Ge(a.id),n)))return;a.id=o,s.hashType=n}s.id=a.id}void 0!=a.authState&&(s.authState=a.authState),m._currentCustomerIDs[r]=s}else if(n){if(!(o=Be(Ge(a),n)))return;m._currentCustomerIDs[r]={id:o,hashType:n}}else m._currentCustomerIDs[r]={id:a};var l=m.getCustomerIDs(),c=m._getField("MCCIDH"),u="";c||(c=0);for(r in l)L(r)&&(a=l[r],u+=(u?"|":"")+r+"|"+(a.id?a.id:"")+(a.authState?a.authState:""));m._newCustomerIDsHash=String(m._hash(u)),m._newCustomerIDsHash!==c&&(m._customerIDsHashChanged=!0,m._mapCustomerIDs(i))}},m.getCustomerIDs=function(){m._readVisitor();var e,t,n={};for(e in m._currentCustomerIDs)L(e)&&(t=m._currentCustomerIDs[e],t.id&&(n[e]||(n[e]={}),n[e].id=t.id,void 0!=t.authState?n[e].authState=t.authState:n[e].authState=S.AuthState.UNKNOWN,t.hashType&&(n[e].hashType=t.hashType)));return n},m.setAnalyticsVisitorID=function(e){m._setAnalyticsFields(e)},m.getAnalyticsVisitorID=function(e,t,n){if(!N.isTrackingServerPopulated()&&!n)return m._callCallback(e,[""]),"";var i="";if(n||(i=m.getMarketingCloudVisitorID(function(t){m.getAnalyticsVisitorID(e,!0)})),i||n){var r=n?m.marketingCloudServer:m.trackingServer,a="";m.loadSSL&&(n?m.marketingCloudServerSecure&&(r=m.marketingCloudServerSecure):m.trackingServerSecure&&(r=m.trackingServerSecure));var o={};if(r){var s="http"+(m.loadSSL?"s":"")+"://"+r+"/id",l="d_visid_ver="+m.version+"&mcorgid="+encodeURIComponent(m.marketingCloudOrgID)+(i?"&mid="+encodeURIComponent(i):"")+(m.idSyncDisable3rdPartySyncing||m.disableThirdPartyCookies?"&d_coppa=true":""),c=["s_c_il",m._in,"_set"+(n?"MarketingCloud":"Analytics")+"Fields"];a=s+"?"+l+"&callback=s_c_il%5B"+m._in+"%5D._set"+(n?"MarketingCloud":"Analytics")+"Fields",o.corsUrl=s+"?"+l,o.callback=c}return o.url=a,m._getRemoteField(n?y:M,a,e,t,o)}return""},m.getAudienceManagerLocationHint=function(e,t){if(m.getMarketingCloudVisitorID(function(t){m.getAudienceManagerLocationHint(e,!0)})){var n=m._getField(M);if(!n&&N.isTrackingServerPopulated()&&(n=m.getAnalyticsVisitorID(function(t){m.getAudienceManagerLocationHint(e,!0)})),n||!N.isTrackingServerPopulated()){var i=m._getAudienceManagerURLData(),r=i.url;return m._getRemoteField("MCAAMLH",r,e,t,i)}}return""},m.getLocationHint=m.getAudienceManagerLocationHint,m.getAudienceManagerBlob=function(e,t){if(m.getMarketingCloudVisitorID(function(t){m.getAudienceManagerBlob(e,!0)})){var n=m._getField(M);if(!n&&N.isTrackingServerPopulated()&&(n=m.getAnalyticsVisitorID(function(t){m.getAudienceManagerBlob(e,!0)})),n||!N.isTrackingServerPopulated()){var i=m._getAudienceManagerURLData(),r=i.url;return m._customerIDsHashChanged&&m._setFieldExpire(T,-1),m._getRemoteField(T,r,e,t,i)}}return""},m._supplementalDataIDCurrent="",m._supplementalDataIDCurrentConsumed={},m._supplementalDataIDLast="",m._supplementalDataIDLastConsumed={},m.getSupplementalDataID=function(e,t){m._supplementalDataIDCurrent||t||(m._supplementalDataIDCurrent=m._generateID(1));var n=m._supplementalDataIDCurrent;return m._supplementalDataIDLast&&!m._supplementalDataIDLastConsumed[e]?(n=m._supplementalDataIDLast,m._supplementalDataIDLastConsumed[e]=!0):n&&(m._supplementalDataIDCurrentConsumed[e]&&(m._supplementalDataIDLast=m._supplementalDataIDCurrent,m._supplementalDataIDLastConsumed=m._supplementalDataIDCurrentConsumed,m._supplementalDataIDCurrent=n=t?"":m._generateID(1),m._supplementalDataIDCurrentConsumed={}),n&&(m._supplementalDataIDCurrentConsumed[e]=!0)),n};var F=!1;m._liberatedOptOut=null,m.getOptOut=function(e,t){var n=m._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;if(u())return m._getRemoteField("MCOPTOUT",i,e,t,n);if(m._registerCallback("liberatedOptOut",e),null!==m._liberatedOptOut)return m._callAllCallbacks("liberatedOptOut",[m._liberatedOptOut]),F=!1,m._liberatedOptOut;if(F)return null;F=!0;var r="liberatedGetOptOut";return n.corsUrl=n.corsUrl.replace(/dpm\.demdex\.net\/id\?/,"dpm.demdex.net/optOutStatus?"),n.callback=[r],_[r]=function(e){if(e===Object(e)){var t,n,i=j.parseOptOut(e,t,P);t=i.optOut,n=1e3*i.d_ottl,m._liberatedOptOut=t,setTimeout(function(){m._liberatedOptOut=null},n)}m._callAllCallbacks("liberatedOptOut",[t]),F=!1},R.fireCORS(n),null},m.isOptedOut=function(e,t,n){t||(t=S.OptOut.GLOBAL);var i=m.getOptOut(function(n){var i=n===S.OptOut.GLOBAL||n.indexOf(t)>=0;m._callCallback(e,[i])},n);return i?i===S.OptOut.GLOBAL||i.indexOf(t)>=0:null},m._fields=null,m._fieldsExpired=null,m._hash=function(e){var t,n,i=0;if(e)for(t=0;t<e.length;t++)n=e.charCodeAt(t),i=(i<<5)-i+n,i&=i;return i},m._generateID=ne,m._generateLocalMID=function(){var e=m._generateID(0);return V.isClientSideMarketingCloudVisitorID=!0,e},m._callbackList=null,m._callCallback=function(e,t){try{"function"==typeof e?e.apply(D,t):e[1].apply(e[0],t)}catch(e){}},m._registerCallback=function(e,t){t&&(null==m._callbackList&&(m._callbackList={}),void 0==m._callbackList[e]&&(m._callbackList[e]=[]),m._callbackList[e].push(t))},m._callAllCallbacks=function(e,t){if(null!=m._callbackList){var n=m._callbackList[e];if(n)for(;n.length>0;)m._callCallback(n.shift(),t)}},m._addQuerystringParam=function(e,t,n,i){var r=encodeURIComponent(t)+"="+encodeURIComponent(n),a=N.parseHash(e),o=N.hashlessUrl(e);if(-1===o.indexOf("?"))return o+"?"+r+a;var s=o.split("?"),l=s[0]+"?",c=s[1];return l+N.addQueryParamAtLocation(c,r,i)+a},m._extractParamFromUri=function(e,t){var n=new RegExp("[\\?&#]"+t+"=([^&#]*)"),i=n.exec(e);if(i&&i.length)return decodeURIComponent(i[1])},m._parseAdobeMcFromUrl=r(re.ADOBE_MC),m._parseAdobeMcSdidFromUrl=r(re.ADOBE_MC_SDID),m._attemptToPopulateSdidFromUrl=function(e){var n=m._parseAdobeMcSdidFromUrl(e),i=1e9;n&&n.TS&&(i=N.getTimestampInSeconds()-n.TS),n&&n.SDID&&n.MCORGID===t&&i<m.sdidParamExpiry&&(m._supplementalDataIDCurrent=n.SDID,m._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},m._attemptToPopulateIdsFromUrl=function(){var e=m._parseAdobeMcFromUrl();if(e&&e.TS){var n=N.getTimestampInSeconds(),i=n-e.TS;if(Math.floor(i/60)>re.ADOBE_MC_TTL_IN_MIN||e.MCORGID!==t)return;a(e)}},m._mergeServerState=function(e){if(e)try{if(e=function(e){return N.isObject(e)?e:JSON.parse(e)}(e),e[m.marketingCloudOrgID]){var t=e[m.marketingCloudOrgID];!function(e){N.isObject(e)&&m.setCustomerIDs(e)}(t.customerIDs),o(t.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.")}},m._timeout=null,m._loadData=function(e,t,n,i){t=m._addQuerystringParam(t,"d_fieldgroup",e,1),i.url=m._addQuerystringParam(i.url,"d_fieldgroup",e,1),i.corsUrl=m._addQuerystringParam(i.corsUrl,"d_fieldgroup",e,1),V.fieldGroupObj[e]=!0,i===Object(i)&&i.corsUrl&&"XMLHttpRequest"===R.corsMetadata.corsType&&R.fireCORS(i,n,e)},m._clearTimeout=function(e){null!=m._timeout&&m._timeout[e]&&(clearTimeout(m._timeout[e]),m._timeout[e]=0)},m._settingsDigest=0,m._getSettingsDigest=function(){if(!m._settingsDigest){var e=m.version;m.audienceManagerServer&&(e+="|"+m.audienceManagerServer),m.audienceManagerServerSecure&&(e+="|"+m.audienceManagerServerSecure),m._settingsDigest=m._hash(e)}return m._settingsDigest},m._readVisitorDone=!1,m._readVisitor=function(){if(!m._readVisitorDone){m._readVisitorDone=!0;var e,t,n,i,r,a,o=m._getSettingsDigest(),s=!1,l=m.cookieRead(m.cookieName),c=new Date;if(l||v||m.discardTrackingServerECID||(l=m.cookieRead(re.FIRST_PARTY_SERVER_COOKIE)),null==m._fields&&(m._fields={}),l&&"T"!==l)for(l=l.split("|"),l[0].match(/^[\-0-9]+$/)&&(parseInt(l[0],10)!==o&&(s=!0),l.shift()),l.length%2==1&&l.pop(),e=0;e<l.length;e+=2)t=l[e].split("-"),n=t[0],i=l[e+1],t.length>1?(r=parseInt(t[1],10),a=t[1].indexOf("s")>0):(r=0,a=!1),s&&("MCCIDH"===n&&(i=""),r>0&&(r=c.getTime()/1e3-60)),n&&i&&(m._setField(n,i,1),r>0&&(m._fields["expire"+n]=r+(a?"s":""),(c.getTime()>=1e3*r||a&&!m.cookieRead(m.sessionCookieName))&&(m._fieldsExpired||(m._fieldsExpired={}),m._fieldsExpired[n]=!0)));!m._getField(M)&&N.isTrackingServerPopulated()&&(l=m.cookieRead("s_vi"))&&(l=l.split("|"),l.length>1&&l[0].indexOf("v1")>=0&&(i=l[1],e=i.indexOf("["),e>=0&&(i=i.substring(0,e)),i&&i.match(re.VALID_VISITOR_ID_REGEX)&&m._setField(M,i)))}},m._appendVersionTo=function(e){var t="vVersion|"+m.version,n=e?m._getCookieVersion(e):null;return n?Z.areVersionsDifferent(n,m.version)&&(e=e.replace(re.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},m._writeVisitor=function(){var e,t,n=m._getSettingsDigest();for(e in m._fields)L(e)&&m._fields[e]&&"expire"!==e.substring(0,6)&&(t=m._fields[e],n+=(n?"|":"")+e+(m._fields["expire"+e]?"-"+m._fields["expire"+e]:"")+"|"+t);n=m._appendVersionTo(n),m.cookieWrite(m.cookieName,n,1)},m._getField=function(e,t){return null==m._fields||!t&&m._fieldsExpired&&m._fieldsExpired[e]?null:m._fields[e]},m._setField=function(e,t,n){null==m._fields&&(m._fields={}),m._fields[e]=t,n||m._writeVisitor()},m._getFieldList=function(e,t){var n=m._getField(e,t);return n?n.split("*"):null},m._setFieldList=function(e,t,n){m._setField(e,t?t.join("*"):"",n)},m._getFieldMap=function(e,t){var n=m._getFieldList(e,t);if(n){var i,r={};for(i=0;i<n.length;i+=2)r[n[i]]=n[i+1];return r}return null},m._setFieldMap=function(e,t,n){var i,r=null;if(t){r=[];for(i in t)L(i)&&(r.push(i),r.push(t[i]))}m._setFieldList(e,r,n)},m._setFieldExpire=function(e,t,n){var i=new Date;i.setTime(i.getTime()+1e3*t),null==m._fields&&(m._fields={}),m._fields["expire"+e]=Math.floor(i.getTime()/1e3)+(n?"s":""),t<0?(m._fieldsExpired||(m._fieldsExpired={}),m._fieldsExpired[e]=!0):m._fieldsExpired&&(m._fieldsExpired[e]=!1),n&&(m.cookieRead(m.sessionCookieName)||m.cookieWrite(m.sessionCookieName,"1"))},m._findVisitorID=function(t){return t&&("object"===e(t)&&(t=t.d_mid?t.d_mid:t.visitorID?t.visitorID:t.id?t.id:t.uuid?t.uuid:""+t),t&&"NOTARGET"===(t=t.toUpperCase())&&(t=P),t&&(t===P||t.match(re.VALID_VISITOR_ID_REGEX))||(t="")),t},m._setFields=function(t,n){if(m._clearTimeout(t),null!=m._loading&&(m._loading[t]=!1),V.fieldGroupObj[t]&&V.setState(t,!1),"MC"===t){!0!==V.isClientSideMarketingCloudVisitorID&&(V.isClientSideMarketingCloudVisitorID=!1);var i=m._getField(y);if(!i||m.overwriteCrossDomainMCIDAndAID){if(!(i="object"===e(n)&&n.mid?n.mid:m._findVisitorID(n))){if(m._use1stPartyMarketingCloudServer&&!m.tried1stPartyMarketingCloudServer)return m.tried1stPartyMarketingCloudServer=!0,void m.getAnalyticsVisitorID(null,!1,!0);i=m._generateLocalMID()}m._setField(y,i)}i&&i!==P||(i=""),"object"===e(n)&&((n.d_region||n.dcs_region||n.d_blob||n.blob)&&m._setFields(k,n),m._use1stPartyMarketingCloudServer&&n.mid&&m._setFields(O,{id:n.id})),m._callAllCallbacks(y,[i])}if(t===k&&"object"===e(n)){var r=604800;void 0!=n.id_sync_ttl&&n.id_sync_ttl&&(r=parseInt(n.id_sync_ttl,10));var a=x.getRegionAndCheckIfChanged(n,r);m._callAllCallbacks("MCAAMLH",[a]);var o=m._getField(T);(n.d_blob||n.blob)&&(o=n.d_blob,o||(o=n.blob),m._setFieldExpire(T,r),m._setField(T,o)),o||(o=""),m._callAllCallbacks(T,[o]),!n.error_msg&&m._newCustomerIDsHash&&m._setField("MCCIDH",m._newCustomerIDsHash)}if(t===O){var s=m._getField(M);s&&!m.overwriteCrossDomainMCIDAndAID||(s=m._findVisitorID(n),s?s!==P&&m._setFieldExpire(T,-1):s=P,m._setField(M,s)),s&&s!==P||(s=""),m._callAllCallbacks(M,[s])}if(m.idSyncDisableSyncs||m.disableIdSyncs)x.idCallNotProcesssed=!0;else{x.idCallNotProcesssed=!1;var l={};l.ibs=n.ibs,l.subdomain=n.subdomain,x.processIDCallData(l)}if(n===Object(n)){var c,d;u()&&m.isAllowed()&&(c=m._getField("MCOPTOUT"));var f=j.parseOptOut(n,c,P);c=f.optOut,d=f.d_ottl,m._setFieldExpire("MCOPTOUT",d,!0),m._setField("MCOPTOUT",c),m._callAllCallbacks("MCOPTOUT",[c])}},m._loading=null,m._getRemoteField=function(e,t,n,i,r){var a,o="",s=N.isFirstPartyAnalyticsVisitorIDCall(e),l={MCAAMLH:!0,MCAAMB:!0};if(u()&&m.isAllowed()){m._readVisitor(),o=m._getField(e,!0===l[e]);if(function(){return(!o||m._fieldsExpired&&m._fieldsExpired[e])&&(!m.disableThirdPartyCalls||s)}()){if(e===y||"MCOPTOUT"===e?a="MC":"MCAAMLH"===e||e===T?a=k:e===M&&(a=O),a)return!t||null!=m._loading&&m._loading[a]||(null==m._loading&&(m._loading={}),m._loading[a]=!0,m._loadData(a,t,function(t){if(!m._getField(e)){t&&V.setState(a,!0);var n="";e===y?n=m._generateLocalMID():a===k&&(n={error_msg:"timeout"}),m._setFields(a,n)}},r)),m._registerCallback(e,n),o||(t||m._setFields(a,{id:P}),"")}else o||(e===y?(m._registerCallback(e,n),o=m._generateLocalMID(),m.setMarketingCloudVisitorID(o)):e===M?(m._registerCallback(e,n),o="",m.setAnalyticsVisitorID(o)):(o="",i=!0))}return e!==y&&e!==M||o!==P||(o="",i=!0),n&&i&&m._callCallback(n,[o]),o},m._setMarketingCloudFields=function(e){m._readVisitor(),m._setFields("MC",e)},m._mapCustomerIDs=function(e){m.getAudienceManagerBlob(e,!0)},m._setAnalyticsFields=function(e){m._readVisitor(),m._setFields(O,e)},m._setAudienceManagerFields=function(e){m._readVisitor(),m._setFields(k,e)},m._getAudienceManagerURLData=function(e){var t=m.audienceManagerServer,n="",i=m._getField(y),r=m._getField(T,!0),a=m._getField(M),o=a&&a!==P?"&d_cid_ic=AVID%01"+encodeURIComponent(a):"";if(m.loadSSL&&m.audienceManagerServerSecure&&(t=m.audienceManagerServerSecure),t){var s,l,c=m.getCustomerIDs();if(c)for(s in c)L(s)&&(l=c[s],o+="&d_cid_ic="+encodeURIComponent(s)+"%01"+encodeURIComponent(l.id?l.id:"")+(l.authState?"%01"+l.authState:""));e||(e="_setAudienceManagerFields");var u="http"+(m.loadSSL?"s":"")+"://"+t+"/id",d="d_visid_ver="+m.version+(C&&-1!==u.indexOf("demdex.net")?"&gdpr=1&gdpr_force=1&gdpr_consent="+C:"")+"&d_rtbd=json&d_ver=2"+(!i&&m._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(m.marketingCloudOrgID)+"&d_nsid="+(m.idSyncContainerID||0)+(i?"&d_mid="+encodeURIComponent(i):"")+(m.idSyncDisable3rdPartySyncing||m.disableThirdPartyCookies?"&d_coppa=true":"")+(!0===A?"&d_coop_safe=1":!1===A?"&d_coop_unsafe=1":"")+(r?"&d_blob="+encodeURIComponent(r):"")+o,f=["s_c_il",m._in,e];return n=u+"?"+d+"&d_cb=s_c_il%5B"+m._in+"%5D."+e,{url:n,corsUrl:u+"?"+d,callback:f}}return{url:n}},m.appendVisitorIDsTo=function(e){try{var t=[[y,m._getField(y)],[M,m._getField(M)],["MCORGID",m.marketingCloudOrgID]];return m._addQuerystringParam(e,re.ADOBE_MC,s(t))}catch(t){return e}},m.appendSupplementalDataIDTo=function(e,t){if(!(t=t||m.getSupplementalDataID(N.generateRandomString(),!0)))return e;try{var n=s([["SDID",t],["MCORGID",m.marketingCloudOrgID]]);return m._addQuerystringParam(e,re.ADOBE_MC_SDID,n)}catch(t){return e}};var N={parseHash:function(e){var t=e.indexOf("#");return t>0?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return t>0?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,n){var i=e.split("&");return n=null!=n?n:i.length,i.splice(n,0,t),i.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,n){if(e!==M)return!1;var i;return t||(t=m.trackingServer),n||(n=m.trackingServerSecure),!("string"!=typeof(i=m.loadSSL?n:t)||!i.length)&&(i.indexOf("2o7.net")<0&&i.indexOf("omtrdc.net")<0)},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){Q.remove(e,{domain:m.cookieDomain})},isTrackingServerPopulated:function(){return!!m.trackingServer||!!m.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce(function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e},{})},generateRandomString:function(e){e=e||5;for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=n[Math.floor(Math.random()*n.length)];return t},normalizeBoolean:function(e){return"true"===e||"false"!==e&&e},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t);return e}};m._helpers=N;var x=ae(m,S);m._destinationPublishing=x,m.timeoutMetricsLog=[];var V={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case"MC":!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case O:!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case k:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};m.isClientSideMarketingCloudVisitorID=function(){return V.isClientSideMarketingCloudVisitorID},m.MCIDCallTimedOut=function(){return V.MCIDCallTimedOut},m.AnalyticsIDCallTimedOut=function(){return V.AnalyticsIDCallTimedOut},m.AAMIDCallTimedOut=function(){return V.AAMIDCallTimedOut},m.idSyncGetOnPageSyncInfo=function(){return m._readVisitor(),m._getField("MCSYNCSOP")},m.idSyncByURL=function(e){if(!m.isOptedOut()){var t=l(e||{});if(t.error)return t.error;var n,i,r=e.url,a=encodeURIComponent,o=x;return r=r.replace(/^https:/,"").replace(/^http:/,""),n=j.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),i=["ibs",a(e.dpid),"img",a(r),t.ttl,"",n],o.addMessage(i.join("|")),o.requestToProcess(),"Successfully queued"}},m.idSyncByDataSource=function(e){if(!m.isOptedOut())return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,m.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},Ue(m,x),m._getCookieVersion=function(e){e=e||m.cookieRead(m.cookieName);var t=re.VERSION_REGEX.exec(e);return t&&t.length>1?t[1]:null},m._resetAmcvCookie=function(e){var t=m._getCookieVersion();t&&!Z.isLessThan(t,e)||N.removeCookie(m.cookieName)},m.setAsCoopSafe=function(){A=!0},m.setAsCoopUnsafe=function(){A=!1},function(){if(m.configs=Object.create(null),N.isObject(n))for(var e in n)L(e)&&(m[e]=n[e],m.configs[e]=n[e])}(),d();var U;m.init=function(){c()&&(h.optIn.fetchPermissions(p,!0),!h.optIn.isApproved(h.optIn.Categories.ECID))||U||(U=!0,function(){if(N.isObject(n)){m.idSyncContainerID=m.idSyncContainerID||0,A="boolean"==typeof m.isCoopSafe?m.isCoopSafe:N.parseBoolean(m.isCoopSafe),m.resetBeforeVersion&&m._resetAmcvCookie(m.resetBeforeVersion),m._attemptToPopulateIdsFromUrl(),m._attemptToPopulateSdidFromUrl(),m._readVisitor();var e=m._getField(b),t=Math.ceil((new Date).getTime()/re.MILLIS_PER_DAY);m.idSyncDisableSyncs||m.disableIdSyncs||!x.canMakeSyncIDCall(e,t)||(m._setFieldExpire(T,-1),m._setField(b,t)),m.getMarketingCloudVisitorID(),m.getAudienceManagerLocationHint(),m.getAudienceManagerBlob(),m._mergeServerState(m.serverState)}else m._attemptToPopulateIdsFromUrl(),m._attemptToPopulateSdidFromUrl()}(),function(){if(!m.idSyncDisableSyncs&&!m.disableIdSyncs){x.checkDPIframeSrc();var e=function(){var e=x;e.readyToAttachIframe()&&e.attachIframe()};D.addEventListener("load",function(){S.windowLoaded=!0,e()});try{te.receiveMessage(function(e){x.receiveMessage(e.data)},x.iframeHost)}catch(e){}}}(),function(){m.whitelistIframeDomains&&re.POST_MESSAGE_ENABLED&&(m.whitelistIframeDomains=m.whitelistIframeDomains instanceof Array?m.whitelistIframeDomains:[m.whitelistIframeDomains],m.whitelistIframeDomains.forEach(function(e){var n=new B(t,e),i=K(m,n);te.receiveMessage(i,e)}))}())}};qe.config=se,_.Visitor=qe;var Xe=qe,We=function(e){if(j.isObject(e))return Object.keys(e).filter(function(t){return""!==e[t]}).reduce(function(t,n){var i=se.normalizeConfig(e[n]),r=j.normalizeBoolean(i);return t[n]=r,t},Object.create(null))},Je=Ve.OptIn,Ke=Ve.IabPlugin;return Xe.getInstance=function(e,t){if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");e.indexOf("@")<0&&(e+="@AdobeOrg");var n=function(){var t=_.s_c_il;if(t)for(var n=0;n<t.length;n++){var i=t[n];if(i&&"Visitor"===i._c&&i.marketingCloudOrgID===e)return i}}();if(n)return n;var i=We(t);!function(e){_.adobe.optIn=_.adobe.optIn||function(){var t=j.pluck(e,["doesOptInApply","previousPermissions","preOptInApprovals","isOptInStorageEnabled","optInStorageExpiry","isIabContext"]),n=e.optInCookieDomain||e.cookieDomain;n=n||$(),n=n===window.location.hostname?"":n,t.optInCookieDomain=n;var i=new Je(t,{cookies:Q});if(t.isIabContext&&t.doesOptInApply){var r=new Ke(window.__cmp);i.registerPlugin(r)}return i}()}(i||{});var r=e,a=r.split("").reverse().join(""),o=new Xe(e,null,a);j.isObject(i)&&i.cookieDomain&&(o.cookieDomain=i.cookieDomain),function(){_.s_c_il.splice(--_.s_c_in,1)}();var s=j.getIeVersion();if("number"==typeof s&&s<10)return o._helpers.replaceMethodsWithFunction(o,function(){});var l=function(){try{return _.self!==_.parent}catch(e){return!0}}()&&!function(e){return e.cookieWrite("TEST_AMCV_COOKIE","T",1),"T"===e.cookieRead("TEST_AMCV_COOKIE")&&(e._helpers.removeCookie("TEST_AMCV_COOKIE"),!0)}(o)&&_.parent?new Y(e,i,o,_.parent):new Xe(e,i,a);return o=null,l.init(),l},function(){function e(){Xe.windowLoaded=!0}_.addEventListener?_.addEventListener("load",e):_.attachEvent&&_.attachEvent("onload",e),Xe.codeLoadEnd=(new Date).getTime()}(),Xe}();
			
	



		
				// Including mvpds/mvpd-list.js : 
				( function( window ) {
	window.tve_mvpd_list = { "ace_communications":"94a7ccd9c75c450defc2838d5257ba8f","adobe":"9d903ccd68212f85fc2e700e4733e52f","advanced_cable_communications":"a33d71917e22dceba56d1a3f55217b9f","algona_municipal_utilities":"e0fbbdbf6af6f9bd241c85433b65522e","allwest_communications":"6d7f729aca46293249a3e8a4f0c9cff1","alpine_communications":"5c2b8729771ba37e08d3ec484be4c3a1","anne_arundel_broadband":"60407462a822d73fe2ac22cc3ab25e8e","antietam":"71446d94accc8732930edf9bf98e5f7a","arkwest_communications":"e2308e19dc9f634603680291dfb2602d","armstrong":"d5dacc43370fdfe28148a9862573dff4","arvig":"2526e086e58d7ade4acde09dc260b4af","astound":"4cf08b527749125fb040df23f5a5e0da","att":"65db43f237832cbf0f299bd8f2bcf2ac","attott":"7c643c97da4e11fada42a3cce8355174","atlantic_broadband":"4282dae1eaf9e99559ab04e3e25d61a3","atmc":"6119f71a2683ce312a62bc4cf1047bf6","baldwin_telecom":"103f1f6365f2d13d366ee497e14f5098","bay_creek_communications":"421a727371d9cfadbc18b1e28be19cf1","bektel":"96116b90f122ffb3c87fdfc09b09c4b6","bend":"edc684181ea918cf9842a1ae65316afc","bitwise":"aada41a40a2a3bbcecdd63a7f79a2bd5","blueridge":"18b72b6df7d754a563ee5f017bc5f155","brighthouse":"dd55c99281c6667544470a832b1c9065","broadstripe":"5cf00e80761489a66bc4941ffdf5d9b8","btc_broadband":"5fdbe081f21d0370567776a819ec9726","buckeye_cablesystem":"77e7d2d60ed044ed59489e46be800ca2","buckeye_cablevision":"b9c811bd7aa79800b1b3a624701a6804","burlington_telecom":"9d5d828be191887f67044d949da72852","butler-bremer_communications":"ea0832d1bcddbb7f7f74d581af68a138","bvu_optinet":"5ec8fb817f2fb0a0e1e0a32346dc5fc3","cspire":"5f2128395c0ef64e339fbd5f2a5031e8","cable_one":"9957840c4f0e25ff1999c4c1cce0c245","cable_service":"fd14dffc19649ba0fd1560dba6a45d8f","cable_america":"79af9adfe2dbed189efc3c2da36d188b","cablevision":"725bd42fc9c9394e790b9a73610da431","canby_telcom":"1b9b22ca20124e3287f8e67926f533ff","cas_cable":"eda12e3976bb0c28d12bcda09af44092","cass":"3cab68956fa7c8129671ef96bc1adf7c","cc_communications":"ff72051f06f59c8eb8a8adeea36f2cf8","cedar_falls_utilities":"4fc9e6fc11df3a6df287427de4c69486","central_scott_cst":"cc84bca42d7eb09de5266e82f86ea358","centurylink_prism":"713cb00ba175af79d249e525034f72f9","centurylink_stream":"022f02444b8cd131b066ad501519c687","centurylink":"98cdd726a2733a6bf85720bb3c4d442f","charter":"4776c3504c43638698130796a1fce1cc","charter_direct":"14a820c31e15825033556d751bf07bfe","chippewa_valley_cable":"f03fbb4e96cfe0702b95447c0a23530e","cimtel_cable":"a1129d396221c3fa90da349cc6886936","cincinnati_bell":"f128b6778619d38c781ccba6116d5642","citizens_cablevision":"95bd2c875ac115ab16d827a604f08aa7","citizens_cablevision_floyd":"222aed2141c1e141e9baa953ffe77ada","citizens_telephone_corporation":"2eddf42c6f11f2a34a48a8fbc8c540a8","citylink":"73a9b16474b3b2f3d5e1ef89d275c64d","clay_county_rural_telephone_cooperative_endeavor_communication":"8e196e5b26248cf57fa9bc85caddd2ec","clear_creek_cablevision":"d7e7a3d2624bfd468d8c64f1c5783471","clickcabletv_auth_gateway_net":"d3b72befa9b18c34942adfe942660b97","cns":"f32a97390abb58dc789ecfb99ef664d4","comcast":"d8b58f7bfce28eefcc1cdd5b95c3b663","comcast_sso":"2d11694969f76e6ef9fbcd5b17f38943","comporium":"16a5c1e5799496922116a5c397a944fc","consolidated":"50ccd24213ad19f252294915a5f1a424","consolidated_auth_gateway_net":"2c73e7583831e9e38aaf2426cf5b72d4","conway_corporation":"3d341a187ef844624ba0cd5046688f74","cox":"45641e46f614125065559617b3efc5a2","crestview_cable_communications":"7bd3634eb089d82dfdcd646a35e09722","cross_tv":"314022f66e089eca9a0f2ea4a49995f8","crosslake":"bc29247bda190d403e95bae52b92bab2","ct_communications":"c9b71d692da81838e9e768ee751f4e92","ctc040":"21ba2c26cf2bd5c7262e327c625ef206","cunningham_telephone_cable":"5c4daa63ee1e6369a7886a89aa4aac47","d_and_p_communications":"81fbaf6aaaceb1ee3e9b165184a375a5","daltonutilities":"2989b8723003cd2221e0f9299c708d41","delcambre_telephone_llc":"bf23217d9859a73d8b5894e1a218a5ef","directv":"3e3b995fe19c7c1ab54f8a302ae04b94","dtv":"53da17a30bd0d3c946a41c86cb5873f1","dish":"d51f95cd19fecba66558f490554838ee","docomo_pacific":"084cd21e2272c265e2075468e3fc91aa","dtv_now":"51c6400f227f19b4aadc4087ecb043fb","eagle_communications":"1630de36c3e5664f581942a25fa30dd3","easton_utilities":"a4b2dcd511aecc5def641073681e7a81","eatel_video":"b51c28cc13c330addd751ba2ba0f2c66","emery_telcom_video":"91426c2469c83670ddf10a8476b19798","entouch":"12dc224fd3fd2c50c08de6d71c19f5c5","endeavor_communications":"068eac231bc90f2318d4b366a5cb89c9","enventis":"e174e3f78cc06b70d5c2cd795b4dccf5","epb_chattanooga":"65327172ec32efb9a9f934616f8abf5c","eplus_broadband":"03b9f1e80ad77f603082aadee3b6141d","f_b_communications":"abeea890a13dd5579d6e8000451f883b","firstmile_technologies":"74d8083db4c8c8839c5efba353af2cc9","frankfort_plant_board":"8daf8b8c4896d8d984575e9deec71566","frontier_communications":"4153e2253705db2460b81313d436aa79","fubotv":"7126f8f365efc128852346242a8696e8","full_channel":"5ed7d921b4e0d1fcb46acc2b648828e4","gar040":"8b807701f55517307c50c8c6e364c8e9","gci":"a21770cc1c0b08a876d402cfdc416ae9","golden_west_cablevision":"bc639149a4c0dff6207856fe9f744625","google_fiber":"1c8b4d6d368fd724aa47eac5596c8d67","grande":"7a3e1c7c45a215a4cbd11d441e63ec4f","great_plains_communications":"30ff6fa4fbaadae7447fc5306f348673","gta":"d81c52f524f6faf198b5daa2a865c2df","gvtc":"72adbc0b3b397e23cc03b83e9bcd3571","hargray":"5314980f9dfb033986b09ba880061a87","hawaiian_telcom":"767bcff895dc9c965a8f05c468dce76a","hbc":"66bcfee5fb4b8905bba73f5b691dc77a","hickory":"b4e1cc5de2bedf59a4111112dc4bc988","home_telecom":"dc7aeb392b65f218ed64e25f40497016","home_town_cable_plus":"464167cf5039a15ca6a29bed740b93ea","hometel":"7db9b26109010768f0370187077ca8a0","hometel_entertainment":"cbb597ddc90ec3a485d25f7a4f165801","hood_canal_communications":"876764745972cbd670d1ce0eb336319a","horizon_cable_tv":"eb4c8b38d0dc9d79370b1449295967ab","horrytc":"ed983bf3912c5f3b87ed7c8397456d11","hotwire_communications":"117be15c477cc007d174d1c1d2ac837c","htc":"ff19d093d1e27a131db9ac3154273e14","htc_communications_ia":"c06ec185bda9a6e41fbce6c474b00f19","hulu_dmvpd":"e5e7480e1a090738eeb5c4e2bb47de52","imon_communications":"360c685bd21e6858b2c99dcfa2216337","jackson_energy":"bceee38ba7a7a523896043aa46218eb3","knology":"52e4139ad74f32a05ca50efc989505a2","lau020":"f7828c0bcde8c82d3202017809667dd5","layer3mvpd":"d02b22e4622e0e4d090e99ff375e1631","liberty_cable":"978a7b7fb8cde2b520f10e170991c5ac","lit020":"4677e0081dab2c2b5b6ba883ae94d499","long_lines":"07b3ad06c3e46c06b8287ef088705f29","loretel_system":"9f363708148c3a67521b29f9ccb223bb","lpc_connect":"f56daf4b218d10f710e77296d65d3dbd","lumos_networks":"d6b53fba63e6c6072bff94150d6bb3f4","lus_fiber":"47326a2103bffb6f1396305ee8d04a6f","madison_communications":"bcedd9bcb22f453e44615e452e993e78","mctv":"40bbf99d563ee68a97cf920c4c58fee6","mediacom":"6815c25b7ee92e5e9ec107418df14eed","merrimac_communications":"57ed1ef934dd0e34b8cc77b3b3ab3e88","metrocast":"2067134b36ec45f28a1a70c6ef43a303","metronet":"f292791db9b984ae87ecef0eda96edc2","mhtc":"77c9b8f7ac3bdcbdab9d3f35052375d3","mi_connection":"bc5de88e932e445965f9426e12a7bbc2","midhudson_cable":"b3743df100b0fc980c5729ef1138d39c","midrivers_communications":"0fff5d9a4a55a8c4262b741a6cfab8c7","midcontinent_communications":"026027fa9e38a2933cb4ec0bbc0e4b6d","midstate_communications":"f9d4ac626f9ed80d3d0d91396678765e","millenium":"80db51e28c9ba1940d2072b42206b3f7","millenium_telcom_one_source":"06aae4bd90f5956223eb79527fc7cd51","morris_broadband":"f17a0fbd1c931054553be162aea7b534","mta_communications":"802201fca7cb8e27d1290ab54242d7f3","mtc030":"f66947228c1f4bc4ae7499ba3657cd22","mus_fibernet":"5e849b80993f27e25f85e6ce78aca707","muscatine_p_w":"0b75052bdee3dca7071b5ebf1eb5f76f","nrtc":"c2b871b4031c3706db40794acdcedbac","nctc":"bb696d9b2f14fa0f673315d169d4e523","nebraska_central_telecom":"a6649363f117d91422714613f8f052eb","newwave_communications":"7ec580bd7882de93b13a65d7b948236a","nextech":"1fcea22900e060162056528f32d58737","nktelco":"4b8bb5bd95648b16463785094f4e8594","nntc":"9f8961d99ec4e390b9aff7cb03857242","nortex_communications":"2a06c79d11481581d9a0f90f4ae4751b","nor030":"593ed3a998b2b37083c52eb0a7329261","nor075":"c0eccb3ff55d65d4ad374f1f60557ca8","norwood_light_broadband":"48ac8fbdf4e4f8b52a65860e45b864e3","nulink":"8b8f5ffcf9054779ec80ab6182564116","onesource_communications":"258ee630e1c8df2c843fd1825fe82c57","openband":"de82e01b9f3d3840f7b1d95af58da172","optilink":"3db5681334c44752317cdf5df88c4ae5","orbitel":"4cbc4ee5d581c6968ef766c62e05940a","otter_com_inc":"71e7d1fbaa9f54b545df2ec96668baf6","park_region_otter_tail":"486f5af3084ec419412b5893d1e4bf4c","paul_bunyan_communications":"dd034340b71c466548196bdcfe0efeb0","philo":"7824bb97e5e03edaa15a21c0962f9d0d","phonoscope_cable":"e90ce34106e71382ae983978ad152031","pioneer_communications":"79a45efed08c464dd4bbb7d56e8500b8","pioneer_dtv":"67fffda3233e1f57e0e0b541a1717e0f","pioneer_long_distance":"7106fe93f317d3bea8a3d3f3ec113541","pla020":"edaddd89d44593555ea9ca0a28510075","plateau_telecommunications":"a395fe3d321a6e39391a23bee942bf90","sony_auth_gateway_net":"d802388e287f92d9bd0a6a630f7b4b9b","pottawatomie_telephone":"a7b0540848bd6dcbb7668e71a7a93f66","premier_communications":"59779e98392a694dfe2cdc687f1e0e1d","rai030":"74d1d3a3062d5b7d3914f48443a3f0ca","randolph_telephone":"9fbabb3e3eff96aed5b75e08e7956cf0","rcn":"d449c38c8d558224de10ff15dc764568","reinbeck_telecom":"8ad0337c4d57028b84a98667d1244c69","rancho_murieta_cable":"ee88a2bba6d46442b3b9997ab28fbfd0","rock_port_cablevision":"7f31dd76468f1c0b8a4d995ab9397c56","rogers_communications":"012d7ca0ce1d7acc274b3c005a58188a","rtc_communication_corp":"b63a32863d7721893ea93de131ac6086","sav010":"c9e5fa0918a0f43b2b68042cf348fadf","selco":"e60d4d5a3831c2ed70624f5f22970202","service_electric_bb":"8681a6ed41138deaa007ba0ea009eecc","sectv":"b7d22698a6bf8add08e2ed81485937e5","serviceelectric_auth_gateway_net":"ee25b5338caaac0739b20ea6fb41a19b","shentel":"257cd9239e39041601dcc18a04d85191","sjobergs":"04dcbf21bea127668d711a47b4d08124","skybest_tv":"b648e14dd8eb808f3cf50f688d39de38","sling":"09eb6448f873a4efb839bbc17b08b325","smithville_comm":"4ff642278a1fd9280d6017dc9379b5fa","snetv":"908543024b4f95683c271ea4269e92e5","south_slope_cooperative_communications":"b17fd364e910b481a0b4b871019461a7","spectrum":"743bb262648fdcac6c5518898283c220","spencer_municipal_utilities":"8f557ab9d184bd12281d4909d7e0ecfe","srt_communications":"7f322e9bcdcbd9134e219eea372413e2","suddenlink":"7823d91ca9b240df4ef611416c32bd84","summit_broadband":"5972f104dba7217a62d268ba878a4fa9","sumner_cable_tv":"574b5335f7436df49159123e67768581","surewest":"e72fedb49624aa30df7ee1dd3d9231f6","sweetwater_cable_television_co":"2aad6ed682586e4bd7f9edda394091ad","swiftel":"5ba04c7e6786d270833b2f5348ad6fcd","tct_west":"7395fb24c5c85bd62e09800b080900ff","tds":"3b84f8cfd144e7211160037ebacbf0e7","twc":"975cd70e2de25291acc0efc98a48935e","tri_county_communications_cooperative":"bcec3f9eeba093a656f0b4d4f66a2fdb","truvista":"595155ce5cc5103488644c42b5b4e315","tsc":"28e098175bb05703eb34c5adbb234370","tullahoma_utilities_board":"dd87ce8d18c91a90a3d629560125efb0","twin_valley":"025bbdd0f83449381217c5ee020b2bdb","unitedtel":"1b1a86d9b4bfdefb3091374d9cdc9ed7","univision":"72133b54ada6b97de3ddfd20790cbed7","valunet":"78521e2ac85d38b49f8884f33c1925f6","verizon":"5525ff59adcaac313923ab89d0a618c5","verizon_fios":"640c0120eec6c69e91dabd0032a2fa55","verizon_hba":"8d8efc96fcf8c4947c5a0f5b07b8f2fe","vtel":"6470560db7ffca7f4362a5072c3968e6","volcano_vision":"088de7db5a81e3962d0fc9e28d08b113","waitsfield_cable":"1f1b23b025ee9ccc897de6186518481c","watch_abc_default":"dce77ac5cbd62c3b53c84cf498e6ba30","watch_datg":"76a2849433f69a1977ad5ffbf14f9f0c","wave_broadband":"77ba599a94b5ee6d3972d7b2b7ac7ca4","west_carolina_communications":"4a26e128c67b004d35e327812d72d8b7","west_central_telephone_association":"c6ec94996797d421f386e2b7f6b7ae08","west_river_cooperative_telephone_company":"1b4fea3b0897a9a28e6061cdf89e736a","western_iowa_networks":"dca9b1a399a80b69ba33c6edc93148ce","wide_open_west":"fe2066988e1f50e0bbe6ea672084d574","windstream":"4278e68eb5bf1c74ae050176d8a3ca46","windstream_d_and_e_systems_inc":"b1bdb3b451fac34a2d5d7bf0bca0a9d1","windstream_lexcom_entertainment_llc":"6e54c805854972656e7d6b1421d31944","windstream_kentucky_llc":"30f0a4f039ee98aa3a4e49800bf4e6c3","windstream_nebraska":"0f75031c615202d868311ab8666aa497","wtc":"27daa922e196bd91a0fe8cdf922591fa","yadtel":"f2f7b016744ae707696cbf304721cb1c","youtube_subscription_platform":"027b2b4baccdc848db095a7db10da595","alticeone":"c6329f305187de4f1953972742a1fae2","montana_sky_west":"98ca1d5d2bc4836dd58e4b93c6ad8cc4","minburn_cablevision":"1a08dd2b55e6d7a4c77eab93abd2c5a0","gorham_telcom":"6f8fe12065bbe7c3f3b82d0aac15dd83","racetv_llc":"491d6a156b842e5a0c2a82b670bf5e91","cooperative_telephone_exchange":"0efbcc58200919656bd0303078a5771b"}
	return window.tve_mvpd_list;
})( window );
			
	


		
				// Including mvpds/mvpd-list.js : 
				( function( window ) {
	window.tve_mvpd_list = { "ace_communications":"94a7ccd9c75c450defc2838d5257ba8f","adobe":"9d903ccd68212f85fc2e700e4733e52f","advanced_cable_communications":"a33d71917e22dceba56d1a3f55217b9f","algona_municipal_utilities":"e0fbbdbf6af6f9bd241c85433b65522e","allwest_communications":"6d7f729aca46293249a3e8a4f0c9cff1","alpine_communications":"5c2b8729771ba37e08d3ec484be4c3a1","anne_arundel_broadband":"60407462a822d73fe2ac22cc3ab25e8e","antietam":"71446d94accc8732930edf9bf98e5f7a","arkwest_communications":"e2308e19dc9f634603680291dfb2602d","armstrong":"d5dacc43370fdfe28148a9862573dff4","arvig":"2526e086e58d7ade4acde09dc260b4af","astound":"4cf08b527749125fb040df23f5a5e0da","att":"65db43f237832cbf0f299bd8f2bcf2ac","attott":"7c643c97da4e11fada42a3cce8355174","atlantic_broadband":"4282dae1eaf9e99559ab04e3e25d61a3","atmc":"6119f71a2683ce312a62bc4cf1047bf6","baldwin_telecom":"103f1f6365f2d13d366ee497e14f5098","bay_creek_communications":"421a727371d9cfadbc18b1e28be19cf1","bektel":"96116b90f122ffb3c87fdfc09b09c4b6","bend":"edc684181ea918cf9842a1ae65316afc","bitwise":"aada41a40a2a3bbcecdd63a7f79a2bd5","blueridge":"18b72b6df7d754a563ee5f017bc5f155","brighthouse":"dd55c99281c6667544470a832b1c9065","broadstripe":"5cf00e80761489a66bc4941ffdf5d9b8","btc_broadband":"5fdbe081f21d0370567776a819ec9726","buckeye_cablesystem":"77e7d2d60ed044ed59489e46be800ca2","buckeye_cablevision":"b9c811bd7aa79800b1b3a624701a6804","burlington_telecom":"9d5d828be191887f67044d949da72852","butler-bremer_communications":"ea0832d1bcddbb7f7f74d581af68a138","bvu_optinet":"5ec8fb817f2fb0a0e1e0a32346dc5fc3","cspire":"5f2128395c0ef64e339fbd5f2a5031e8","cable_one":"9957840c4f0e25ff1999c4c1cce0c245","cable_service":"fd14dffc19649ba0fd1560dba6a45d8f","cable_america":"79af9adfe2dbed189efc3c2da36d188b","cablevision":"725bd42fc9c9394e790b9a73610da431","canby_telcom":"1b9b22ca20124e3287f8e67926f533ff","cas_cable":"eda12e3976bb0c28d12bcda09af44092","cass":"3cab68956fa7c8129671ef96bc1adf7c","cc_communications":"ff72051f06f59c8eb8a8adeea36f2cf8","cedar_falls_utilities":"4fc9e6fc11df3a6df287427de4c69486","central_scott_cst":"cc84bca42d7eb09de5266e82f86ea358","centurylink_prism":"713cb00ba175af79d249e525034f72f9","centurylink_stream":"022f02444b8cd131b066ad501519c687","centurylink":"98cdd726a2733a6bf85720bb3c4d442f","charter":"4776c3504c43638698130796a1fce1cc","charter_direct":"14a820c31e15825033556d751bf07bfe","chippewa_valley_cable":"f03fbb4e96cfe0702b95447c0a23530e","cimtel_cable":"a1129d396221c3fa90da349cc6886936","cincinnati_bell":"f128b6778619d38c781ccba6116d5642","citizens_cablevision":"95bd2c875ac115ab16d827a604f08aa7","citizens_cablevision_floyd":"222aed2141c1e141e9baa953ffe77ada","citizens_telephone_corporation":"2eddf42c6f11f2a34a48a8fbc8c540a8","citylink":"73a9b16474b3b2f3d5e1ef89d275c64d","clay_county_rural_telephone_cooperative_endeavor_communication":"8e196e5b26248cf57fa9bc85caddd2ec","clear_creek_cablevision":"d7e7a3d2624bfd468d8c64f1c5783471","clickcabletv_auth_gateway_net":"d3b72befa9b18c34942adfe942660b97","cns":"f32a97390abb58dc789ecfb99ef664d4","comcast":"d8b58f7bfce28eefcc1cdd5b95c3b663","comcast_sso":"2d11694969f76e6ef9fbcd5b17f38943","comporium":"16a5c1e5799496922116a5c397a944fc","consolidated":"50ccd24213ad19f252294915a5f1a424","consolidated_auth_gateway_net":"2c73e7583831e9e38aaf2426cf5b72d4","conway_corporation":"3d341a187ef844624ba0cd5046688f74","cox":"45641e46f614125065559617b3efc5a2","crestview_cable_communications":"7bd3634eb089d82dfdcd646a35e09722","cross_tv":"314022f66e089eca9a0f2ea4a49995f8","crosslake":"bc29247bda190d403e95bae52b92bab2","ct_communications":"c9b71d692da81838e9e768ee751f4e92","ctc040":"21ba2c26cf2bd5c7262e327c625ef206","cunningham_telephone_cable":"5c4daa63ee1e6369a7886a89aa4aac47","d_and_p_communications":"81fbaf6aaaceb1ee3e9b165184a375a5","daltonutilities":"2989b8723003cd2221e0f9299c708d41","delcambre_telephone_llc":"bf23217d9859a73d8b5894e1a218a5ef","directv":"3e3b995fe19c7c1ab54f8a302ae04b94","dtv":"53da17a30bd0d3c946a41c86cb5873f1","dish":"d51f95cd19fecba66558f490554838ee","docomo_pacific":"084cd21e2272c265e2075468e3fc91aa","dtv_now":"51c6400f227f19b4aadc4087ecb043fb","eagle_communications":"1630de36c3e5664f581942a25fa30dd3","easton_utilities":"a4b2dcd511aecc5def641073681e7a81","eatel_video":"b51c28cc13c330addd751ba2ba0f2c66","emery_telcom_video":"91426c2469c83670ddf10a8476b19798","entouch":"12dc224fd3fd2c50c08de6d71c19f5c5","endeavor_communications":"068eac231bc90f2318d4b366a5cb89c9","enventis":"e174e3f78cc06b70d5c2cd795b4dccf5","epb_chattanooga":"65327172ec32efb9a9f934616f8abf5c","eplus_broadband":"03b9f1e80ad77f603082aadee3b6141d","f_b_communications":"abeea890a13dd5579d6e8000451f883b","firstmile_technologies":"74d8083db4c8c8839c5efba353af2cc9","frankfort_plant_board":"8daf8b8c4896d8d984575e9deec71566","frontier_communications":"4153e2253705db2460b81313d436aa79","fubotv":"7126f8f365efc128852346242a8696e8","full_channel":"5ed7d921b4e0d1fcb46acc2b648828e4","gar040":"8b807701f55517307c50c8c6e364c8e9","gci":"a21770cc1c0b08a876d402cfdc416ae9","golden_west_cablevision":"bc639149a4c0dff6207856fe9f744625","google_fiber":"1c8b4d6d368fd724aa47eac5596c8d67","grande":"7a3e1c7c45a215a4cbd11d441e63ec4f","great_plains_communications":"30ff6fa4fbaadae7447fc5306f348673","gta":"d81c52f524f6faf198b5daa2a865c2df","gvtc":"72adbc0b3b397e23cc03b83e9bcd3571","hargray":"5314980f9dfb033986b09ba880061a87","hawaiian_telcom":"767bcff895dc9c965a8f05c468dce76a","hbc":"66bcfee5fb4b8905bba73f5b691dc77a","hickory":"b4e1cc5de2bedf59a4111112dc4bc988","home_telecom":"dc7aeb392b65f218ed64e25f40497016","home_town_cable_plus":"464167cf5039a15ca6a29bed740b93ea","hometel":"7db9b26109010768f0370187077ca8a0","hometel_entertainment":"cbb597ddc90ec3a485d25f7a4f165801","hood_canal_communications":"876764745972cbd670d1ce0eb336319a","horizon_cable_tv":"eb4c8b38d0dc9d79370b1449295967ab","horrytc":"ed983bf3912c5f3b87ed7c8397456d11","hotwire_communications":"117be15c477cc007d174d1c1d2ac837c","htc":"ff19d093d1e27a131db9ac3154273e14","htc_communications_ia":"c06ec185bda9a6e41fbce6c474b00f19","hulu_dmvpd":"e5e7480e1a090738eeb5c4e2bb47de52","imon_communications":"360c685bd21e6858b2c99dcfa2216337","jackson_energy":"bceee38ba7a7a523896043aa46218eb3","knology":"52e4139ad74f32a05ca50efc989505a2","lau020":"f7828c0bcde8c82d3202017809667dd5","layer3mvpd":"d02b22e4622e0e4d090e99ff375e1631","liberty_cable":"978a7b7fb8cde2b520f10e170991c5ac","lit020":"4677e0081dab2c2b5b6ba883ae94d499","long_lines":"07b3ad06c3e46c06b8287ef088705f29","loretel_system":"9f363708148c3a67521b29f9ccb223bb","lpc_connect":"f56daf4b218d10f710e77296d65d3dbd","lumos_networks":"d6b53fba63e6c6072bff94150d6bb3f4","lus_fiber":"47326a2103bffb6f1396305ee8d04a6f","madison_communications":"bcedd9bcb22f453e44615e452e993e78","mctv":"40bbf99d563ee68a97cf920c4c58fee6","mediacom":"6815c25b7ee92e5e9ec107418df14eed","merrimac_communications":"57ed1ef934dd0e34b8cc77b3b3ab3e88","metrocast":"2067134b36ec45f28a1a70c6ef43a303","metronet":"f292791db9b984ae87ecef0eda96edc2","mhtc":"77c9b8f7ac3bdcbdab9d3f35052375d3","mi_connection":"bc5de88e932e445965f9426e12a7bbc2","midhudson_cable":"b3743df100b0fc980c5729ef1138d39c","midrivers_communications":"0fff5d9a4a55a8c4262b741a6cfab8c7","midcontinent_communications":"026027fa9e38a2933cb4ec0bbc0e4b6d","midstate_communications":"f9d4ac626f9ed80d3d0d91396678765e","millenium":"80db51e28c9ba1940d2072b42206b3f7","millenium_telcom_one_source":"06aae4bd90f5956223eb79527fc7cd51","morris_broadband":"f17a0fbd1c931054553be162aea7b534","mta_communications":"802201fca7cb8e27d1290ab54242d7f3","mtc030":"f66947228c1f4bc4ae7499ba3657cd22","mus_fibernet":"5e849b80993f27e25f85e6ce78aca707","muscatine_p_w":"0b75052bdee3dca7071b5ebf1eb5f76f","nrtc":"c2b871b4031c3706db40794acdcedbac","nctc":"bb696d9b2f14fa0f673315d169d4e523","nebraska_central_telecom":"a6649363f117d91422714613f8f052eb","newwave_communications":"7ec580bd7882de93b13a65d7b948236a","nextech":"1fcea22900e060162056528f32d58737","nktelco":"4b8bb5bd95648b16463785094f4e8594","nntc":"9f8961d99ec4e390b9aff7cb03857242","nortex_communications":"2a06c79d11481581d9a0f90f4ae4751b","nor030":"593ed3a998b2b37083c52eb0a7329261","nor075":"c0eccb3ff55d65d4ad374f1f60557ca8","norwood_light_broadband":"48ac8fbdf4e4f8b52a65860e45b864e3","nulink":"8b8f5ffcf9054779ec80ab6182564116","onesource_communications":"258ee630e1c8df2c843fd1825fe82c57","openband":"de82e01b9f3d3840f7b1d95af58da172","optilink":"3db5681334c44752317cdf5df88c4ae5","orbitel":"4cbc4ee5d581c6968ef766c62e05940a","otter_com_inc":"71e7d1fbaa9f54b545df2ec96668baf6","park_region_otter_tail":"486f5af3084ec419412b5893d1e4bf4c","paul_bunyan_communications":"dd034340b71c466548196bdcfe0efeb0","philo":"7824bb97e5e03edaa15a21c0962f9d0d","phonoscope_cable":"e90ce34106e71382ae983978ad152031","pioneer_communications":"79a45efed08c464dd4bbb7d56e8500b8","pioneer_dtv":"67fffda3233e1f57e0e0b541a1717e0f","pioneer_long_distance":"7106fe93f317d3bea8a3d3f3ec113541","pla020":"edaddd89d44593555ea9ca0a28510075","plateau_telecommunications":"a395fe3d321a6e39391a23bee942bf90","sony_auth_gateway_net":"d802388e287f92d9bd0a6a630f7b4b9b","pottawatomie_telephone":"a7b0540848bd6dcbb7668e71a7a93f66","premier_communications":"59779e98392a694dfe2cdc687f1e0e1d","rai030":"74d1d3a3062d5b7d3914f48443a3f0ca","randolph_telephone":"9fbabb3e3eff96aed5b75e08e7956cf0","rcn":"d449c38c8d558224de10ff15dc764568","reinbeck_telecom":"8ad0337c4d57028b84a98667d1244c69","rancho_murieta_cable":"ee88a2bba6d46442b3b9997ab28fbfd0","rock_port_cablevision":"7f31dd76468f1c0b8a4d995ab9397c56","rogers_communications":"012d7ca0ce1d7acc274b3c005a58188a","rtc_communication_corp":"b63a32863d7721893ea93de131ac6086","sav010":"c9e5fa0918a0f43b2b68042cf348fadf","selco":"e60d4d5a3831c2ed70624f5f22970202","service_electric_bb":"8681a6ed41138deaa007ba0ea009eecc","sectv":"b7d22698a6bf8add08e2ed81485937e5","serviceelectric_auth_gateway_net":"ee25b5338caaac0739b20ea6fb41a19b","shentel":"257cd9239e39041601dcc18a04d85191","sjobergs":"04dcbf21bea127668d711a47b4d08124","skybest_tv":"b648e14dd8eb808f3cf50f688d39de38","sling":"09eb6448f873a4efb839bbc17b08b325","smithville_comm":"4ff642278a1fd9280d6017dc9379b5fa","snetv":"908543024b4f95683c271ea4269e92e5","south_slope_cooperative_communications":"b17fd364e910b481a0b4b871019461a7","spectrum":"743bb262648fdcac6c5518898283c220","spencer_municipal_utilities":"8f557ab9d184bd12281d4909d7e0ecfe","srt_communications":"7f322e9bcdcbd9134e219eea372413e2","suddenlink":"7823d91ca9b240df4ef611416c32bd84","summit_broadband":"5972f104dba7217a62d268ba878a4fa9","sumner_cable_tv":"574b5335f7436df49159123e67768581","surewest":"e72fedb49624aa30df7ee1dd3d9231f6","sweetwater_cable_television_co":"2aad6ed682586e4bd7f9edda394091ad","swiftel":"5ba04c7e6786d270833b2f5348ad6fcd","tct_west":"7395fb24c5c85bd62e09800b080900ff","tds":"3b84f8cfd144e7211160037ebacbf0e7","twc":"975cd70e2de25291acc0efc98a48935e","tri_county_communications_cooperative":"bcec3f9eeba093a656f0b4d4f66a2fdb","truvista":"595155ce5cc5103488644c42b5b4e315","tsc":"28e098175bb05703eb34c5adbb234370","tullahoma_utilities_board":"dd87ce8d18c91a90a3d629560125efb0","twin_valley":"025bbdd0f83449381217c5ee020b2bdb","unitedtel":"1b1a86d9b4bfdefb3091374d9cdc9ed7","univision":"72133b54ada6b97de3ddfd20790cbed7","valunet":"78521e2ac85d38b49f8884f33c1925f6","verizon":"5525ff59adcaac313923ab89d0a618c5","verizon_fios":"640c0120eec6c69e91dabd0032a2fa55","verizon_hba":"8d8efc96fcf8c4947c5a0f5b07b8f2fe","vtel":"6470560db7ffca7f4362a5072c3968e6","volcano_vision":"088de7db5a81e3962d0fc9e28d08b113","waitsfield_cable":"1f1b23b025ee9ccc897de6186518481c","watch_abc_default":"dce77ac5cbd62c3b53c84cf498e6ba30","watch_datg":"76a2849433f69a1977ad5ffbf14f9f0c","wave_broadband":"77ba599a94b5ee6d3972d7b2b7ac7ca4","west_carolina_communications":"4a26e128c67b004d35e327812d72d8b7","west_central_telephone_association":"c6ec94996797d421f386e2b7f6b7ae08","west_river_cooperative_telephone_company":"1b4fea3b0897a9a28e6061cdf89e736a","western_iowa_networks":"dca9b1a399a80b69ba33c6edc93148ce","wide_open_west":"fe2066988e1f50e0bbe6ea672084d574","windstream":"4278e68eb5bf1c74ae050176d8a3ca46","windstream_d_and_e_systems_inc":"b1bdb3b451fac34a2d5d7bf0bca0a9d1","windstream_lexcom_entertainment_llc":"6e54c805854972656e7d6b1421d31944","windstream_kentucky_llc":"30f0a4f039ee98aa3a4e49800bf4e6c3","windstream_nebraska":"0f75031c615202d868311ab8666aa497","wtc":"27daa922e196bd91a0fe8cdf922591fa","yadtel":"f2f7b016744ae707696cbf304721cb1c","youtube_subscription_platform":"027b2b4baccdc848db095a7db10da595","alticeone":"c6329f305187de4f1953972742a1fae2","montana_sky_west":"98ca1d5d2bc4836dd58e4b93c6ad8cc4","minburn_cablevision":"1a08dd2b55e6d7a4c77eab93abd2c5a0","gorham_telcom":"6f8fe12065bbe7c3f3b82d0aac15dd83","racetv_llc":"491d6a156b842e5a0c2a82b670bf5e91","cooperative_telephone_exchange":"0efbcc58200919656bd0303078a5771b"}
	return window.tve_mvpd_list;
})( window );
			
	



		
		//Including Bento version 3.2.0: 
		!function(e){e.Bento=e.Bento||{}}(window),function(e){function t(){function t(e){var t=window.location!==window.parent.location?document.referrer:window.top.document.location.href,n=t||e.ref||Ct,i=gi.queryStringToObject(n.toLowerCase());return Jt(i[o.DEBUG_MODE])&&an(i[o.DEBUG_MODE])&&Jt(i[o.TSLA])?i[o.TSLA]:e.timeSinceLastAd}function n(e){var t=+si.getLocalStorage(r.VIDEO_PLAYED_TIME),n=+ai.getTSLATime(e);return Qt(t)&&(t=1e3*t),Qt(n)||(n=0),0>=n||!Qt(t)||0===t||t>n?pt:ft}function i(){var e=si.getLocalStorage(r.LAST_PLAYTIME_CODE),t=new Date;t=Math.round(t.getTime()/1e3),t-e===1&&si.setLocalStorage(r.VIDEO_PLAYED_TIME,parseInt(si.getLocalStorage(r.VIDEO_PLAYED_TIME))+1),si.setLocalStorage(r.LAST_PLAYTIME_CODE,t)}function a(t,n,i,a){var r,o=e.FreewheelVars;return r=0!==t.currentIndex&&!n||t.hasContentEnd!==ft?t.currentIndex+1===i&&t.hasContentEnd===pt&&(1>=a||Wt(a))?o.POSTROLL:0!==t.currentIndex&&t.hasContentEnd===ft?o.MIDROLL:ft:o.PREROLL}var r=e.AdVars,o=e.FreewheelVars;return this.getTSLATime=t,this.isTimeSinceLastAdElapsed=n,this.persistVideoPlayedTime=i,this.getAdType=a,this}function n(){function e(e){for(var t,n=e.length;n--;)t=e.indexOf(e[n]),t!==n&&e.splice(t,1);return e}function t(e,t){tn(e,t)||e.push(t)}function n(e,t){return $t(e[t])||(e[t]=[]),e[t]}function i(e,t){for(;tn(e,t);)e.splice(e.indexOf(t),1)}return this.getOrCreateArray=n,this.pushIfAbsent=t,this.filterDuplicates=e,this.removeValue=i,this}function i(){this.everyInstance=[],this.by={last:{}}}function a(){function e(e){var t=Kn().split(Pt),n=Ct,i=0,a=t.length,r=Ct;for(e+=Rt;a>i;i++){for(n=t[i];n.charAt(0)===Lt;)n=n.substring(1,n.length);0===n.indexOf(e)&&(r=unescape(n.substring(e.length,n.length)))}return r}function t(e,t,n,i,a){var r,o=e+Rt+escape(t);return n&&(r=new Date,r.setTime(r.getTime()+60*n*60*1e3),o+=Pt+"expires"+Rt+r.toGMTString()),a||(a=si.getCookieAutoDomain()),"localhost"!==a&&(o+=Pt+"domain"+Rt+a),o+=Pt+"path"+Rt+(i?i:Ot),Wn(o),o}function n(e,t,n,i){var a=e+Rt;return n||(n=si.getCookieAutoDomain()),"localhost"===n||i||(a+=Pt+"domain"+Rt+n),a+=Pt+"path"+Rt+(t?t:Ot),a+=Pt+"expires"+Rt+"Thu, 01-Jan-1970 00:00:01 GMT",Wn(a),pt}function i(){var e=document.domain.split(vt),t=e.length,n=Ct;return n=t>2?e[t-2]+"."+e[t-1]:document.domain,t>=3&&Nn.match(n)!==At&&(n=e[t-3]+"."+e[t-2]+"."+e[t-1]),n}function a(e,t){try{window.localStorage?window.localStorage.setItem(e,t):si.set(e,t)}catch(n){return si.set(e,t),ft}return pt}function r(e){try{return window.localStorage?window.localStorage.getItem(e):si.read(e)}catch(t){return si.read(e)}}return this.read=e,this.set=t,this.remove=n,this.getCookieAutoDomain=i,this.setLocalStorage=a,this.getLocalStorage=r,this}function r(){function t(){return this.setupOmnitureInstance(),this.getOmnitureDayOfTheWeek()}function n(){return this.setupOmnitureInstance(),this.getOmnitureTimeWithAbbreviation()}function i(){s=window.AppMeasurement.getInstance(e.Config.omnitureAccount),this.getOmnitureDayOfTheWeek=a,this.getOmnitureTimeWithAbbreviation=r}function a(){return s.getTimeParting("d",-5)}function r(){return s.getTimeParting("h",-5)}function o(){return(new Date).toISOString().slice(0,-1)+" GMT"}var s;return this.getDateInISOFormat=o,this.getOmnitureDayOfTheWeek=t,this.getOmnitureTimeWithAbbreviation=n,this.setupOmnitureInstance=i,this}function o(){function e(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0}function t(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0}function n(n){var i=ft,a=n&&n.getBoundingClientRect(),r=e(),o=t(),s=r>0&&o>0;return n&&nn(n.getBoundingClientRect)?(s&&(i=a.bottom>=0&&a.right>=0&&a.top<r&&a.left<o),i):ft}function i(e){if(!e)return ft;var t=pt,n=getComputedStyle(e);switch(pt){case n.display===yn:t=ft;break;case n.visibility===Vn:t=ft;break;case 0===e.clientHeight:t=ft;break;case e.clientHeight<1&&e.clientWidth>2:t=ft}return t}function a(e){var t=At,n=0,i=0,a=At,r=0,o=0,s=0,E=0;if(!nn(e.getClientRects))return Bt(d,"Unable to determine if this element is concealed by any other elements."),pt;for(t=e.getClientRects(),n=t.length;i=n--;)for(a=t[i-1],r=Math.floor(a.left),o=Math.ceil(a.right);o>=r;r++)for(s=Math.floor(a.top),E=Math.ceil(a.bottom);E>=s;s++)if(document.elementFromPoint(r,s)===e)return pt;return ft}function r(e){if(Jt(e.url))try{var t=document.createElement("script");return e.type||(e.type="text/javascript"),t.setAttribute("type",e.type),t.setAttribute("src",e.url),t.setAttribute("class",e["class"]),e.hasOwnProperty("async")&&Zt(e.async)&&t.setAttribute("async",e.async),e.hasOwnProperty("onLoad")&&typeof e.onLoad===ct&&(t.onload=t.onreadystatechange=e.onLoad),e.hasOwnProperty("onError")&&typeof e.onError===ct&&(t.onerror=e.onError),e.hasOwnProperty("isAppendToBody")&&e.isAppendToBody?document.getElementsByTagName("body")[0].appendChild(t):document.getElementsByTagName("head")[0].appendChild(t),t}catch(n){Bt(d,"loadScript failed url: ",e.url+" Error: ",n)}}function o(e,t){var n,i=At;if(!Jt(e))return Bt(d,"First argument supplied to createElement was not a string, NULL element returned."),At;if(i=document.createElement(e),Xt(t))for(n in t)t.hasOwnProperty(n)&&i.setAttribute(n,t[n]);return i}function s(t){if(!t||!nn(t.getBoundingClientRect))return ft;var n=t.getBoundingClientRect();return n.top>-1&&window.pageYOffset+n.bottom<=e()}var d=Et+"BentoDOMUtility";return this.isElementInViewport=n,this.loadScript=r,this.createElement=o,this.isElementDisplayed=i,this.isElementOnTop=a,this.isElementAboveTheFold=s,this}function s(){function e(e,t){var n=At,i=Ct,r=Ct;if(Wt(window.XMLHttpRequest))return Ht(a+"XMLHttpRequest is not supported by this browser."),ft;if(Wt(t)||!Jt(t.url))return Ht(a+"No URL parameter passed to request, request has failed."),ft;if(n=new XMLHttpRequest,i=t.url,r=t.data,n.open(e,i),Jt(t.contentType)&&n.setRequestHeader("Content-Type",t.contentType),!zt(r))try{r=JSON.stringify(r)}catch(o){Ht(a,"Failed to convert data into string, was it a valid JSON object?",o)}return n.send(r),pt}function t(t){return e("POST",t)}function n(t){return e("GET",t)}function i(e){var t=At,n=Ct,i=Ct;if(!Xt(e)||!Jt(e.url))return Ht(a+"No URL parameter passed to request, request has failed."),At;an(e.appendRandomString)&&(e.url+=Ot+Math.round(1e9*Math.random())),Xt(e.params)&&(n=Ti.toString(e.params),e.url+=(e.url.indexOf(Nt)>-1?St:Nt)+n),qt(e.receiver)&&(i=e.receiver);try{return t=new Image(0,0),t.src=e.url,kt(a+i+"Sending image beacon."),t}catch(r){return Ht(a+i+"Error encountered when setting up image beacon : ",r),At}}var a=Et+"HttpRequestUtility - ";return this.sendPOSTRequest=t,this.sendGETRequest=n,this.sendImageBeaconRequest=i,this}function d(){function e(e){return e=Qt(e)?e:0,Math.round(e)}return this.roundOff=e,this}function E(){function t(e,t){var n=un()||Date.now()-o;if(t){qt(r[t])||(r[t]={});for(var i in a)an(r[t].hasOwnProperty(i))||(r[t][i]=a[i]);r[t][e]=Math.floor(100*n)/100}else a[e]=Math.floor(100*n)/100}function n(t,n,i){var a={},o={};if(a.client="bento",a.beaconType=t,a.beaconVersion="0.1.0",a.bentoVersion=e.version,"pageAdRendered"===t)switch(i){case $n.AMAZON_A9_ID:a.displayCreativeType="AmazonA9";break;case $n.INDEX_EXCHANGE_ID:a.displayCreativeType="IndexExchange";break;case $n.RUBICON_ID:a.displayCreativeType="Rubicon";break;case $n.ADX_ID:a.displayCreativeType="AdX";break;default:a.displayCreativeType="Direct"}o.displayAd={indexExchangeHB:e.Config.indexExchangeEnabled&&Xt(window.headertag)&&!rn(window.headertag.apiReady)?pt:ft,amazonA9HB:qt(r[n.id])&&r[n.id].hasOwnProperty("amazonA9Received"),instanceID:s||At,inView:di.isElementDisplayed(n)},o.milestones=r[n.id],a.data=o,e.sendMegabeaconData({data:a})}function i(){r=[],a=[]}var a=[],r=[],o=0,s=Math.floor(1e7*Math.random());return o=Kt(window,"performance.timing.navigationStart")?window.performance.timing.navigationStart:Date.now(),this.setTiming=t,this.resetMileStones=i,this.generateMegaBeacon=n,this}function u(){function e(e,t){if(!Xt(e))return At;t||(t=St);var n=[];for(var i in e)e.hasOwnProperty(i)&&e[i]&&n.push(i+Rt+e[i]);return n.sort(),n.join(t)}function t(e){var t=At;if(Jt(e))try{if(t=JSON.parse(e),Xt(t))return pt}catch(n){return ft}else if(Xt(e))try{if(t=JSON.parse(JSON.stringify(e)),Xt(t))return pt}catch(n){return ft}return ft}function n(e){if(null===e||void 0===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!==i&&void 0!==i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}return this.toString=e,this.isValidJSON=t,this.extend=n,this}function c(){function e(e,t,n){t=t?t:ht,n=n?n:Rt;for(var i,a=e.split(t),r=a.length,o={};r--;)i=a[r].split(n),o[i[0]]=i[1];return o}function t(e,t,n){if(zt(e)&&Qt(t)){if(n){var i=e.lastIndexOf(n);i>0&&(e=e.substr(0,i))}e.length>t&&(e=e.substring(0,t))}return e}function n(t){var n=/^.*\?/;return e((t||Xn()).replace(n,Ct),St)}function i(e,t,n){var i,a,r="\"'=!+#*~;^()<>[],&";return Jt(n)&&jt(r,n)&&(r=r.replace(n,Ct)),on(t)?a=t:(t=t||r,i="[\\"+t.split(Ct).join("|\\")+"]",a=new RegExp(i,"g")),e.replace(a,Ct)}return this.toObject=e,this.lengthLimiter=t,this.queryStringToObject=n,this.sanitize=i,this}function l(e){function t(){T?T.call(e):_||clearInterval(c)}function n(){return d||(d=pt,E=En(),c=setInterval(t,l)),E}function i(){var e=0;return d?(e=En(),E=e-E,u+=E,d=ft,clearInterval(c),e):E}function a(){return E=u=0,clearInterval(c),E}function r(){return d}function o(){return Math.floor(u/1e3)}function s(){return u}e=e||{};var d=ft,E=0,u=0,c=At,l=Qt(e.interval)?e.interval:1e3,T=nn(e.timerFunc)?e.timerFunc:It,_=e.isLoop;return this.start=n,this.stop=i,this.reset=a,this.isRunning=r,this.getElapsedSeconds=o,this.getElapsedMilliSeconds=s,this}function T(){function e(e){var t=Ct;return Jt(e)?(t=e.replace(/\s+/g,Ct).toLowerCase(),void(o=window.tve_mvpd_list[t]||Ct)):(o=t,ft)}function t(){d=ft}function n(t){return d=pt,Xt(t.provider)?(r=t.provider.displayName||t.provider.id,s=t.isLoggedIn&&pt||ft,e(r),void kt(a,"Updated TVE values",r,s)):ft}function i(t){var n={},i=Ct,a=Ct,E=Ct,u=At;return n.hash=Ct,n.mvpdName=Ct,n.loggedIn=ft,n.authRequired=ft,Jt(o)&&!xt(s)&&an(d)?(n.hash=o,n.loggedIn=s,n.authRequired=d,n.mvpdName=r,n):Xt(t)&&Xt(t.tve)&&(u=t.tve,d=u.tveAuthRequired||ft,n.authRequired=d,n.mvpdName=u.tveMvpdName,Jt(o)||e(u.tveMvpdName),Jt(o))?(n.hash=o,n.loggedIn=pt,n):(i=si.getLocalStorage("TVEAuth_CURRENT_PROVIDER_NAME"),a=si.getLocalStorage("TVEAuth_CURRENT_PROVIDER_ID"),Jt(i)||Jt(a)?(s=pt,n.loggedIn=s,E=i||a,n.mvpdName=E,e(E),o?(n.hash=o,n):(n.noValidTVEDataFound=pt,n)):(s=ft,n))}var a=Et+"TVEUtility ",r=Ct,o=Ct,s=At,d=ft;return this.storeMostRecentStatus=n,this.getMostRecentStatus=i,this.resetAuthRequirements=t,this}function _(){function t(e,t){var i=an(t)?e:e._player;return n(i)?(kt(u,"This feed has already been processed, duplicate events may have been received.  Ignoring duplicate feed load."),ft):Kt(i,"getCurrentConfig")?(this.onFeedLoaded({player:i,config:i.getCurrentConfig(),metadata:i.getCurrentConfig().feed}),void(a(i.getCurrentConfig())&&an(t)&&i.ads.ready(un()))):Ht(u+"Invalid player or config or feed passed! BentoAPI will not be created.")}function n(t){return Xt(t)&&zt(t.id)&&rn(xt(e.getPlayer(t.id)))}function i(e){return Wt(e)||an(e.noBento)}function a(e){return rn(i(e))}function r(t,n){return rn(Xt(t))?ft:(kt(u+"Invoking Bento.onPlayerConfig",t),this.bentoApi=e.addPlayer(n),this.bentoApi[L](t),pt)}function o(t,a){var r=rn(Xt(t))||n(t.player)||i(t.config),o={},s=At,d=At,E=an(e.Config.amazonVideoBiddingEnabled&&e.Config.freewheelEnabled);return r?(kt(u+"Feed is not an object | Player is already added | Player is configured with noBento set to TRUE"),ft):(o=JSON.parse(JSON.stringify(t.config)),s=o.feed.items.length,this.feed=t,kt(u+"onFeedLoaded feed",this.feed),!E||an(o.seamlessEnabled)||rn(o.useCSAI)||(c>0&&Si.initialize(),"episode"===o.contentType&&(1===s&&qt(d=o.feed.items[0].rss.group.category.adCuePoints)?Si.requestMidrollBids(d.length):Si.requestMidrollBids(s-1))),c++,this.processPlayerConfig(o,t.player),this.bentoApi[D](t),this.bentoApi)}function s(){return this.feed}function d(){if(!e.addEventToWaitQueueIfDomNotLoaded({callbackObject:E,callback:d})){var t,n,i,a,r=window||r,o=r._edgeplayerFeedLoad||[],s=r.EdgePlayer,u=s&&s.getPlayers&&s.getPlayers();if(c=0,document.addEventListener("edgeplayer:PLAYLIST_METADATA",this.feedLoaded),r._edgeplayerFeedLoad=o,o.push(this.onFeedLoaded),$t(u))for(t=0;t<u.length;t++)n=u[t],i=n&&n.getCurrentConfig&&n.getCurrentConfig(),a=i&&i.feed,qt(a)&&this.feedLoaded(n,pt)}}var E=this,u=Et+"EpFeedProxy",c=0;return this.feed=At,this.bentoApi=At,this.processPlayerConfig=r,this.onFeedLoaded=o.bind(this),this.feedLoaded=t.bind(this),this.getFeed=s,this.init=d,this}function g(){function t(){e.addEventToWaitQueueIfDomNotLoaded({callbackObject:o,callback:t})||(kt(s+" init"),window.cbsoptanon?(window.cbsoptanon.cmd.push(function(t){window.cbsoptanon.onScriptsReady(function(t){t.ot.getState(function(t,i,a,r){kt(s+" page view optanon settings: performance ",i),kt(s+" page view optanon settings: targeting ",t),kt(s+" page view optanon settings: social ",r),kt(s+" page view optanon settings: functional ",a);var o=n(t,i,a,r);e.onOneTrustPrivacyConsent(o,t)})})}),window.cbsoptanon.cmd.push(function(t){window.cbsoptanon.ot.addOnConsentChangedHandler(function(){t.ot.getState(function(t,i,a,r){kt(s+" dynamic optanon settings: performance ",i),kt(s+" dynamic optanon settings: targeting ",t),kt(s+" dynamic optanon settings: social ",r),kt(s+" dynamic optanon settings: functional ",a);var o=n(t,i,a,r);e.onOneTrustPrivacyConsent(o,t)})})})):Bt(s,"window.cbsoptanon not found!"))}function n(t,n,i,a){kt(s+" Set user privacy preferences");var r=n?[]:d;return r=t?r:r.concat(E),t||(e.Config.disableOmnitureThirdParties=pt,e.Config.demdexEnabled=ft),r}function i(e){return window.cbsoptanon?void window.cbsoptanon.cmd.push(function(t){window.cbsoptanon.onScriptsReady(function(t){t.ot.getState(function(t,n,i,a){e(t)})})}):(Bt(s,"window.cbsoptanon not found!"),ft)}function a(e){window.cbsoptanon.cmd.push(function(t){t.ads.getNpaFlag(function(t){return e({flag:+t,isTFCD:window.cbsoptanon.config&&window.cbsoptanon.config.settings&&window.cbsoptanon.config.settings.tfcd||ft})},pt)})}function r(e){return window.cbsoptanon?void window.cbsoptanon.cmd.push(function(t){t.tcf.getConsentData(function(t,n){return n?e({gdpr:+t.gdprApplies,tcfString:t.tcString}):(Bt(s,"Failed to get TCF2 consent data from Optanon!  Requesting NPA status."),void window.cbsoptanon.cmd.push(function(t){t.ads.getNpaFlag(function(t){return e({gdpr:+t,tcfString:""})})}))})}):(Bt(s,"window.cbsoptanon not found!"),ft)}var o=this,s=Et+"OneTrust",d=["omnitureReceiver","heartBeatMeasure"],E=["amazonReceiver","demdex","sourcePointReceiver","xandrPrebidReceiver","kruxReceiver","kruxMediaReceiver","comScoreReceiver"];this.init=t,this.getUserPrivacyConsentStatus=r,this.getTargetingConsentState=i,this.getAdTargetingAllowance=a}function A(){var t=ni;window.document.addEventListener(t.LOADED_COMPONENT,function(){}),window.document.addEventListener(t.ERROR,function(t){e.onTVEError({code:t.errorCode,message:t.errorMessage})}),window.document.addEventListener(t.CHECKED_STATUS,function(t){e.onTVEStatusCheck(t.TVESubscriber)}),window.document.addEventListener(t.LOGGED_IN,function(t){e.onTVELogin({status:t.status,mvpd:t.mvpdId,hbaInstance:t.hbaInstance&&!0||!1})}),window.document.addEventListener(t.LOGGED_OUT,function(e){}),window.document.addEventListener(t.SELECTED_PROVIDER,function(t){e.onTVEProviderSelected({mvpd:t.mvpdId})}),window.document.addEventListener(t.PROVIDER_NOT_LISTED_BUTTON_CLICK,function(t){e.onTVEProviderNotListed()}),window.document.addEventListener(t.PROVIDER_DISPLAY,function(t){e.onTVEProviderDisplay()}),window.document.addEventListener(t.LEARN_MORE_CLICK,function(e){}),window.document.addEventListener(t.SPECIAL_PREVIEW_SELECTED,function(t){e.onTVEElvisSelected({method:t.method,mvpd:t.mvpdObj})}),window.document.addEventListener(t.SPECIAL_PREVIEW_LOGGED_IN,function(t){e.onTVEElvisLogin({method:t.method,mvpd:t.mvpdObj})}),window.document.addEventListener(t.SPECIAL_PREVIEW_EXPIRED,function(t){e.onTVEElvisExpired(t.mvpdObj)}),window.document.addEventListener(t.SPECIAL_PREVIEW_LOCKED,function(t){e.onTVEElvisLocked(t.mvpdObj)}),window.document.addEventListener(t.FREE_PREVIEW_SELECTED,function(t){e.onTVEFreePreviewSelected()}),window.document.addEventListener(t.FREE_PREVIEW_LOGGED_IN,function(t){e.onTVEFreePreviewLogin()}),window.document.addEventListener(t.FREE_PREVIEW_EXPIRED,function(t){e.onTVEFreePreviewExpired()})}function p(t){return e.AdSlotVOCollection.catalog($n.INACTIVE,this),this.adUnit=Ct,this.adUnitPath=Ct,this.validSizes=[],this.targetingValues={},this.biddingValues={},this.targetRefreshRate=At,this.exclusionCategories=[],this.element=At,this.isDisplayed=ft,this.id=Ct,this.bidsReady=ft,this.biddingRetries=0,this.maxBiddingRetries=30,this.instanceIndex=e.AdSlotVOCollection.everyInstance.indexOf(this),Xt(t)&&this.setAdUnit(t.adUnit).setValidSizes(t.validSizes).setTargetingValues(t.targetingValues).setTargetRefreshRate(t.targetRefreshRate).setExclusionCategories(t.exclusionCategories).setElement(t.targetElement).setId(t.targetElementId),this}function f(){function e(e){var n=e.personality||e.artist||e.vidArtist||e.artistName,a=e.vidSeriesTitle||e.eVar26||e["v.vidSeriesTitle"]||e["v.pageSeries"],r=e.genre||e["v.genre"];t.pageName=e.pageName||document.title,t.pageURL=Yn(),t.siteSection=e.channel||Gn().split(Ot)[1],t.pageType=e.pageType||e["v.pageType"]||t.pageType,t.genre=r||t.genre,t.videoName=e.videoTitle||t.videoName,t.seriesTitle=a||t.seriesTitle,t.episodeTitle=e.playlistTitle||e["v.vidEpTitle"]||t.episodeTitle,t.celebrityName=n||t.celebrityName,t.tveLoginState=e.loggedIn||e.tveUsrStat||e["v.contentStatus"]||e.tveAuthStatus||t.tveLoginState,t.tveMvpd=e.mvpdName||e.tveMVPD||e.tveMvpdName||t.tveMvpd,t.videoContentType=e["v.vidContentType"]||e.contentType||t.videoContentType,t.episodeNumber=e.episodeN||t.episodeNumber,t.seasonNumber=e.seasonN||t.seasonNumber,kt(i,"Update complete ",t)}var t={},n="NOT_SET",i=Et+" Krux DataLayer VO ";return t.brand=zn(),t.pageName=document.title||n,t.pageURL=Yn(),t.siteSection=Gn().split(Ot)[1]||n,t.pageType=n,t.genre=n,t.videoName=n,t.seriesTitle=n,t.episodeTitle=n,t.celebrityName=n,t.tveLoginState=n,t.tveMvpd=n,t.videoContentType=n,t.episodeNumber=n,t.seasonNumber=n,this.update=e,this.model=t,this}function I(t){function n(){o=ft}function i(){var t=Tn()+"beacon.krxd.net/event.gif?event_id=M0ccgvni&event_type=vvid";an(o)||(o=pt,setTimeout(function(){Xt(e.KruxDataLayerVO.model)?(t+=St+"appid=web",t+=St+"brandname="+encodeURIComponent(e.KruxDataLayerVO.model.brand),t+=St+"celebrityname="+encodeURIComponent(e.KruxDataLayerVO.model.celebrityName),t+=St+"episodenumber="+encodeURIComponent(e.KruxDataLayerVO.model.episodeNumber),t+=St+"episodetitle="+encodeURIComponent(e.KruxDataLayerVO.model.episodeTitle),t+=St+"genre="+encodeURIComponent(e.KruxDataLayerVO.model.genre),t+=St+"seasonnumber="+encodeURIComponent(e.KruxDataLayerVO.model.seasonNumber),t+=St+"seriestitle="+encodeURIComponent(e.KruxDataLayerVO.model.seriesTitle),t+=St+"videocontenttype="+encodeURIComponent(e.KruxDataLayerVO.model.videoContentType),t+=St+"videoname="+encodeURIComponent(e.KruxDataLayerVO.model.videoName)):Ht(r,"No Krux data model found!  Event beacon will be incomplete!"),ui.sendImageBeaconRequest({url:t,receiver:"KruxMediaReceiver "}),kt(r,"Video start event fired.")},1e3))}function a(){var t=Tn()+"beacon.krxd.net/event.gif?event_id=M3W7Sugt&event_type=vvid";Xt(e.KruxDataLayerVO.model)?(t+=St+"appid=web",t+=St+"brand="+encodeURIComponent(e.KruxDataLayerVO.model.brand),t+=St+"celebrityname="+encodeURIComponent(e.KruxDataLayerVO.model.celebrityName),t+=St+"episodenumber="+encodeURIComponent(e.KruxDataLayerVO.model.episodeNumber),t+=St+"episodetitle="+encodeURIComponent(e.KruxDataLayerVO.model.episodeTitle),t+=St+"genre="+encodeURIComponent(e.KruxDataLayerVO.model.genre),t+=St+"seasonnumber="+encodeURIComponent(e.KruxDataLayerVO.model.seasonNumber),t+=St+"seriestitle="+encodeURIComponent(e.KruxDataLayerVO.model.seriesTitle),t+=St+"videocontenttype="+encodeURIComponent(e.KruxDataLayerVO.model.videoContentType),t+=St+"videoname="+encodeURIComponent(e.KruxDataLayerVO.model.videoName)):Ht(r,"No Krux data model found!  Event beacon will be incomplete!"),ui.sendImageBeaconRequest({url:t,receiver:"KruxMediaReceiver "}),kt(r,"Video complete event fired.")}var r=Et+"KruxMediaReceiver ",o=ft;return this[y]=i,this[st]=a,this[K]=n,this}function C(e){function t(){kt(n,"Player is serving an SSAI Stream, fetching first item data."),f=e.getFirstItemData()}var n=Et+"StreamSense ",i=Qn,a={},r=ft,o=ft,s=0,d=pt,E={},u=1,c=At,l=At,T=At,_=ft,g=function(e,t){return ft},A=0,p={},f=At,I=At,C=At,O=At;e&&e.getFirstItemData&&(f=e.getFirstItemData(),l=e.getPlaylistMetadata()),O=f;var S=function(e,t){return e&&e.getData()?(t||kt(n,e.getName(),e.getData()),e.getData()):{}},h=function(){return 1e3*A},m=function(e){if(!r&&qt(window.ns_)&&qt(window.ns_.StreamSense)){a=new ns_.StreamSense({},i.BASE_URL()+"?"+Ti.toString({c1:i.TYPEID,c2:e.comScorePrimaryID}));var t=ns_.StreamSense.PlayerEvents;g=function(e,i){var s=t[e];kt(n+"streamTrack",s,r),i||(o=s===t.PLAY),a.notify(s,{},h())},a&&g&&(r=pt),e.feed.items.length>1&&d&&a.setPlaylist()}return kt(n+"initStreamSense isReady",r),r},v=function(e,t){var n=S(e,pt);return n=n.adPlayhead||n.playhead,Qt(n)?(A=Math.floor(n),A=t&&0===A?.1:A):ft},N=function(t){var c,l=e.getMetadata()||{};if(kt(n+"onPlayStart",l,r),!r||e.isInAdBreak())return ft;T=T||e.getIsLive(),o=pt,v(t),s=l.itemIndex;var _=l.hasPlaylist&&l.isFullEpisode?l.playlistDuration:l.duration;return T?l.clipTypeId=i.CLIP_LIVE:_>=i.MAX_DURATION?l.clipTypeId=i.CLIP_LONG:l.clipTypeId=i.CLIP_SHORT,E.hasOwnProperty(l.videoId)?l.partIndex=E[l.videoId]:(l.partIndex=u++,E[l.videoId]=l.partIndex),c=Oi.fromMetadata(l,C,T),a.setClip(c),g("PLAY"),d=ft,pt},R=function(e){var t=function(){kt(n+"onResumePlay"),o=pt,g("PLAY")};xt(I)||Date.now()-I>500?t():setTimeout(t,500)},D=function(e){v(e),kt(n+"onPause/onSeekStart",A),I=Date.now(),g("PAUSE")},P=function(){g("END"),a.resetInstance&&a.resetInstance()},V=function(){d=pt},B=function(e){var t=v(e);return _&&(g("PLAY"),_=ft),t},x=function(e){return v(e)},G=function(e){c=S(e)},Y=function(t){e.isInAdBreak()&&g(t,pt)},X=function(){var t=At,i=At;return kt(n+"onAdPlayStart"),r?(e.servingServerSideAds()&&(kt(n,"Player is serving SSAI Ad, current chapter data."),i=e.getCurrentSSAIChapterData()),T=e.getIsLive(),void(xt(c)||xt(l)||(A=0,t=Oi.fromAdMetadata(c,l,u,f,T,i),f.isMonolithicContent&&(t.ns_st_tp=e.getCuePoints().length+1),a.setClip(t),Y("PLAY"),u++))):void Bt(n+"StreamSense Library is not available on the window")},W=function(){kt(n+"onAdPlayEnd"),Y("END"),a.resetInstance&&a.resetInstance()},q=function(){kt(n+"onAdPause"),e.isInAdPlay()&&Y("PAUSE")},z=function(){kt(n+"onAdUnPause"),e.isInAdPlay()&&Y("PLAY")},j=function(){o&&(kt(n+"onBufferStall starts"),g("PAUSE"),_=pt)},J=function(e){di.loadScript({url:i.STREAMSENSE_LIBRARY_LOCATION,onLoad:function(){if(!nn(window.addStreamSenseLibrary))return Bt(n,"StreamSense initalization method missing!");window.addStreamSenseLibrary(),C=S(e);var t=C.comscoreAdTracking||C.comScoreAdTracking;return t&&(p[ae]=x,p[ee]=G,p[Z]=X,p[$]=W,p[ne]=q,p[te]=z),u=1,m(C)},onError:function(){return kt(n,"Failed to load StreamSense library!")}})},Q=function(t){var n=t.getData();s=n&&n.itemIndex?n.itemIndex:0,O=e.getItemDataFromFeed(C,s)};return p[L]=J,p[y]=N,p[F]=B,p[H]=V,p[U]=P,p[K]=P,p[Ie]=j,p[w]=D,p[M]=D,p[b]=R,p[ot]=t,p[k]=Q,p}function O(){function e(){return"https:"===document.location.protocol&&Zn.SECURE_SUBDOMAIN+s||Zn.STANDARD_SUBDOMAIN+s}function t(){var e=Array.prototype.slice.apply(arguments);return Ht(r,e),ft}function n(){return kt(r,"Comscore tag successfully loaded."),pt}function i(e){return o[De]=a,pt}function a(){return window._comscore=window._comscore||[],window._comscore.push({c1:Zn.C1,c2:Zn.C2}),di.loadScript({url:e(),async:pt,isAppendToBody:ft,onLoad:n,onError:t}),pt}var r=Et+"ComScorePageReceiver - ",o={},s=Zn.DESTINATION;return o[P]=i,o}function S(){function t(){var e=Array.prototype.slice.apply(arguments);Ht(S,e)}function n(){function t(){var t=e.AdSlotVOCollection[$n.INACTIVE];$t(t)&&!en(t)&&(clearTimeout(i),i=setTimeout(n,100))}function n(){clearTimeout(i),I(e.AdSlotVOCollection[$n.INACTIVE])}var i;window.addEventListener("focus",t,ft),window.document.addEventListener("scroll",t,ft),window.document.addEventListener(vn,t,ft)}function i(){var t=At;return si.set("bento-poe",pt,24),t=document.createElement("div"),t.setAttribute("style","position: absolute; visibility:hidden"),document.body.appendChild(t),{adUnit:e.Config.adUnitDefault,validSizes:$n.POE_SIZE,targetingValues:{},targetRefreshRate:0,targetElement:t}}function a(){window.googletag.cmd.push(function(){var e=window.googletag.pubads();e.collapseEmptyDivs(),e.enableAsyncRendering(),e.enableSingleRequest(),e.disableInitialLoad(),window.googletag.enableServices()})}function r(){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],di.loadScript({url:Tn()+$n.LIBRARY_SRC,async:pt,onError:t}),n(),d(),a(),kt(S,"Retrieving privacy status for display ads."),Ii.getAdTargetingAllowance(function(e){return window.googletag.cmd.push(function(){return kt(S,"Ad targeting allowance is currently set to "+e.flag),kt(S,"Is TFCD enabled? : "+e.isTFCD),e.isTFCD?(window.googletag.pubads().setTagForChildDirectedTreatment(+e.flag),kt(S,"Privacy settings ready!"),void(h=pt)):(window.googletag.pubads().setRequestNonPersonalizedAds(+e.flag),kt(S,"Privacy settings ready!"),void(h=pt))}),pt})}function o(e){var t=e.slot.getSlotElementId();li.setTiming("adRendered",t),li.generateMegaBeacon("pageAdRendered",document.getElementById(t),e.advertiserId)}function s(e){var t=e.slot.getSlotElementId();li.setTiming("adImpression",t),li.generateMegaBeacon("pageAdImpression",document.getElementById(t))}function d(){window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener($n.PUBAD_EVENT_SLOT_RENDERED,o),window.googletag.pubads().addEventListener($n.PUBAD_EVENT_IMPRESSION,s)})}function E(){var t=gi.queryStringToObject(xn()),n=si.getLocalStorage($n.LOCALSTORAGE_DEMDEX_VALUE);if(Gt(e.Config.adPageTargeting)||(e.Config.adPageTargeting={}),t.hasOwnProperty($n.TEST_MODE_TARGETING_VALUES)&&(e.Config.adPageTargeting.testmode=encodeURIComponent(t[$n.TEST_MODE_TARGETING_VALUES])),!an(e.Config.requiresCoppaCompliance)){var i=si.read(ti.VIACOM_UUID_COOKIE);Jt(i)&&(e.Config.adPageTargeting.u=i)}if(Jt(n))for(n=n.split(ht).join(Rt),n=n.split(Rt);n.length>1;)e.Config.adPageTargeting[n.shift()]=n.shift();window.googletag.cmd.push(function(){if(Xt(e.Config.adPageTargeting)){for(var t=e.Config.adPageTargeting,n=Object.keys(t),i=Ct;i=n.shift();)qt(t[i])&&window.googletag.pubads().setTargeting(i,t[i]);return kt(S,"Set page-level targeting values : ",e.Config.adPageTargeting),pt}})}function u(){var t=[],n=Ct;return Jt(e.Config.adExclusionCategories)?void window.googletag.cmd.push(function(){for(t=e.Config.adExclusionCategories.split(ht);n=t.shift();)window.googletag.pubads().setCategoryExclusion(n);return kt(S,"Set page-level exclusion values : ",e.Config.adExclusionCategories),pt}):ft}function c(){return window.googletag.cmd.push(function(){window.googletag.pubads().clearTargeting(),window.googletag.pubads().clearCategoryExclusions(),kt(S,"Previous targeting and exclusion values cleared.")}),pt}function l(e){return r(),pt}function T(){return p.count=1}function _(t){t=$t(t)?t:document.querySelectorAll($n.AD_DEFINITION);for(var n,i,a=t.length,r=[];a--;)i=t[a],tn(e.AdSlotVOCollection.by.element,i)||(n=(new p).setElement(i),r.push(n));return r}function g(t){var n=[];return $t(t)||(t=[t]),t.forEach(function(t,i){var a,r,o;switch(pt){case t instanceof p:n.push(t);break;case sn(t):$t(e.AdSlotVOCollection.everyInstance)&&e.AdSlotVOCollection.everyInstance.forEach(function(e){sn(e.element)&&e.element.isSameNode(t)&&(kt(S,"Destroying existing ad placement and re-creating."),e.destroy())}),a=(new p).setElement(t),n.push(a);break;case Gt(t):n.push(new p(t));break;case zt(t):o=document.querySelectorAll(t),en(o)?r=(e.AdSlotVOCollection[t]||[]).splice(0):(o=Array.prototype.slice.apply(o),r=g(o)),n.push.apply(n,r);break;default:_(),n.push.apply(n,e.AdSlotVOCollection.everyInstance)}}),n.forEach(function(e){e.validate()}),n}function A(e){e.forEach(function(e){e.refresh()})}function f(t){var n=t,i=At;return en(e.AdSlotVOCollection.everyInstance)?(Bt(S,".refreshAds call received before .placeAds call!  Do not refresh ads before placing them."),this):rn(h)?(Bt(S,"Optanon not ready, waiting for Optanon."),i=setInterval(function(){return an(h)?(Bt(S,"Optanon loaded, continuing."),clearInterval(i),e.refreshAds(n),pt):void 0},100),ft):I(n)}function I(t){var n=g(t);return rn(Pn())||rn(Dn())?(kt(S,"Ignoring refresh calls when the page is not visible, or tab is not in focus."),this):(e.Config.amazonPageBiddingEnabled?Si.getPageBids(n,function(t){return kt(S,"Handling response from Amazon bidding."),$t(t)&&t.forEach(function(t){var n=e.AdSlotVOCollection.byIndex($n.INDEX_ID_KEY,t.slotID);return qt(n)?(n.targetingValues.amznbid=t.amznbid,n.targetingValues.amzniid=t.amzniid,n.addTargetingValue("amznbid",t.amznbid).addTargetingValue("amzniid",t.amzniid),void window.apstag.setDisplayBids([t.slotID])):(Bt(S,"Bid targeted for un-indexed ad slot, ignoring.",t),ft)}),A(n),pt}):A(n),this)}function C(t){var n=At,a=At;return m=e.Config.allowPOEAds&&window.navigator.cookieEnabled&&!si.read("bento-poe"),c(),E(),u(),rn(h)?(Bt(S,"Optanon not ready, waiting for Optanon."),a=setInterval(function(){return an(h)?(Bt(S,"Optanon loaded, continuing."),clearInterval(a),e.placeAds(t),pt):void 0},100),ft):(an(m)&&(n=i(),$t(t)||(t=[t]),t.push(n)),I(t),this)}function O(e){kt(S,"Initializing ad slot destruction."),kt(S,"Ad slot management objects may be re-created during validation process, these will be removed by the end of the process.");var t=g(e);return t.forEach(function(e){kt(S,"Initializing removal of ad slot with container ID #",e.id),e.destroy()}),this}var S=Et+"DFPPageReceiver - ",h=ft,m=ft;return this[P]=l,this[De]=T,this[Qe]=C,this[Ze]=f,this[$e]=O,this}function h(){function t(){var e=Array.prototype.slice.apply(arguments);return Ht(o,e),ft}function n(){window.Krux.q.push(arguments)}function i(){return kt(o,"Fired Krux page call."),window.Krux("ns:viacom","consent:set",s,function(e){return e&&t(e)||kt(o,"Krux consent settings successfully fired.")}),pt}function a(){di.loadScript({url:Tn()+"//cdn.krxd.net/controltag/"+e.Config.kruxId+".js",async:pt,isAppendToBody:ft,onLoad:i,onError:t})}function r(){return window.Krux=window.Krux||n,pt}var o=Et+"KruxPageReceiver - ",s={idt:"device",dt:"kxcookie",pr:"global",dc:1,al:1,tg:1,cd:0,sh:0,re:0};return n.q=[],this[P]=r,this[De]=a,this}function m(){function e(e){var o=e.getData()||{},s=o.data,d=o.topic,E={};return n(s)?(E.data={events:[s]},E.url=i.replace("{{topic}}",d||ei.DEFAULT_TOPIC),E.contentType=r,a(E),pt):(Bt(t+"Object provided to be passed to Megabeacon is not valid JSON."),ft)}var t=Et+"MegabeaconPageReceiver - ",n=Ti.isValidJSON,i=ei.DESTINATION,a=ui.sendPOSTRequest,r="application/json",o={};return o[Ue]=e,o}function v(){function t(){var e=Object.keys(ne).filter(function(e){return 0===ne[e].indexOf(ne.VIACOM_CONTEXT_NAMESPACE)&&ne[e].length>2?ne[e]:void 0}).map(function(e){return ne[e]});return e}function n(){for(var e=Ct;e=Z.pop();)u(e,Ct);J.contextData={},te={namespaced:{}},Q={}}function i(t){var n="";t.forEach(function(e){var t=e.split(Rt),i=t[0],a=t[1],r=[];return Jt(i)&&Jt(a)?(r=a.split(ht),void r.some(function(e){return-1!==Yn().indexOf(e)&&(n+=i),-1!==Yn().indexOf(e)})):Bt(j,"Malformed conditional account configuration provided, ignoring.")}),Jt(n)&&(e.Config.omnitureAccount=n);
}function a(t){return Jt(t)||(t=J.pageName||e.Config.omnitureDefaultPageName||qn()),e.Config.omnitureRemovePageSlashes&&t.charAt(0)===Ot&&(t=t.substring(1)),t}function r(e){var t=Gn();return e?e:t===Ot?ne.NO_CHANNEL:t.split(Ot)[1]}function o(){return J.getNewRepeat()}function s(e){ee.mostRecentLoginStep=e}function d(){return ln()&&($[Re]=h,$[De]=m,$[Pe]=N,$[Le]=R,$[Ve]=D,$[be]=L,$[_e]=v,$[tt]=K,$[it]=W,$[at]=q,$[rt]=z),$[we]=S,$[Me]=p,$[Be]=V,$[ke]=y,$[Je]=M,$[He]=U,$[Fe]=b,$[xe]=w,$[Ge]=F,$[Ye]=k,$[Xe]=B,$[Ke]=H,$[We]=x,$[qe]=G,$[ze]=Y,$[je]=X,pt}function E(){return $[Re]=It,$[De]=It,$[_e]=It,$[Pe]=It,$[Le]=It,$[Ve]=It,$[be]=It,$[Me]=It,$[we]=It,$[Be]=It,$[ke]=It,$[Je]=It,$[He]=It,$[Fe]=It,$[xe]=It,$[Ge]=It,$[Ye]=It,$[Xe]=It,$[Ke]=It,$[We]=It,$[qe]=It,$[ze]=It,$[je]=It,$[tt]=It,pt}function u(e,t){return J[e]=t||Ct,pt}function c(t){var n=At;qt(Q)&&(Q[ne.BENTO_VERSION_CONTEXT]=e.version);try{J.contextData=JSON.parse(JSON.stringify(Q))}catch(i){J.contextData=Q}return an(e.Config.kruxEnabled)&&(n=Ti.extend({},J.contextData,{pageName:t}),e.KruxDataLayerVO.update(n)),re(),t&&(ie=t),pt}function l(t,n){qt(Q)&&(Q[ne.BENTO_VERSION_CONTEXT]=e.version),J.trackExternalLinks=ft;try{J.contextData=JSON.parse(JSON.stringify(Q))}catch(i){J.contextData=Q}return oe(t,"o",xn()),e.Config.omnitureTrackExternalLinks&&setTimeout(function(){J.trackExternalLinks=pt},0),n&&(ie=n),pt}function T(){return e.Config.omnitureTrackingServer||jn()}function _(){var t=At,a={},r=Ct,o=Ct,s={};return a.cookieDomain=zn(),a.idSyncDisable3rdPartySyncing=e.Config.requiresCoppaCompliance,a.idSyncContainerID=an(e.Config.requiresCoppaCompliance)?2:0,a.disableIdSyncs=!!e.Config.disableOmnitureIdSyncs,a.disableThirdPartyCookies=!!e.Config.disableOmnitureThirdParties,a.disableThirdPartyCalls=!!e.Config.disableOmnitureThirdParties,Jt(e.Config.omnitureConditionalAccounts)&&i(e.Config.omnitureConditionalAccounts.split(Pt)),J=AppMeasurement.getInstance(e.Config.omnitureAccount),J.cookieDomainPeriods=zn().split(vt).length,J.registerPostTrackCallback(n),re=J.t,oe=J.tl,an(e.Config.demdexEnabled)&&(J.loadModule("AudienceManagement"),s[ti.AAM_PARTNER]=ti.VISITOR_NAMESPACE,s[ti.AAM_DISABLE_DEFAULT_REQUEST]=pt,s[ti.AAM_CONTAINER_NSID]=an(e.Config.requiresCoppaCompliance)?2:0,s[ti.AAM_ID_SYNC_CONTAINER]=an(e.Config.requiresCoppaCompliance)?2:0,s[ti.AAM_DISABLE_SCRIPT_ATTACHEMENT]=pt,s[ti.AAM_UUID_COOKIE_OBJ]={name:ti.AAM_UUID_COOKIE,days:30},J.AudienceManagement.setup(s),J.list1=J.getAamSegments(ti.AAM_SITE_CATALYST_COOKIE,ti.AAM_SITE_CATALYST_KEY),r=si.getLocalStorage(e.FreewheelVars.LOCALSTORAGE_DEMDEX_VALUE)||Ct,o=si.getLocalStorage($n.LOCALSTORAGE_DEMDEX_VALUE)||Ct,si.setLocalStorage(e.FreewheelVars.LOCALSTORAGE_DEMDEX_VALUE,J.getAamSegments("fw")+r),si.setLocalStorage($n.LOCALSTORAGE_DEMDEX_VALUE,J.getAamSegments("dfp")+o)),J.trackingServer=a.trackingServer=T(),cn()&&(J.ssl=pt,J.trackingServerSecure=a.trackingServerSecure="s"+J.trackingServer),t=Visitor.getInstance(ti.MARKETING_CLOUD_ORG_ID,a),J.visitor=t,an(e.Config.omnitureEnableVisitorNamespace)&&(J.visitorNamespace=ti.VISITOR_NAMESPACE),pt}function g(){return Jt(e.Config.omnitureAccount)?(ee={},e.addEventToWaitQueueIfDomNotLoaded({callbackObject:$,callback:A})?void 0:(A(),pt)):(Ht(j,"Provided no Omniture account in configuration, Omniture will not be made available."),E(),ft)}function A(){n(),d(),_()}function p(e){var t=e.getData().namespace;return ae=t,pt}function f(e,t){switch(pt){case I(e):e=O(e),te.namespaced[e]=Q[e]=t;break;case-1!==de.indexOf(e):J[e]=t;break;case Jt(ae):an(C(e,ae))?te.namespaced[e]=t:te.namespaced[ae+e]=t;break;default:Bt(j+"Attempting to set omniture custom data but omnitureCustomNamespace has not been setup in the bento config.")}}function I(e){return C(e,ne.VIACOM_CONTEXT_NAMESPACE)?pt:(e=O(e),se.indexOf(e)>-1)}function C(e,t){return 0===e.indexOf(t)}function O(e){switch(pt){case"franchise"===e:e=ne.FRANCHISE_CONTEXT;break;case rn(C(e,ne.VIACOM_CONTEXT_NAMESPACE)):e=ne.VIACOM_CONTEXT_NAMESPACE+e}return e}function S(e){var t=e.getData()||{},n=t.name,i=t.value;return n?(f(n,i),pt):ft}function h(){}function m(e){var t=e&&e.getData()||{},n=a(t.pageName),i=Object.keys(t)||[],s=[],d=Ct;for(se.forEach(function(e){if(e=O(e),!Jt(te.namespaced[e])&&"pageName"!==e)switch(pt){case e===ne.CHANNEL_CONTEXT:te.namespaced[ne.CHANNEL_CONTEXT]=r(t.channel);break;case e===ne.FRANCHISE_CONTEXT:te.namespaced[ne.VIDFRANCHISE_CONTEXT]=t[e]||ne.NO_FRANCHISE}}),Xt(Q)||(Q={}),t.activity||t[ne.ACTIVITY_CONTEXT]?Q[ne.ACTIVITY_CONTEXT]=t.activity||t[ne.ACTIVITY_CONTEXT]:Q[ne.ACTIVITY_CONTEXT]=ne.PAGE_VIEW_ACTIVITY,u(ne.PAGENAME_PROPERTY,n),Q[ne.LAST_PAGENAME_CONTEXT]=ie||ne.NOT_APPLICABLE,Q[ne.CHANNEL_CONTEXT]=te.namespaced[ne.CHANNEL_CONTEXT],Q[ne.FRANCHISE_CONTEXT]=te.namespaced[ne.FRANCHISE_CONTEXT],Q[ne.UUID_CONTEXT]=si.read(ne.VIACOM_UUID_COOKIE)||ne.NO_UUID,Q[ne.PAGE_VIEW_CONTEXT]=pt,Q[ne.THIRD_PARTY_CONTEXT]=!si.read(ne.THIRD_PARTY_COOKIE_CONTEXT),Q[ne.REPEAT_USER_CONTEXT]=o(),Q[ne.AD_BLOCK_STATUS_CONTEXT]=si.getLocalStorage(ne.AD_BLOCK_STATUS_COOKIE)||Ct;d=i.pop();)f(d,t[d]);for(s=te.namespaced&&Object.keys(te.namespaced)||[];d=s.pop();)Q[d]=te.namespaced[d];return c(n),pt}function v(e){var t=e.getData(),n=Object.keys(t)||[],i=ne.PAGE_EVENT_ACTIVITY,a=[],r=Ct;for(i=t[ne.LINK_NAME_PROPERTY]||ne.PAGE_EVENT_ACTIVITY,Xt(Q)||(Q={});r=n.pop();)f(r,t[r]);for(Q[ne.ACTIVITY_CONTEXT]=t[ne.ACTIVITY_CONTEXT]||ne.PAGE_EVENT_ACTIVITY,Q[ne.PAGE_VIEW_CONTEXT]=ft,a=te.namespaced&&Object.keys(te.namespaced)||[];r=a.pop();)Q[r]=te.namespaced[r];return l(i),pt}function N(e){}function R(e){}function D(e){var t=e.getData()||{},n=t.franchise||te.namespaced[ne.FRANCHISE_CONTEXT],i=t.channel||te.namespaced[ne.CHANNEL_CONTEXT],o=t.success,s=t.suggestionHappened,d=t.suggestionClicked,E=t.typeAheadClicked,l=t.searchTerm,T=a(t.pageName);return u(ne.PAGENAME_PROPERTY,T),Wt(o)?Q[ne.SEARCH_RESULT_CONTEXT]=ne.GENERIC_NOT_SET:Q[ne.SEARCH_RESULT_CONTEXT]=o&&ne.SUCCESS||ne.FAILED,Wt(s)||rn(s)?Q[ne.SEARCH_DID_YOU_MEAN_CONTEXT]=ne.NO_SEARCH_DID_YOU_MEAN:Q[ne.SEARCH_DID_YOU_MEAN_CONTEXT]=d&&ne.YES+ht+ne.YES||ne.YES+ht+ne.NO,Wt(E)?Q[ne.SEARCH_TYPEAHEAD_CONTEXT]=ne.NO_SEARCH_TYPEAHEAD:Q[ne.SEARCH_TYPEAHEAD_CONTEXT]=E&&ne.CONTEXT_VALUE_TRUE||ne.CONTEXT_VALUE_FALSE,Q[ne.LAST_PAGENAME_CONTEXT]=ie||ne.NOT_APPLICABLE,Q[ne.FRANCHISE_CONTEXT]=n||ne.NO_FRANCHISE,Q[ne.CHANNEL_CONTEXT]=r(i),Q[ne.PAGE_VIEW_CONTEXT]=pt,Q[ne.UUID_CONTEXT]=si.read(ne.VIACOM_UUID_COOKIE)||ne.NO_UUID,Q[ne.SEARCH_TERM_CONTEXT]=l||ne.NO_SEARCH_TERM,Q[ne.ACTIVITY_CONTEXT]=ne.SEARCH_ACTIVITY,c(T),pt}function L(e){var t=e.getData()||{},n=t.franchise||te.namespaced[ne.FRANCHISE_CONTEXT],i=t.channel||te.namespaced[ne.CHANNEL_CONTEXT],o=t.success,s=a(t.pageName);return u(ne.PAGENAME_PROPERTY,s),Q[ne.LAST_PAGENAME_CONTEXT]=ie||ne.NOT_APPLICABLE,Q[ne.FRANCHISE_CONTEXT]=n||ne.NO_FRANCHISE,Q[ne.CHANNEL_CONTEXT]=r(i),Q[ne.UUID_CONTEXT]=si.read(ne.VIACOM_UUID_COOKIE)||ne.NO_UUID,Q[ne.SEARCH_CONVERSION_CONTEXT]=o&&ne.CONTEXT_VALUE_TRUE||ne.CONTEXT_VALUE_FALSE,Q[ne.ACTIVITY_CONTEXT]=ne.SEARCH_CONVERSION_ACTIVITY,Q[ne.PAGE_VIEW_CONTEXT]=ft,l(ne.SEARCH_CONVERSION_ACTIVITY),pt}function V(t){var n=t.getData()||{};return Xt(n.provider)&&(ee.providerName=n.provider.displayName||n.provider.id),Q[ne.TVE_MVPD_CONTEXT]=ee.providerName||ne.NO_TVE_PROVIDER,Q[ne.TVE_USER_STATUS_CONTEXT]=n.isLoggedIn&&ne.AUTHENTICATED_TVE_USER||ne.UNAUTHENTICATED_TVE_USER,Q[ne.ACTIVITY_CONTEXT]=ne.TVE_AUTH_CHECK_ACTIVITY,Q[ne.PAGE_VIEW_CONTEXT]=ft,Q[ne.TVE_AUTH_DAYS_CONTEXT]=Qt(n.authDays)&&n.authDays+Ct||At,an(e.Config.kruxEnabled)&&e.KruxDataLayerVO.update(Ti.extend({},J.contextData)),l(ne.TVE_AUTH_CHECK_ACTIVITY),pt}function y(e){var t=e.getData()||{},n=t.channel||te.namespaced[ne.CHANNEL_CONTEXT],i=a(t.pageName);return s(ne.ERROR_TVE_STEP),u(ne.PAGENAME_PROPERTY,i),Q[ne.TVE_MVPD_CONTEXT]=ee.providerName||ne.NO_TVE_PROVIDER,Q[ne.FRANCHISE_CONTEXT]=te.namespaced[ne.FRANCHISE_CONTEXT]||ne.NO_FRANCHISE,Q[ne.CHANNEL_CONTEXT]=r(n),Q[ne.TVE_ERROR_CODE_CONTEXT]=t.code||ne.NO_TVE_ERROR_CODE,Q[ne.TVE_STEP_OF_LOGIN_FLOW_CONTEXT]=ee.mostRecentLoginStep,Q[ne.ACTIVITY_CONTEXT]=ne.TVE_ERROR_ACTIVITY,Q[ne.PAGE_VIEW_CONTEXT]=ft,l(ne.TVE_ERROR_ACTIVITY,i),pt}function b(){var e=te.pageName||a();return s(ne.WELCOME_SCREEN_TVE_STEP),u(ne.PAGENAME_PROPERTY,e),Q[ne.CHANNEL_CONTEXT]=r(te.namespaced[ne.CHANNEL_CONTEXT]),Q[ne.FRANCHISE_CONTEXT]=te.namespaced[ne.FRANCHISE_CONTEXT]||ne.NO_FRANCHISE,Q[ne.TVE_MVPD_CONTEXT]=ee.providerName||ne.NO_TVE_PROVIDER,Q[ne.ACTIVITY_CONTEXT]=ne.TVE_WELCOME_SCREEN_ACTIVITY,Q[ne.TVE_STEP_OF_LOGIN_FLOW_CONTEXT]=ee.mostRecentLoginStep,Q[ne.PAGE_VIEW_CONTEXT]=ft,l(ne.TVE_WELCOME_SCREEN_ACTIVITY,e),pt}function M(){var e=a(),t=te.namespaced[ne.CHANNEL_CONTEXT];switch(pt){case jt(t,ne.TVE_SETTINGS_SCREEN_CHANNEL_LABEL):s(ne.LOGIN_START_TVE_STEP_SETTINGS);break;case jt(t,ne.LIVE_CONTENT_CHANNEL_LABEL):s(ne.LOGIN_START_TVE_STEP_LIVE);break;default:s(ne.LOGIN_START_TVE_STEP_VIDEO)}return u(ne.PAGENAME_PROPERTY,e),Q[ne.CHANNEL_CONTEXT]=r(te.namespaced[ne.CHANNEL_CONTEXT]),Q[ne.VIDFRANCHISE_CONTEXT]=te.namespaced[ne.VIDFRANCHISE_CONTEXT]||ne.NO_FRANCHISE,Q[ne.TVE_MVPD_CONTEXT]=ee.providerName||ne.NO_TVE_PROVIDER,Q[ne.TVE_STEP_OF_LOGIN_FLOW_CONTEXT]=ee.mostRecentLoginStep,Q[ne.ACTIVITY_CONTEXT]=ne.TVE_LOGIN_START_ACTIVITY,Q[ne.PAGE_VIEW_CONTEXT]=ft,l(ne.TVE_LOGIN_START_ACTIVITY,e),pt}function w(e){var t=e.getData()||{},n=t.mvpd,i=t.channel||te.namespaced[ne.CHANNEL_CONTEXT],o=a(t.pageName);switch(pt){case jt(i,ne.LIVE_CONTENT_CHANNEL_LABEL):s(ne.PROVIDER_SELECTED_TVE_STEP_LIVE);break;default:s(ne.PROVIDER_SELECTED_TVE_STEP_VIDEO)}return Jt(n)&&(ee.providerName=n),u(ne.PAGENAME_PROPERTY,o),Q[ne.TVE_MVPD_CONTEXT]=ee.providerName||ne.NO_TVE_PROVIDER,Q[ne.VIDFRANCHISE_CONTEXT]=te.namespaced[ne.VIDFRANCHISE_CONTEXT]||ne.NO_FRANCHISE,Q[ne.CHANNEL_CONTEXT]=r(i),Q[ne.ACTIVITY_CONTEXT]=ne.TVE_PROVIDER_SELECTED_ACTIVITY,Q[ne.TVE_STEP_OF_LOGIN_FLOW_CONTEXT]=ee.mostRecentLoginStep,Q[ne.PAGE_VIEW_CONTEXT]=ft,l(ne.TVE_PROVIDER_SELECTED_ACTIVITY,o),pt}function U(e){var t=e.getData()||{},n=t.mvpd,i=t.channel||te.namespaced[ne.CHANNEL_CONTEXT],o=a(t.pageName),d=ne.TVE_LOGIN_COMPLETE_ACTIVITY,E=t.hbaInstance;switch(pt){case E&&jt(i,ne.LIVE_CONTENT_CHANNEL_LABEL):d=ne.TVE_LOGIN_COMPLETE_HBA_ACTIVITY,s(ne.SUCCESSFUL_LOGIN_HBA_STEP_LIVE);break;case E&&!jt(i,ne.LIVE_CONTENT_CHANNEL_LABEL):d=ne.TVE_LOGIN_COMPLETE_HBA_ACTIVITY,s(ne.SUCCESSFUL_LOGIN_HBA_STEP_VIDEO);break;case jt(i,ne.LIVE_CONTENT_CHANNEL_LABEL):s(ne.SUCCESSFUL_LOGIN_TVE_STEP_LIVE);break;default:s(ne.SUCCESSFUL_LOGIN_TVE_STEP_VIDEO)}return Jt(n)&&(ee.providerName=n),Q[ne.TVE_MVPD_CONTEXT]=ee.providerName||ne.NO_TVE_PROVIDER,Q[ne.CHANNEL_CONTEXT]=r(i),Q[ne.VIDFRANCHISE_CONTEXT]=te.namespaced[ne.VIDFRANCHISE_CONTEXT]||ne.NO_FRANCHISE,Q[ne.TVE_USER_STATUS_CONTEXT]=ne.AUTHENTICATED_TVE_USER,Q[ne.TVE_STEP_OF_LOGIN_FLOW_CONTEXT]=ee.mostRecentLoginStep,Q[ne.ACTIVITY_CONTEXT]=d,Q[ne.PAGE_VIEW_CONTEXT]=ft,l(d,o),pt}function F(){var e=a(),t=te.namespaced[ne.CHANNEL_CONTEXT];return s(ne.PROVIDER_NOT_LISTED_TVE_STEP),u(ne.PAGENAME_PROPERTY,e),Q[ne.FRANCHISE_CONTEXT]=te.namespaced[ne.FRANCHISE_CONTEXT]||ne.NO_FRANCHISE,Q[ne.TVE_MVPD_CONTEXT]=ee.providerName||ne.NO_TVE_PROVIDER,Q[ne.CHANNEL_CONTEXT]=r(t),Q[ne.TVE_STEP_OF_LOGIN_FLOW_CONTEXT]=ee.mostRecentLoginStep,Q[ne.ACTIVITY_CONTEXT]=ne.TVE_PROVIDER_NOT_LISTED_ACTIVITY,Q[ne.PAGE_VIEW_CONTEXT]=ft,l(ne.TVE_PROVIDER_NOT_LISTED_ACTIVITY,e),pt}function k(e){var t=e.getData()||{},n=t.channel||te.namespaced[ne.CHANNEL_CONTEXT],i=a(t.pageName);return u(ne.PAGENAME_PROPERTY,i),Xt(t.mvpd)&&(ee.providerName=t.mvpd.displayName||t.mvpd.id),Jt(t.method)?(s(ne.SOCIAL_LOGIN_SELECTED_TVE_STEP.replace(/{METHOD}/,t.method)),Q[ne.TVE_SOCIAL_METHOD_CONTEXT]=t.method):(s(ne.SOCIAL_LOGIN_SELECTED_TVE_STEP.replace(/{METHOD}/,ne.NO_TVE_SOCIAL_METHOD)),Q[ne.TVE_SOCIAL_METHOD_CONTEXT]=ne.NO_TVE_SOCIAL_METHOD),Q[ne.FRANCHISE_CONTEXT]=te.namespaced[ne.FRANCHISE_CONTEXT]||ne.NO_FRANCHISE,Q[ne.TVE_MVPD_CONTEXT]=ee.providerName||ne.NO_TVE_PROVIDER,Q[ne.CHANNEL_CONTEXT]=r(n),Q[ne.TVE_STEP_OF_LOGIN_FLOW_CONTEXT]=ee.mostRecentLoginStep,Q[ne.ACTIVITY_CONTEXT]=ne.TVE_SOCIAL_LOGIN_SELECTED_ACTIVITY,Q[ne.PAGE_VIEW_CONTEXT]=ft,l(ne.TVE_SOCIAL_LOGIN_SELECTED_ACTIVITY,i),pt}function B(e){var t=e.getData()||{},n=t.channel||te.namespaced[ne.CHANNEL_CONTEXT],i=a(t.pageName);return u(ne.PAGENAME_PROPERTY,i),Xt(t.mvpd)&&(ee.providerName=t.mvpd.displayName||t.mvpd.id),Jt(t.method)?(s(ne.SOCIAL_LOGIN_SUCCEEDED_TVE_STEP.replace(/{METHOD}/,t.method)),Q[ne.TVE_SOCIAL_METHOD_CONTEXT]=t.method):(s(ne.SOCIAL_LOGIN_SUCCEEDED_TVE_STEP.replace(/{METHOD}/,ne.NO_TVE_SOCIAL_METHOD)),Q[ne.TVE_SOCIAL_METHOD_CONTEXT]=ne.NO_TVE_SOCIAL_METHOD),Q[ne.FRANCHISE_CONTEXT]=te.namespaced[ne.FRANCHISE_CONTEXT]||ne.NO_FRANCHISE,Q[ne.TVE_MVPD_CONTEXT]=ee.providerName||ne.NO_TVE_PROVIDER,Q[ne.CHANNEL_CONTEXT]=r(n),Q[ne.TVE_STEP_OF_LOGIN_FLOW_CONTEXT]=ee.mostRecentLoginStep,Q[ne.TVE_USER_STATUS_CONTEXT]=ne.ELVIS_AUTHENTICATED_USER,Q[ne.ACTIVITY_CONTEXT]=ne.TVE_SOCIAL_LOGIN_SUCCEEDED_ACTIVITY,Q[ne.PAGE_VIEW_CONTEXT]=ft,l(ne.TVE_SOCIAL_LOGIN_SUCCEEDED_ACTIVITY,i),pt}function H(e){var t=e.getData()||{},n=t.channel||te.namespaced[ne.CHANNEL_CONTEXT],i=a(t.pageName);return u(ne.PAGENAME_PROPERTY,i),s(ne.SOCIAL_LOGIN_EXPIRED_TVE_STEP),Xt(t.mvpd)&&(ee.providerName=t.mvpd.displayName||t.mvpd.id),Q[ne.TVE_MVPD_CONTEXT]=ee.providerName||ne.NO_TVE_PROVIDER,Q[ne.CHANNEL_CONTEXT]=r(n),Q[ne.TVE_STEP_OF_LOGIN_FLOW_CONTEXT]=ee.mostRecentLoginStep,Q[ne.TVE_USER_STATUS_CONTEXT]=ne.ELVIS_EXPIRED_USER,Q[ne.ACTIVITY_CONTEXT]=ne.TVE_SOCIAL_LOGIN_EXPIRED_ACTIVITY,Q[ne.FRANCHISE_CONTEXT]=te.namespaced[ne.FRANCHISE_CONTEXT]||ne.NO_FRANCHISE,Q[ne.PAGE_VIEW_CONTEXT]=ft,l(ne.TVE_SOCIAL_LOGIN_EXPIRED_ACTIVITY,i),pt}function x(e){var t=e.getData()||{},n=a(te.pageName);return u(ne.PAGENAME_PROPERTY,n),s(ne.SOCIAL_LOGIN_LOCKED_TVE_STEP),Xt(t.mvpd)&&(ee.providerName=t.mvpd.displayName||t.mvpd.id),Q[ne.TVE_MVPD_CONTEXT]=ee.providerName||ne.NO_TVE_PROVIDER,Q[ne.FRANCHISE_CONTEXT]=te.namespaced[ne.FRANCHISE_CONTEXT]||ne.NO_FRANCHISE,Q[ne.CHANNEL_CONTEXT]=r(te.namespaced[ne.CHANNEL_CONTEXT]),Q[ne.TVE_STEP_OF_LOGIN_FLOW_CONTEXT]=ee.mostRecentLoginStep,Q[ne.TVE_USER_STATUS_CONTEXT]=ne.ELVIS_LOCKED_USER,Q[ne.ACTIVITY_CONTEXT]=ne.TVE_SOCIAL_LOGIN_LOCKED_ACTIVITY,Q[ne.PAGE_VIEW_CONTEXT]=ft,l(ne.TVE_SOCIAL_LOGIN_LOCKED_ACTIVITY,n),pt}function G(){var e=a(te.pageName),t=te.namespaced[ne.CHANNEL_CONTEXT];switch(pt){case jt(t,ne.LIVE_CONTENT_CHANNEL_LABEL):s(ne.TVE_TWENTY_FOUR_HOUR_AUTH_START_LIVE);break;default:s(ne.TVE_TWENTY_FOUR_HOUR_AUTH_START_VID)}return u(ne.PAGENAME_PROPERTY,e),Q[ne.CHANNEL_CONTEXT]=r(te.namespaced[ne.CHANNEL_CONTEXT]),Q[ne.TVE_STEP_OF_LOGIN_FLOW_CONTEXT]=ee.mostRecentLoginStep,Q[ne.TVE_MVPD_CONTEXT]=ee.providerName||ne.NO_TVE_PROVIDER,Q[ne.ACTIVITY_CONTEXT]=ne.TVE_TWENTY_FOUR_HOUR_PREVIEW_SELECTED_ACTIVITY,Q[ne.UUID_CONTEXT]=si.read(ne.VIACOM_UUID_COOKIE)||ne.NO_UUID,Q[ne.PAGE_VIEW_CONTEXT]=ft,Q[ne.VIDFRANCHISE_CONTEXT]=te.namespaced[ne.VIDFRANCHISE_CONTEXT]||ne.NO_FRANCHISE,Q[ne.VID_EP_TITLE_CONTEXT]=te.namespaced[ne.VID_EP_TITLE_CONTEXT],l(ne.TVE_SOCIAL_LOGIN_LOCKED_ACTIVITY,e),pt}function Y(){var e=te.namespaced[ne.CHANNEL_CONTEXT];switch(pt){case jt(e,ne.LIVE_CONTENT_CHANNEL_LABEL):s(ne.TWENTY_FOUR_HOUR_LOGIN_TVE_STEP_LIVE);break;default:s(ne.TWENTY_FOUR_HOUR_LOGIN_TVE_STEP_VID)}return Jt(ee.providerName)?Q[ne.TVE_MVPD_CONTEXT]=ne.TVE_TWENTY_FOUR_HOUR_MVPD_AUTHENTICATED:Q[ne.TVE_MVPD_CONTEXT]=ne.NO_TVE_PROVIDER,Q[ne.ACTIVITY_CONTEXT]=ne.TVE_TWENTY_FOUR_HOUR_PREVIEW_LOGIN_ACTIVITY,Q[ne.VIDFRANCHISE_CONTEXT]=te.namespaced[ne.VIDFRANCHISE_CONTEXT]||ne.NO_FRANCHISE,Q[ne.TVE_STEP_OF_LOGIN_FLOW_CONTEXT]=ee.mostRecentLoginStep,Q[ne.TVE_USER_STATUS_CONTEXT]=ne.TVE_TWENTY_FOUR_HOUR_LOGGED_IN_USER,Q[ne.PAGE_VIEW_CONTEXT]=ft,Q[ne.VID_EP_TITLE_CONTEXT]=te.namespaced[ne.VID_EP_TITLE_CONTEXT],l(ne.TVE_TWENTY_FOUR_HOUR_PREVIEW_LOGIN_ACTIVITY),pt}function X(){return s(ne.TWENTY_FOUR_HOUR_EXPIRED_TVE_STEP),Jt(ee.providerName)?Q[ne.TVE_MVPD_CONTEXT]=ne.TVE_TWENTY_FOUR_HOUR_EXPIRED_MVPD.replace(/{PROVIDER}/,ee.providerName):Q[ne.TVE_MVPD_CONTEXT]=ne.NO_TVE_PROVIDER,Q[ne.ACTIVITY_CONTEXT]=ne.TVE_TWENTY_FOUR_HOUR_PREVIEW_EXPIRED_ACTIVITY,Q[ne.FRANCHISE_CONTEXT]=te.namespaced[ne.FRANCHISE_CONTEXT]||ne.NO_FRANCHISE,Q[ne.TVE_STEP_OF_LOGIN_FLOW_CONTEXT]=ee.mostRecentLoginStep,Q[ne.TVE_USER_STATUS_CONTEXT]=ne.TVE_TWENTY_FOUR_HOUR_EXPIRED_USER,Q[ne.PAGE_VIEW_CONTEXT]=ft,l(ne.TVE_TWENTY_FOUR_HOUR_PREVIEW_EXPIRED_ACTIVITY),pt}function K(e){var t=e.getData().status;si.setLocalStorage(ne.AD_BLOCK_STATUS_COOKIE,t.toString())}function W(){return Q[ne.BALA_NOTIFIER_CONTEXT]=ne.BALA_RENDERED_STATUS,pt}function q(){return Q[ne.ACTIVITY_CONTEXT]=ne.PAGE_EVENT_ACTIVITY,Q[ne.BALA_NOTIFIER_CONTEXT]=ne.BALA_EXPLICIT_CLOSE_STATUS,Q[ne.PAGE_VIEW_CONTEXT]=ft,l(ne.BALA_EXPLICIT_CLOSE_STATUS),pt}function z(){return Q[ne.ACTIVITY_CONTEXT]=ne.PAGE_EVENT_ACTIVITY,Q[ne.BALA_NOTIFIER_CONTEXT]=ne.BALA_IMPLICIT_CLOSE_STATUS,Q[ne.PAGE_VIEW_CONTEXT]=ft,l(ne.BALA_IMPLICIT_CLOSE_STATUS),pt}var j=Et+"OmniturePageReceiver - ",J={},Q={},Z=[],$={},ee={},te={namespaced:{}},ne=ti,ie=Ct,ae=e.Config.omnitureCustomNamespace||Ct,re=It,oe=It,se=t(),de=["pageName","events","hier"];return $[P]=g,$.clearInstancValuesAndSetupAppmeasurement=A,E(),$}function N(){function t(t){return o=window._sp_,!o&&nn(window.initSourcePointLibrary)&&(window.initSourcePointLibrary(),o=window._sp_),Xt(o)&&nn(o.isAdBlocking)?(o.isAdBlocking(function(n){return nn(t)&&t(n),rn(n===l)&&(e[tt](n),kt(r,"Notifying receivers that ad blocking status has updated, new status - ",n)),l=n,kt(r,"Saving new ad block status - ",l),an(l)&&(e[ye](),kt(r,"Ad blocker detected as currently active.")),pt}),pt):rn(i(t))&&nn(t)?t(ft):ft}function n(e){return e=e||It,xt(l)?void t(function(t){return e(t)}):e(l)}function i(e){return E++,u>=E?(kt(r,"SourcePoint library is not fully instantiated, checking back after a few seconds."),setTimeout(t.bind(this,e),1e3*c),pt):(Bt(r,"isAdBlocking method not found!"),E=0,ft)}function a(){return t(),!d&&Xt(o)&&nn(o.pageChange)?(o.pageChange(),pt):(d=ft,ft)}var r=Et+"SourcePointPageReceiver - ",o=window._sp_,s={},d=pt,E=0,u=30,c=1,l=At,T="getAdBlockingStatus",_="updateAdBlockingStatus";return s[De]=a,s[T]=n,s[_]=t,s}function R(){function t(){var e=Array.prototype.slice.apply(arguments);return Ht(o,e),ft}function n(){window.pbjs.que.push(function(){window.pbjs.setConfig({priceGranularity:{buckets:[{precision:2,min:.03,max:3,increment:.01},{precision:2,min:3,max:8,increment:.05},{precision:2,min:8,max:20,increment:.5},{precision:2,min:20,max:100,increment:1}]}})})}function i(){return di.loadScript({url:Tn()+"//btg.mtvnservices.com/aria/prebid/prebid.js",async:pt,isAppendToBody:ft,onError:t,onLoad:n}),pt}function a(){return kt(o,"Loading header bidding configurations."),di.loadScript({url:Tn()+"//btg.mtvnservices.com/aria/prebid/bidders.js",async:ft,isAppendToBody:ft,onError:t,onLoad:i}),pt}function r(){return an(e.Config.pageAdsEnabled)?an(e.Config.requiresCoppaCompliance)?(t("Disabling header bidding in COPPA compliant environment."),ft):(window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],a(),pt):(t("Cannot use header bidding receiver without first enabling page ad support!  Use config flag `pageAdsEnabled` to set page ad support."),ft)}var o=Et+"XandrPrebidPageReceiver - ";return this[P]=r,this}e.version="3.2.0";var D="onPlayerFeedLoaded",P="onConfigReady",L="onPlayerConfigReady",V="onMetadata",y="onPlayStart",b="onResumePlay",M="onPause",w="onSeekStart",U="onPlayEnd",F="onPlayheadUpdate",k="onPlayIndexChanged",B="onFullScreenChange",H="onPlaylistComplete",x="onUiStateChange",G="onVolumeChange",Y="onMute",X="onUnMute",K="onDestroy",W="onAdError",q="onAdTimeout",z="onIsTimeForAnAd",j="onAdLoaded",J="onAdPodPlayStart",Q="onAdPodPlayEnd",Z="onAdPlayStart",$="onAdPlayEnd",ee="onAdMetadata",te="onAdUnPause",ne="onAdPause",ie="onAdClick",ae="onAdPlayheadUpdate",re="onAdRenderer",oe="onAdRequested",se="onAdRequestCompleted",de="onAdBreakTimeout",Ee="onAdManagerDestroyed",ue="onAdBreakReady",ce="onAdBreakNotAvailable",le="onAdSkipped",Te="onAdPlayRequest",_e="onPageEvent",ge="onAAMDataReady",Ae="onDemdexSegment",pe="onADMSVisitorID",fe="onReplay",Ie="onBufferStall",Ce="onPlayerResize",Oe="onWindowResize",Se="onAdsManagerReady",he="onContentResumeRequested",me="onAdBufferStart",ve="onAdBufferStop",Ne="onReportAdError",Re="onDestroyPage",De="onNewPage",Pe="onShare",Le="onFavorite",Ve="onSearch",ye="onAdBlocking",be="onSearchConversion",Me="setCustomReportingNamespace",we="onCustomData",Ue="sendMegabeaconData",Fe="onTVEWelcome",ke="onTVEError",Be="onTVEStatusCheck",He="onTVELogin",xe="onTVEProviderSelected",Ge="onTVEProviderNotListed",Ye="onTVEElvisSelected",Xe="onTVEElvisLogin",Ke="onTVEElvisExpired",We="onTVEElvisLocked",qe="onTVEFreePreviewSelected",ze="onTVEFreePreviewLogin",je="onTVEFreePreviewExpired",Je="onTVEProviderDisplay",Qe="placeAds",Ze="refreshAds",$e="destroyAds",et="onReportAdSkipped",tt="onAdBlockingStatusUpdate",nt="onPlayerSeamlessMode",it="onBalaRendered",at="onExplicitBalaClose",rt="onImplicitBalaClose",ot="onStreamStart",st="onImminentPlayEnd",dt="onTargetingConsentUpdate",Et="[Bento] ",ut="object",ct="function",lt="string",Tt="number",_t="boolean",gt="undefined",At=null,pt=!0,ft=!1,It=function(){},Ct="",Ot="/",St="&",ht=",",mt="#",vt=".",Nt="?",Rt="=",Dt=":",Pt=";",Lt=" ",Vt="+",yt="-",bt="_",Mt="x",wt=new RegExp("^w+\\d*\\.","gim"),Ut="bento_debug_mode",Ft=function(){return e.Config&&e.Config.debugMode||an(si.getLocalStorage(Ut))},kt=function(){return Ft()&&console.log.apply(console,arguments)},Bt=function(){return Ft()&&console.warn.apply(console,arguments)},Ht=function(){return Ft()&&console.error.apply(console,arguments)},xt=function(e){return e===At},Gt=function(e){return typeof e===ut},Yt=function(e){return Gt(e)&&0===Object.keys(e).length},Xt=function(e){return typeof e===ut&&e!==At},Kt=function(e,t){var n=t.split(vt);if(!Xt(e))return ft;for(;t=n.shift();)if(Wt(e=e[t])||!Gt(e)&&n.length)return ft;return pt},Wt=function(e){return typeof e===gt},qt=function(e){return!Wt.apply(this,arguments)},zt=function(e){return typeof e===lt},jt=function(e,t){return typeof e===lt&&-1!==e.indexOf(t)},Jt=function(e){return typeof e===lt&&e!==Ct},Qt=function(e){return typeof e===Tt&&e===e},Zt=function(e){return typeof e===_t},$t=function(e){return Array.isArray(e)},en=function(e){return 0===e.length},tn=function(e,t){if($t(e)&&qt(t)&&qt(t.nodeType)){var n=ft;return e.forEach(function(e){qt(e.id)&&e.id===t.id&&(n=pt)}),n}return $t(e)&&-1!==e.indexOf(t)},nn=function(e){return typeof e===ct},an=function(e){return e===pt||"true"===e},rn=function(e){return e===ft||"false"===e},on=function(e){return e instanceof RegExp},sn=function(e){return e instanceof HTMLElement},dn=function(e,t){return qt(e)?e:t},En=nn(Date.now)?Date.now:function(){return(new Date).getTime()},un=function(){return!Wt(window.performance)&&window.performance.now()||At},cn=function(){return Gt(e.Config)&&!rn(e.Config.enableSecureMode)},ln=function(){return Gt(e.Config)&&!rn(e.Config.pageReportingEnabled)},Tn=function(){return cn()?"https://":"http://"},_n=function(e){function t(e){var t=e.exec(n);return xt(t)?Ct:t[0]}var n=(e||window.navigator.userAgent).replace(/\;|\(|\)|\,/gi,Ct).replace(/MSIE|Trident|Edge/gi,"IE").replace(/Mac OS X|Mac/gi,"Macintosh");return In=n.match(/IE|Chrome|Firefox|Safari|Opera/g),Cn=tn(In,"IE")&&"IE"||tn(In,"Chrome")&&"Chrome"||tn(In,"Firefox")&&"Firefox"||tn(In,"Safari")&&"Safari"||tn(In,"Opera")&&"Opera",Sn=t(/Windows|Macintosh|Unix|Linux|Linux/),On=t(/Android|iPad|iPod|iPhone|IEMobile|Opera Mini|BlackBerry/i),hn=t(/Mobi/i),mn=n,n},gn=function(){var e=/iPad|iPod|iPhone/.exec(mn);return!xt(e)&&Jt(e[0])},An=function(){return"MacIntel"===navigator.platform&&navigator.maxTouchPoints>0||"iPad"===navigator.platform},pn=function(){return Jt(On)||Jt(hn)||An()},fn=function(){return!pn()},In=At,Cn=Ct,On=Ct,Sn=Ct,hn=Ct,mn=_n(),vn=document.msHidden&&"msvisibilitychange"||document.webkitHidden&&"webkitvisibilitychange"||"visibilitychange",Nn="com.br,co.uk,co.hu,co.il,com.tr,com.pl,com.ru,co.kr,com.au,co.nz,com.tw",Rn=function(){return window.location!==window.parent.location},Dn=function(){var e=document.msHidden&&"msHidden"||document.webkitHidden&&"webkitHidden"||"hidden";return Zt(document[e])?!document[e]:Pn()},Pn=function(){return nn(window.document.hasFocus)?window.document.hasFocus():pt},Ln="visible",Vn="hidden",yn="none",bn=".pjs.bento-hide-gui .edge-gui, .edge-player.bento-hide-gui .pjs-gui { display: none; }",Mn=".edge-player .edge-gui-ad-metadata { display: none; }",wn="bento-hide-gui",Un="fw-div-bento-position",Fn=".fw-div-bento-position { position: absolute; z-index: 0; height: 100%; width: 100%; display: block; }",kn=".edge-player-ads-element { height: 100% !important; width: 100% !important; }",Bn=".bento-disable-clicks { pointer-events: none; }",Hn="bento-disable-clicks",xn=function(){var e=[];return Rn()?jt(Xn(),"referrer")&&(e=Xn().substr(1).split(St).filter(function(e){return-1!==e.indexOf("referrer")}),!en(e))?e[0].split(Rt)[1]:document.referrer:Yn()},Gn=function(){return window.location.pathname||Ot},Yn=function(){return window.location.href},Xn=function(){return window.location.search||Nt},Kn=function(){return document.cookie},Wn=function(e){document.cookie=e},qn=function(){return document.title},zn=function(){return window.location.host.replace(wt,Ct)},jn=function(){var e=new RegExp(/[A-z0-9\-]*\.\bco\...\b|[A-z0-9\-]*\.uol\.\bcom\...\b|[A-z0-9\-]*\.\bcom\...\b|[A-z0-9\-]*\.\bcom\b|[A-z0-9\-]*\.\borg\b|[A-z0-9\-]*\...$/),t="sc";return function(n){var i,a=n||location.hostname,r=t+vt;return e.lastIndex=0,a.match(e)&&(i=e.exec(a),a=a.substr(i.index)),r+=a}}(),Jn=function(){return document.readyState};e.AdVars={VIDEO_PLAYED_TIME:"mtvn_btg_videoPlayedTime",LAST_PLAYTIME_CODE:"mtvn_btg_lastPlayTimeCode",AMAZON_PUB_ID:3221,AMAZON_AD_SERVER:"aax.amazon-adsystem.com",BROWSER_DISRUPTS_PLAYBACK:"event130",NO_AD_ID:"NO_AD_ID",NO_AD_TYPE:"NO_AD_TYPE",NO_CREATIVE_ID:"NO_CREATIVE_ID",NO_CREATIVE_DURATION:"NO_CREATIVE_DURATION",NO_POD_DURATION:"NO_POD_DURATION",NO_POD_ID:"NO_POD_ID",NO_AD_INDEX:"NO_AD_INDEX",NO_AD_COUNT:"NO_AD_COUNT",PLAYER_AD_INDEX_PLACEHOLDER:"<%= currentAdIndex %>",PLAYER_AD_COUNT_PLACEHOLDER:"<%= adCount %>"},e.ComscoreVars={BEACON_URL:"//beacon.securestudies.com/scripts/beacon.dll",BEACON_TYPEID:"1",VIDEOAD_TITLE:"VIDEO_AD",VIDEOAD_GENREID:"01",CONTENT_GENREID:"03",RND_KEY:"rn",PARAM_LIMIT:512,URL_LIMIT:2080},e.DemdexVars={DEMDEX_URL:function(){return Tn()+"mtvn.demdex.net/"}},e.ErrorCode={INFO:20,WARN:30,ERROR:40},e.FreewheelVars={URL:function(){return"https://7f077.v.fwmrm.net/ad/g/1?nw={0}&prof={0}:{1}&flag=+sltp+exvt+slcb+unka+unks;"},URL_INT:function(){return"https://2ab7f.v.fwmrm.net/ad/g/1?nw={0}&prof={0}:{1}&flag=+sltp+exvt+slcb+unka+unks;"},URL_INT_TEST:"//293a7.v.fwmrm.net/ad/g/1?nw={0}&prof={0}:{1}&flag=+sltp+exvt+slcb+unka+unks;",LAST_GUID_PLAYED:"mtvn_btg_lastGUIDPlayed",LAST_PLAYLIST_URI_PLAYED:"mtvn_btg_lastPlaylistURIPlayed",MINTIME_BTW_ADS:10,QC_DEMO_VALUE:"vmn_btg_qcdemotargetting",FRONT_BUMPER_KEY:"_fw_front_bumper",END_BUMPER_KEY:"_fw_end_bumper",ARA_KEY:"_fw_ara",FSS_KEY:"_fw_fss",FSS_VALUE:"_fw_search",DEMDEX_SEGMENT:"mtvn_demdex_segment",DEF_CLIP_TIME:180,NETWORK_ID:520311,NETWORK_ID_TEST:520310,NETWORK_ID_INTL:174975,NETWORK_ID_INTL_TEST:168871,PROFILE_ID:"EdgeHTML5",PROFILE_ID_HTLM5_DESKTOP:"EdgeHTML5Desktop",DEF_MIN_TIME_FOR_ADS:0,DEF_SITE_SECTION:"viacom_default",DEF_MOB_SITE_SECTION:"viacom_default_mob",INTL_DEFAULT_ASSET_ID:41349526,MOB_SID_SUFFIX:"_mob",TAB_SID_SUFFIX:"_tab",INIT_AD_INDEX:1,PLAYLIST_KEY:"playlist",VPAID_AD:"VPAID",NO_ADS_SUPPORT:"vad=n",AUTHENTICATING_ENTITY:"_fw_ae",AUTHORIZATION_REQUIRED:"_vmn_ar",DEBUG_MODE:"fwdebug",OVERRIDE_NETWORK_ID:"fwid",OVERRIDE_PROFILE_ID:"fwprof",OVERRIDE_SSID:"fwssid",OVERRIDE_MGID:"fwcaid",TSLA:"tsla",ENTIRE_URL:"_fw_h_referer",AD_SERVER:function(){return Tn()+"7f077.v.fwmrm.net/"},INTL_AD_SERVER:function(){return Tn()+"2ab7f.v.fwmrm.net/"},DISPLAY_BASE:"video-player",PREROLL:"preRoll",MIDROLL:"midRoll",POSTROLL:"postRoll",OVERLAY:"overlay",VPAID_CLICK_DIV:"sauron_stage",FW_CUSTOMER_VISITOR_ID:"customVisitorId",FW_DID_IDFA:"_fw_did_idfa",FW_DID_GOOGLE_ADVERTISING_ID:"_fw_did_google_advertising_id",FW_DESIRED_BITRATE_KEY:"desiredBitrate",FW_TEN_MINUTES_IN_SEC:600,FW_PRELOAD_AD_SLOT_BEFORE_TIME:10,FW_BANDWIDTH_KEY:"fw_bandwidth",FW_MINIMUM_BITRATE:600,FW_MAXIMUM_BITRATE_MOBILE:2e3,FW_MAXIMUM_BITRATE_DESKTOP:2500,FW_MAXIMUM_BITRATE_DESKTOP_BY_DIMENSIONS:1638,FW_BITRATE_MOBILE_WIFI_BY_DIMENSIONS:1536,FW_PRELOAD_BITRATE_RANGE_0_800:4,FW_PRELOAD_BITRATE_RANGE_800_1000:3,FW_PRELOAD_BITRATE_RANGE_1000_5000:5,FW_PRELOAD_BITRATE_RANGE_GT_5000:10,LOCALSTORAGE_DEMDEX_VALUE:"demdexFW",VIDEO_ID_KEY:"vid",CQ_KEY:"cq",COPPA_KEY:"_fw_coppa",LIMIT_AD_TRACKING_KEY:"_fw_is_lat",TCF_PRIVACY_STRING:"_fw_gdpr_consent",GDPR_KEY:"_fw_gdpr"},e.HeartbeatVars={URL_LIMIT:1024,DEFAULT_ITEM_INDEX:0,VISITOR_NAMESPACE:"mtvn",TRAFFIC_VAR_LIMIT:75,MIN_DURATION:30,MAX_DURATION:120,NETWORK_PATH:"video/net/",SYNDICATED_PATH:"video/syn/",VIRAL_PATH:"video/syn/",DEV_PATH:"video/dev/",VIDEOAD_TITLE:"VIDEO_AD|",VIDEOITEM_EVENT:"event15",ADITEM_EVENT:"event29",PLAYLIST_START:"event24",BUFFER_EVENT:"event25",PLAYLIST_DURATION:"event26",PLAYLIST_LENGTH:"event28",SINGLECLIP_EVENT:"event50",PLAYLIST_EVENT:"event49",FRANCHISE_TITLE:"prop35",EVENTS:"events",PRODUCTS:"products",SEMICOLONS:";;;;",PLAYLIST_ITEM:"PLAYLIST",SINGLECLIP_ITEM:"SINGLECLIP",MEDIA_NAME:"eVar33,prop50",MEDIA_TIMEPLAYED:"event78",MEDIA_COMPLETE:"event76",MEDIA_SEGMENTVIEW:"event77",MEDIA_SEGMENTEVAR:"eVar56",MEDIA_SEGMENTEVAR_DEMDEX:"evar57eventsproductspagenamehier",MEDIA_PLAYLIST_COMPLETE:"event89",DURATION_EVENT:"event46",AD_START_EVENT:"event71",AD_END_EVENT:"event72",AD_BUMPER_START_EVENT:"event31",AD_BUMPER_END_EVENT:"event32",AD_TIME_SPENT:"event73",AD_POD_ID:"eVar38,prop54",AD_CREATIVE_ID:"eVar37,prop53",AD_POD_ITEMS:"eVar39,prop55",AD_VIDEO_TITLE:"Ad Play",LIVE_BEACON_FREQ:180,LIVE_FREQ_MAX:180,LIVE_FREQ_MIN:60,LIVE_DURATION:86400,LIVE_EVENT_START_PLAYHEAD:432e4,USER_SEG_CATEGORY:"User Segment;",DEFAULT_TRACK_SECONDS:60,LOCKED:"Locked",UNLOCKED:"Unlocked",TRACKED98:"tracked98",TRACKED50:"tracked50",TRACKED:"tracked",DEFAULT_VARS:{pageName:"pageName",eVar26:"franchise",eVar27:"mtvnOwner",eVar28:"mediaCategory",eVar29:"artistName",eVar30:"applicationOrigin",eVar31:"applicationName",eVar32:"applicationContext",eVar33:"videoTitle",eVar34:"playlistTitle",eVar48:"tveAuthStatus",eVar56:"segmentName",eVar66:"playlistId",events:"events",products:"products",prop35:"mediaTitle",prop36:"franchise",prop38:"mtvnOwner",prop43:"playlistTitle",prop45:"mediaCategory",prop46:"artistName",prop47:"applicationOrigin",prop48:"applicationName",prop49:"applicationContext",prop50:"videoTitle",prop1:"agreement",prop3:"agreementId",prop30:"guid",eVar57:"vmnUUID",prop31:"userSegment",prop66:"playlistId",eVar71:"linearPubDate",eVar72:"episodeN",eVar73:"seasonN",prop59:"linearPubDate",prop60:"episodeN",prop61:"seasonN"},DEFAULT_AD_VARS:{eVar37:"creativeId",prop53:"creativeId",eVar38:"podId",prop54:"podId",eVar39:"currentAdIndex",prop55:"currentAdIndex"},DEFAULT_NETWORK_PLAYER_NAME:"NETWORK_PLAYER",DEFAULT_VIRAL_PLAYER_NAME:"VIRAL_PLAYER",DEFAULT_PARTNER_PLAYER_NAME:"PARTNER_PLAYER",DEFAULT_DEV_PLAYER_NAME:"DEV_PLAYER",NO_VID_TITLE:"NO_VID_TITLE",POD_START_EVENT:"event70",POD_COMPLETE_EVENT:"event75",NO_APPLICATION_NAME:"NAME_UNSET",NO_APPLICATION_CONTEXT:"CONTEXT_UNSET",NO_APPLICATION_ORIGIN:"ORIGIN_UNSET",TVE_AUTH_USER:"TVE Authenticated User",GUEST_USER:"Guest User",TVE_GUEST_TO_AUTH:"event42",TVE_AUTH_TO_GUEST:"event43",TVE_USER_AUTH_CHECK_SUCCESS:"event56",AD_PLAY_REQUEST_TIMEOUT:"event106",AD_BREAK_START_TIMEOUT:"event107",AD_STARTED_TIMEOUT:"event108",INTRA_AD_TIMEOUT:"event109",AGGREGATE_TIMEOUT:"event110",BENTO_CONFIG_NOT_AVAILABLE:"event111",HEART_BEAT_TRACKING_SERVER:"mtv.hb.omtrdc.net",
MARKETING_CLOUD_ORG_ID:"ED7001AC512D2ABD0A490D4C@AdobeOrg",AD_START_ACTIVITY:"adStart",FULL_EPISODE_START_ACTIVITY:"fepStart",MOVIE_START_ACTIVITY:"movieStart",FIGHT_START_ACTIVITY:"fightStart",CLIP_START_ACTIVITY:"clipStart",SEGMENT_START_ACTIVITY:"segmentStart",LIVE_STREAM_START_ACTIVITY:"liveStreamStart",SEGMENT_END_ACTIVITY:"segmentComplete",EPISODE_END_ACTIVITY:"fepComplete",CLIP_END_ACTIVITY:"clipComplete",ACTIVITY_CONTEXT_VARIABLE:"v.activity",MID_CONTEXT_VARIABLE:"v.mid",SEAMLESS_CONTEXT_VARIABLE:"v.seamlessEnabled",SPLIT_TEST_CONTEXT_VARIABLE:"v.playerTest",STREAM_TYPE_VOD:"VOD",STREAM_TYPE_LIVE:"LIVE"},e.MessageVars={DEMDEX_SEGMENT:"demdexfwsegment",ADMS_TRACKING_SERVER:"trackingserver",USER_SEGMENT:"usersegment",ADMS_VISITOR_ID:"visitorid"};var Qn={STREAMSENSE_LIBRARY_LOCATION:Tn()+"btg.mtvnservices.com/aria/BentoJS/libraries/streamsense.min.js",BASE_URL:function(){return(cn()?"https://sb":"//b")+".scorecardresearch.com/p"},TYPEID:"2",MAX_DURATION:600,CLIP_SHORT:"vc11",CLIP_LONG:"vc12",CLIP_LIVE:"vc13",AD_PREROLL:"va11",AD_MIDROLL:"va12",AD_POSTROLL:"va13",AD_LIVE:"va21",AD_OTHER:"va00",LOCKED:1,UNLOCKED:0,LIVE_DURATION:86400};e.VideoVars={CONTENT_TYPE:"rss.group.category.contentType",DESCRIPTION:"rss.description",DURATION:"rss.duration",FRANCHISE:"rss.group.category.franchise",GUID:"rss.guid",INDEX:"index",IS_LIVE:"isLive",LINK:"rss.link",MEDIA_CATEGORY:"rss.group.category.contentType",PLAY_LIST_REP_TITLE:"rss.group.category.playlistRepTitle",PLAY_LIST_TITLE:"rss.group.category.playlistTitle",PLAY_LIST_URI:"rss.group.category.playlistURI",REPORTABLE:"rss.group.category.reportable",SEO_HTML_TEXT:"rss.group.category.seoHTMLText",THUMPNAIL_URL:"rss.image.url",TITLE:"rss.title",VIDEO_TITLE:"rss.group.category.videoTitle",ARTIST_NAME:"rss.group.category.artist",MTVN_OWNER:"rss.group.category.mtvnOwner",ITEM_TITLE:"rss.title"};var Zn={SECURE_SUBDOMAIN:"https://sb",STANDARD_SUBDOMAIN:"http://b",DESTINATION:".scorecardresearch.com/cs/3005086/beacon.js",C1:"2",C2:"3005086",DEFAULT_C3:Ct,C4:encodeURIComponent(xn()),C5:"20000",DEFAULT_C6:Ct,DEFAULT_C15:Ct},$n={LIBRARY_SRC:"www.googletagservices.com/tag/js/gpt.js",AD_DEFINITION:".bento-ad",AD_UNIT_DEFINITION:"data-ad-unit",AD_SIZES_DEFINITION:"data-valid-sizes",AD_TARGETING_DEFINITION:"data-targeting-values",AD_EXCLUSIONS_DEFINITION:"data-exclusion-categories",AD_REFRESH_DEFINITION:"data-refresh-rate",DESKTOP_AD_DEFINITION:"_web",MOBILE_AD_DEFINITION:"_mob",INDEX_ELEMENT_KEY:"element",INDEX_ID_KEY:"id",AMAZON_A9_ID:4448747176,INDEX_EXCHANGE_ID:4406675025,RUBICON_ID:21927183,ADX_ID:23548263,AD_ID_TEMPLATE:"gpt-ad-{{ now }}-{{ index }}",AD_UNIT_PATH_TEMPLATE:"/{{ networkID }}/{{ adUnit }}",PUBAD_EVENT_SLOT_RENDERED:"slotRenderEnded",PUBAD_EVENT_IMPRESSION:"impressionViewable",INDEX_PAGE_ADUNIT_SUFFIX:"home",MAPPINGS:"mappings",KEY_VALUES:"key-values",AD_UNIT:"ad-unit",METADATA:"metadata",EXCLUSION_CATEGORIES:"exclusion-categories",IS_MAIN:"is_main",SETTINGS:"settings",SETTINGS_DISABLE_AUTO_SLOTS:"disableAutoSlots",INACTIVE:"inactive",WAIT_MESSAGE:"Waiting on googletag.apiReady ..",TEST_MODE_TARGETING_VALUES:"testmode",POE_SIZE:[6,6],LOCALSTORAGE_DEMDEX_VALUE:"demdexDFP"},ei={DEFAULT_TOPIC:"adperf",DESTINATION:Tn()+"mb.mtvnservices.com/data/collect/v1/?__t={{topic}}&__mb_addHeader=true"},ti={VISITOR_NAMESPACE:"mtvn",LINK_TYPE:"o",YES:"y",NO:"n",SUCCESS:"s",FAILED:"f",CONTEXT_VALUE_TRUE:"T",CONTEXT_VALUE_FALSE:"F",PAGENAME_PROPERTY:"pageName",LINK_NAME_PROPERTY:"eventName",NOT_APPLICABLE:"N/A",GENERIC_NOT_SET:"NOT_SET",NO_FRANCHISE:"NO_FRANCHISE",NO_CATEGORY:"NO_CATEGORY",NO_CHANNEL:"NO_CHANNEL",NO_UUID:"NO_UUID",NO_PREV_PAGENAME:"NO_PREVIOUS_PAGENAME",NO_SEARCH_TERM:"NO_SEARCH_TERM",NO_SEARCH_DID_YOU_MEAN:"NO_SEARCH_DYM",NO_SEARCH_TYPEAHEAD:"NO_SEARCH_TA",NO_TVE_ERROR_CODE:"NO_TVE_ERROR_CODE",NO_TVE_PROVIDER:"none-selected",NO_TVE_PREVIOUS_STEP:"NO_STEP_DATA_RECORDED",NO_TVE_SOCIAL_METHOD:"NO_SOCIAL_METHOD",AAM_UUID_COOKIE:"aam_uuid",AD_BLOCK_STATUS_COOKIE:"adBlockCookie",MARKETING_CLOUD_ORG_ID:"ED7001AC512D2ABD0A490D4C@AdobeOrg",THIRD_PARTY_SUB_DOMAIN:".112.2o7.net",AAM_PARTNER:"partner",AAM_CONTAINER_NSID:"containerNSID",AAM_ID_SYNC_CONTAINER:"idSyncContainerID",AAM_DISABLE_DEFAULT_REQUEST:"disableDefaultRequest",AAM_DISABLE_SCRIPT_ATTACHEMENT:"disableScriptAttachment",AAM_UUID_COOKIE_OBJ:"uuidCookie",AAM_SITE_CATALYST_COOKIE:"aam_sc",AAM_SITE_CATALYST_KEY:"aamsc",BALA_RENDERED_STATUS:"view",BALA_EXPLICIT_CLOSE_STATUS:"explicit",BALA_IMPLICIT_CLOSE_STATUS:"implicit",LIVE_CONTENT_CHANNEL_LABEL:"live-tv",VIACOM_CONTEXT_NAMESPACE:"v.",THIRD_PARTY_COOKIE_CONTEXT:"v.tpc",LAST_PAGENAME_CONTEXT:"v.prevPageName",UUID_CONTEXT:"v.uuid",CHANNEL_CONTEXT:"v.channel",PAGE_EVENT_CONTEXT:"v.pageEvent",ACTIVITY_CONTEXT:"v.activity",PAGE_VIEW_CONTEXT:"v.pv",FRANCHISE_CONTEXT:"v.pageFranchise",VIDFRANCHISE_CONTEXT:"v.vidFranchise",THIRD_PARTY_CONTEXT:"v.ckieBlock",REPEAT_USER_CONTEXT:"v.newRepeat",SEARCH_TERM_CONTEXT:"v.searchTerm",SEARCH_RESULT_CONTEXT:"v.searchResult",SEARCH_DID_YOU_MEAN_CONTEXT:"v.searchDYM",SEARCH_TYPEAHEAD_CONTEXT:"v.searchTA",SEARCH_CONVERSION_CONTEXT:"v.searchConversion",AD_BLOCK_STATUS_CONTEXT:"v.adBlock",TVE_MVPD_CONTEXT:"v.tveMVPD",TVE_ERROR_CODE_CONTEXT:"v.tveErrCode",TVE_USER_STATUS_CONTEXT:"v.tveUsrStat",TVE_SOCIAL_METHOD_CONTEXT:"v.socMethod",TVE_STEP_OF_LOGIN_FLOW_CONTEXT:"v.tveStep",TVE_AUTH_EXPIRED_CONTEXT:"v.authExpired",BALA_NOTIFIER_CONTEXT:"v.balaNotifier",TVE_AUTH_DAYS_CONTEXT:"v.authDays",VID_EP_TITLE_CONTEXT:"v.vidEpTitle",BENTO_VERSION_CONTEXT:"v.bentoVersion",AUTHENTICATED_TVE_USER:"TVE authenticated user",UNAUTHENTICATED_TVE_USER:"Guest user",ELVIS_AUTHENTICATED_USER:"TVE sfps authenticated user",WELCOME_SCREEN_TVE_STEP:"TVE:OverlayFlow:Start",LOGIN_START_TVE_STEP_SETTINGS:"TVE:settings:Auth Start",LOGIN_START_TVE_STEP_VIDEO:"TVE:video:Auth start",LOGIN_START_TVE_STEP_LIVE:"TVE:live:Auth Start",PROVIDER_SELECTED_TVE_STEP:"TVE:settings:MVPD Auth-Request",PROVIDER_SELECTED_TVE_STEP_VIDEO:"TVE:video:MVPD Pick",PROVIDER_SELECTED_TVE_STEP_LIVE:"TVE:live:MVPD Pick",ERROR_TVE_STEP:"TVE:settings:Error",SUCCESSFUL_LOGIN_TVE_STEP:"TVE:settings:Successful login",SUCCESSFUL_LOGIN_TVE_STEP_VIDEO:"TVE:video:Auth Complete",SUCCESSFUL_LOGIN_TVE_STEP_LIVE:"TVE:live:Auth Complete",SUCCESSFUL_LOGIN_HBA_STEP_VIDEO:"TVE:video:HBA Auth Complete",SUCCESSFUL_LOGIN_HBA_STEP_LIVE:"TVE:live:HBA Auth Complete",PROVIDER_NOT_LISTED_TVE_STEP:"TVE:settings:Not available",SOCIAL_LOGIN_SELECTED_TVE_STEP:"TVE:settings:auth provider pick:{METHOD}",SOCIAL_LOGIN_SUCCEEDED_TVE_STEP:"TVE:settings:auth provider pick:{METHOD}:Successful login",SOCIAL_LOGIN_EXPIRED_TVE_STEP:"TVE:settings:auth provider access expiration",SOCIAL_LOGIN_LOCKED_TVE_STEP:"TVE:[Settings]:auth provider:locked",TWENTY_FOUR_HOUR_SELECTED_TVE_STEP:"TVE:settings:MVPD Auth-Request",TWENTY_FOUR_HOUR_LOGIN_TVE_STEP:"TVE:[Settings]:fps:Successful Sign-in",TWENTY_FOUR_HOUR_LOGIN_TVE_STEP_VID:"TVE:video:24HR FPS Auth Complete",TWENTY_FOUR_HOUR_LOGIN_TVE_STEP_LIVE:"TVE:live:24HR FPS Auth Complete",TWENTY_FOUR_HOUR_EXPIRED_TVE_STEP:"TVE:[Settings]:24HR FPS Expired",TVE_TWENTY_FOUR_HOUR_LOGGED_IN_USER:"TVE SFPS Authenticated user",TVE_TWENTY_FOUR_HOUR_EXPIRED_USER:"TVE 24h preview user expired",TVE_TWENTY_FOUR_HOUR_AUTH_START_VID:"TVE:video:24HR FPS Auth Start",TVE_TWENTY_FOUR_HOUR_AUTH_START_LIVE:"TVE:live:24HR FPS Auth Start",TVE_TWENTY_FOUR_HOUR_MVPD_AUTHENTICATED:"FPS",TVE_SETTINGS_SCREEN_CHANNEL_LABEL:"Settings Screen",TVE_TWENTY_FOUR_HOUR_MVPD:"[provider name]:{PROVIDER}",TVE_TWENTY_FOUR_HOUR_EXPIRED_MVPD:"[provider name]:{PROVIDER}:exp",PAGE_VIEW_ACTIVITY:"pageview",PAGE_EVENT_ACTIVITY:"pageEvent",SEARCH_ACTIVITY:"searchResult",SEARCH_CONVERSION_ACTIVITY:"searchConversion",TVE_AUTH_CHECK_ACTIVITY:"userAuthcheck",TVE_ERROR_ACTIVITY:"tveError",TVE_WELCOME_SCREEN_ACTIVITY:"tveWelcome",TVE_LOGIN_START_ACTIVITY:"tveAuthStart",TVE_LOGIN_COMPLETE_ACTIVITY:"tveAuthComplete",TVE_LOGIN_COMPLETE_HBA_ACTIVITY:"tveHBAAuthComplete",TVE_PROVIDER_SELECTED_ACTIVITY:"tveMVPDPick",TVE_PROVIDER_NOT_LISTED_ACTIVITY:"tveMVPDnotListed",TVE_SOCIAL_LOGIN_SELECTED_ACTIVITY:"tveElvisSocialPick",TVE_SOCIAL_LOGIN_SUCCEEDED_ACTIVITY:"tveElvisSignComplete",TVE_SOCIAL_LOGIN_EXPIRED_ACTIVITY:"tveElvisExp",TVE_SOCIAL_LOGIN_LOCKED_ACTIVITY:"tveElvisLock",TVE_TWENTY_FOUR_HOUR_PREVIEW_SELECTED_ACTIVITY:"tve24HRFPSAuthstart",TVE_TWENTY_FOUR_HOUR_PREVIEW_LOGIN_ACTIVITY:"tve24HRFPSAuthComplete",TVE_TWENTY_FOUR_HOUR_PREVIEW_EXPIRED_ACTIVITY:"tve24HRFPSExp"},ni={LOADED_COMPONENT:"TVE:componentLoaded",ERROR:"TVE:errorHappened",CHECKED_STATUS:"TVE:checkStatusCompleted",LOGGED_IN:"TVE:loginCompleted",LOGGED_OUT:"TVE:logoutCompleted",SELECTED_PROVIDER:"TVE:providerSelected",PROVIDER_DISPLAY:"TVE:signInPageCompleted",PROVIDER_NOT_LISTED_BUTTON_CLICK:"TVE:providerNotListedButtonSelected",START_WATCHING_BUTTON_CLICK:"TVE:startWatchingNowButtonClicked",LEARN_MORE_CLICK:"TVE:learnMoreButtonClicked",SPECIAL_PREVIEW_SELECTED:"TVE:specialPreviewPickedMethod",SPECIAL_PREVIEW_LOGGED_IN:"TVE:specialPreviewSucceedLoginForMethod",SPECIAL_PREVIEW_EXPIRED:"TVE:specialPreviewExpiredWithProvider",SPECIAL_PREVIEW_LOCKED:"TVE:specialPreviewLockedWithProvider",FREE_PREVIEW_SELECTED:"TVE:freePreviewWasStarted",FREE_PREVIEW_LOGGED_IN:"TVE:freePreviewLoginCompleted",FREE_PREVIEW_EXPIRED:"TVE:freePreviewExpired"},ii={PREBID_TIMEOUT:1e3,FAILSAFE_TIMEOUT:3e3},ai=new t,ri=function(){var t=[],n=At,i=Et+"BentoApi ",a=function(e){t[e]||t.push(e)},r=function(e,t){for(var i=n&&n.feed&&n.feed.items?n.feed.items:[],a=At,r=At,o=0,s=i.length;s>o;o++)if(i[o].rss&&i[o].rss.guid===e){a=i[o].rss;break}if(a&&a.group&&a.group.category){r=a.group.category;for(var d in r)if(d===t)return"eventType"!==d||Jt(r[d])?r[d]:"NO-EVENT"}return ft},o=function(e,t){var n=t.replace(/\ |\:|\+|\{|\}|^\s|\s$/g,Ct),a=Ct;if(e.hasOwnProperty(n)&&e[n])return e[n];var o=e["v.mgid"]||e.guid;return(a=r(o,n))?a:(n!==Ct&&Bt(i+"The value "+n+" for omnitureCustomFields was not found in the feed."),t.search(/^{[\s\S]+}$/)?t:Ct)},s=function(e,t,n,i,r){var s=Ct,d="v.";n.substring(0,d.length)===d;if(i.indexOf(Vt)>-1)for(var E=i.split(Vt),u=0,c=E.length;c>u;u++)s+=o(e,E[u]);else s=o(e,i);s&&(t.hasOwnProperty(n)&&!an(r)||(t[n]=s,a(n)))};return{getMappedObject:function(i,r){var o,d={};e.HeartbeatVars.DEFAULT_VARS;n=r;for(o in i)i.hasOwnProperty(o)&&(d[o]=i[o],a(o));if(Gt(r.omnitureCustomFields)){var E=r.omnitureCustomFields;for(o in E)E.hasOwnProperty(o)&&s(i,d,o,E[o],ft)}if(Gt(r.omniturePropertyOverrides)){var u=r.omniturePropertyOverrides;for(o in u)u.hasOwnProperty(o)&&s(i,d,u[o],o,pt)}return d.trackVars=t.join(ht),t=[],d}}}(),oi=new n;!function(){function e(e){var t;zt(e)&&(t=oi.getOrCreateArray(o,e),oi.removeValue(t,s))}function t(){var t=Array.prototype.slice.apply(arguments);return s=t.pop(),o=this,en(t)&&(t.push.apply(t,Object.keys(this)),oi.removeValue(t,"by")),t.forEach(e),this}function n(e,t,n){var i=e+"__KEY",a=e+"__VALUE",r=oi.getOrCreateArray(this.by,i),o=oi.getOrCreateArray(this.by,a),s=-1,d=0;return oi.pushIfAbsent(r,t),r.forEach(function(e){e&&e.id&&e.id===t.id&&(s=d),d++}),qt(n)&&(o[s]=n),o[s]}function a(e,t){var n=e+"__KEY",i=e+"__VALUE",a=oi.getOrCreateArray(this.by,n),r=oi.getOrCreateArray(this.by,i),o=a.indexOf(t);a.splice(o,1),r.splice(o,1)}function r(){var e=Array.prototype.slice.apply(arguments),t=e.pop(),n=this;return e.forEach(function(e){var i=oi.getOrCreateArray(n,e);oi.pushIfAbsent(i,t)}),oi.pushIfAbsent(this.everyInstance,t),this.by.last.catalog=t,this}var o,s;i.prototype.catalog=r,i.prototype.expunge=t,i.prototype.byIndex=n,i.prototype.unIndex=a}();var si=new a;BentoNowUtility=new r;var di=new o,Ei=function(e,t){var n=function(e){if(typeof e===ct)try{e=new e}catch(t){}return e};if(e=n(e),t=n(t),e!==t&&typeof e===ut&&typeof t===ut)for(var i in t)t.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=t[i]);return e},ui=new s,ci=new d,li=new E,Ti=new u,_i=function(e){var t=ft,n=At,i=function(e){},a=-1,r=[];return e===At||typeof e!==ut||typeof e.delegate!==ut||typeof e.delegate.onQueueItem!==ct?At:(n=e.delegate,typeof n.onQueueError===ct&&(i=n.onQueueError),typeof n.maxCount===Tt&&n.maxCount>0&&(a=n.maxCount),{add:function(){return a>0&&r.length>=a?(i(new Error("maxCount exceeded: "+r.length)),ft):(r.push(arguments),r.length)},addPriority:function(){return a>0&&r.length>=a?(i(new Error("maxCount exceeded: "+r.length)),ft):(r.unshift(arguments),r.length)},start:function(){kt(Et+"Queue.start running: "+t),t||(t=pt,this.run())},run:function(){for(kt(Et+"Queue.run queue.length: "+r.length);t;)r.length>0?n.onQueueItem.apply(n,r.shift()):this.stop()},stop:function(){t=ft},isRunning:function(){return t},count:function(){return r.length},clear:function(){this.stop(),r=[]}})},gi=new c,Ai=function(){var e="style",t="head";return{generateStyleTag:function(n,i){if(Jt(n)){var a=document.createElement(e);return a.innerHTML=n,Jt(i)?document.querySelector(i).appendChild(a):document.getElementsByTagName(t)[0].appendChild(a),pt}return ft}}}(),pi=new T;e.BentoApi=function(t){function n(){return Hn.stop(),Jn?(kt(jt+"adSdkFailSafeTimer - Ad Request Failed"),void bi({error:e.AdVars.AD_REQUEST_FAILURE_EVENT,type:"AD_SDK_ERROR"})):Hn.getElapsedSeconds()>10?(Hn.reset(),be(),void Fn.onAdPodPlayEnd()):void Hn.start()}function i(){return Yn.stop(),Yn.getElapsedSeconds()>Xn?(kt(jt+"adFailSafeTimer - ad play request exceeded timeout. Moving to content"),Yn.reset(),d(et,At)||1):void Yn.start()}function a(){rn(Kn)&&tn&&(kt(jt+"clearing 10 second timer for SDK response"),Hn.stop(),Hn.reset(),Kn=pt)}function r(){kt(jt+"clearing the timer for ad play start"),Yn.stop(),Yn.reset()}function o(){Jn=pt,ut()}function s(){return wn.disableBentoVideoAds?(kt(jt,"Player config contains 'disableBentoVideoAds', no ad server will be configured."),ft):Tn?(kt(jt,"Either ad blocking has been detected or this player is configured for SSAI, no client-side ad servers will be configured."),ft):an(e.Config.freewheelEnabled)?("doubleclick"===wn.adServer&&kt(jt+"PMT ad server does not match the one in Bento Config. Using the ad server configured in Bento."),pt):ft}function d(e,t,n){return kt(jt+"addToQueue hasConfig: "+In+" event ",e,t),an(n)?gn.addPriority({event:e,data:t}):gn.add({event:e,data:t}),In&&(gn.stop(),gn.start()),gn.count()}function E(e){function t(t){d(e,t)}return t}function u(){var t=-1;if(hn&&hn.metrics.getAvgBandwidth&&(t=hn.metrics.getAvgBandwidth()),!Wt(t)&&-1!==t){var n={value:t,time:(new Date).getTime()};kt(jt+"getPlayerBandwidth bandwidthFromPlayer : ",t),si.setLocalStorage(e.FreewheelVars.FW_BANDWIDTH_KEY,JSON.stringify(n))}}function c(){var e=hn.state.getPlayheadPosition(),t=Math.floor(+e.stream),n=Math.floor(+e.content);return Qt(t)&&Qt(n)||Bt(jt+"getPlayheadObject: playhead or fullEpPlayhead is not a number"),Qt(t)&&(ei=t),Qt(n)&&(ti=n),{playhead:ei,fullEpPlayhead:ti}}function T(e,t){return{active:e?e.active:t,width:mn.offsetWidth,height:mn.offsetHeight,top:mn.offsetTop,left:mn.offsetLeft,isFullScreen:t?t:Sn}}function _(e){if(Yt(wn)&&Tn)return kt(jt+"Ad blocking detected even before playerConfig available. Waiting for playerConfig to setupReceivers to adlessReceivers");var t=e.slice(0),n=At;for(g();n=t.pop();)n.requirementsMet()&&(nn(n.callback)&&n.callback(),Fn[n.apiName]=new n.ReceiverConstructor(Fn),vn.addReceiver(Fn[n.apiName]));d(L,wn,pt)}function g(){for(var e=Wn.slice(0),t=At,n=At;t=e.pop();)Xt(n=Fn[t.apiName])&&(n[K]&&n[K](),Fn[t.apiName]=At);vn.clearReceivers()}function A(e){return v("adBlockerStatus",e),kt(jt,"Delivered ad blocking status to player as ",e),Tn=e,an(e)&&p(),pt}function p(){return P()&&ut({errorObj:{code:"AD-BLOCKER-ENABLED",level:e.ErrorCode.INFO,message:"Ad blocker enabled. Skipping all ad breaks"}}),jn===Wn&&(jn=zn,_(jn),kt(jt,"Remapped receivers due to ad block detection.")),tn=ft,pt}function f(){return jn=qn,_(jn),kt(jt+"Receivers remapped due to seamless mode."),d(nt)}function O(e,t){var n=e||"on",i={READY:R,RESIZE:E(Ce),PLAYBACK_STATE_CHANGE:Oe,PLAYHEAD_POSITION_CHANGE:Re,FULL_SCREEN_CHANGE:Pe,PLAYLIST_START:Be,PLAYLIST_CHANGE:Le,PLAYLIST_ITEM_CHANGE:ye,PLAYLIST_ITEM_START:we,STREAM_START:ke,STREAM_END:We,PLAYLIST_END:Vi,UI_STATE_CHANGE:ze,VOLUME_CHANGE:je,REPLAY_REQUEST:Ze,BUFFERING_WAITING:De,AD_BREAK_REQUEST:rt,AD_PAUSE_REQUEST:_t,AD_RESUME_REQUEST:Tt,AD_BREAK_TIMEOUT:be,DESTROY:Me,SSAI_MODE:f,AD_CLICK:Ot,MUTE:Je,UNMUTE:Qe},a=t||i;if(zt=window.EdgePlayer&&window.EdgePlayer.Events,zt&&hn[n])for(var r in a)zt[r]&&hn[n](zt[r],a[r])}function S(){O()}function h(){O("off")}function m(){return fn?ft:(hn.ready&&R(),e.supports=e.supports||{},e.supports.edgeAdTimeoutFailoverEvent=pt,kt(jt+"init()"),gn=new _i({delegate:Fn}),S(),void(fn=pt))}function v(e,t){return hn&&hn.ads&&hn.ads[e]?($t(t)?hn.ads[e].apply(Fn,t):Wt(t)?hn.ads[e].apply(Fn):hn.ads[e].apply(Fn,[t]),kt(jt+"playerAPI("+e+")",t),pt):(kt(jt+"playerAPI()  "+e+"does not exist"),ft)}function N(e,t){return!Ei||"ready"===e&&"preloadContent"===e?hn.ready?v(e,t):(An.push({event:e,data:t}),ft):void 0}function R(){var e=At;for(Tn&&p();e=An.shift();)v(e.event,e.data);N("ready",un())}function P(){return tn}function _e(){return Zt}function Ae(){return rn(P())&&rn(cn)&&an(sn)}function pe(){return sn}function Oe(e){var t=c();switch(kt(jt+"onPlayerStateChange "+e.data+" playhead: "+t.playhead+" absolutePlayhead: "+t.absolutePlayhead,t),e.data){case"play":case"playing":if(!P()){if(!on)return;sn?cn&&(En=pt):(sn=pt,dn=pt),cn=ft,di=ft}break;case"paused":Ae()&&(Di(t),cn=pt);break;case"seeking":cn&&(di=pt),Ae()&&(cn=pt,Li(t));break;case"error":}}function Re(e){var t=hn.state.getPlayheadPosition(),n=ci.roundOff(hn.getVideoElement().duration),i=yn?ci.roundOff(yn):n,a=t.stream;if(Zn&&Pn.isMonolithicContent){var r=Fn.getCuePoints(),o=Math.floor(t.content);o>=Math.floor(r[Qn].time)&&(at(c()),dn=pt),Qn=Fn.getMonolithicIndex(o)}if(ln=ft,sn&&(!cn||!hn.state.isBuffering())&&_n!==a){_n=a;var s=c();it(s),dn?(dn=ft,$e(s)):En||cn&&!di?(En=ft,cn=ft,Pi(s)):ci.roundOff(s.fullEpPlayhead)>=i-vi&&rn(Ni)&&(Ni=pt,tt(s))}}function De(e){ln||d(Ie,c()),cn=pt,ln=pt}function Pe(e){d(B,T(At,e.data))}function Le(e){var t=hn.getCurrentConfig();return Xt(t)?void Ve():O("once",{PLAYLIST_METADATA:Ve})}function Ve(){return Fn.onPlayerConfigReady(hn.getCurrentConfig())}function ye(e){kt(jt+"onIndexChange itemIndex",e.data),Pn.isPlaylistMode&&oi&&Si.initialize(),kn=e.data,d(k,{itemIndex:e.data})}function be(e){kt(jt+"onAdBreakTimeout");var t=window.EdgePlayer;tn=ft,t&&t.Timeouts&&e&&e.data&&bi({phase:e.data.phase,type:"AD_TIMEOUT_FAILOVER"}),d(de,At)}function Me(n){kt(jt+"playerWillBeDestroyed",n),e.updateAdBlockingStatus(),a(),g(),h(),e.removePlayer(t)}function we(e){var t={},n={};Gt(e)&&Gt(e.data)&&(e&&e.data&&(Bn=JSON.parse(JSON.stringify(e.data))),!xt(Bn)&&wn.feed&&(kt(jt+"onMetadata()",Bn),n=hn.getCurrentConfig().feed.items&&hn.getCurrentConfig().feed.items[kn],Xt(n)&&Kt(n,"mediaGen")&&(t=n.mediaGen,wn.feed.items[kn].mediaGen=t),Bn.mediaGen=JSON.parse(JSON.stringify(t)),On=Fe({data:Bn}),d(V,On)))}function Ue(t){var n={},i=At,a=At;return Kt(t,"data")?(n=JSON.parse(JSON.stringify(t.data)),an(mi)||hn.content&&hn.content.getCurrentPlaylistMetadata&&(a=hn.content.getCurrentPlaylistMetadata(),a=e.MetadataVO.setupStreamMetadata(a),a.playlistDuration=St(wn.feed.items)),i=e.MetadataVO.setUpContentMetadata(n,a||fi),i.isSSAI=pi||mi,i.playlistLength=an(i.isSSAI)?n.chapters&&n.chapters.length||0:Pn.playlistLength,i.isFullEpisode=Jt(wn.contentType)&&"episode"===wn.contentType,i.isMonolithicContent=i.isFullEpisode&&1===i.playlistLength&&qt(Fn.getCuePoints()),i.feedWithQueryParams=wn.feedWithQueryParams,i.hasPlaylist=i.playlistLength>1||i.isMonolithicContent,i.isPlaylistMode=i.isFullEpisode===ft&&i.hasPlaylist,i):Ht(jt+"Content metadata for this SSAI content is invalid - ",t)}function Fe(t){var n={},i={},a={};return Kt(t,"data")?(mi?(i=t.data,a=Ci):(i=t.data.chapters[0],a=Ue(t)),n=e.MetadataVO.setUpChapterMetadata(i,a),n.itemIndex=n.index=Ye(n),On=n,d(V,n),n):Ht(jt+"Chapter metadata for this SSAI chapter is invalid - ",t)}function ke(t){kt(jt+"onMediaStart()"),kt(jt,"Updating ad block status to fetch most recent status."),e.updateAdBlockingStatus(),on=pt}function Be(t){var n={},i={},a={};if(mi){if(kt(jt+"SSAI playlistStart()",t),!Kt(t,"data.playlistItems"))return Ht(jt+"Stream metadata for this stream is invalid - ",t);n=JSON.parse(JSON.stringify(t.data)),fi=e.MetadataVO.setupStreamMetadata(n,kn),fi.playlistDuration=vt(n.playlistItems),Xt(fi.items)&&Xt(fi.items[kn])&&(i={data:fi.items[kn]},Ci=Ue(i),a={data:fi.items[kn].chapters[0]},Oi=Fe(a),Pn=Oi),d(ot,At)}}function He(t){kt(jt+"chapterStart()",t),e.updateAdBlockingStatus(),mi&&Xt(t.data)&&(sn=pt,dn=pt,on=pt)}function xe(e){kt(jt+"chapterEnd()",e),on&&at(c()),qe()}function Ge(e){kt(jt+"chapterChange()",e),mi&&Xt(e.data)&&(Oi=Fe(e),kt(jt+"Processed Current Chapter Metadata - ",Oi))}function Ye(e){var t=e.guid,n=Ci.chapters;if(!rn(wn.useCSAI))return kn;if(t&&n)for(var i=0;i<n.length;i++)if(Xt(n[i])&&n[i].id===t)return i;return 0}function Xe(e){kt(jt+"SSAI contentStart()",e);Xt(e)&&(Ci=Ue(e),kt(jt+"Processed Content Metadata",Ci))}function Ke(e){kt(jt+"contentEnd()",e)}function We(e){on&&(kt(jt+"onMediaEnd()",_n),at(c())),qe()}function qe(){$n=ft,on=ft,sn=ft,cn=ft}function ze(e){d(x,T(e.data))}function je(e){d(G,{volumeLevel:e.data})}function Je(){d(Y)}function Qe(){d(X)}function Ze(e){if(oi&&!pi&&!mi&&(Si.initialize(),Pn.isFullEpisode))switch(pt){case Pn.isMonolithicContent:Si.requestMidrollBids(Fn.getCuePoints().length);break;default:Si.requestMidrollBids(Pn.playlistLength-1)}u(),d(fe)}function $e(e){Ni=ft,u(),d(y,e)}function tt(e){d(st,e)}function it(e){Nn(F,e)}function at(e){u(),d(U,e)}function rt(t){var n=ft;n=Xt(e.Config)?ft:pt,kt(jt+"onIsTimeForAnAd ",t,pn,n),!xt(Pn)&&Pn.isMonolithicContent&&0!==c().fullEpPlayhead&&(at(c()),sn=ft),Jt(ni)&&(ai.messageText=ni),an(n)&&t&&t.data&&0===t.data.currentIndex&&bi({error:e.HeartbeatVars.BENTO_CONFIG_NOT_AVAILABLE,type:"REPORT-BENTO-CONFIG"}),an(n)||rn(pn)?(N("adBreakStarted",ai),tn=pt,ut(an(n)?{errorObj:{code:"BENTO-CONFIG-NOT-AVAILABLE",level:e.ErrorCode.INFO,message:"Bento config not available"}}:{errorObj:{code:"ADS-DISABLED",level:e.ErrorCode.INFO,message:"Ads are disabled"}})):(Rn=pt,N("adBreakStarted",ai),an(wn.useQuickTimePlayerOnIphone)||Vt(),tn=pt,kt(jt+"adSdkFailSafeTimer - START"),Kn=ft,Hn.start(),d(z,t))}function dt(e){return a(),tn=ft,Pt(),N("adBreakTerminated",e.errorObj),pt}function ut(e){Zn=pt,Pt(),N("skipAllAdRequests"),P()&&Xt(e)&&dt(e),tn=ft}function ct(){tn=ft,Pt(),N("adBreakSkipped")}function lt(e){N("adManifestRequest",[e,un()]),d(oe,e)}function Tt(e){d(te,e),N("adResumed")}function _t(e){d(ne,e),N("adPaused")}function gt(e){Nn(ae,e)}function Ot(){return N("adPaused"),d(ie,At)}function St(e){for(var t=0,n=0;n<e.length;n++)t+=+e[n].duration;return 0===t&&Bt(jt,"Playlist duration is set to zero, ads and analytics may be negatively impacted!"),t}function vt(e){var t=0;return e.forEach(function(e){qt(e.chapters)&&e.chapters.forEach(function(e){t+=Math.floor(e.duration/1e3)})}),0===t&&Bt(jt,"SSAI Playlist duration is set to zero, ads and analytics may be negatively impacted!"),t}function Nt(t,n){t=t||{};var i=t.feed||{},a=i.items||[],r=a[n]||{};return r.playlistLength=a.length,r.playlistDuration=St(a),r.title=i.title,r.isFullEpisode=Jt(t.contentType)&&"episode"===t.contentType,r.isMonolithicContent=r.isFullEpisode&&1===r.playlistLength&&qt(Fn.getCuePoints()),r.isSSAI=pi||mi,r.feedWithQueryParams=t.feedWithQueryParams,r.hasPlaylist=r.playlistLength>1||r.isMonolithicContent,r.isPlaylistMode=r.isFullEpisode===ft&&r.hasPlaylist,e.MetadataVO.fromRSSMetadata(r)}function Rt(){var t=e.FreewheelVars.NO_ADS_SUPPORT,n=wn.embedVars,i=n&&n.custParams,a=i?-1===i.indexOf(t):pt;return a?void Fn.setAdsStatus(pt):(Ai.generateStyleTag(Mn),Fn.setAdsStatus(ft))}function Pt(){var e=hn.ads&&nn(hn.ads.getVideoElement)?hn.ads.getVideoElement():{};Xt(e)&&qt(e.style)&&(e.style.visibility=Vn);var t=bt();t&&t.classList&&t.classList.remove&&t.classList.remove(Un)}function Vt(){if(pi||mi)return kt(jt,"Ads element should not be displayed during Seamless/SSAI settings, ignoring request to display ads element."),ft;var e={};Xt(hn.ads)&&nn(hn.ads.getVideoElement)&&(e=hn.ads.getVideoElement())&&(e.style.visibility=Ln)}function bt(){return Xt(hn.ads)&&nn(hn.ads.getPlaceholder)?hn.ads.getPlaceholder():void 0}function Mt(e){ri=e.persist,ni=gi.lengthLimiter(e.adMessage,1024),ni=gi.sanitize(ni)}function wt(t){return-1!==t.indexOf(mt+mt)?(ii=gi.lengthLimiter(t,1024),ii=gi.sanitize(ii,At,mt),ii=ii.replace(mt+mt,e.AdVars.PLAYER_AD_COUNT_PLACEHOLDER),ii=ii.replace(mt,e.AdVars.PLAYER_AD_INDEX_PLACEHOLDER),void(ii=ii.concat(Lt+yt+Lt))):void Bt(jt+"Incorrect ad count message syntax passed. Please pass # for ad index and ## for ad count. Example: Ad # of ##")}function Ut(){if(qt(hn.getSplitTestsConfig)){var e=hn.getSplitTestsConfig();return en(e)?void 0:e.map(function(e){return qt(e.testId)&&qt(e.enabled)?e.testId+Dt+(e.enabled?"enabled":"disabled"):void 0}).join(ht)}}function Ft(e){var t={},n=Xt(e)&&Xt(e.data)?e.data:{},i=n.creatives,a=At;return t.currentAdIndex=ui,t.adType=Ti,t.adCount=li,Wt(n.id)||(t.adId=n.id),!$t(i)||en(i)?(kt(jt,"No creatve datapoints found in ad metadata object."),t):(a=+i[0].duration,0===a&&Bt(jt,"Creative duration is provided as zero, ads and analytics may be negatively impacted!"),t.creativeId=i[0].id,Qt(a)?t.creativeDuration=Math.floor(a/1e3):(Ht(jt+"Invalid ad duration found in MICA. Defaulting ad duration to zero. Ad reporting won't go out for this ad. Chapter reporting will resume after ad break!"),t.creativeDuration=0),t)}var zt,jt=Et+"BentoApi ",Zt=ft,tn=ft,on=ft,sn=ft,dn=ft,En=ft,cn=ft,ln=ft,Tn=ft,_n=-1,gn=At,An=[],pn=ft,fn=ft,In=ft,Cn=At,On=At,Sn=ft,hn=t||{},mn=hn&&hn.getContainerElement?hn.getContainerElement():At,vn=new e.Notifier,Nn=vn.notify,Rn=ft,Dn=At,Pn=At,yn=At,wn={},Fn=this,kn=hn.content&&nn(hn.content.getCurrentPlaylistItemMetadata)&&hn.content.getCurrentPlaylistItemMetadata().index?hn.content.getCurrentPlaylistItemMetadata().index:nn(hn.getCurrentConfig)&&hn.getCurrentConfig().startIndex?hn.getCurrentConfig().startIndex:0,Bn=At,Hn=new l({timerFunc:n,interval:1e3}),xn={start:It,stop:It,reset:It,getElapsedSeconds:It},Gn=new l({timerFunc:i,interval:1e3}),Yn=an(wn.failSafeTimerDisabled)?xn:Gn,Xn=6,Kn=ft,Wn=[{ReceiverConstructor:e.Freewheel,apiName:"freewheel",consentRequired:ft,requirementsMet:s,callback:Rt},{ReceiverConstructor:e.HeartBeatMeasure,apiName:"heartBeatMeasure",consentRequired:ft,requirementsMet:function(){return wn.omnitureEnabled},callback:function(){nn(window.addHeartbeatAnalyticsLibrary)&&(window.addHeartbeatAnalyticsLibrary(),Wt(window.AppMeasurement)&&window.addAppMeasurementLibrary())}},{ReceiverConstructor:hi,apiName:"legacyBeacons",consentRequired:ft,requirementsMet:function(){return pt}},{ReceiverConstructor:C,apiName:"streamSense",consentRequired:pt,requirementsMet:function(){return wn.comScoreEnabled}},{ReceiverConstructor:e.Demdex,apiName:"demdex",consentRequired:pt,requirementsMet:function(){return wn.demdexEnabled}},{ReceiverConstructor:e.PlayerReceiver,apiName:"playerReceiver",consentRequired:ft,requirementsMet:function(){return pt}},{ReceiverConstructor:I,apiName:"kruxMediaReceiver",consentRequired:pt,requirementsMet:function(){return e.Config.kruxEnabled}}],qn=Wn.slice(1,7),zn=Wn.slice(1),jn=Wn,Jn=ft,Qn=0,Zn=ft,$n=ft,ei=0,ti=0,ni=Ct,ii=Ct,ai={},ri=ft,oi=an(e.Config.amazonVideoBiddingEnabled&&s()),di=ft,Ei=ft,ui=0,li=0,Ti=Ct,pi=ft,fi={},Ci={},Oi={},mi=ft,vi=5,Ni=ft,Ri=pt;this.getMetadata=function(){var e;try{e=JSON.parse(JSON.stringify(On))}catch(t){}return e};var Di=E(M),Pi=E(b),Li=E(w),Vi=E(H),yi=E(re),bi=E(Ne);return this.getMonolithicIndex=function(e){var t=Fn.getCuePoints();if(e>=0&&e<Math.floor(t[0].time))return 0;for(var n=0;n<t.length;n++){if(n===t.length-1)return n+1;if(Math.floor(t[n].time)<=e&&e<Math.floor(t[n+1].time))return n+1}},this.getMonolithicSegDuration=function(e){var t,n=Fn.getMonolithicIndex(Math.ceil(c().fullEpPlayhead)),i=Fn.getCuePoints();return t=n>0?qt(i[n])?i[n].time-i[n-1].time:yn-i[n-1].time:i[n].time},this.onQueueItem=function(e){Nn(e.event,e.data)},this.onPlayerConfigReady=function(t){return Gt(t)?(In=pt,wn=t,pi=wn.seamlessEnabled,mi=rn(wn.useCSAI),e.getAdBlockingStatus(function(e){A.apply(Fn,[e])}),rn(mi)?s()&&window.addFreewheelLibrary():an(Ri)&&(Ri=ft,window.addFreewheelLibrary(),kt(jt,"Modifying player listeners for SSAI."),O("on",{AD_BREAK_START:Fn.onAdPodPlayStart,AD_BREAK_END:Fn.onAdPodPlayEnd,AD_START:Fn.onAdPlayStart,AD_END:Fn.onAdPlayEnd,BENTO_AD_PLAYHEAD:Fn.onAdPlayheadUpdate,CONTENT_START:Xe,CONTENT_END:Ke,CHAPTER_CHANGE:Ge,CHAPTER_START:He,CHAPTER_END:xe}),O("off",{PLAYLIST_ITEM_START:we,STREAM_END:ke}),Ei=pt),hn&&wn.feed&&(wn.isMobilePlatform=EdgePlayer.isMobilePlatform,Dn=wn.feed,Pn=Nt(wn,kn),yn=Pn.playlistDuration),(an(Tn)||an(mi))&&(jn=zn),Ii.getTargetingConsentState(function(e){rn(e)&&(kt(jt,"Removing all BentoApi receivers that are tagged as requiring consent."),jn=jn.filter(function(e,t,n){return!e.consentRequired})),_(jn)}),void Ai.generateStyleTag(bn)):ft},this.getCuePoints=function(){if(qt(wn)&&qt(wn.feed)){var e=wn.feed.items[0],t=e.group||e.rss.group;if(qt(t)&&qt(t.category)&&qt(t.category.adCuePoints))return t.category.adCuePoints.filter(function(e){return 0===e.time&&Bt(jt,"Received an ad cue point containing a position of 0 from MRSS feed.  Feed only needs to specify the positions of mid-rolls, please fix feed.  Ignoring invalid cue point"),0!==e.time}).sort(function(e,t){return e.time-t.time})}},this.onPlayerFeedLoaded=function(e){Nn(D,e)},this.onAdsManagerReady=E(Se),this.onAdRequested=lt,this.onAdRequestCompleted=function(t){var n=e.QoeVO(t);kt(jt+"onAdRequestCompleted adManifestMetadata: ",n),N("adManifestReady",un()),d(se,n)},this.onAdSkipped=function(e,t){return kt(jt+"onAdSkipped adId: ",e),r(),Yn.start(),N("adSkipped",[e,t]),d(le,e)},this.onAdPlayRequest=E(Te),this.onAdPodPlayStart=function(e){var t=e&&e.data?e.data:{};a(),tn=pt,Yn.start(),u(),mi&&Xt(t)&&qt(t.adBreakType)&&(ui=0,Ti=t.adBreakType,li=t.ads.length),kt(jt+"onAdPodPlayStart",t),d(J,t)},this.onAdPodPlayEnd=function(e){a(),r(),tn=ft,d(Q,e),Rn&&(Rn=ft,Pt(),N("adBreakEnded"))},this.onAdPlayStart=function(e){mi&&(ui++,Fn.onAdMetadata(Ft(e))),r(),Zt=pt,(wn.requiresCoppaCompliance||ri)&&(Cn.messageText="Advertisement",Cn.staticAdMessageEnabled=pt,Cn.hideAdMessage=ft,Jt(ii)||(Cn.adCount=0)),Jt(ni)&&(Cn.messageText=ni),Jt(ii)&&(Cn.countdownTextWithPosition=ii),N("adStarted",Cn),N("adResumed"),Vt(),d(Z,At)},this.onAdPlayEnd=function(e){Yn.start(),Zt=ft,N("adEnded",Cn),d($,e)},this.onAdMetadata=function(e){Cn=e,d(ee,Cn)},this.setAdsStatus=function(e){pn=e},this.getPlayerContainer=function(){return mn},this.getPlayerId=function(){return hn.id},this.getPlayer=function(){return hn},this.getPlayerConfig=function(){return wn},this.getPlayerElement=function(){return hn.ads.getVideoElement()||hn.element},this.getPlaylistMetadata=function(){return Dn},this.getCurrentSSAIChapterData=function(){return Oi},this.getFirstItemData=function(){return Pn},this.getIsLive=function(){return hn&&hn.content&&hn.content.isLive?hn.content.isLive():At},this.getCurrentItemIndex=function(){return kn},this.getCurrentVideoId=function(){var e=Ct;return Pn.isFullEpisode===pt?Pn.imaVideoId:(e=Dn.items[kn].rss.guid,e.split(":").slice(-1)[0])},this.preloadContent=function(e){an($n)||($n=pt,N("preloadContent"))},this.sendAdPlayRequest=function(e){N("adPlayRequest",e)},this.getPlayerVolume=function(){return hn.volume()},this.getReceivers=function(){return jn},this.servingServerSideAds=function(){return mi},this.adBreakNotAvailable=E(ce),this.onAdError=E(W),this.onAdBreakReady=E(ue),this.onContentResumeRequested=E(he),this.onAAMDataReady=E(ge),this.onAdTimeout=E(q),this.onAdManagerDestroyed=E(Ee),this.onAdBreakNotAvailable=E(ce),this.onAdLoaded=E(j),this.onAdBufferStart=E(me),this.onAdBufferStop=E(ve),this.onAdRenderer=yi,this.onAdPlayheadUpdate=gt,this.onAdClick=Ot,this.onAdBreakTerminated=dt,
this.onReportAdError=bi,this.isInAdBreak=P,this.isInAdPlay=_e,this.onAdRequestFailed=o,this.clearSdkResponseFailSafeTimer=a,this.clearAdPlayFailSafeTimer=r,this.hasContentStarted=pe,this.onSkipAllAdRequests=ut,this.onAdBreakSkipped=ct,this.getAdsPlaceholder=bt,this.onSetCustomAdMessage=Mt,this.onSetCustomAdCountMessage=wt,this.onAdBlocking=A,this.onAdUnPause=Tt,this.onAdPause=_t,this.getFormattedSplitTestInfo=Ut,this.getItemDataFromFeed=Nt,m(),this},e.Intent=function(e,t){var n=e,i=t||{};return{getName:function(){return n},getData:function(){var e={};for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t]);return e}}},e.Notifier=function(){function t(t,n,i){t[n].apply(t,[e.Intent(n,i)])}function n(e,t){for(var n=ft,a=0,r=i.length;r>a;a++)if(i[a]===e){n=pt,t&&i.splice(a,1);break}return n}var i=[],a=[];return{addReceiver:function(e){return e===At||typeof e!==ut||n(e)?ft:(i.push(e),pt)},removeReceiver:function(e){return e===At||typeof e!==ut?ft:(typeof e.onRemove===ct&&e.onRemove(),n(e,pt))},count:function(){return i.length},notify:function(e,n){typeof e===lt&&e.match(/playhead/gi)||kt(Et+"Notifier notify",e,n);for(var r=0,o=i.length;o>r;r++){var s=i[r],d=a.indexOf(s.name)<0;typeof s===ut&&typeof s[e]===ct&&d&&t(s,e,n)}return pt},clearReceivers:function(){for(var e in i)i[e]=At;i=[]},setDoNotNotify:function(e){a=e}}};var fi=new _,Ii=new g;e.AdRenditionVO={getAdRenditionVO:function(t,n){function i(){var e=E;if(t.offsetWidth){if(!n.isMobilePlatform&&(s.useHTML5VideoAdsOnDesktop||s.useHTML5VideoAdsOnDesktopSafari))return e=t.offsetWidth>=760?d.FW_MAXIMUM_BITRATE_DESKTOP_BY_DIMENSIONS:d.FW_MINIMUM_BITRATE;switch(pt){case c&&u:e=d.FW_BITRATE_MOBILE_WIFI_BY_DIMENSIONS;break;default:e=d.FW_MINIMUM_BITRATE}return e}return E}function a(){var e=E,t=(new Date).getTime(),n=0,i=0,a=0;if(i+=T.value,n+=T.time,a=n&&(t-n)/1e3,!n||!i||a>d.FW_TEN_MINUTES_IN_SEC)return si.setLocalStorage(d.FW_BANDWIDTH_KEY,Ct),E;switch(e=.6*i,pt){case!u&&e>=d.FW_MAXIMUM_BITRATE_MOBILE:e=d.FW_MAXIMUM_BITRATE_MOBILE;break;case u&&e>=d.FW_MAXIMUM_BITRATE_DESKTOP:e=d.FW_MAXIMUM_BITRATE_DESKTOP}return e}function r(e){var t=d.FW_PRELOAD_AD_SLOT_BEFORE_TIME,n=s.preloadBitrateRange0To800?s.preloadBitrateRange0To800:d.FW_PRELOAD_BITRATE_RANGE_0_800,i=s.preloadBitrateRange800To1000?s.preloadBitrateRange800To1000:d.FW_PRELOAD_BITRATE_RANGE_800_1000,a=s.preloadBitrateRange1000To5000?s.preloadBitrateRange1000To5000:d.FW_PRELOAD_BITRATE_RANGE_1000_5000;switch(pt){case 800>=e:t=n;break;case e>1e3:t=a;break;default:t=i}return t}function o(){_=d.FW_MINIMUM_BITRATE,l=si.getLocalStorage(d.FW_BANDWIDTH_KEY),u=t.offsetWidth&&t.offsetWidth>1280;try{T=JSON.parse(l)}catch(e){T=ft}return _=Xt(T)?a():i(),{desiredBitrateValue:_,preloadAdBeforeTime:r(_)}}var s=e.Config||{},d=e.FreewheelVars,E=s.defaultBandwidth?s.defaultBandwidth:d.FW_MINIMUM_BITRATE,u=ft,c=n.networkConnectionType&&"mobile"!==n.networkConnectionType,l=0,T=At,_=0;return o()}},e.AdSlotVOCollection=new i,e.AdSlotVOCollection.by[$n.INDEX_ELEMENT_KEY]=[],Object.defineProperty(p,"count",{value:1,writable:pt,enumerable:ft,configurable:ft}),function(){function t(){var t=e.Config.currentCountryCode,n=e.Config.adConditionalNetworkIds,i=e.Config.adNetworkId,a=Ct;return jt(Xn(),"gptNetworkID")&&(a=Xn().substr(1).split(St).filter(function(e){return-1!==e.indexOf("gptNetworkID")}),!en(a))?a=a[0].split(Rt)[1]:!Xt(n)||Yt(n)?Ct+i||Ct:(kt(v,"Network assignment conditions have been provided in configuration, evaluating them now."),Jt(n[t])?(kt(v,"Network "+n[t]+" has been set for detected region "+t),n[t]):(kt(v,"No alternative network conditions have been met, setting the default supplied network."),Ct+i))}function n(){return window.googletag}function i(t){var n=e.Config.adPixelSizes;return t=$t(t)&&t.join()||t,jt(t,$n.POE_SIZE.join())?pt:qt(n)?n.some(function(e,n,i){return jt(t,e)}):ft}function a(n){var i,a,r,o,s=this.adUnit,d=t().replace(N,Ct).replace(R,Ct);switch(pt){case rn(e.Config.adDeviceTarget):i=Ct;break;case Jt(e.Config.adDeviceTarget):i=e.Config.adDeviceTarget;break;case fn():i=$n.DESKTOP_AD_DEFINITION;break;default:i=$n.MOBILE_AD_DEFINITION}switch(pt){case Jt(n):this.adUnit=n;break;default:this.adUnit=this.adUnit||n||e.Config.adUnitDefault||Ct}return Jt(this.adUnit)||Ht(v,"setAdUnit has failed"),this.adUnit[0]===Ot&&(this.adUnit=this.adUnit.slice(1)),jt(this.adUnit,Ot)?(o=this.adUnit.indexOf(Ot),a=this.adUnit.slice(0,o)+i+this.adUnit.slice(o)):a=this.adUnit+i,jt(Xn(),"gptAdUnit")&&(r=Xn().substr(1).split(St).filter(function(e){return-1!==e.indexOf("gptAdUnit")}),en(r)||(a=r[0].split(Rt)[1])),this.adUnitPath=$n.AD_UNIT_PATH_TEMPLATE.replace(M,d).replace(w,a),e.AdSlotVOCollection.expunge(s,this).catalog(this.adUnit,this),kt(v,"Ad unit defined as ",this.adUnitPath),this}function r(e){var t=this.element;switch(pt){case Jt(e):this.validSizes=m(e);break;case $t(e):this.validSizes.push.apply(this.validSizes,e);break;case en(this.validSizes)&&sn(t):this.validSizes=[t.clientWidth,t.clientHeight]}return kt(v,"Ad sizes defined as ",this.validSizes),this}function o(e){var t,n,i,a=gi.queryStringToObject(xn()),r=-1;if(Ii.getAdTargetingAllowance(function(e){r=e.flag}),zt(e)&&(e=gi.toObject(e,V,L)),Xt(e)){e=JSON.parse(JSON.stringify(e));for(t in e)i=e[t],jt(i,ht)&&(e[t]=i.split(D),oi.filterDuplicates(e[t]));jt(Xn(),"gptTargetingValues")&&(n=Xn().substr(1).split(St).filter(function(e){return-1!==e.indexOf("gptTargetingValues")}),en(n)||(n=n[0].split(Rt)[1],n=n.split(ht),n.forEach(function(t){var n=t.split(":")[0],i=t.split(":")[1];e[n]=i}))),delete e[Ct],this.targetingValues=e}if(Qt(this.targetingValues.slot)||(this.targetingValues.slot=p.count++),this.targetingValues.pos=di.isElementInViewport(this.element)?"atf":"btf",a.hasOwnProperty($n.TEST_MODE_TARGETING_VALUES)&&(this.targetingValues.testmode=encodeURIComponent(a[$n.TEST_MODE_TARGETING_VALUES])),Wt(this.targetingValues.sizes)&&$t(this.validSizes)){if(2===this.validSizes.length&&Qt(this.validSizes[0]))return this.targetingValues.sizes=this.validSizes[0]+Mt+this.validSizes[1],this;this.targetingValues.sizes=this.validSizes.map(function o(e){return $t(e)&&e.map(o).join(Mt)||e}).join(ht)}return this.targetingValues.consent=!r+Ct,kt(v,"Ad targeting values defined as ",this.targetingValues),this}function s(e,t,n){var i=this.GPTSlot;if(e+=Ct,t+=Ct,Wt(this.targetingValues))return Bt(v,"addTargetingValue: targetingValues not defined yet",e,t),this;if(Jt(e)&&Jt(t)){if(an(n)||(this.targetingValues[e]=t),zt(i)||Wt(i)||xt(i))return this;window.googletag.cmd.push(function(){i.setTargeting(e,t)})}return this}function d(t){var n,i=0;return xt(this.targetRefreshRate)?(i=+t,Qt(i)&&-1!==i&&!xt(t)||(i=e.Config.adRefreshRate||0),i>0&&3e4>i&&(kt(v,"RefreshAds < 30sec not allowed, attempted:",i),i=3e4),i>3e5&&Bt(v,"Did you mean to refresh over 5 minutes ?",i),jt(Xn(),"gptRefreshRate")&&(n=Xn().substr(1).split(St).filter(function(e){return-1!==e.indexOf("gptRefreshRate")}),en(n)||(i=n[0].split(Rt)[1])),this.targetRefreshRate=i,h(this),kt(v,"Ad refresh rate defined as ",this.targetRefreshRate),this):this}function E(e){var t,n=this.element;switch(pt){case zt(e):this.element=document.querySelector(e);break;case sn(e):this.element=e}return t=n!==this.element,t&&sn(this.element)&&O(this),this}function u(t){switch(pt){case Jt(t):this.id=t;break;case!Jt(this.id):this.id=$n.AD_ID_TEMPLATE.replace(y,En()).replace(b,this.instanceIndex)}return sn(this.element)||(this.element=document.querySelector(mt+this.id),sn(this.element)&&O(this)),sn(this.element)&&this.element.setAttribute("id",this.id),e.AdSlotVOCollection.byIndex($n.INDEX_ID_KEY,this.id,this),this}function c(e,t){var n=[];return Object.keys(e).forEach(function(i){var a=i;"desktop"===a&&!fn()||"mobile"===a&&fn()||e[i].forEach(function(e){e.params.size&&(e.params.size=t),n.push(e)})}),n}function T(e){var t=/([^/.]+)/,n=Ct,i=[];if(!Xt(window.Bento.PrebidPartnerData)){if(F>U)return U++,kt(v,"Header bidding partner data not yet loaded, retrying."),setTimeout(e.requestBids.bind(e),100),ft;if(U>=F)return Bt(v,"Display ad header bidding partner data not found, verify //btg.mtvnservices.com/aria/prebid/bidders.js is loading."),ft}return jt(Xn(),"debugPageBidsFor")&&(i=Xn().substr(1).split(St).filter(function(e){return-1!==e.indexOf("debugPageBidsFor")}),!en(i))?window.Bento.PrebidPartnerData[i[0].split(Rt)[1]]:en(zn().match(t))?(Bt(v,"No matching display ad header bidding partners found for this domain, checking value ",zn().match(t)),ft):(n=zn().match(t)[0],window.Bento.PrebidPartnerData[n]||{})}function _(){var t=this.id,n=this.validSizes,a=this,r={},o={};return an(e.Config.pageHeaderBiddingEnabled)?an(i(n))?(kt(v,"Pixel ads should not have Xandr bids applied, exiting early."),this):(r.code=t,r.mediaTypes={banner:{sizes:n}},r.bids=[],Xt(T(a))?(o=T(a),Xt(o.atf)||Xt(o.btf)?(kt(v,"Loaded header bidding configurations.",o.atf,o.btf),di.isElementAboveTheFold(this.element)?(kt(v,this.id," is above the fold."),r.bids=c(o.atf,n),r.keyValues={position:"atf"}):(kt(v,this.id," is below the fold."),r.bids=c(o.btf,n),r.keyValues={position:"btf"}),sn(this.element)?(window.pbjs.que.push(function(){window.pbjs.addAdUnits(r),window.pbjs.requestBids({timeout:e.PrebidPartnerTimeout||ii.PREBID_TIMEOUT,adUnits:[r],bidsBackHandler:function(e,t){var n=At;if(an(t)||!Kt(e,""+a.id+".bids"))Bt(v,"No bids returned in the auctionResponse",e);else{e[a.id].bids.forEach(function(e){var t=e.adserverTargeting;kt(v,"Setting all Xandr bidding values.",t);for(var n in t)"hb_bidder"!==n&&(a.biddingValues[n+bt+t.hb_bidder.toLowerCase()]=t[n],a.addTargetingValue(n+bt+t.hb_bidder.toLowerCase(),t[n],pt))}),n=window.pbjs.getHighestCpmBids(r.code)[0].adserverTargeting,kt(v,"Setting winning Xandr bid values.",n);for(var i in n)a.biddingValues[i]=n[i],a.addTargetingValue(i,n[i],pt);a.bidsReady=pt,kt(v,"Removing ad unit "+r.code+" from bidding queue after successful bidding process."),window.pbjs.removeAdUnit(r.code)}}})}),this):(Ht(v,"This ad is not linked to an element in the DOM, canceling out."),e.AdSlotVOCollection.expunge(this),this)):(Ht(v,"No bid configuration has been supplied.  Please disable bidding or supply bidding configuration."),this)):this):this}function g(e){return Jt(e)?(this.exclusionCategories=e.split(ht),oi.removeValue(this.exclusionCategories,Ct),kt(v,"Ad exclusion categories defined as ",this.exclusionCategories),this):this}function A(){var e,t,n=this;return Xt(this.GPTSlot)?this:(this.GPTSlot=$n.WAIT_MESSAGE,window.googletag.cmd.push(function(){if(en(n.validSizes))return Bt(v,"Malformed element and/or ad size data provided, failed to generate ad slot.");if(n.GPTSlot=window.googletag.defineSlot(n.adUnitPath,n.validSizes,n.id),!Xt(n.GPTSlot))return Bt(v,"GPT library failed to generate a slot - Invalid or repeat properties provided.");n.GPTSlot.addService(window.googletag.pubads());for(e in n.targetingValues)kt(v,"Set "+e+" on GPT targeting."),n.GPTSlot.setTargeting(e,n.targetingValues[e]);for(e in n.biddingValues)kt(v,"Set "+e+" on GPT targeting."),n.GPTSlot.setTargeting(e,n.biddingValues[e]);for(;t=n.exclusionCategories.shift();)n.GPTSlot.setCategoryExclusion(t)}),kt(v,"New ad slot defined.",n.GPTSlot),this)}function f(){var t=this;if(rn(Pn())||rn(Dn()))return this;if(!sn(this.element))return Ht(v,"This ad is not linked to an element in the DOM, canceling out."),e.AdSlotVOCollection.expunge(this),this;if(rn(i(this.validSizes))){if(rn(di.isElementInViewport(this.element)))return kt(v,"Skipping render step for ad outside of the viewport",this.element),this;if(this.isDisplayed&&rn(di.isElementDisplayed(this.element)))return kt(v,"Skipping ad refresh step for ad due to container being deliberately styled out of view",this.element),this;if(an(e.Config.unReleasedFeatureEnabled)&&rn(di.isElementOnTop(this.element)))return kt(v,"Skipping render step due to ad being fully concealed by another element",this.element),this;if(an(e.Config.pageHeaderBiddingEnabled)){if(rn(t.bidsReady)&&t.biddingRetries<t.maxBiddingRetries)return t.biddingRetries++,setTimeout(t.refresh.bind(t),100),this;rn(t.bidsReady)&&t.biddingRetries>=t.maxBiddingRetries&&Bt(v,"Bids from Xandr service were not returned in time to render the ad.")}}return window.googletag.cmd.push(function(){rn(t.isDisplayed)&&(n().display(t.id),li.setTiming("adRequested",t.element.id),li.generateMegaBeacon("pageAdRequested",t.element),t.isDisplayed=pt),e.AdSlotVOCollection.expunge($n.INACTIVE,t),t.isRecentRefreshed||(n().pubads().refresh([t.GPTSlot]),kt(v,"Ad slot refreshed - ",t.id),t.isRecentRefreshed=pt,setTimeout(function(){t.isRecentRefreshed=ft},300))}),this}function I(){var t=this;return kt(v,"Destroying and un-indexing ad slot #",t.id),e.AdSlotVOCollection.expunge(t),e.AdSlotVOCollection.unIndex($n.INDEX_ELEMENT_KEY,t.element),e.AdSlotVOCollection.by.last.catalog=void 0,window.googletag.cmd.push(function(){window.googletag.destroySlots([t.GPTSlot])}),this}function C(){return this.setAdUnit().setValidSizes().setTargetingValues().setTargetRefreshRate().setExclusionCategories().setElement().setId().requestBids().defineGPTSlot()}function O(t){var n=t.element,i=n.getAttribute("id"),a=n.getAttribute($n.AD_UNIT_DEFINITION),r=n.getAttribute($n.AD_SIZES_DEFINITION),o=n.getAttribute($n.AD_TARGETING_DEFINITION),s=n.getAttribute($n.AD_EXCLUSIONS_DEFINITION),d=n.getAttribute($n.AD_REFRESH_DEFINITION);Jt(t.id)||xt(i)||t.setId(i),Jt(t.adUnit)||xt(a)||t.setAdUnit(a),en(t.validSizes)&&!xt(r)&&t.setValidSizes(r),Jt(t.exclusionCategories)||xt(s)||t.setExclusionCategories(s),Yt(t.targetingValues)&&!xt(o)&&t.setTargetingValues(o),xt(d)||t.setTargetRefreshRate(d),e.AdSlotVOCollection.byIndex($n.INDEX_ELEMENT_KEY,n,t)}function S(){var t=this.AdSlotVO;return Pn()&&Dn()&&di.isElementInViewport(t.element)&&(an(e.Config.amazonPageBiddingEnabled)||an(e.Config.pageHeaderBiddingEnabled))?(e.Config.pageHeaderBiddingEnabled&&(kt(v,"Refreshing bidding partner key-values."),t.bidsReady=ft,t.biddingRetries=0,t.maxBiddingRetries=30,t.biddingValues={},t.GPTSlot.clearTargeting(),window.googletag.cmd.push(function(){for(var e in t.targetingValues)kt(v,"Set "+e+" on GPT targeting."),t.GPTSlot.setTargeting(e,t.targetingValues[e])}),t.requestBids(),an(e.Config.amazonPageBiddingEnabled)||t.refresh()),void(e.Config.amazonPageBiddingEnabled&&Si.getPageBids([t],function(e){kt(v,"Handling response from Amazon bidding - ",e),$t(e)&&!en(e)&&e.forEach(function(e){t.targetingValues.amznbid=e.amznbid,t.targetingValues.amzniid=e.amzniid,t.addTargetingValue("amznbid",e.amznbid),t.addTargetingValue("amzniid",e.amzniid),window.apstag.setDisplayBids([e.slotID]),t.refresh()})}))):t.refresh()}function h(e){Qt(e.refreshTimer)&&(e.refreshTimer.stop(),delete e.refreshTimer),e.targetRefreshRate>0&&(e.refreshTimer=l({interval:e.targetRefreshRate,timerFunc:S,AdSlotVO:e,isLoop:pt}),e.refreshTimer.start())}function m(e){var t,n,i=e.split(D),a=[];if(oi.filterDuplicates(i),t=i.length,!Jt(e))return ft;for(;t--;)n=i[t].split(P),n[0]=+n[0],n[1]=+n[1],a.unshift(n);return 1===a.length&&(a=a[0]),a}var v=Et+"AdSlotVO - ",N=/[^0-9.]/g,R=/\//g,D=/\s*,\s*/g,P=/\s*\x\s*/g,L=/\s*[\:|\=]\s*/g,V=/\s*;\s*/g,y=/{{ now }}/,b=/{{ index }}/,M=/{{ networkID }}/,w=/{{ adUnit }}/,U=0,F=10;p.prototype.setAdUnit=a,p.prototype.setValidSizes=r,p.prototype.setTargetingValues=o,p.prototype.addTargetingValue=s,p.prototype.setTargetRefreshRate=d,p.prototype.setExclusionCategories=g,p.prototype.setElement=E,p.prototype.setId=u,p.prototype.requestBids=_,p.prototype.defineGPTSlot=A,p.prototype.validate=C,p.prototype.refresh=f,p.prototype.destroy=I}();var Ci=e.ContentVO=function(e){this.length=e?e.length:0,this.reset()};Ci.prototype={reset:function(){return this.viewed=[],this.ended=[],this.index=0,this},setCurrent:function(e){var t;return this.index=t=e.indexPlaying||e.currentIndex||this.index,this.ended[t]=dn(e.hasContentEnd,this.ended[t]),this.viewed[t]=dn(e.hasBeenViewed,this.viewed[t]),this},hasEnded:function(){return this.ended[this.index]},hasBeenViewed:function(){return this.viewed[this.index]},isLast:function(){return this.index===this.length-1},shouldPlayPostRollAd:function(){return this.isLast()&&this.hasEnded()},shouldPlayAd:function(){return!this.hasBeenViewed()||this.shouldPlayPostRollAd()}},Ci.getPlaylistLength=function(e){return Math.max(e.items&&e.items.length,1)},e.FreewheelAdMetadataVO={fromAdMetadata:function(t,n,i,a){function r(e){var t=0;return Xt(e)&&nn(e.getAdId)?t=e.getAdId():Xt(e)&&!Wt(e.adId)&&(t=e.adId),t||I.NO_AD_ID}function o(e){var t=-1;return xt(f)?Xt(e)&&!Wt(e.podDuration)&&(t=e.podDuration):t=f.getTotalDuration(pt),t&&t>-1?t:I.NO_POD_DURATION}function s(e){var t=At;return xt(f)?Xt(e)&&!Wt(e.adType)&&(t=e.adType):t=f.getTimePositionClass(),t||I.NO_AD_TYPE}function d(e){var t=ft;return Xt(e)&&nn(e.getEventCallbackUrls)&&(t=!en(e.getEventCallbackUrls(p.EVENT_AD_CLICK,p.EVENT_TYPE_CLICK))),(Xt(e)&&l(e)||fn())&&(t=ft),t}function E(e){var t=-1;return Xt(e)&&nn(e.getActiveCreativeRendition)&&nn(e.getActiveCreativeRendition().getDuration)?t=e.getActiveCreativeRendition().getDuration(pt):Xt(e)&&!Wt(e.duration)&&(t=e.duration),t&&t>-1?t:I.NO_CREATIVE_DURATION}function u(e){var t=0;return Xt(e)&&!Wt(e._creativeId)?t=e._creativeId:Xt(e)&&!Wt(e.creativeId)&&(t=e.creativeId),t||I.NO_CREATIVE_ID}function c(e){var t=Ct;return xt(f)?Xt(e)&&!Wt(e.podId)&&(t=e.podId):t=f.getCustomId(),t||I.NO_POD_ID}function l(e){var t=ft;return Xt(e)&&nn(e.getActiveCreativeRendition)&&nn(e.getActiveCreativeRendition().getCreativeApi)?t=e.getActiveCreativeRendition().getCreativeApi()===A.VPAID_AD:Xt(e)&&!Wt(e.creativeAPI)&&(t=e.creativeAPI===A.VPAID_AD),t}function T(e){var t=ft;return e&&e.getSoAdUnit&&(e.getSoAdUnit()===A.FRONT_BUMPER_KEY||e.getSoAdUnit()===A.END_BUMPER_KEY)&&(t=pt),t}function _(e){var t=ft,n=At,i=At;if(f&&f.getAdInstances&&(n=f.getAdInstances()))for(var a=0;a<n.length;a++)if(i=n[a],i&&i.getSoAdUnit&&(i.getSoAdUnit()===A.FRONT_BUMPER_KEY||i.getSoAdUnit()===A.END_BUMPER_KEY)){t=pt;break}return t}function g(t,n){var a=0;return i?a=i:Xt(t)&&!Wt(t.adCount)&&(a=t.adCount),e.Config&&e.Config.showAdCounterMessage===ft&&n&&(a=0),a}var A=e.FreewheelVars,p=tv.freewheel.SDK,f=Xt(t)&&nn(t.getSlot)?t.getSlot():At,I=e.AdVars,C=_(t),O={adId:r(t),duration:o(t),adType:s(t),isClickable:d(t),creativeDuration:E(t),creativeId:u(t),podId:c(t),isVpaid:l(t),currentAdIndex:a?a:Xt(t)&&!Wt(t.currentAdIndex)?t.currentAdIndex:0,currentItemIndex:Xt(n)&&!Wt(n.currentIndex)?n.currentIndex:0,hideAdMessage:l(t),disableAdGuiOnPlay:l(t),isBumper:T(t),podHasBumper:C,adCount:g(t,C)};return O}},e.FreewheelVO={fromConfigAndMetadata:function(t){var n=t.playerContainer||{},i=t.playerConfig||{},a=t.currentMetadata||{},r=t.playlistMetadata,o=t.itemIndex,s=Et+"FreewheelVO ",d=e.FreewheelVars,E=xn()||i.ref||Ct,u=function(){var e=JSON.parse(JSON.stringify(a));if(e.hasPlaylist===pt){var t=r.items[o];e.duration=t.duration,e.guid=t.rss.guid,e.index=o,e.rss=t.rss,e.src=t.src}return e}(),c=u.isFullEpisode,l=u.playlistLength,T=i&&"intl"===i.group,_=function(){return i.requiresCoppaCompliance},g=function(){var e=T?d.NETWORK_ID_INTL:d.NETWORK_ID;return i&&i.freewheelNetworkID&&(e=i.freewheelNetworkID),e},A=g(),p=function(e,t,n){switch(pt){case Jt(e):return e;case Jt(t):return t;default:return A+Dt+n}},f=function(){var t,n=i.embedVars,a=e.Config,r=n&&n.freewheelHTML5ProfileId,o=n&&n.freewheelFlashProfileId;return t=i.isMobilePlatform?p(r,a.freewheelMobileProfileId,d.PROFILE_ID):p(o,a.freewheelDesktopProfileId,d.PROFILE_ID_HTLM5_DESKTOP)},I=function(){var e=d.DEF_CLIP_TIME,t=u.playlistDuration,n=i.useActualDuration===ft?ft:pt;return e=n?c?t:+u.duration:c?d.DEF_CLIP_TIME*l:e,e!==At?e:d.DEF_CLIP_TIME},C=function(e){var t=e.split(Dt);return t[t.length-1]},O=function(){var e=At;return u&&(e=c?u.playlistId:u.guid),e},S=function(){var e=[0],n=i.useActualDuration,a=t.adCuePoints,o=0,s=1;if(l=qt(a)?a.length+1:l,!c)return e;for(s=1;l>s;s++)rn(n)?e[s]=s*d.DEF_CLIP_TIME:a?e[s]=a[s-1].time:(e[s]=r.items[s-1].duration+o,o=r.items[s-1].duration);return e},h=function(e){var n=[],a=i.useActualDuration?pt:ft,o=0,s=t.adCuePoints;if(l=qt(s)?s.length+1:l,a=a||e,!c)return n;for(var E=0;l>E;E++)if(rn(a))n[E]=d.DEF_CLIP_TIME;else if(Xt(s)){if(E<s.length){n[E]=s[E].time-o,o=s[E].time;continue}Xt(s[E])&&(n[E]=+u.duration-s[E].time)}else n[E]=r.items[E].duration;return n},m=function(){for(var e=0,t=0;l>t;t++)if(r.items[t].rss.guid===u.guid){e=t;break}return e},v=function(e){if(!xt(i)&&an(i.freewheelSharedMGIDEnabled)&&"intl"!==i.group&&Jt(e)&&e.indexOf(":arc:")>=0){var t=e.split(Dt);if(kt(s+"Enabling shared MGID."),5===t.length)return t[4]}return e},N=function(){var e=At;return e=i.isMobilePlatform?Jt(i.freewheelSiteSection)?i.freewheelSiteSection:d.DEF_MOB_SITE_SECTION:Jt(i.freewheelFlashSiteSection)?i.freewheelFlashSiteSection:d.DEF_SITE_SECTION,Jt(i.freewheelSiteSection)||Jt(i.freewheelFlashSiteSection)||!an(i.freewheelSiteSectionPathParsing)||(e=xn().replace(/^(https?|http):\/\//,""),e=e.replace(/(www.)/,""),e=e.replace(/\./g,"")),!xt(i)&&an(i.freewheelSiteSectionPathParsing)&&(e=e.replace(/^\s*|\s*$/gi,Ct).replace(/^[\/\\]|[\/\\]$/gi,Ct)),e},R=function(){return!xt(i)&&an(i.freewheelSiteSectionPathParsing)?pt:ft},D=function(){var e=pi.getMostRecentStatus(i),t=e.hash,n={};return Jt(t)?(n[d.AUTHENTICATING_ENTITY]=t,n[d.AUTHORIZATION_REQUIRED]=Ct+e.authRequired,n):(kt(s+"Video/user parameters are not eligible for TVE custom parameter modification."),ft)},P=function(e){if(Jt(e.referrer)){var t=gi.queryStringToObject(e.referrer);Jt(t[d.DEBUG_MODE])&&an(t[d.DEBUG_MODE])&&(Jt(t[d.OVERRIDE_NETWORK_ID])&&(e.networkID=t[d.OVERRIDE_NETWORK_ID]),Jt(t[d.OVERRIDE_PROFILE_ID])&&(e.profileID=t[d.OVERRIDE_PROFILE_ID]),Jt(t[d.OVERRIDE_SSID])&&(e.siteSectionID=t[d.OVERRIDE_SSID]),Jt(t[d.OVERRIDE_MGID])&&(e.assetID=t[d.OVERRIDE_MGID])),Jt(t[d.VIDEO_ID_KEY])&&(e.assetID=t[d.VIDEO_ID_KEY])}},L=function(){var e=E,t=i.flashVars&&i.flashVars.fwKeyValues,n=(Jt(e)&&gi.queryStringToObject(e.toLowerCase()),{}),a=["id",d.DEBUG_MODE,d.OVERRIDE_NETWORK_ID,d.OVERRIDE_PROFILE_ID,d.OVERRIDE_SSID,d.OVERRIDE_MGID,d.ENTIRE_URL,d.TSLA];if(Gt(t)&&Object.keys(t).length>0)for(var r in t)-1===a.indexOf(r)&&(n[r]=t[r]);return n},V=function(){var e={};if(_()){var t=si.getLocalStorage(d.LAST_GUID_PLAYED);t&&(e[d.ARA_KEY]=t)}return e},y=function(e){return e=Jt(e)&&e||Ct,-1===e.indexOf(Dt+"cq")?ft:C(e)},b=function(){var e=si.getLocalStorage(d.LOCALSTORAGE_DEMDEX_VALUE),t=[],n=[];if(e!==At){t=e.split(ht);for(var i=0,a=t.length;a>i;i++)if(t[i]){var r=t[i].split(Rt);n[i]=[r[0],r[1]]}}return n},M=function(e){return{adServer:e.adServer,networkId:e.networkID,profileId:e.profileID,siteSectionId:e.siteSectionID,preloadAdManifest:pt}},w={networkID:A,siteSectionID:N(),siteSectionParsing:R(),assetID:v(O()),profileID:f(),duration:I(),videoViewRandom:Math.round(1e9*Math.random()),adServer:T?d.INTL_AD_SERVER():d.AD_SERVER(),referrer:E,isFullEpisode:c,hasPlaylist:u.hasPlaylist,playlistID:v(u.playlistId),cqID:y(O()),adBreakPoints:S(),segmentsDuration:h(ft),segmentsActualDuration:h(pt),currentIndex:m(),flashVars:i.flashVars?i.flashVars:{},isKids:_(),tveKeyValues:D(),hostSellingKeyValues:V(),timeSinceLastAd:ai.getTSLATime(i),extraFWKeyValues:L(),preloadAdSlotEnabled:e.Config&&e.Config.preloadAdSlotEnabled?e.Config.preloadAdSlotEnabled:ft,bandwidthEnabled:e.Config&&e.Config.bandwidthEnabled?e.Config.bandwidthEnabled:ft,failSafeTimerDisabled:i.failSafeTimerDisabled?i.failSafeTimerDisabled:ft,fwSegments:b(),adRenditionVO:e.AdRenditionVO.getAdRenditionVO(n,i),isIntl:T};return P(w),w.adRequestedData=M(w),w}},e.HeartbeatdataVO=function(){function t(e,t,n,a){var r=e.isFullEpisode||e.hasPlaylist;switch(pt){case t:return i.AD_START_ACTIVITY;case n:return i.LIVE_STREAM_START_ACTIVITY;case r:return Qt(a)&&a>0?i.SEGMENT_START_ACTIVITY:"Fight"===e.contentType?i.FIGHT_START_ACTIVITY:"Movie"===e.contentType?i.MOVIE_START_ACTIVITY:i.FULL_EPISODE_START_ACTIVITY;default:return i.CLIP_START_ACTIVITY}}var n="HeartbeatdataVO - ",i=e.HeartbeatVars;return{fromMetadata:function(e,t,i,a){var r={};return r=a?{vmnUUID:i,segmentName:e.segmentName,videoTitle:e.videoTitle,pageName:e.pageName}:{"v.mid":i,"v.segmentName":[e.itemIndex+1,e.videoTitle].join(Dt),"v.vidTitle":e.videoTitle,"v.vidEpTitle":e.playlistTitle,"v.pageName":Jt(t.omniturePathContext)?t.omniturePathContext+e.playlistTitle:e.playlistTitle,"v.mgid":e.guid,"v.pageType":e.pageType},kt(n+"HeartbeatdataVO.fromMetadata",r),r},fromHeartbeatMetadata:function(n,a,r,o,s,d,E,u,c){var l={"v.activity":t(n,r,s,c),"v.episodeN":n.episodeN,"v.vidContentType":s?"Live Event":n.contentType,"v.epMGID":n.playlistId,"v.vidEpTitle":n.playlistTitle,"v.epCount":n.playlistLength,"v.epLength":s?i.LIVE_DURATION:Math.round(o),"v.mgid":n.guid,"v.vidTitle":n.videoTitle,"v.vidLength":E,"v.vidFranchise":n.franchise,"v.vidArtist":n.artistName,"v.seasonN":n.seasonN,"v.contentStatus":a.tve&&an(a.tve.tveAuthRequired)?i.LOCKED:i.UNLOCKED,"v.linearPubDate":n.linearPubDate,"v.vidOwner":n.owner,"v.vidCategory":s||an(n.isFullEpisode)||an(n.isPlaylistMode)?Ct:n.categories,adTotalDuration:d&&d.creativeDuration?Math.round(d.creativeDuration):Ct,adCreativeId:d&&d.creativeId?d.creativeId:Ct,adId:d&&d.adId?d.adId:Ct,"v.epType":n.isMonolithicContent?"Monolithic":Ct,"v.mid":u,"v.pageType":n.pageType,"v.pageURL":n.pageURL,"v.bentoVersion":e.version};return l}}}(),e.KruxDataLayerVO=new f,e.MetadataVO=function(){var e=function(){return{guid:"NO_MGID",videoTitle:"NO_VID_TITLE",videoId:"NO_VID",owner:"OWNER_UNSET",playlistTitle:"NO_PLAYLIST_TITLE",playlistId:"NO_PLAYLIST_URI",franchise:"NO_FRANCHISE",contentType:"NO_CONTENT_TYPE",artistName:"NO_ARTIST",linearPubDate:"NO_LINPUBDATE",seasonN:"NO_SEASONN",episodeN:"NO_EPISODEN",cdn:"NO_CDN",categories:"NO_VIDCAT",pageType:"NO_PAGETYPE",pageURL:"NO_PAGEURL",tmsEpisodeId:"NO_TMS_EPISODE_ID"}};return{fromRSSMetadata:function(t){var n=e(),i=t||{};if(Xt(i)&&Xt(i.rss)){if(Jt(i.rss.guid)){n.guid=i.rss.guid;var a=n.guid.split(":");5===a.length&&(n.owner=a[3],n.videoId=a[4],n.imaVideoId=a[4])}if(Gt(i.rss.group)&&Gt(i.rss.group.category)&&(Jt(i.rss.group.category.playlistURI)&&(n.playlistId=i.rss.group.category.playlistURI,n.playlistVideoId=n.playlistId.match(/(?!.+:)[^:].+/)[0],n.imaVideoId=n.playlistVideoId),Jt(i.rss.group.category.playlistRepTitle)?n.playlistTitle=i.rss.group.category.playlistRepTitle:Jt(i.rss.group.category.playlistTitle)?n.playlistTitle=i.rss.group.category.playlistTitle:Jt(i.title)&&(n.playlistTitle=i.title),Jt(i.rss.group.category.videoTitle)?(n.videoTitle=i.rss.group.category.videoTitle,n.videoTitle=n.videoTitle+"_"+n.videoId):Jt(i.rss.title)&&(n.videoTitle=i.rss.title,n.videoTitle=n.videoTitle+"_"+n.videoId),Jt(i.rss.group.category.franchise)&&(n.franchise=i.rss.group.category.franchise),Jt(i.rss.group.category.mtvnOwner)&&(n.owner=i.rss.group.category.mtvnOwner),Jt(i.rss.group.category.contentType)&&(n.contentType=i.rss.group.category.contentType),Jt(i.rss.group.category.artist)&&(n.artistName=i.rss.group.category.artist),Jt(i.rss.group.category.mtvnOwner)&&(n.owner=i.rss.group.category.mtvnOwner),Jt(i.rss.group.category.linearPubDate)&&(n.linearPubDate=i.rss.group.category.linearPubDate),Jt(i.rss.group.category.seasonN)&&(n.seasonN=i.rss.group.category.seasonN),Jt(i.rss.group.category.episodeN)&&(n.episodeN=i.rss.group.category.episodeN),Jt(i.rss.group.category.categories)&&(n.categories=i.rss.group.category.categories),Jt(i.rss.group.category.pageType)&&(n.pageType=i.rss.group.category.pageType),Jt(i.rss.group.category.pageUrl)?n.pageURL=i.rss.group.category.pageUrl:n.pageURL=gi.lengthLimiter(xn(),1024,Nt),Jt(i.rss.group.category.tmsEpisodeId)&&(n.tmsEpisodeId=i.rss.group.category.tmsEpisodeId)),Gt(i.mediaGen)&&(Gt(i.mediaGen.rendition)&&Jt(i.mediaGen.rendition.cdn)&&(n.cdn=i.mediaGen.rendition.cdn),Gt(i.mediaGen)&&$t(i.mediaGen.beacons)&&$t(i.mediaGen.beacons[0])?n.beacons=i.mediaGen.beacons[0]:Gt(i.mediaGen)&&$t(i.mediaGen.beacons)&&(n.beacons=i.mediaGen.beacons)),Jt(i.feedWithQueryParams)){var r=gi.queryStringToObject(i.feedWithQueryParams);r.uuid&&(n.imaVideoId=r.uuid.match(/(?!.+:)[^:].+/)[0])}}for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);return i},setupStreamMetadata:function(e,t){var n={};if(Jt(e.id)){n.playlistId=e.id,n.playlistVideoId=n.playlistId.match(/(?!.+:)[^:].+/)[0];var i=this.parseMgid(n.playlistId);for(var a in i)n[a]=i[a]}return Jt(e.pageUrl)?n.pageURL=e.pageUrl:n.pageURL=gi.lengthLimiter(xn(),1024,Nt),Jt(e.pageType)&&(n.pageType=e.pageType),Jt(e.reportingTitle)?n.playlistTitle=e.reportingTitle:Jt(e.title)&&(n.playlistTitle=e.title),qt(e.playlistItems)&&(n.items=e.playlistItems,n.playlistLength=e.playlistItems.length),n},setUpContentMetadata:function(e,t){var n={};for(var i in t)n[i]=t[i];return Jt(e.id)&&(n.playlistId=e.id),Jt(e.link)&&(n.link=e.link),Jt(e.franchise)&&(n.franchise=e.franchise),Jt(e.artist)&&(n.artistName=e.artist),Jt(e.season)&&(n.seasonN=e.season),Jt(e.episode)&&(n.episodeN=e.episode),Jt(e.tmsepisode)&&(n.tmsEpisodeId=e.tmsepisode),Jt(e.categories)&&(n.categories=e.categories),Jt(e.linearPubDate)&&(n.linearPubDate=e.linearPubDate),Jt(e.contentType)&&(n.contentType=e.contentType),Xt(e.chapters)&&(n.chapters=e.chapters),Xt(e.adBreaks)&&(n.adBreaks=e.adBreaks),Gt(e.mediaGen)&&(Gt(e.mediaGen.rendition)&&Jt(e.mediaGen.rendition.cdn)&&(n.cdn=e.mediaGen.rendition.cdn),Gt(e.mediaGen)&&$t(e.mediaGen.beacons)&&$t(e.mediaGen.beacons[0])?n.beacons=e.mediaGen.beacons[0]:Gt(e.mediaGen)&&$t(e.mediaGen.beacons)&&(n.beacons=e.mediaGen.beacons)),n},parseMgid:function(e){if(Jt(e)){var t=e.split(":");if(5===t.length)return{owner:t[3],videoId:t[4]}}return{}},setUpChapterMetadata:function(t,n){var i=e(),a=At;Xt(t)&&(a=this.parseMgid(t.id),i.guid=t.id,i.duration=Math.floor(t.duration/1e3),i.videoTitle=t.title+"_"+a.videoId,i.videoId=a.videoId);for(var r in n)"chapters"!==r&&"adBreaks"!==r&&(i[r]=n[r]);return qt(t.id)&&Object.keys(a).forEach(function(e){i[e]=a[e]}),i}}}(),e.QoeVO=function(t){var n={},i=[],a={},r=Ct,o=pt,s=At,d=function(t){var n=-1,i=ft,a=ft,r=ft,o=0,s=At,d=At,E=At,u=At,c=At,l=At,T=-1,_=At;return t&&(_=t.getActiveCreativeRendition&&t.getActiveCreativeRendition(),n=_&&nn(_.getDuration)&&_.getDuration()?1e3*_.getDuration():e.AdVars.NO_CREATIVE_DURATION,i=_&&nn(_.getCreativeApi)&&"VPAID"===_.getCreativeApi()?pt:ft,a=_&&nn(_.getWrapperType)&&_.getWrapperType()!==At&&_.getWrapperType().indexOf("vast")>=0?pt:ft,r=_&&nn(_.getWrapperUrl)&&_.getWrapperUrl()!==At?pt:ft,o=nn(t.getAdId)&&t.getAdId()?t.getAdId():e.AdVars.NO_AD_ID,T=nn(t.getAllCreativeRenditions)&&t.getAllCreativeRenditions().length),{durationMs:n,isVpaid:i,isVast:a,isThirdParty:r,adId:o,creativeId:s,creativeRenditionId:d,desiredBitrateKbps:E,actualBitrateKbps:u,minBitrateKbps:c,maxBitrateKbps:l,renditionsCount:T}},E=function(t){var n=ft,i=ft,a=ft,r=ft,o=[],s={},E=At,u=At,c=[],l=Ct;if(t&&t.getAdInstances){s=t.getAdInstances();for(var T=0;T<s.length;T++)E=s[T],u=d(E),c=E._creativeRenditions,u.isVpaid&&(n=pt),u.isVast&&(i=pt),u.isThirdParty&&(a=pt),$t(c)&&!en(c)&&nn(c[0].getWrapperUrl)&&(l=c[0].getWrapperUrl()),l&&l.indexOf(e.AdVars.AMAZON_AD_SERVER)>-1&&(r=pt),o.push(u)}else t&&(n=t.containsVPAID,i=t.containsVAST,a=t.containsThirdParty,o=t.ads);return{containsVpaid:n,containsVast:i,containsThirdParty:a,ads:o,containsAmazonVideoBidding:r}};if(t&&t.length){s=tv.freewheel.SDK;for(var u=0,c=t.length;c>u;u++){var l=t[u];switch(l.getTimePositionClass()){case s.TIME_POSITION_CLASS_PREROLL:n=E(l);break;case s.TIME_POSITION_CLASS_MIDROLL:i.push(E(l));break;case s.TIME_POSITION_CLASS_POSTROLL:a=E(l)}l.getTimePositionClass()===At&&l.getTimePosition()>0&&i.push(E(At))}}else if(t)for(var T in t)if(t[T])switch(T){case"preroll":n=E(t[T]);break;case"midrolls":for(var _=t[T],g=0,A=_.length;A>g;g++)i.push(E(_[g]));break;case"postroll":a=E(t[T]);break;case"errorText":r=t[T];break;case"success":o=t[T]}return{preroll:n,midrolls:i,postroll:a,errorText:r,success:o}};var Oi=function(){var t=Et+"StreamSenseVO - ";return{fromMetadata:function(e,n,i){var a="*null",r=Qn,o=e.hasPlaylist?e.playlistTitle:e.videoTitle,s=1e3*(e.isAd?e.adDuration:i?r.LIVE_DURATION:e.playlistDuration),d=Qt(e.itemIndex)?e.itemIndex:e.index,E=e.isAd?e.adId:e.videoId,u=At;
u=!Wt(n&&n.tve)&&n.tve.tveAuthRequired?r.LOCKED:r.UNLOCKED,s=0>s?0:ci.roundOff(s);var c={ns_st_cn:e.partIndex,ns_st_ci:E,ns_st_pn:Qt(d)?d+1:a,ns_st_tp:e.playlistLength>0?e.playlistLength:0,ns_st_cu:e.rss&&e.rss.link?e.rss.link:a,ns_st_cl:s,ns_st_pu:e.owner,ns_st_pr:e.franchise?e.franchise:a,ns_st_ep:o?o:a,ns_st_ad:e.isAd?"1":"0",ns_st_ct:e.clipTypeId};return e.isAd||(c.ns_st_sn=e.seasonN,c.ns_st_tdt=e.linearPubDate,c.ns_st_en=e.episodeN,c.ns_st_cdn=e.cdn,c.via_st_lock=u),c.c3=zn().replace(".com",Ct).toUpperCase()+"Browser",c.c4=c.ns_st_pu,c.c6=c.ns_st_pr,kt(t+"fromMetadata",c),c},fromAdMetadata:function(n,i,a,r,o,s){var d=At,E=At,u=Qn,c=r.isSSAI;try{r.isMonolithicContent?d=JSON.parse(JSON.stringify(i.items[0])):c?(d=JSON.parse(JSON.stringify(s)),E=d):d=JSON.parse(JSON.stringify(i.items[n.currentItemIndex]))}catch(l){kt(t,l)}if(r&&r.title&&(d.title=r.title),c||(E=e.MetadataVO.fromRSSMetadata(d)),E.playlistLength=1,E.index=0,E.hasPlaylist=i.items.length>1,E.adId=n.adId,E.adDuration=n.creativeDuration,E.partIndex=a,E.isAd=pt,o)E.clipTypeId=u.AD_LIVE;else if(Jt(n.adType)){var T="AD_"+n.adType.toUpperCase();E.clipTypeId=Jt(u[T])?u[T]:u.AD_OTHER}return Oi.fromMetadata(E)}}}(),Si=function(){function t(){var e=Array.prototype.slice.apply(arguments);return Ht(T,e)}function n(t){return t.pubID=e.AdVars.AMAZON_PUB_ID,window.apstag.init(t)}function i(){if(Xt(window.apstag))return kt(T,"Amazon A9 library has already been loaded, preventing subsequent request."),r(),ft;switch(window.apstag={setDisplayBids:It,_Q:I,init:function(){return window.apstag._Q.push(["i",arguments])},fetchBids:function(){return window.apstag._Q.push(["f",arguments])},targetingKeys:function(){return g}},pt){case C&&O:n({videoAdServer:"freewheel",adServer:"googletag"});break;case C:n({videoAdServer:"freewheel"});break;default:n({adServer:"googletag"})}return li.setTiming("amazonA9Requested"),di.loadScript({url:Tn()+_,async:pt,onLoad:r,onError:t,isAppendToBody:ft,type:"text/plain","class":"optanon-category-4"}),pt}function a(e,t){return t=t||It,Bt(T,"Library has not instantiated in time to process bidding request, rejecting bid request."),t(g),ft}function r(){return kt(T,"Amazon A9 library has loaded."),A.getPageBids=o,li.setTiming("amazonA9Received"),s(),pt}function o(e,t){var n=[];return t=t||It,e.forEach(function(e){return Jt(e.id)&&Jt(e.adUnitPath)&&!Wt(e.validSizes)?rn(di.isElementInViewport(e.element))?(kt(T,"This ad slot is not visible, bidding call suppressed."),ft):(n.push({slotID:e.id,slotName:e.adUnitPath,sizes:[e.validSizes]}),void kt(T,"Created bid request for ad slot "+e.id)):(Bt(T,"This ad slot is not eligible for bids due to missing parameters."),ft)}),en(n)?(kt(T,"No ads valid for bidding."),t(g),ft):(kt(T,"Sending "+n.length+" bid request(s)"),li.setTiming("amazonA9BidsRequested"),void window.apstag.fetchBids({slots:n,timeout:p},function(e){return li.setTiming("amazonA9BidsReceived"),kt(T,"Page bids returned from apstag.fetchBids",e),t(e),pt}))}function s(e){var t=[{slotID:"preroll",mediaType:"video"}];C&&(kt(T,"Fetching Video Bids for - ",e||t),window.apstag.fetchBids({slots:e||t},function(e){kt(T,"Video bids returned from apstag.fetchBids videoAdBid - ",e),h++,$t(e)&&e.forEach(function(e){f.push(e)}),m===h&&S(f)}))}function d(e){var t=[];for(kt(T+"Requesting bids for "+e+" midroll slots."),m++;e>0;)t.push({slotID:"Midroll_"+e,mediaType:"video"}),e--;s(t)}function E(e){return m!==h?(kt(T+"getVideoBids: Amazon has not yet responded to previous bid requests. Creating callback"),void(S=e)):(e(f),f)}function u(){f=[],h=0,m=1,S=It}function c(){return kt(T,"Amazon A9 receiver initialized, requesting bidding library."),C=e.Config.freewheelEnabled&&e.Config.amazonVideoBiddingEnabled,O=e.Config.amazonPageBiddingEnabled,C&&u(),i(),A.getPageBids=a,A}function l(){delete A.getPageBids,delete window.apstag}var T=Et+"AmazonReceiver - ",_="//c.amazon-adsystem.com/aax2/apstag.js",g=nn(Object.freeze)&&Object.freeze([])||[],A=this,p=1e3,f=[],I=[],C=ft,O=ft,S=It,h=0,m=0;return A.initialize=c,A.reset=l,A.getVideoBids=E,A.requestMidrollBids=d,A};Si=new Si,e.Demdex=function(){return this[Ae]=function(t){var n=t.getData();n.value&&si.setLocalStorage(e.FreewheelVars.LOCALSTORAGE_DEMDEX_VALUE,n.value)},this[ge]=function(t){var n=t.getData(),i={},a={};for(var r in n)if(n.hasOwnProperty(r)){if(xt(n[r])||!qt(n[r]))continue;var o,s=r.toLowerCase();o=s.match(/^(prop\d{1,2})$/gi)?s.replace("prop","c"):s.match(/^(evar\d{1,2})$/gi)?s.replace("evar","v"):s.match(/^(hier\d{1,2})$/gi)?s.replace("hier","h"):s.match(/^(channel)$/gi)?s.replace("channel","ch"):r,a["c_"+o]=encodeURIComponent(n[r])}return i.url=e.DemdexVars.DEMDEX_URL()+"event?",i.params=a,i.appendRandomString=pt,i.receiver="Demdex : ",ui.sendImageBeaconRequest(i),i},this},e.Freewheel=function(t,n){function i(e){return e&&e.getData?e.getData():void 0}function a(e){var t=i(e);ge=t.playhead?t.playhead:ge}function r(){return be.getElapsedSeconds()>2&&(-1===we.adPlayhead||0===we.adPlayhead)}function o(){return gn()&&be.getElapsedSeconds()>2&&ve>19}function s(){var e=-1;return Ze&&Ze.getPlayheadTime&&(e=Ze.getPlayheadTime()),e}function d(){var e=-1;if(Ze&&Ze.getSlot){var t=Ze.getSlot();t&&t.getPlayheadTime&&(e=t.getPlayheadTime())}return e}function E(){dt.vpaidHideDisabled!==pt&&(nt=document.getElementById(he.VPAID_CLICK_DIV),nt&&(nt=typeof nt.length!==gt?nt[0]:nt,nt.style.display="none"))}function u(){at.stop();var e=at.getElapsedMilliSeconds();at.reset(),at.start(),1500>e&&e>0||nt&&nn(nt.click)&&nt.click()}function c(t){var n=Ct,i=At,a=0;t.forEach(function(t){i=t.getAdInstances(),i.forEach(function(t){n=t._creativeRenditions[0].getWrapperUrl(),n&&n.indexOf(e.AdVars.AMAZON_AD_SERVER)>-1&&(ut[a++]=t._adId)})})}function T(e,t){return e===At?-1:t===At?1:e.getTimePosition()>t.getTimePosition()?1:(e.getTimePosition()<=t.getTimePosition(),-1)}function _(e){if(!e.success)return t.onAdRequestFailed(),t.onAdPodPlayEnd(),ft;var n=Ue.getTemporalSlots();t.onAdRequestCompleted(n),Tt&&c(n);for(var i=0,a=n.length;a>i;i++){var r=n[i];switch(r.getTimePositionClass()){case Ke.TIME_POSITION_CLASS_PREROLL:Fe.push(r);break;case Ke.TIME_POSITION_CLASS_MIDROLL:ke.push(r);break;case Ke.TIME_POSITION_CLASS_POSTROLL:Be.push(r);break;default:kt("error: invalid case statement")}r.getTimePositionClass()===At&&r.getTimePosition()>0&&ke.push(At)}return ke.length&&ke.sort(T),He=pt,xe&&(xe=ft,q()),pt}function g(e){var n=e.slot.getAdInstances(ft);Ye=n.length,We=e.slot.getCustomId(),e.slot.getTimePositionClass()!==Ke.TIME_POSITION_CLASS_OVERLAY&&t.onAdPodPlayStart()}function A(n){We=At,$e=At,Xe=1,n.slot.getTimePositionClass()!==Ke.TIME_POSITION_CLASS_OVERLAY&&(si.setLocalStorage(e.AdVars.VIDEO_PLAYED_TIME,1),t.onAdPodPlayEnd()),Jt(it.getAttribute("src"))&&it.setAttribute("src",Ct)}function p(e){if(Gt(e)){for(var t in e)Wt(e.length)?e.hasOwnProperty(t)&&Jt(t)&&Ue.addKeyValue(t,e[t]):Ue.addKeyValue(e[t][0],e[t][1]);return Ue}}function f(){for(var e=["EVENT_REQUEST_COMPLETE","EVENT_SLOT_ENDED","EVENT_SLOT_STARTED","EVENT_AD_IMPRESSION","EVENT_AD_IMPRESSION_END","EVENT_AD_CLICK"],t=0,n=e.length;n>t;t++)Ue.removeEventListener(Ke[e[t]])}function I(){Ai.generateStyleTag(Fn),Ai.generateStyleTag(kn),Ai.generateStyleTag(Bn),ot=t.getAdsPlaceholder(),ot&&ot.classList&&ot.classList.add&&ot.appendChild&&(ot.classList.add(Un),ot.appendChild(it))}function C(e){var n,i=ft;switch(kt(ue+"adInstancePlayEvent event.type = ",e.type),t.onAdRenderer(e),e.type){case Ke.EVENT_AD_IMPRESSION:if(h(e))return;Ze=e.adInstance,n=S(e.adInstance?e.adInstance:At),n.isClickable&&qt(ot)&&ot.classList.add(Hn),n.amazonVideoBiddingEnabled=i,"preRoll"===Pe&&(0===t.getPlayerVolume()||st?H():W()),Xt(Ze)&&!fn()&&(n.isClickable=!n.isVpaid&&!en(Ze.getEventCallbackUrls(Ke.EVENT_AD_CLICK,Ke.EVENT_TYPE_CLICK))),t.onAdMetadata(n),t.onAdPlayStart();break;case Ke.EVENT_AD_IMPRESSION_END:if(h(e))return;Ze=At,tt=ft,t.onAdPlayEnd(),it.setAttribute("src",Ct),ot.classList.remove(Hn);break;case Ke.EVENT_AD_CLICK:t.onAdPause()}}function O(){for(var e=At,t=0,n=ke.length;n>t;t++)if((ke[t]||ke[t]===At)&&pe.currentIndex>t){e=ke[t],ke[t]=ft;break}return e}function S(t){var n=e.FreewheelAdMetadataVO.fromAdMetadata(t,pe,Ye,Xe++);return tt=n.isVpaid,tt&&E(),n}function h(e){var t=e.adInstance.getSlot().getTimePositionClass();return t===Ke.TIME_POSITION_CLASS_DISPLAY||t===Ke.TIME_POSITION_CLASS_OVERLAY}function m(n){if(kt(ue+"adEvent.subType = "+n.subType),n.subType===Ke.EVENT_ERROR){var i=ue+"Controller ad request timeout";i=n.errorModule&&n.errorInfo?[n.errorModule,n.errorInfo].join(Dt):i,t.onAdSkipped(n.adInstance._adId,{level:e.ErrorCode.WARN,message:i})}tt&&n.subType===Ke.EVENT_AD_PAUSE&&t.onAdPause(),tt&&n.subType===Ke.EVENT_AD_RESUME&&t.onAdUnPause(),n.subType===Ke.EVENT_AD_EXPAND&&Le.classList.add(wn),n.subType===Ke.EVENT_AD_COLLAPSE&&Le.classList.remove(wn),n.subType===Ke.EVENT_AD_MUTE&&tt&&fn()&&(rt=t.getPlayerVolume()||1,t.getPlayer().volume(0),it.muted=pt),n.subType===Ke.EVENT_AD_UNMUTE&&tt&&fn()&&(an(it.muted)&&(it.muted=ft),t.getPlayer().volume(rt))}function v(){if(we.adPlayhead=s(),we.adPodPlayhead=d(),be.stop(),!(Wt(we.adPlayhead)||xt(we.adPlayhead)||rn(t.isInAdBreak()))){if(we.adPlayhead>1&&(+we.adPlayhead.toFixed()===+me?Dn()&&ve++:ve=0),me=+we.adPlayhead.toFixed(),t.isInAdPlay()&&Dn()&&(r()||o()))return Bt(ue+"adPlayhead did not update within two seconds. Ending this ad pod!"),be.reset(),V(),t.onAdPodPlayEnd(),void e.onPageEvent({events:e.AdVars.BROWSER_DISRUPTS_PLAYBACK});t.onAdPlayheadUpdate(we),be.start()}}function N(){if(Oe)return ft;st=ft,He=ft,pe=e.FreewheelVO.fromConfigAndMetadata({currentMetadata:le,playerConfig:dt,playlistMetadata:_e,itemIndex:Ae,playerContainer:Le,adCuePoints:t.getCuePoints()});var n=new Ke.AdManager,i=pe.isIntl?he.URL_INT():he.URL();n.setNetwork(pe.networkID),n.setServer(i.replace(/\{0\}/g,pe.networkID).replace(/\{1\}/g,pe.profileID)),Ue=n.newContext(),Ue.setParameter(Ke.PARAMETER_EXTENSION_CONTENT_VIDEO_AUTO_SOURCE_RESTORE,ft,Ke.PARAMETER_LEVEL_GLOBAL),I(),Ue.setContentVideoElement(it),Ue.setProfile(pe.profileID),Ue.setSiteSection(pe.siteSectionID,pe.networkID),pe.isIntl?Ue.setVideoAsset(pe.assetID,parseInt(pe.duration,10),pe.networkID,At,At,pe.videoViewRandom,At,he.INTL_DEFAULT_ASSET_ID):Ue.setVideoAsset(pe.assetID,parseInt(pe.duration,10),pe.networkID,At,At,pe.videoViewRandom),pe.referrer&&Ue.addKeyValue(he.ENTIRE_URL,pe.referrer),pe.playlistID&&Ue.addKeyValue(he.PLAYLIST_KEY,pe.playlistID),pe.siteSectionParsing&&Ue.addKeyValue(he.FSS_KEY,he.FSS_VALUE),pe.cqID&&Ue.addKeyValue(he.CQ_KEY,pe.cqID),pe.isKids&&Ue.addKeyValue(he.COPPA_KEY,Ct+1);for(var a in pe.extraFWKeyValues)Ue.addKeyValue(a,pe.extraFWKeyValues[a]);kt(ue,"User targeting consent status - ",ct),kt(ue,"User privacy consent string",lt),Jt(lt)?Ue.addKeyValue(he.TCF_PRIVACY_STRING,lt):Ue.addKeyValue(he.LIMIT_AD_TRACKING_KEY,Ct+ +ct),Ue.addKeyValue(he.GDPR_KEY,Ct+ +ct),Ue.setParameter(Ke.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,ft,Ke.PARAMETER_LEVEL_GLOBAL),Ue.setParameter(Ke.PARAMETER_PLAY_MIDROLL_BY_CURRENT_VIDEO_ELEMENT,pt,Ke.PARAMETER_LEVEL_GLOBAL),Ue.setParameter(Ke.PARAMETER_DISABLE_SAFARI_TRANSPORT,pt,Ke.PARAMETER_LEVEL_GLOBAL),Ue.setParameter(Ke.PARAMETER_RENDERER_VIDEO_CLICK_DETECTION,fn(),Ke.PARAMETER_LEVEL_GLOBAL),Ue.setParameter(Ke.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,dt.useQuickTimePlayerOnIphone?pt:ft,Ke.PARAMETER_LEVEL_GLOBAL),Ue.setParameter(Ke.PARAMETER_USE_CMP,ft,Ke.PARAMETER_LEVEL_GLOBAL),Ue.addEventListener(Ke.EVENT_REQUEST_COMPLETE,function(e){_(e)}),Ue.addEventListener(Ke.EVENT_SLOT_ENDED,function(e){A(e)}),Ue.addEventListener(Ke.EVENT_SLOT_STARTED,function(e){g(e)}),Ue.addEventListener(Ke.EVENT_AD_IMPRESSION,function(e){C(e)}),Ue.addEventListener(Ke.EVENT_AD_IMPRESSION_END,function(e){C(e)}),Ue.addEventListener(Ke.EVENT_AD_CLICK,function(e){C(e)}),Ue.addEventListener(Ke.EVENT_AD,m);for(var r=1,o=pe.adBreakPoints,s=o.length;s>r;r++)Ue.addTemporalSlot("Midroll_"+r,Ke.ADUNIT_MIDROLL,o[r]);return Ue.addKeyValue(he.ENTIRE_URL,pe.referrer),pe.playlistID&&Ue.addKeyValue(he.PLAYLIST_KEY,pe.playlistID),p(pe.tveKeyValues),p(pe.hostSellingKeyValues),p(pe.fwSegments),Ke.setLogLevel(Ft()?Ke.LOG_LEVEL_DEBUG:Ke.LOG_LEVEL_QUIET),si.setLocalStorage(he.LAST_GUID_PLAYED,pe.assetID),an(pe.bandwidthEnabled)&&(kt(ue+"Bandwith setting to FW Ad request: ",pe.adRenditionVO.desiredBitrateValue),Ue.setParameter(Ke.PARAMETER_DESIRED_BITRATE,pe.adRenditionVO.desiredBitrateValue,Ke.PARAMETER_LEVEL_OVERRIDE)),Tt?(Si.getVideoBids(function(e){kt(ue+"Amazon Bid Objects",e),$t(e)&&e.forEach(function(e){e.amznbid&&e.amzniid&&D(e)}),R()}),pt):(R(),void(Oe=pt))}function R(){Ue.submitRequest(6),pe.adRequestedData.sdkVersion=Ke.version,t.onAdRequested(pe.adRequestedData)}function D(e){var t=At,n=At;if(!Wt(e)&&!Wt(e.slotID)){if("preroll"===e.slotID)return Ue.addKeyValue(e.slotID+"_amznbid",e.amznbid),void Ue.addKeyValue(e.slotID+"_amzniid",e.amzniid);t=e.slotID.split(bt),t.length>1&&"Midroll"===t[0]&&(n=t[1],Ue.addKeyValue("midroll"+n+"_amznbid",e.amznbid),Ue.addKeyValue("midroll"+n+"_amzniid",e.amzniid))}}function P(e){var t={preRoll:"preroll",midRoll:"midrolls",postRoll:"postroll"},n=t[e];return Ne&&Ne[n]?Ne[n]:void 0}function V(){if(Xe=1,Ze&&Ze.getSlot){var e=Ze.getSlot();e&&e.stop&&e.stop()}else $e&&$e.stop&&$e.stop();return pt}function w(e){gn()||(0!==e&&an(it.muted)&&(it.muted=ft),Ue.setAdVolume(e))}function H(){gn()&&(it.muted=pt)}function W(){gn()&&(it.muted=ft)}function q(e){if(Pe=e||Pe,!Ie)if(ot&&ot.classList&&ot.classList.add&&ot.appendChild&&ot.classList.add(Un),Pe===he.PREROLL)Fe.length>0?(t.onAdPlayRequest({adType:he.PREROLL}),$e=Fe.shift(),$e.play(),an(st)&&rn(fn())&&(it.muted=pt)):t.onAdPodPlayEnd();else if(Pe===he.POSTROLL)Be.length>0?(t.onAdPlayRequest({adType:he.POSTROLL}),$e=Be.shift(),$e.play()):t.onAdPodPlayEnd();else if(Pe===he.MIDROLL){var n=O();n?(t.onAdPlayRequest({adType:he.MIDROLL}),$e=n,$e.play()):t.onAdPodPlayEnd()}else t.onAdPodPlayEnd()}function j(e){var t={PLAYING:"VIDEO_STATE_PLAYING",PAUSED:"VIDEO_STATE_PAUSED",COMPLETED:"VIDEO_STATE_COMPLETED"},n=Ke[t[e]];Ue.setVideoState(n)}function $(e){return qe=e.width,ze=e.height,je=e.top,Je=e.left,Qe=e.active,e}function ee(){kt(ue+"adPause"),it&&it.pause&&it.pause(),!tt&&$e&&$e.pause&&$e.pause()}function ae(){kt(ue+"adUnPause"),it&&it.play&&it.play(),!tt&&$e&&$e.resume&&$e.resume()}function oe(){return Ie=pt,Xe=1,Ie}function Ee(e){ct=e.gdpr,lt=e.tcfString,kt(ue,"User targeting consent status - ",ct),kt(ue,"User privacy consent string - ",lt),N()}var ue=Et+"Freewheel ",ce=this,le=At,_e=At,ge=-1,Ae=0,pe={},Ie=ft,Oe=ft,Se=ft,he=e.FreewheelVars,me=ge,ve=0,Ne=At,Re=0,De=0,Pe=At,Le=At,Ve=ft,ye=At,be=new l({timerFunc:v,interval:100}),Me=pt,we={},Ue=At,Fe=[],ke=[],Be=[],He=ft,xe=ft,Ge=ft,Ye=0,Xe=1,Ke=tv.freewheel.SDK,We=At,qe=0,ze=0,je=0,Je=0,Qe=ft,Ze=At,$e=At,tt=ft,nt=At,it=t.getPlayerElement(),at=new l,rt=0,ot=At,st=ft,dt=t.getPlayerConfig()||{},ut=[],ct=ft,lt="",Tt=ft;return ye=t.getPlayer(),le=t.getFirstItemData(),_e=t.getPlaylistMetadata(),Le=t.getPlayerContainer(),Se=le.isPlaylistMode,this.getSkippedAdId=function(){var e=P(Pe),t=[];return e&&(t=e.ads||e[De]&&e[De].ads),t&&t[Re]?t[Re].adId:void 0},this[L]=function(e){dt=i(e),Ae=t.getCurrentItemIndex(),Oe=ft,Ii.getUserPrivacyConsentStatus(Ee.bind(this)),an(dt.forceMute)&&(st=pt)},this[z]=function(n){var a=_e.items.length;Ie=ft;var r=i(n),o=ai.isTimeSinceLastAdElapsed(dt);Pe=ai.getAdType(r.data,Se,a),o?(si.getLocalStorage(e.AdVars.VIDEO_PLAYED_TIME)===At&&si.setLocalStorage(e.AdVars.VIDEO_PLAYED_TIME,0),le.isMonolithicContent&&(r.data.adBreakType?Pe=r.data.adBreakType:Bt(ue+"Monolithic adBreakType is undefined. Falling back to inferredAdType")),Ie=ft,pe.currentIndex=qt(r.data.cuePointIndex)?r.data.cuePointIndex+1:r.data.currentIndex,He?q():(Ge||N(),xe=pt)):t.onAdPodPlayEnd()},this[y]=function(e){rn(Me)&&(Me=pt,Le.classList.remove(wn)),a(e),Ve=ft,j("PLAYING")},this[b]=function(e){a(e),j("PLAYING")},this[M]=function(e){a(e),j("PAUSED")},this[F]=function(e){a(e),ai.persistVideoPlayedTime()},this[k]=function(e){var n=i(e);Ae=n.itemIndex?n.itemIndex:0,Se&&(t.isInAdBreak()&&this[K](),Oe=ft,ke=[],N(),t.isInAdBreak()&&t.onAdPodPlayEnd())},this[x]=function(e){kt(ue+"onUiScreenChange"),$(i(e))},this[Ce]=function(){kt(ue+"onPlayerResize"),Ue.setContentVideoElement(it)},this[B]=function(e){kt(ue+"onFullScreenChange"),t.isInAdBreak()&&$(i(e))},this[ie]=function(){if(tt)u();else if(Ze)return Ze.getRendererController().processEvent({name:Ke.EVENT_AD_CLICK}),pt;return ft},this[se]=function(e){Re=0,De=0,Ne=i(e)},this[de]=function(){Ie=pt,be.stop(),oe(),V()},this[fe]=function(e){rn(Se)&&rn(Ve)&&(Ve=pt,Oe=ft,ke=[],N())},this[U]=function(e){var t=pe.segmentsDuration.length;pe.isFullEpisode&&pe.currentIndex!==t-1?(kt(ue+"Setting the video play status to PAUSED for inbetween segments in FEP. ",pe.currentIndex,t),j("PAUSED")):(kt(ue+"Setting the video play status to completed. ",pe.currentIndex,t),j("COMPLETED"))},this[J]=function(){var e=t.getPlayerVolume();be.start(),xt(e)||w(e)},this[Q]=function(e){Re=0,be.stop(),be.reset()},this[Z]=function(){be.stop(),be.reset(),be.start(),Re+=1},this[ne]=function(){ee(),be.stop()},this[te]=function(){ae(),be.start()},this[re]=function(e){Ie&&V()},this[G]=function(e){var t=i(e);kt(ue+"volumeChange",t),Qt(t.volumeLevel)&&w(t.volumeLevel)},this[Y]=function(){H()},this[X]=function(){W()},this[Te]=function(e){var n=i(e);if(!Ne||!n.adType)return ft;var a=P(n.adType);n.adType===he.MIDROLL?(t.sendAdPlayRequest(a[De]||{}),De+=1):t.sendAdPlayRequest(a)},this[K]=function(){at.stop(),at.reset(),f(),V(),Ue.dispose(),t.clearAdPlayFailSafeTimer(),be.reset(),be.stop()},this[et]=function(){t.onAdSkipped(ce.getSkippedAdId(),{level:e.ErrorCode.ERROR,message:ue+"Receiver ad request timeout"}),V()},this},e.HeartBeatMeasure=function(t){function n(){return kt(f+"getTrackingServer","Setting tracking server."),I.omnitureTrackingServer||jn()}function i(){var e=Ae.isFullEpisode?Ae.playlistId:Ae.guid,t=v?P.LIVE_DURATION:Math.round(re),n=v?B.StreamType.LIVE:B.StreamType.VOD;G=B.createMediaObject(Ae.playlistTitle,e,t,n)}function a(){var e=S.adType?S.adType.toUpperCase():Ct;X=B.createAdBreakObject(e,Te,R),Se=pt}function r(){var t=S.adId?S.adId.toString():e.AdVars.NO_AD_ID,n={};n[B.AdMetadataKeys.CREATIVE_ID]=S.creativeId,W=B.createAdObject(S.creativeId,t,S.currentAdIndex,S.creativeDuration),W.setValue(B.MediaObjectKey.StandardAdMetadata,n)}function o(e){var n=h.isMonolithicContent?t.getMonolithicIndex(e+1)+1:O.itemIndex+1,i=u(O);Y=B.createChapterObject(O.videoTitle,n,i,e)}function s(){var t=At,i={},a=Ct,r=Ct,o={};C=AppMeasurement.getInstance(I.omnitureSuite),i.cookieDomain=zn(),i.trackingServer=n(),i.idSyncDisable3rdPartySyncing=I.requiresCoppaCompliance,i.idSyncContainerID=an(e.Config.requiresCoppaCompliance)?2:0,i.disableIdSyncs=!!e.Config.disableOmnitureIdSyncs,i.disableThirdPartyCookies=!!e.Config.disableOmnitureThirdParties,i.disableThirdPartyCalls=!!e.Config.disableOmnitureThirdParties,Rn()&&(i.whitelistParentDomain=decodeURIComponent(I.ref).split(Ot)[2],i.whitelistIframeDomains=["media.mtvnservices.com"]),!qt(C.AudienceManagement)&&e.Config.demdexEnabled&&(C.loadModule("AudienceManagement"),o[ti.AAM_PARTNER]=ti.VISITOR_NAMESPACE,o[ti.AAM_CONTAINER_NSID]=an(e.Config.requiresCoppaCompliance)?2:0,o[ti.AAM_ID_SYNC_CONTAINER]=an(e.Config.requiresCoppaCompliance)?2:0,o[ti.AAM_DISABLE_DEFAULT_REQUEST]=pt,o[ti.AAM_DISABLE_SCRIPT_ATTACHEMENT]=pt,o[ti.AAM_UUID_COOKIE_OBJ]={name:ti.AAM_UUID_COOKIE,days:30},C.AudienceManagement.setup(o),a=si.getLocalStorage(e.FreewheelVars.LOCALSTORAGE_DEMDEX_VALUE)+ht||Ct,r=si.getLocalStorage($n.LOCALSTORAGE_DEMDEX_VALUE)+ht||Ct,si.setLocalStorage(e.FreewheelVars.LOCALSTORAGE_DEMDEX_VALUE,C.getAamSegments("fw")+a),si.setLocalStorage($n.LOCALSTORAGE_DEMDEX_VALUE,C.getAamSegments("dfp")+r)),C.trackingServer=n(),cn()&&(C.ssl=pt,C.trackingServerSecure=i.trackingServerSecure="s"+C.trackingServer),t=Visitor.getInstance(P.MARKETING_CLOUD_ORG_ID,i),t.getMarketingCloudVisitorID(function(e){he=e},pt),C.visitor=t,C.cookieDomainPeriods=zn().split(vt).length,C.referrer=gi.lengthLimiter(document.referrer,P.URL_LIMIT,St),C.pageURL=gi.lengthLimiter(document.URL,P.URL_LIMIT,St),C.debugTracking=Ft(),C.trackLocal=pt,C.pageName=Jt(I.omniturePathContext)?I.omniturePathContext+h.playlistTitle:h.playlistTitle,C.trackingServer&&Jt(I.omnitureVisitorMigrationKey)&&Jt(I.omnitureVisitorMigrationServer)&&(C.visitorMigrationKey=I.omnitureVisitorMigrationKey,C.visitorMigrationServer=I.omnitureVisitorMigrationServer),Jt(I.omnitureCharacterSet)&&(C.charSet=I.omnitureCharacterSet),Jt(I.omnitureDataCenter)&&(C.dc=I.omnitureDataCenter),I.omnitureVisitorNamespace&&(C.visitorNamespace=P.MARKETING_CLOUD_ORG_ID),Jt(ie)&&(C.visitorID=ie)}function d(){var t=ADB.va.MediaHeartbeatConfig,n=ADB.va.MediaHeartbeatDelegate,i=new t;i.trackingServer=P.HEART_BEAT_TRACKING_SERVER,i.playerName=I.applicationName,i.channel=I.originRef?decodeURIComponent(I.originRef):decodeURIComponent(I.ref),i.debugLogging=e.Config.debugMode,i.appVersion=e.version,i.ssl=cn(),i.ovp=Cn,me=new n,me.getCurrentPlaybackTime=function(){return R},x=new B(me,i,C)}function E(){Ee=c(),i();var e={};e[B.VideoMetadataKeys.SHOW]=h.franchise,e[B.VideoMetadataKeys.SEASON]=h.seasonN,e[B.VideoMetadataKeys.EPISODE]=h.episodeN,e[B.VideoMetadataKeys.ASSET_ID]=h.tmsEpisodeId,e[B.VideoMetadataKeys.FIRST_AIR_DATE]=h.linearPubDate,e[B.VideoMetadataKeys.NETWORK]=h.owner,e[B.VideoMetadataKeys.SHOW_TYPE]=v?"Live Event":h.contentType,G.setValue(B.MediaObjectKey.StandardVideoMetadata,e),nn(C.isReadyToTrack)&&(x.trackSessionStart(G,Ee),ve=pt),oe=pt}function u(n){return v?e.HeartbeatVars.LIVE_DURATION:Math.round(Ae.isMonolithicContent?t.getMonolithicSegDuration():n.duration)}function c(){var n=At,i=oe?O:Ae,a=u(i);return n=e.HeartbeatdataVO.fromHeartbeatMetadata(i,I,ft,re,v,At,a,he,de),n=ri.getMappedObject(n,I),n.trackVars=At,n[P.SEAMLESS_CONTEXT_VARIABLE]=Ct+j,n[P.SPLIT_TEST_CONTEXT_VARIABLE]=t.getFormattedSplitTestInfo(),an(e.Config.kruxEnabled)&&e.KruxDataLayerVO.update(Ti.extend({},i,I,pi.getMostRecentStatus(I),n)),n}function l(n){var i={};try{i=JSON.parse(JSON.stringify(n))}catch(a){Bt(f+"Failed to parse data for AAM tracking!")}i.trackVars=At,i.host=window.location.hostname,an(e.Config.kruxEnabled)&&e.KruxDataLayerVO.update(Ti.extend({},pi.getMostRecentStatus(I),i)),t[ge](i)}function T(e,t,n){var i,a,r,o,s,d=At,E=Ct,u=At,c="isCallSent";if(n=Wt(n)?O.playlistLength+1:n,d=ue[n]=ue[n]||{10:ft,20:ft,75:ft,95:ft,isCallSent:ft},E=Math.round(e/t*100)+Ct,an(d[c]))return ft;switch(s=30>t?5:3,i=[7,7+s],a=[17,17+s],r=[72,72+s],o=[92,92+s],pt){case E>=i[0]&&E<=i[1]:u=10;break;case E>=a[0]&&E<=a[1]:u=20;break;case E>=r[0]&&E<=r[1]:u=75;break;case E>=o[0]&&E<=o[1]:u=95}xt(u)||d[u]!==ft||(d[u]=pt);for(var l in d)if(l!==c&&!d[l])return ft;return d[c]=pt,pt}function _(e){if(O&&O.hasPlaylist){if(h.isMonolithicContent)return void(R>=Math.floor(Ce)-1&&A(B.Event.ChapterComplete));N>=O.duration-1&&A(B.Event.ChapterComplete)}}function g(){var e=O&&O.isPlaylistMode&&O.itemIndex===O.playlistLength-1&&R>=Math.floor(O.duration-1);(R>=re-1||e)&&p("trackComplete"),p("trackSessionEnd"),ve=ft,oe=ft}function A(e,t,n){nn(C.isReadyToTrack)&&an(ve)&&(qt(t)&&qt(n)?x.trackEvent(e,t,n):qt(t)?x.trackEvent(e,t):x.trackEvent(e))}function p(e){nn(C.isReadyToTrack)&&an(ve)&&x[e]()}var f=Et+"HeartbeatMeasure ",I=At,C=At,O=At,S={},h=t.getFirstItemData(),m=t.getPlaylistMetadata(),v=At,N=0,R=0,D=0,P=e.HeartbeatVars,B=ADB.va.MediaHeartbeat,x=At,G=At,Y=At,X=At,W=At,q=ft,z=ft,j=ft,ie=At,re=0,oe=ft,se={},de=0,Ee=At,ue=[],ce=t.getCuePoints(),Te=0,_e=0,Ae=At,Ce=0,Oe=0,Se=ft,he="NO_MID",me=At,ve=ft,Ne=ft;e.Config;return this[L]=function(e){var t=At;kt(f+"onPlayerConfigReady"),ue=[],oe=ft,I=e.getData(),Te=0;try{t=JSON.parse(JSON.stringify(I))}catch(n){return Bt(f+"Failed to validate player config as JSON format, will not modify"),I}switch(I.type){case"partner":t.applicationName=I.partnerPlayerName||P.DEFAULT_PARTNER_PLAYER_NAME,t.omnitureSuite=I.omniturePartnerAccount,t.omniturePathContext=P.SYNDICATED_PATH;break;case"normal":t.applicationName=I.viralPlayerName||P.DEFAULT_VIRAL_PLAYER_NAME,t.omnitureSuite=I.omnitureViralAccount,t.omniturePathContext=P.VIRAL_PATH;break;case"network":t.applicationName=I.networkPlayerName||P.DEFAULT_NETWORK_PLAYER_NAME,t.omnitureSuite=I.omnitureNetworkAccount,t.omniturePathContext=P.NETWORK_PATH;break;default:t.applicationName=P.DEFAULT_DEV_PLAYER_NAME,t.omnitureSuite=I.omnitureDevAccount,t.omniturePathContext=P.DEV_PATH}t.applicationContext=Jt(I.ref)?I.ref:P.NO_APPLICATION_CONTEXT,t.applicationOrigin=Jt(I.applicationOrigin)?I.applicationOrigin:P.NO_APPLICATION_ORIGIN,I=t,Ne="game"===I.contentType,ve=ft,s(),d()},this[ee]=function(e){S=e.getData(),kt(f+"onAdMetadata",S)},this[V]=function(e){O=e.getData(),re=O.playlistDuration,kt(f+"onMetadata",O)},this[fe]=function(){ue=[],de=0,Te=0,oe=ft,R=0},this[pe]=function(e){return ie=Xt(e.getData())&&e.getData().value||At,kt(f+"onAdmsVisitorId",ie),ie},this[k]=function(t){var n=t.getData(),i=n&&n.itemIndex?n.itemIndex:0,a=I.feed,r=m.items;return Ae=m.items[i],Ae.playlistLength=r.length,Ae.title=a.title,Ae.isFullEpisode=Jt(I.contentType)&&"episode"===I.contentType,Ae.hasPlaylist=Ae.playlistLength>1,Ae.isPlaylistMode=Ae.isFullEpisode===ft&&Ae.hasPlaylist,Ae=e.MetadataVO.fromRSSMetadata(Ae)},this[F]=function(e){var t=e.getData(),n=O.duration,i=O.index;N=t.playhead,R=t.fullEpPlayhead,v||(h.isMonolithicContent&&(n=Ce,i=Oe,i>0&&qt(ce[i-1])&&(N-=ce[i-1].time)),T(N,n,i)&&(O.hasPlaylist?se[P.ACTIVITY_CONTEXT_VARIABLE]=P.SEGMENT_END_ACTIVITY:se[P.ACTIVITY_CONTEXT_VARIABLE]=P.CLIP_END_ACTIVITY,l(se)),O.isFullEpisode&&T(R,re)&&(se[P.ACTIVITY_CONTEXT_VARIABLE]=P.EPISODE_END_ACTIVITY,l(se)))},this[ae]=function(e){var t=e.getData();D=t.adPlayhead},this[y]=function(n){var i=At,a=At,r=n.getData();if(Ne)return void kt(f,"Player's content type is marked as 'game', suppressing content reporting.");switch(t.servingServerSideAds()&&(kt(f,"Player is serving SSAI content, fetching current chapter data."),Ae=t.getCurrentSSAIChapterData()),xt(v)&&(v=t.getIsLive()),Ee=c(),h.isMonolithicContent&&(Oe=t.getMonolithicIndex(R),Ce=t.getMonolithicSegDuration()),kt(f+"onPlaystart"),rn(oe)&&E(),p("trackPlay"),a=e.HeartbeatdataVO.fromMetadata(O,I,he),an(O.hasPlaylist)&&(o(r.fullEpPlayhead),A(B.Event.ChapterStart,Y,Ee)),Ee[P.SEAMLESS_CONTEXT_VARIABLE]=Ct+j,i=ri.getMappedObject(Ee,I),i[P.ACTIVITY_CONTEXT_VARIABLE]){case P.FULL_EPISODE_START_ACTIVITY:case P.MOVIE_START_ACTIVITY:case P.FIGHT_START_ACTIVITY:de++}O.hasPlaylist&&de>1&&(i[P.ACTIVITY_CONTEXT_VARIABLE]=P.SEGMENT_START_ACTIVITY),l(i),se=ri.getMappedObject(a,I)},this[M]=function(){kt(f+"onPause"),p("trackPause")},this[b]=function(e){kt(f+"onResume"),q&&(A(B.Event.SeekComplete),q=ft,kt(f+"SeekComplete")),z&&(A(B.Event.BufferComplete),z=ft,kt(f+"BufferComplete")),p("trackPlay")},this[w]=function(e){kt(f+"SeekStart"),q=pt,A(B.Event.SeekStart)},this[Ie]=function(e){t.hasContentStarted()&&(kt(f+"BufferStart"),z=pt,A(B.Event.BufferStart))},this[U]=function(e){var t=e.getData();return Qt(t.playhead)&&Qt(t.fullEpPlayhead)&&(N=t.playhead,R=t.fullEpPlayhead),kt(f+"onPlayEnd",N,R),_e+=1,O.isPlaylistMode&&O.playlistLength===_e&&(se[P.ACTIVITY_CONTEXT_VARIABLE]=P.EPISODE_END_ACTIVITY,l(se)),O.hasPlaylist&&N<u(O)-1?A(B.Event.ChapterSkip):void _()},this[K]=function(){_(),g()},this[ot]=function(){kt(f,"Player is serving an SSAI Stream, fetching first item data."),h=t.getFirstItemData()},this[Z]=function(){var n=At;t.servingServerSideAds()&&(kt(f,"Player is serving SSAI Ad, current chapter data."),Ae=t.getCurrentSSAIChapterData()),S.currentAdIndex>1&&(kt(f+"onAdPlayEnd for Ad:",S.currentAdIndex-1),A(B.Event.AdComplete)),kt(f+"onAdPlayStart for Ad:",S.currentAdIndex),rn(oe)&&E(),n=e.HeartbeatdataVO.fromHeartbeatMetadata(Ae,I,pt,re,v,S,u(Ae),he),n=ri.getMappedObject(n,I),n.trackVars=At,rn(Se)&&(a(),A(B.Event.AdBreakStart,X)),r(),A(B.Event.AdStart,W,n),p("trackPlay")},this[J]=function(){kt(f+"onAdPodPlayStart. Incrementing Ad Pod Start Count"),xt(v)&&(v=t.getIsLive()),Se=ft,Te+=1},this[Q]=function(){S.currentAdIndex===S.adCount&&p("trackPause"),kt(f+"onAdPlayEnd for Ad:",S.currentAdIndex),A(B.Event.AdComplete),kt(f+"onAdPodPlayEnd"),A(B.Event.AdBreakComplete),Ne&&(p("trackSessionEnd"),ve=ft)},this[ne]=function(){kt(f+"onAdPause"),p("trackPause")},this[te]=function(){kt(f+"onAdUnPause"),p("trackPlay")},this[le]=function(){t.isInAdPlay()&&(kt(f+"onAdSkipped"),A(B.Event.AdSkip))},this[$]=function(){},this[H]=function(){g()},this[nt]=function(){j=pt},Ae=h,h&&(re=h.playlistDuration),this};var hi=function(e){function t(e,t){for(var n=e.match(/{\w+}/g),i=n?n.length:0,a=0;i>a;a++){var r=n[a],o=r.replace(/{|}/g,Ct),s="ord"===o?Math.floor(Math.random()*Math.pow(10,(Ct+999999).length))%999999:t[o];s&&(e=e.replace(r,s))}return e}function n(e){if(c=[],l=[],e instanceof Array)for(var t=0,n=e.length;n>t;t++){var i=e[t];typeof i===ut&&(!i.hasOwnProperty(d)||i[d]!==1/0&&i[d]!==u?(i.hasOwnProperty(d)&&Jt(i[d])&&i[d].indexOf(u)>-1&&(i[d]=i[d].replace(new RegExp(u+"|\\s+","g"),Ct)),c.push(i)):l.push(i))}}function i(e){for(var t={},n=0,i=e.length;i>n;n++){var a=e[n];for(var r in a)a.hasOwnProperty(r)&&(t[a.name]=a.value)}return t}function a(n){var a={},r=e.getPlayerConfig(),o=e.getMetadata();n.prop&&n.prop.length>0&&(a.params=i(n.prop)),o.ref=r.ref,Jt(n.url)?(a.url=t(n.url,o),kt(s+"sendBeacon",a),ui.sendImageBeaconRequest(a)):Bt("One of the requests has failed due to the beacon not containing a URL property.")}function r(){if(c.length<=0)return At;for(var e=0,t=c.length;t>e;e++){var n=c[e];typeof n===ut&&(n.hasOwnProperty(d)&&+n[d]<=T||n.hasOwnProperty(E)&&+n[E]<T)&&(a(n),c[e]=ft)}}function o(){for(var e=0,t=l.length;t>e;e++)a(l[e])}var s=Et+"LegacyBeacons ",d="startTime",E="elapsed",u="end",c=[],l=[],T=0;return this[y]=function(){var t=e.getMetadata();kt(s+"LegacyBeacons onPlayStart"),t&&t.beacons&&n(t.beacons)},this[F]=function(e){T++,r()},this[U]=o,this[K]=o,this};e.PlayerReceiver=function(t){var n=At,i=e.FreewheelVars,a=Et+"PlayerReceiver - ";return this.hasPreloadDone=ft,this[ee]=function(e){return kt(a+"PlayerReceiver.onAdMetadata"),Gt(e)&&Gt(e.getData())?n=e.getData():At},this[ae]=function(e){var r=e.getData();return xt(n)||n.creativeDuration<6?this.hasPreloadDone:(this.hasPreloadDone===ft&&n.currentAdIndex===n.adCount&&n.creativeDuration-r.adPlayhead<=5&&n.adType!==i.POSTROLL&&(kt(a+"CONTENT PRELOADING "),this.hasPreloadDone=pt,t.preloadContent()),this.hasPreloadDone)},this[Q]=function(){return this.hasPreloadDone=ft,this.hasPreloadDone},this},e=Ei(e,function(){function t(t,n,i){return kt(Et+"addToQueue hasConfig: "+I+" event ",t),an(i)?f.addPriority({event:t,data:n}):f.add({event:t,data:n}),I&&e.Config.hasPrivacyOpted&&(kt(Et+"Start queue with event ",t),f.stop(),f.start()),f.count()}function n(e){V.push({callbackObject:e.callbackObject,callback:e.callback,data:e.data})}function i(){"loading"!==Jn()?a():document.addEventListener("DOMContentLoaded",a)}function a(){if(!y){var e=At;if(y=pt,V.length>0)for(;e=V.shift();)r(e.callback,e.callbackObject,e.data)}}function r(t,n,i){n=n||e,nn(t)&&t.call(n,i)}function o(e){return Xt(D[e])&&(D[e].name=e),_.addReceiver(D[e])}function s(e){_.removeReceiver(D[e]),delete D[e]}function d(e,t){if(Yt(C))return b.push({event:e,data:t});for(var n in C)C[n][e](t),T({event:e,data:t})}function E(){var e=arguments[0],t=[],n=this;if(nn(n[e])){for(var i=1;i<arguments.length;i++)t.push(arguments[i]);kt(Et+"Running command: "+e+" with args: ",t),n[e].apply(At,t)}}function u(e){var t=Object.keys(D),n=At;if(!nn(e))return ft;for(;n=t.shift();)e(n)}function c(){return y?an(e.Config.sourcePointEnabled)&&an(M)?nn(window.initSourcePointLibrary)&&!Xt(window._sp_)&&window.initSourcePointLibrary()||pt:void 0:n({callbackObject:At,callback:c})}function l(e){return y?ft:(n(e),pt)}function T(e){var t=window.EdgePlayer;t&&t.getPlayers&&Object.keys(C).length<t.getPlayers().length&&w.push(e)}var _=At,g=It,p="adsvr",f=At,I=ft,C={},D={demdex:At,
omnitureReceiver:At,megabeaconReceiver:At,comScoreReceiver:At,tveReceiver:At,sourcePointReceiver:At,dfpReceiver:At},L={fw:{freewheelEnabled:pt}},V=[],y=ft,b=[],M=ft,w=[];return{onConfig:function(n){return Xt(n)?(e.Config=e.Config||{},e.Config=Ei(n,e.Config),u(s),Si.reset(),D.tveReceiver=new A,e.Config.pageHeaderBiddingEnabled&&(D.xandrPrebidReceiver=new R),(e.Config.amazonPageBiddingEnabled||e.Config.amazonVideoBiddingEnabled)&&(D.amazonReceiver=Si.initialize()),e.Config.pageAdsEnabled&&(D.dfpReceiver=new S),e.Config.kruxEnabled&&(D.kruxReceiver=new h),e.Config.omnitureEnabled&&(window.addAppMeasurementLibrary(),D.omnitureReceiver=new v),rn(e.Config.requiresCoppaCompliance)&&an(e.Config.demdexEnabled)&&(D.demdex=new e.Demdex),e.Config.megabeaconEnabled&&(D.megabeaconReceiver=new m),e.Config.comScoreEnabled&&ln()&&(D.comScoreReceiver=new O),e.Config.sourcePointEnabled&&(D.sourcePointReceiver=new N),u(o),t(P,e.Config,pt)):ft},setCustomReportingNamespace:function(e){return y?Jt(e)?t(Me,{namespace:e}):ft:n({callback:this.setCustomReportingNamespace,data:e})},onSearch:function(e){return y?t(Ve,e):n({callback:this.onSearch,data:e})},onSearchConversion:function(e){return y?t(be,e):n({callback:this.onSearchConversion,data:e})},sendMegabeaconData:function(e){return y?Xt(e)&&Xt(D.megabeaconReceiver)?Xt(e.data)?t(Ue,e):(Ht(Et+" Malformed Object. Expecting data property in callObject"),ft):ft:n({callback:this.sendMegabeaconData,data:e})},onAdBlocking:function(){return y?(d("onAdBlocking",pt),t(ye)):n({callback:this.onAdBlocking})},getAdBlockingStatus:function(e){if(!y)return n({callback:this.getAdBlockingStatus,data:e});var t=D.sourcePointReceiver;return Xt(t)&&nn(t.getAdBlockingStatus)&&t.getAdBlockingStatus(e)||ft},updateAdBlockingStatus:function(e){if(!y)return n({callback:this.updateAdBlockingStatus,data:e});var t=D.sourcePointReceiver;return Xt(t)&&nn(t.updateAdBlockingStatus)&&t.updateAdBlockingStatus(e)||ft},onNewPage:function(e){return y?(pi.resetAuthRequirements(),t(De,e)):n({callback:this.onNewPage,data:e})},onPageEvent:function(e){return y?t(_e,e):n({callback:this.onPageEvent,data:e})},onCustomData:function(e,i){if(!y)return n({callback:this.onCustomData,data:[e,i]});var a=Ct;if(Xt(e)){for(a in e)e.hasOwnProperty(a)&&t(we,{name:a,value:e[a]});return pt}return Jt(e)?(t(we,{name:e,value:i}),pt):ft},placeAds:function(e){return y?Wt(D.dfpReceiver)?ft:D.dfpReceiver[Qe](e):n({callback:this.placeAds,data:e})},destroyAds:function(e){return y?Wt(D.dfpReceiver)?ft:D.dfpReceiver[$e](e):n({callback:this.destroyAds,data:e})},refreshAds:function(e){return y?Wt(D.dfpReceiver)?ft:D.dfpReceiver[Ze](e):n({callback:this.refreshAds,data:e})},onTVEWelcome:function(){return y?an(e.Config&&e.Config.tveReportingEnabled)?t(Fe):ft:n({callback:this.onTVEWelcome})},onTVEError:function(i){return y?an(e.Config&&e.Config.tveReportingEnabled)?t(ke,i):ft:n({callback:this.onTVEError,data:i})},onTVEStatusCheck:function(i){return y?(i=i||{},pi.storeMostRecentStatus(i),an(e.Config&&e.Config.tveReportingEnabled)?t(Be,i):ft):n({callback:this.onTVEStatusCheck,data:i})},onTVELogin:function(i){return y?an(e.Config&&e.Config.tveReportingEnabled)?t(He,i):ft:n({callback:this.onTVELogin,data:i})},onTVEProviderSelected:function(i){return y?an(e.Config&&e.Config.tveReportingEnabled)?t(xe,i):ft:n({callback:this.onTVEProviderSelected,data:i})},onTVEProviderNotListed:function(){return y?an(e.Config&&e.Config.tveReportingEnabled)?t(Ge):ft:n({callback:this.onTVEProviderNotListed})},onTVEElvisSelected:function(i){return y?an(e.Config&&e.Config.tveReportingEnabled)?t(Ye,i):ft:n({callback:this.onTVEElvisSelected,data:i})},onTVEElvisLogin:function(i){return y?an(e.Config&&e.Config.tveReportingEnabled)?t(Xe,i):ft:n({callback:this.onTVEElvisLogin,data:i})},onTVEProviderDisplay:function(){return y?an(e.Config&&e.Config.tveReportingEnabled)?t(Je):ft:n({callback:this.onTVEProviderDisplay})},onTVEElvisExpired:function(i){return y?an(e.Config&&e.Config.tveReportingEnabled)?t(Ke,i):ft:n({callback:this.onTVEElvisExpired})},onTVEElvisLocked:function(i){return y?an(e.Config&&e.Config.tveReportingEnabled)?t(We,i):ft:n({callback:this.onTVEElvisLocked})},onTVEFreePreviewSelected:function(){return y?an(e.Config&&e.Config.tveReportingEnabled)?t(qe):ft:n({callback:this.onTVEFreePreviewSelected})},onTVEFreePreviewLogin:function(){return y?an(e.Config&&e.Config.tveReportingEnabled)?t(ze):ft:n({callback:this.onTVEFreePreviewLogin})},onTVEFreePreviewExpired:function(){return y?an(e.Config&&e.Config.tveReportingEnabled)?t(je):ft:n({callback:this.onTVEFreePreviewExpired})},onQueueItem:function(e){g(e.event,e.data)},onWindowResize:function(){return y?t(Oe,At):n({callback:this.onWindowResize})},onAAMDataReady:function(e){return y?t(ge,e):n({callback:this.onAAMDataReady,data:e})},onAdClick:function(e){if(!y)return n({callback:this.onAdClick,data:e});if(!(qt(window.EdgePlayer)&&qt(window.EdgePlayer.Events)&&qt(window.EdgePlayer.Events.BENTO_AD_CLICKED)))return qt(e)?void this.getPlayer(e).onAdClick():void d("onAdClick")},getMarketingCloudVisitorID:function(){return y?an(M)?Visitor.getInstance(e.HeartbeatVars.MARKETING_CLOUD_ORG_ID).getMarketingCloudVisitorID():ft:n({callback:this.getMarketingCloudVisitorID})},getPlayers:function(){return y?C:n({callback:this.getPlayers})},getPlayer:function(e){if(!y)return n({callback:this.getPlayer,data:e});for(var t in C)if(t===e)return C[t];return At},addPlayer:function(t){var i=At;if(!y)return n({callback:this.addPlayer,data:t});for(C[t.id]||(C[t.id]=new e.BentoApi(t)),w.length>0&&(b=w,w=[]);i=b.shift();)C[t.id][i.event](i.data),T(i);return C[t.id]},removePlayer:function(e){return y?(C[e.id]&&delete C[e.id],void(C[e]&&delete C[e])):n({callback:this.removePlayer,data:e})},removeAllPlayers:function(){if(C)for(var e in C)C[e]=At;C={},V=[],b=[],w=[]},onAdBlockingStatusUpdate:function(e){return t(tt,{status:e})},onPlayerSeamlessMode:function(){return t(nt,At)},setVideoAdMessage:function(e,t){var i={};return y?Jt(e)?(i.adMessage=e,i.persist=t,d("onSetCustomAdMessage",i)):void Bt(Et+"The custom ad message passed is empty or is not a string"):n({callback:this.setVideoAdMessage,data:e})},setVideoAdCountMessage:function(e){return y?Jt(e)?d("onSetCustomAdCountMessage",e):void Bt(Et+"The custom ad count message passed is empty or is not a string"):n({callback:this.setVideoAdCountMessage,data:e})},onBalaRendered:function(){return y?t(it):n({callback:this.onBalaRendered})},onExplicitBalaClose:function(){return y?t(at):n({callback:this.onExplicitBalaClose})},onImplicitBalaClose:function(){return y?t(rt):n({callback:this.onImplicitBalaClose})},onLoadInit:function(){an(e.Config.enableManualMode)||e.init()},onOneTrustPrivacyConsent:function(n,i,a){kt(Et+"Existing receivers "+JSON.stringify(D)),a&&kt(Et,"Handling privacy exception configuration."),_.setDoNotNotify(n),e.Config.hasPrivacyOpted=pt,M=!!i,a||(c(),t(dt,{consent:i})),f.stop(),f.start()},init:function(){var t=xn()||Ct,n=gi.queryStringToObject(t.toLowerCase()),a=n[Ut];Jt(a)&&(an(a)||"1"===a)&&si.setLocalStorage(Ut,pt),y=ft,i();var r=gi.queryStringToObject()[p];if(_=new e.Notifier,g=_.notify,_.clearReceivers(),kt(Et+"init() Starts Up"),e.addEventToWaitQueueIfDomNotLoaded=l,f=_i({delegate:this}),e.Config&&(I=pt,this.onConfig(L[r]||{})),e.exec&&e.exec.q){var o=this;kt(Et+e.exec.q.length+" items in command queue"),e.exec.q.forEach(function(e){E.apply(o,e)}),e.exec=E}return fi.init(),Ii.init(),this}}}()),e.onLoadInit()}(Bento);
		
	